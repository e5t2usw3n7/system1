{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\u6d59\u6c5f\u5927\u5b6624\u5e74\u6625\u590f\u5b66\u671f\u7cfb\u7edf\u8d2f\u901a\u4e00\u5b9e\u9a8c","text":"<p>\u672c\u4ed3\u5e93\u662f\u6d59\u6c5f\u5927\u5b662024\u5e74\u6625\u590f\u5b66\u671f\u8ba1\u7b97\u7cfb\u7edfI\u8bfe\u7a0b\u7684\u6559\u5b66\u4ed3\u5e93\uff0c\u5305\u542b\u6240\u6709\u5b9e\u9a8c\u6587\u6863\u548c\u516c\u5f00\u4ee3\u7801\u3002\u4ed3\u5e93\u76ee\u5f55\u7ed3\u6784\uff1a</p> <pre><code>\u251c\u2500\u2500 README.md \n\u251c\u2500\u2500 docs/       # \u5b9e\u9a8c\u6587\u6863\n\u251c\u2500\u2500 repo/       # \u5de5\u5177\u94fe\u76ee\u5f55\n\u251c\u2500\u2500 mkdocs.yml \n\u2514\u2500\u2500 src/        # \u5b9e\u9a8c\u4ee3\u7801\n</code></pre> <p>\u5b9e\u9a8c\u6587\u6863\u5df2\u7ecf\u90e8\u7f72\u5728\u4e86zju-git pages\u4e0a\uff0c\u65b9\u4fbf\u5927\u5bb6\u9605\u8bfb\u3002</p>"},{"location":"#_1","title":"\u672c\u5730\u6e32\u67d3\u6587\u6863","text":"<p>\u6587\u6863\u91c7\u7528\u4e86 mkdocs-material \u5de5\u5177\u6784\u5efa\u548c\u90e8\u7f72\u3002\u5982\u679c\u60f3\u5728\u672c\u5730\u6e32\u67d3\uff1a</p> <pre><code>pip3 install mkdocs-material mkdocs-heti-plugin\ngit clone https://git.zju.edu.cn/zju-sys/sys1/sys1-sp24.git\ncd sys1-sp24\nmkdocs serve\n</code></pre>"},{"location":"#_2","title":"\u81f4\u8c22","text":"<p>\u611f\u8c22\u4ee5\u4e0b\u5404\u4f4d\u52a9\u6559\u5bf9\u672c\u5957\u8bfe\u7a0b\u5b9e\u9a8c\u7684\u8f9b\u52e4\u4ed8\u51fa\uff1a</p> <ul> <li>Sp24\uff1a\u5468\u6768\u53f6\u3001\u79e6\u5609\u4fca\u3001\u8d75\u6052\u3001\u6768\u5112\u5b81</li> <li>Sp23\uff1a\u5f90\u91d1\u7131\u3001\u9648\u6770\u4f1f\u3001\u6797\u6d69\u7136</li> <li>Sp22\uff1a\u9648\u5353\u3001\u6797\u6d69\u7136</li> <li>Sp21\uff1a\u9648\u5353\u3001\u674e\u9e3f\u5c79</li> </ul>"},{"location":"issue/","title":"\u63d0\u95ee\u7684\u6b63\u786e\u59ff\u52bf","text":"<p>\u6211\u4eec\u610f\u8bc6\u5230\u540c\u5b66\u4eec\u7684\u95ee\u9898\u662f\u76f8\u4f3c\u7684\uff0c\u4e3a\u4e86\u63d0\u9ad8\u89e3\u7b54\u540c\u5b66\u4eec\u7591\u95ee\u7684\u6548\u7387\uff0c\u8bf7\u540c\u5b66\u4eec\u4f7f\u7528issue\u6765\u63d0\u51fa\u81ea\u5df1\u7684\u95ee\u9898\u3002 \u8fd9\u6837\u6709\u76f8\u4f3c\u95ee\u9898\u7684\u540c\u5b66\u80fd\u591f\u76f4\u63a5\u68c0\u7d22\u5230\u76f8\u5173\u7684\u95ee\u9898\uff0c\u65e0\u9700\u7b49\u5f85TA\u7684\u56de\u590d\u4e86\u3002 \u540c\u65f6\uff0c\u5982\u679c\u4f60\u5df2\u7ecf\u89e3\u51b3\u4e86\u76f8\u4f3c\u7684\u95ee\u9898\uff0c\u6211\u4eec\u4e5f\u5341\u5206\u6b22\u8fce\u540c\u5b66\u4eec\u6765\u56de\u590d\u5176\u4ed6\u540c\u5b66\u7684issue\u3002</p> <ol> <li>\u5728ZJU Git\u4e2d\u6ce8\u518c\u4e00\u4e2a\u8d26\u53f7</li> <li> <p>\u63a5\u4e0b\u6765\u8fdb\u5165\u5b98\u65b9\u4ed3\u5e93\u9875\u9762\uff0c\u70b9\u51fb\u5de6\u4fa7\u7684Issues</p> <ol> <li>\u9996\u5148\u68c0\u67e5\u5f53\u524d\u4f60\u662f\u5426\u6b63\u5728\u6d4f\u89c8ZJU COMPUTER SYSTEM\u8d26\u6237\u4e0b\u7684\u4ed3\u5e93</li> <li>\u65e0\u8bef\u7684\u8bdd\uff0c\u70b9\u51fbIssues\u9879</li> </ol> <p></p> </li> <li> <p>\u70b9\u51fbNew issue     </p> </li> <li> <p>\u586b\u5199 issue \u8868\u5355\u5e76\u63d0\u4ea4</p> <ol> <li>\u6807\u9898\u8bf7\u6309\u7167<code>Lab\u5e8f\u53f7 \u6b65\u9aa4\u5e8f\u53f7 \u542b\u6709\u9519\u8bef\u4ee3\u7801\u7684\u95ee\u9898\u63cf\u8ff0</code>\u7f16\u5199\uff0c\u65b9\u4fbf\u5176\u4ed6\u540c\u5b66\u80fd\u591f\u68c0\u7d22\u5230\u5173\u952e\u4fe1\u606f\uff1b</li> <li>\u5728\u7f16\u8f91\u6846\u4e2d\u63cf\u8ff0\u4f60\u7684\u95ee\u9898\uff1b</li> <li>\u9009\u62e9issue\u7684\u7c7b\u578b\uff0c\u5373Question\uff1b\u5982\u679c\u4f60\u53d1\u73b0\u4e86\u624b\u518c\u4e2d\u7684\u9519\u8bef\uff0c\u9009\u62e9Bug\uff1b\u5176\u4ed6\u5efa\u8bae\u9009\u62e9Suggestion\uff1b</li> <li>\u63d0\u4ea4\u4f60\u7684issue\u3002</li> </ol> <p></p> </li> </ol>"},{"location":"lab0-1/","title":"\u5b9e\u9a8c 0-1\uff1a\u6570\u5b57\u7535\u8def\u4eff\u771f\u73af\u5883\u51c6\u5907","text":""},{"location":"lab0-1/#_1","title":"\u5b9e\u9a8c\u76ee\u7684","text":"<ul> <li>\u4e86\u89e3\u57fa\u672c\u5143\u5668\u4ef6\u7535\u538b\u7279\u6027</li> <li>\u638c\u63e1\u7528\u4e8e\u8bbe\u8ba1\u548c\u4eff\u771f\u6570\u5b57\u903b\u8f91\u7535\u8def\u7684Logisim\u7684\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5</li> <li>\u7406\u89e3\u786c\u4ef6\u8bed\u8a00\u5728\u7535\u8def\u7ea7\u522b\u7684\u6620\u5c04\u5173\u7cfb</li> </ul>"},{"location":"lab0-1/#_2","title":"\u5b9e\u9a8c\u73af\u5883","text":"<ul> <li>EDA\u5de5\u5177\uff1aNgspice\uff0cLogSim Evolution</li> <li>\u64cd\u4f5c\u7cfb\u7edf\uff1aWindows 10+ 22H2\uff0cUbuntu 22.04+</li> <li>VHDL\uff1aVerilog</li> </ul>"},{"location":"lab0-1/#_3","title":"\u80cc\u666f\u77e5\u8bc6","text":""},{"location":"lab0-1/#linux","title":"Linux\u4f7f\u7528\u57fa\u7840","text":"<p>\u5728Linux\u73af\u5883\u4e0b\uff0c\u4eba\u4eec\u901a\u5e38\u4f7f\u7528\u547d\u4ee4\u884c\u63a5\u53e3\u6765\u5b8c\u6210\u4e0e\u8ba1\u7b97\u673a\u7684\u4ea4\u4e92\u3002\u7ec8\u7aef\uff08Terminal\uff09\u662f\u7528\u4e8e\u5904\u7406\u8be5\u8fc7\u7a0b\u7684\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\uff0c\u901a\u8fc7\u7ec8\u7aef\u4f60\u53ef\u4ee5\u8fd0\u884c\u5404\u79cd\u7a0b\u5e8f\u4ee5\u53ca\u5728\u81ea\u5df1\u7684\u8ba1\u7b97\u673a\u4e0a\u5904\u7406\u6587\u4ef6\u3002\u5728\u7c7bUnix\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e0a\uff0c\u7ec8\u7aef\u53ef\u4ee5\u4e3a\u4f60\u5b8c\u6210\u4e00\u5207\u4f60\u6240\u9700\u8981\u7684\u64cd\u4f5c\u3002\u4e0b\u9762\u6211\u4eec\u4ec5\u5bf9\u5b9e\u9a8c\u4e2d\u6d89\u53ca\u7684\u4e00\u4e9b\u6982\u5ff5\u8fdb\u884c\u4ecb\u7ecd\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u94fe\u63a5\u6765\u5bf9\u547d\u4ee4\u884c\u7684\u4f7f\u7528\u8fdb\u884c\u5b66\u4e60\uff1a</p> <ol> <li>\u7afa\u53ef\u6862\u5b66\u9662 2023 \u5e74\u8f85\u5b66\u8bfe\u7a0b\u300c\u5b9e\u7528\u6280\u80fd\u62fe\u9057\u300d</li> <li>The Missing Semester of Your CS Education\uff0cVideo</li> <li>GNU/Linux Command-Line Tools Summary</li> <li>Basics of UNIX</li> </ol>"},{"location":"lab0-1/#spice","title":"SPICE","text":"<p>SPICE \u662f\u4e00\u79cd\u7535\u8def\u6a21\u62df\u8f6f\u4ef6\uff0c\u5b83\u53ef\u4ee5\u6a21\u62df\u5404\u79cd\u6a21\u62df\u7535\u8def\u7684\u884c\u4e3a\u548c\u6027\u80fd\u3002SPICE \u7684\u5168\u79f0\u662f Simulation Program with Integrated Circuit Emphasis\uff0c\u662f\u4e00\u79cd\u5e7f\u6cdb\u4f7f\u7528\u7684\u7535\u8def\u4eff\u771f\u5de5\u5177\u3002\u5b83\u7531\u7f8e\u56fd\u52a0\u5dde\u5927\u5b66\u4f2f\u514b\u5229\u5206\u6821\u7684\u7535\u6c14\u5de5\u7a0b\u4e0e\u8ba1\u7b97\u673a\u79d1\u5b66\u7cfb\u5f00\u53d1\u3002</p> <p>SPICE \u53ef\u4ee5\u6a21\u62df\u5404\u79cd\u7535\u8def\u5143\u4ef6\uff0c\u4f8b\u5982\u7535\u963b\u3001\u7535\u5bb9\u3001\u7535\u611f\u3001\u4e8c\u6781\u7ba1\u3001\u6676\u4f53\u7ba1\u7b49\u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 SPICE \u6765\u5206\u6790\u7535\u8def\u4e2d\u7684\u7535\u6d41\u3001\u7535\u538b\u3001\u529f\u7387\u7b49\u53c2\u6570\uff0c\u4e86\u89e3\u7535\u8def\u7684\u6027\u80fd\u548c\u7279\u6027\u3002</p> <p>\u901a\u8fc7\u6a21\u62df\u7535\u8def\u7684\u884c\u4e3a\uff0cSPICE \u53ef\u4ee5\u5e2e\u52a9\u5de5\u7a0b\u5e08\u8bbe\u8ba1\u548c\u9a8c\u8bc1\u7535\u8def\u7684\u529f\u80fd\u3001\u6027\u80fd\u548c\u7a33\u5b9a\u6027\uff0c\u4ece\u800c\u51cf\u5c11\u5728\u5b9e\u9645\u5236\u9020\u524d\u9700\u8981\u8fdb\u884c\u7684\u5b9e\u9a8c\u6b21\u6570\uff0c\u964d\u4f4e\u4e86\u5f00\u53d1\u6210\u672c\u548c\u65f6\u95f4\u3002SPICE \u7684\u5f00\u53d1\u5bf9\u7535\u8def\u6a21\u62df\u6280\u672f\u7684\u53d1\u5c55\u505a\u51fa\u4e86\u91cd\u8981\u8d21\u732e\uff0c\u5e76\u88ab\u5e7f\u6cdb\u5e94\u7528\u4e8e\u7535\u8def\u8bbe\u8ba1\u3001\u7535\u5b50\u4ea7\u54c1\u5236\u9020\u3001\u5b66\u672f\u7814\u7a76\u7b49\u9886\u57df\u3002</p> <p>SPICE \u6709\u5f88\u591a\u4e0d\u540c\u7684\u7248\u672c\uff0c\u6211\u4eec\u540e\u7eed\u5b9e\u9a8c\u4f7f\u7528\u7684 Ngspice \u662f\u76ee\u524d\u6700\u5e7f\u6cdb\u4f7f\u7528\u7684\u5f00\u6e90\u7248\u672c\u5b9e\u73b0\u3002</p>"},{"location":"lab0-1/#logisim","title":"Logisim","text":"<p>Logisim \u662f\u4e00\u79cd\u6570\u5b57\u903b\u8f91\u7535\u8def\u4eff\u771f\u5de5\u5177\uff0c\u7528\u4e8e\u6a21\u62df\u6570\u5b57\u7535\u8def\u7684\u884c\u4e3a\u548c\u6027\u80fd\u3002\u5b83\u53ef\u4ee5\u7528\u4e8e\u8bbe\u8ba1\u548c\u9a8c\u8bc1\u5404\u79cd\u6570\u5b57\u7535\u8def\uff0c\u4f8b\u5982\u8ba1\u7b97\u673a\u5904\u7406\u5668\u3001\u903b\u8f91\u95e8\u7535\u8def\u3001\u5bc4\u5b58\u5668\u3001\u65f6\u5e8f\u7535\u8def\u7b49\u3002</p> <p>Logisim \u901a\u5e38\u63d0\u4f9b\u4e86\u76f4\u89c2\u7684\u7528\u6237\u754c\u9762\uff0c\u5176\u4e2d\u5305\u542b\u5404\u79cd\u6570\u5b57\u903b\u8f91\u5143\u4ef6\u7684\u56fe\u6807\uff0c\u4f8b\u5982 AND \u95e8\u3001OR \u95e8\u3001XOR \u95e8\u3001\u89e6\u53d1\u5668\u3001\u8ba1\u6570\u5668\u7b49\u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u56fe\u6807\u6765\u6784\u5efa\u6570\u5b57\u903b\u8f91\u7535\u8def\uff0c\u7136\u540e\u4f7f\u7528\u4eff\u771f\u529f\u80fd\u6765\u9a8c\u8bc1\u7535\u8def\u7684\u529f\u80fd\u548c\u6027\u80fd\u3002\u7531\u4e8e\u652f\u6301\u901a\u8fc7\u9f20\u6807\u62d6\u52a8\u6765\u76f4\u89c2\u5730\u7ed8\u5236\u7535\u8def\uff0c\u56e0\u6b64\u88ab\u5e7f\u6cdb\u5e94\u7528\u4e8e\u7535\u5b50\u5de5\u7a0b\u3001\u8ba1\u7b97\u673a\u79d1\u5b66\u3001\u901a\u4fe1\u7cfb\u7edf\u7b49\u9886\u57df\u76f8\u5173\u8bfe\u7a0b\u6559\u5b66\u3002</p> <p>\u6211\u4eec\u4f7f\u7528\u7684 Logisim Evolution \u662f\u539f\u7248 Logisim \u7684\u6269\u5c55\u7248\u672c\uff0c\u589e\u52a0\u4e86\u8bb8\u591a\u65b0\u7279\u6027\u548c\u6539\u8fdb\uff0c\u4f7f\u5f97\u5b83\u66f4\u52a0\u6613\u7528\u548c\u5f3a\u5927\u3002</p>"},{"location":"lab0-1/#_4","title":"\u5b9e\u9a8c\u6b65\u9aa4","text":""},{"location":"lab0-1/#linux_1","title":"Linux\u73af\u5883\u914d\u7f6e","text":"<p>\u4e3a\u4e86\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u5e72\u6270\u56e0\u7d20\uff0c\u6211\u4eec\u5efa\u8bae\u540c\u5b66\u4eec\u7684\u5b9e\u9a8c\u73af\u5883\u5c3d\u53ef\u80fd\u7684\u548c\u624b\u518c\u4e2d\u7ed9\u51fa\u7684\u73af\u5883\u4e00\u81f4\u3002</p> <p>\u5728\u540e\u7eed\u7684\u8bfe\u7a0b\u5b9e\u9a8c\uff08\u5305\u62ec\u7cfb\u7edfII\u3001III\uff09\u4e2d\uff0c\u51e0\u4e4e\u6240\u6709\u64cd\u4f5c\u90fd\u9700\u8981\u5728Linux\u73af\u5883\u4e0b\u8fd0\u884c\uff0c\u6211\u4eec\u7edf\u4e00\u4f7f\u7528Ubuntu 22.04\u7248\u672c\u3002\u6211\u4eec\u5efa\u8bae\u5404\u4f4d\u540c\u5b66\u901a\u8fc7\u4ee5\u4e0b\u4efb\u4e00\u65b9\u5f0f\u914d\u7f6e\u4f60\u7684\u5b9e\u9a8c\u73af\u5883\uff1a</p> <ol> <li>\u5bf9\u4e8e\u4f7f\u7528macOS\u7684\u540c\u5b66\uff0c\u6211\u4eec\u5efa\u8bae\u4f7f\u7528\u865a\u62df\u673a\u8fd0\u884cUbuntu 22.04</li> <li>\u5bf9\u4e8e\u4f7f\u7528Windows\u7684\u540c\u5b66\uff0c\u6211\u4eec\u5efa\u8bae\u5c06\u7cfb\u7edf\u66f4\u65b0\u81f3\u6700\u65b022H2\u7248\u672c\uff0c\u7136\u540e\u76f4\u63a5\u5728\u5fae\u8f6f\u5e94\u7528\u5546\u5e97\u4e2d\u5b89\u88c5Ubuntu 22.04\u7684Windows Subsystem for Linux (WSL)</li> </ol> <p>\u8bf7\u53c2\u8003\u73af\u5883\u914d\u7f6e\u6307\u5357\u8fdb\u884c\u5b89\u88c5\uff0c\u786e\u4fdd\u914d\u7f6e\u5b8c\u6210\u540e\u4f60\u5728\u7ec8\u7aef\u4e2d\u80fd\u591f\u6210\u529f\u8fd0\u884c\u4e00\u4e2a\u5e26GUI\u7684\u5e94\u7528\u3002</p> <p>Tip</p> <p>\u5bf9\u4e8e\u4f7f\u7528\u865a\u62df\u673a\u7684\u540c\u5b66\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u865a\u62df\u673a\u7684\u6269\u5c55\u529f\u80fd\u6765\u5171\u4eab\u5bbf\u4e3b\u673a\u548c\u865a\u62df\u673a\u7684\u6587\u4ef6\u7cfb\u7edf\u3002</p> <p>\u5bf9\u4e8e\u4f7f\u7528 WSL \u7684\u540c\u5b66\uff0cWSL \u548c Windows \u7684\u6587\u4ef6\u7cfb\u7edf\u662f\u4e92\u901a\u7684\uff1a</p> <ul> <li>\u6253\u5f00 Windows \u8d44\u6e90\u7ba1\u7406\u5668\uff0c\u8f93\u5165\u8def\u5f84 <code>\\\\wsl.localhost\\Ubuntu-22.04</code> \u5373\u53ef\u8fdb\u5165 WSL \u7684\u6587\u4ef6\u7cfb\u7edf<ul> <li>e.g. wsl \u7684 home \u5728 <code>\\\\wsl.localhost\\Ubuntu-22.04\\home\\&lt;username&gt;</code></li> </ul> </li> <li>\u5728 WSL \u4e2d\uff0cWindows \u7684\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d\u5728 <code>/mnt</code> \u4e0b\uff0c\u4f8b\u5982 C \u76d8\u5c31\u662f <code>/mnt/c</code><ul> <li>e.g. \u4f60\u7684\u684c\u9762\u7684\u8def\u5f84\u662f <code>/mnt/c/Users/&lt;username&gt;/Desktop</code></li> </ul> </li> </ul> <p>\u5b8c\u6210\u73af\u5883\u914d\u7f6e\u540e\uff0c\u518d\u5408\u9002\u7684\u8def\u5f84\u4e0b\u542f\u52a8\u4e00\u4e2a\u7ec8\u7aef\uff0c\u5b89\u88c5git\u5e76\u514b\u9686\u672c\u4ed3\u5e93\uff1a</p> <pre><code>sudo apt install git\ngit clone https://git.zju.edu.cn/zju-sys/sys1/sys1-sp24.git\n</code></pre> <p>\u5173\u4e8e apt</p> <p>apt \u662f ubuntu 22.04 \u60ef\u7528\u7684\u5305\u7ba1\u7406\u5de5\u5177\uff0c\u53ef\u4ee5\u6267\u884c <code>sudo apt install &lt;\u5e94\u7528\u540d&gt;</code> \u6765\u5b89\u88c5\u5bf9\u5e94\u7684\u8f6f\u4ef6\uff0capt \u4f1a\u81ea\u52a8\u5728\u81ea\u5df1\u7684\u8f6f\u4ef6\u6e90\u5e8f\u5217\u4e2d\u641c\u7d22\u6709\u65e0\u8be5\u5e94\u7528\uff0c\u7136\u540e\u81ea\u52a8\u4e0b\u8f7d\u5b89\u88c5\u8be5\u5e94\u7528\uff0c\u5e76\u5c06\u5e94\u7528\u52a0\u5165\u73af\u5883\u53d8\u91cf\u3002\u76f8\u6bd4\u4e8e windows \u9700\u8981\u624b\u52a8\u4e0b\u8f7d\u5b89\u88c5\u5305\u3001\u8fd0\u884c\u5b89\u88c5\u3001\u914d\u7f6e\u73af\u5883\u8def\u5f84\u3001\u8bbe\u7f6e\u5feb\u6377\u65b9\u5f0f\u7b49\uff0c\u8981\u65b9\u4fbf\u5f88\u591a\u3002</p> <p>\u5728\u4f7f\u7528 apt \u5b89\u88c5\u8f6f\u4ef6\u7684\u65f6\u5019\u4f1a\u51fa\u73b0\u8bf8\u5982 <code>Unable to locate package</code> \u7684\u62a5\u9519\uff0c\u8bf4\u660e apt \u65e0\u6cd5\u5728\u5f53\u524d\u8f6f\u4ef6\u6e90\u4e2d\u627e\u5230\u9700\u8981\u4e0b\u8f7d\u7684\u8be5\u5e94\u7528\uff0c\u6b64\u65f6\u53ef\u4ee5\u6267\u884c <code>sudo apt update</code> \u6216\u8005 <code>sudo apt upgrade</code> \u6765\u66f4\u65b0 apt \u7684\u8f6f\u4ef6\u6e90\uff0c\u4e5f\u8bb8\u53ef\u4ee5\u89e3\u51b3\u8be5\u95ee\u9898\u3002\u5fc5\u8981\u7684\u65f6\u5019\u9700\u8981\u79d1\u5b66\u4e0a\u7f51\u3002</p>"},{"location":"lab0-1/#_5","title":"\u53cd\u76f8\u5668\u7684\u7535\u538b\u4f20\u8f93\u7279\u6027","text":""},{"location":"lab0-1/#_6","title":"\u5de5\u5177\u5b89\u88c5","text":"<p>\u5728\u7ec8\u7aef\u4e2d\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u5b89\u88c5\uff1a</p> <pre><code>sudo apt install ngspice\n</code></pre>"},{"location":"lab0-1/#spice_1","title":"SPICE \u4eff\u771f","text":"<p>\u8fdb\u5165\u5230\u672c\u4ed3\u5e93\u4e0b\u7684 <code>src/lab0-1</code> \u76ee\u5f55\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u8fd0\u884c\u6210\u529f\u4f1a\u89c2\u5bdf\u5230\u5f39\u51fa\u9ed1\u8272\u80cc\u666f\u7684\u5bf9\u8bdd\u6846\uff1a</p> <pre><code>cd sys1-sp24/src/lab0-1\nngspice inv.sp\n</code></pre> <p>\u4e0b\u9762\u6211\u4eec\u7b80\u5355\u4ecb\u7ecd\u4e0b inv.sp \u4e2d\u7684\u5185\u5bb9\uff0c\u672c\u6bb5\u5185\u5bb9\u4e0d\u8981\u6c42\u638c\u63e1\uff0c\u4ec5\u65b9\u4fbf\u7406\u89e3\u3002</p> inv.sp \u5185\u5bb9 <pre><code>X0 Vout Vin VGND VGND sky130_fd_pr__nfet_01v8 w=650000u l=150000u\nX1 Vout Vin VPWR VPWR sky130_fd_pr__pfet_01v8_hvt w=1e+06u l=150000u\n</code></pre> <p>SPICE \u7f51\u8868\u91c7\u7528\u4e86\u7ed3\u6784\u5316\u7684\u63cf\u8ff0\u65b9\u6cd5\uff0c\u4e0a\u9762\u5217\u51fa\u7684\u662f\u63cf\u8ff0\u7535\u8def\u7ed3\u6784\u6700\u6838\u5fc3\u7684\u4e24\u6761\u8bed\u53e5\u3002\u8be5\u53cd\u76f8\u5668\u57fa\u4e8e Skywater 130nm \u5de5\u827a\uff0c\u4f7f\u7528\u4e86\u4e24\u4e2a MOSFET \u7ec4\u6210\uff0c\u5206\u522b\u53eb\u505a X0\u3001X1\u3002\u63a5\u4e0b\u6765\u7684\u56db\u7ec4\u6570\u636e\u5bf9\u5e94\u8fde\u63a5 MOSFET \u7684 drain\u3001gate\u3001source\u3001body \u56db\u4e2a\u7aef\u53e3\u7684\u8fde\u7ebf\uff0c\u4e5f\u5c31\u662f\u8bf4\u7535\u8def\u7684\u539f\u7406\u56fe\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p> </p> <p>\u63a5\u4e0b\u6765\u662f\u6240\u4f7f\u7528\u7684 MOSFET \u7684\u5177\u4f53\u540d\u79f0\uff0c\u6700\u540e\u662f MOSFET \u7684\u53c2\u6570\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\u4ed6\u4eec\u7684\u6c9f\u9053\u957f\u5ea6\u662f 150nm \u5e76\u4e0d\u662f 130nm\u3002</p> <p>\u5728\u5f39\u51fa\u7684\u7a97\u53e3\u4e2d\uff0c\u84dd\u8272\u7684\u66f2\u7ebf\u4ee3\u8868Vin\uff0c\u7ea2\u8272\u7684\u66f2\u7ebf\u4ee3\u8868Vout\u3002Vin\u5728\u4eff\u771f\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u5747\u5300\u7684\u4ece0V\u589e\u957f\u81f31.8V\u3002</p> <p>\u6ce8\uff1angspice \u5de5\u5177\u7684\u4f7f\u7528\u4e0d\u505a\u8981\u6c42\u3002</p>"},{"location":"lab0-1/#logisim_1","title":"Logisim \u7535\u8def\u4eff\u771f","text":""},{"location":"lab0-1/#_7","title":"\u5de5\u5177\u5b89\u88c5","text":"<p>\u9996\u5148\u5b89\u88c5 java \u8fd0\u884c\u73af\u5883\uff0c\u5e76\u4e0b\u8f7d logisim-evolution\uff1a</p> <pre><code>sudo apt install openjdk-17-jre\nwget https://git.zju.edu.cn/zju-sys/sys1/sys1-sp23/uploads/bed18108ed82dc45f20f435403d8fdef/logisim-evolution-3.8.0-all.jar\n</code></pre>"},{"location":"lab0-1/#_8","title":"\u7ed8\u5236\u7535\u8def\u539f\u7406\u56fe","text":"<p>\u5728\u4e0b\u8f7d\u76ee\u5f55\u4e0b\uff0c\u6267\u884c <code>java -jar logisim-evolution-3.8.0-all.jar</code> \u547d\u4ee4\u542f\u52a8 Logisim \u5e76\u7ed8\u5236\u4e0b\u56fe\u6240\u793a\u7684\u7535\u8def\u56fe\uff1a</p> <p> </p> <ul> <li>\u5f53\u9f20\u6807\u60ac\u505c\u5728\u9876\u90e8\u56fe\u6807\u4e0a\u65b9\u65f6\uff0c\u4f1a\u663e\u793a\u5bf9\u5e94\u7684\u529f\u80fd\u540d\u79f0</li> <li>\u9009\u4e2d\u903b\u8f91\u5668\u4ef6\u540e\uff0c\u6b64\u65f6\u518d\u5c06\u9f20\u6807\u79fb\u52a8\u5230\u753b\u5e03\u533a\u57df\u4f1a\u51fa\u73b0\u5bf9\u5e94\u7684\u9634\u5f71\uff0c\u70b9\u51fb\u5373\u53ef\u653e\u7f6e\u5668\u4ef6</li> <li>\u53cc\u51fb\u753b\u5e03\u4e0a\u5668\u4ef6\u5373\u53ef\u4e3a\u5176\u6dfb\u52a0\u6807\u7b7e\uff08\u4e5f\u5c31\u662f\u5176\u540d\u79f0\uff09\uff0c\u6309\u56fe\u4e2d\u4f9d\u6b21\u6dfb\u52a0 I0\u3001I1\u3001I2\u3001O<ul> <li>\u6ce8\u610f\uff0c\u56fe\u4e2d AND3\u3001INV\u3001OR4 \u4e0d\u662f\u6807\u7b7e\uff0c\u800c\u662f\u65b9\u4fbf\u7406\u89e3\u7684\u6807\u6ce8\uff0c\u662f\u901a\u8fc7\u6587\u672c\u5de5\u5177\u6dfb\u52a0\u7684</li> </ul> </li> <li>\u5f53\u9f20\u6807\u79fb\u52a8\u5230\u5668\u4ef6\u7684\u7aef\u53e3\u4e0a\u65f6\u4f1a\u51fa\u73b0\u7eff\u8272\u5706\u5708\u63d0\u793a\uff0c\u6b64\u65f6\u70b9\u51fb\u5e76\u5411\u5916\u62d6\u52a8\u9f20\u6807\u4f1a\u751f\u6210\u8fde\u7ebf\uff0c\u6309\u4f4f\u5de6\u952e\u4e0d\u653e\u79fb\u52a8\u81f3\u53e6\u4e00\u4e2a\u7aef\u53e3\u5373\u53ef\u5b8c\u6210\u8fde\u7ebf</li> <li>\u5bf9\u4e8e\u591a\u8f93\u5165\u7684\u903b\u8f91\u5668\u4ef6\uff0c\u5148\u9009\u62e9\u666e\u901a\u7684\u53cc\u8f93\u5165\u5668\u4ef6\uff0c\u7136\u540e\u5728\u5de6\u4fa7\u7684 Properties \u680f\u4e2d\u4fee\u6539 Number Of Inputs \u9879\u7684\u503c</li> </ul>"},{"location":"lab0-1/#_9","title":"\u7535\u8def\u56fe\u7ed8\u5236\u6280\u5de7","text":"<p>\u6309\u4e0a\u56fe\u4e00\u6bd4\u4e00\u7ed8\u5236\u7535\u8def\u56fa\u7136\u53ef\u4ee5\u5f97\u5230\u6b63\u786e\u7ed3\u679c\uff0c\u4f46\u662f\u5bf9\u7740\u773c\u82b1\u7f2d\u4e71\u7684\u7ebf\u8def\u67e5\u627e\u8fde\u63a5\u5173\u7cfb\u5373\u8d39\u65f6\u8d39\u529b\uff0c\u53c8\u5bb9\u6613\u51fa\u9519\uff0c\u56e0\u6b64\u53ef\u4ee5\u53c2\u8003\u4e0b\u56fe\u7684\u7ed8\u5236\u65b9\u6cd5\uff1a</p> <p> </p> <p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u6bcf\u4e2a\u8f93\u5165\u7aef\u53e3 I \u90fd\u4ea7\u751f\u76f4\u63a5\u7684\u8f93\u5165\u4fe1\u53f7 I \u548c\u7ecf\u8fc7\u53cd\u76f8\u5668\u7684\u53d6\u53cd\u4fe1\u53f7 ~I\uff0c\u7136\u540e AND3 \u7535\u8def\u4ece I0\u3001I1\u3001I2 \u7684\u8f93\u5165\u4fe1\u53f7\u548c\u5404\u81ea\u53cd\u5411\u4fe1\u53f7\u5bf9 (I0, ~I0)\u3001(I1, ~I1)\u3001(I2, ~I2) \u4e2d\u5206\u522b\u9009\u62e9\u4e00\u4e2a\u4fe1\u53f7 AND \u8d77\u6765\u3002</p> <p>\u4e2d\u95f4\u7ad6\u7740\u7684\u516d\u6761\u4fe1\u53f7\u7ebf\u5c31\u5206\u522b\u662f I0\u3001~I0\u3001I1\u3001~I1\u3001I2\u3001~I2\uff0c\u7136\u540e\u6211\u4eec\u7684 AND \u95e8\u7684\u4e09\u4e2a\u8f93\u5165\u5c31\u53ef\u4ee5\u8fde\u51fa\u4e09\u6761\u6a2a\u7ebf\u8fde\u63a5\u516d\u6761\u7ad6\u7ebf\u4e2d\u5bf9\u5e94\u7684\u6b63\u8d1f\u8f93\u5165\u4fe1\u53f7\uff0c\u662f\u4e0d\u662f\u4e00\u76ee\u4e86\u7136\u591a\u4e86\uff1f</p>"},{"location":"lab0-1/#_10","title":"\u7535\u8def\u4eff\u771f","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u8f93\u5165\u7aef\u53e3\u7684\u503c\u4e3a 0\uff0c\u9009\u62e9\u4e0a\u65b9\u7684\u5c0f\u624b\u5de5\u5177\uff08\u5feb\u6377\u952e Ctrl-1\uff09\uff0c\u7136\u540e\u518d\u70b9\u51fb\u8f93\u5165\u7aef\u53e3\uff0c\u89c2\u5bdf\u8f93\u5165\u7aef\u53e3\u3001\u8f93\u51fa\u7aef\u53e3\u5404\u81ea\u7684\u53d8\u5316\u3002</p>"},{"location":"lab0-1/#_11","title":"\u4fdd\u5b58\u8bbe\u8ba1","text":"<p>\u91cd\u8981\uff1a\u70b9\u51fb\u5de6\u4e0a\u89d2 File &gt; Save\uff0c\u628a\u5f53\u524d\u8bbe\u8ba1\u4fdd\u5b58\u5230\u6587\u4ef6\u4e2d\u3002\u540e\u7eed\u5b9e\u9a8c\u8fd8\u4f1a\u4f7f\u7528\uff0c\u8bf7\u59a5\u5584\u4fdd\u7ba1\u3002</p>"},{"location":"lab0-1/#_12","title":"\u5b9e\u9a8c\u62a5\u544a\u8981\u6c42","text":""},{"location":"lab0-1/#20","title":"\u53cd\u76f8\u5668\u7684\u7535\u538b\u4f20\u8f93\u7279\u6027 20%","text":"<ol> <li>\u622a\u56fe\u9664\u5b89\u88c5\u5916\u7684\u76f8\u5173\u5b9e\u9a8c\u6b65\u9aa4 5%</li> <li>\u63cf\u8ff0\u6267\u884c <code>ngspice inv.sp</code> \u5f97\u5230\u7684\u8f93\u5165\u8f93\u51fa\u5173\u7cfb 5% </li> <li>\u89c2\u5bdf Vout\uff0c\u601d\u8003\u5982\u679c\u7ed9 Vin \u63a5\u5165\u4e00\u4e2a\u6b63\u5f26\u53d8\u5316\u7684\u7535\u538b\uff0c\u8f93\u51fa\u7684 Vout \u662f\u4ec0\u4e48\u6837\u7684\uff0c\u53ef\u4ee5\u624b\u7ed8 Vout-T \u7684\u7ed3\u679c\u52a0\u4ee5\u6587\u5b57\u63cf\u8ff0 5% </li> <li>\u4f60\u8ba4\u4e3a\u5bf9\u4e8e\u8be5\u53cd\u76f8\u5668\uff0c\u903b\u8f91 0 \u548c\u903b\u8f91 1 \u7684\u9608\u503c\u5e94\u8be5\u8bbe\u5b9a\u4e3a\u591a\u5c11 V\uff0c\u5373 Vin \u8f93\u5165\u7684\u7535\u538b\u8303\u56f4\u662f\u591a\u5c11\u53ef\u4ee5\u8ba4\u4e3a\u8f93\u5165\u7684\u7535\u538b\u662f 0/1 \u4fe1\u53f7\uff0cVout \u8f93\u51fa\u7684\u7535\u538b\u8303\u56f4\u662f\u591a\u5c11\u53ef\u4ee5\u8ba4\u4e3a\u8f93\u51fa\u7684\u7535\u538b\u662f 0/1 \u4fe1\u53f7 5% </li> </ol>"},{"location":"lab0-1/#logisim-30","title":"Logisim\u7535\u8def\u4eff\u771f 30%","text":"<ol> <li>\u622a\u56fe\u9664\u5b89\u88c5\u3001\u4fdd\u5b58\u5916\u7684\u76f8\u5173\u5b9e\u9a8c\u6b65\u9aa4 10%</li> <li>\u904d\u5386\u5168\u90e8\u53ef\u80fd\u7684\u8f93\u5165\uff0c\u586b\u5199\u4ee5\u4e0b\u8868\u683c\u5e76\u603b\u7ed3\u8be5\u7535\u8def\u5b9e\u73b0\u7684\u529f\u80fd 20%</li> <li>\u5c1d\u8bd5\u603b\u7ed3\u8f93\u5165\u8f93\u51fa\u5173\u7cfb\u548c\u7535\u8def\u7ec4\u6210\u7ed3\u6784\u4e4b\u95f4\u5b58\u5728\u4ec0\u4e48\u5185\u5728\u8054\u7cfb\uff08\u9009\u505a\uff09</li> </ol> <p> Input Output I0 I1 I2 O 0 0 0 ? 0 0 1 ? 0 1 0 ? 0 1 1 ? 1 0 0 ? 1 0 1 ? 1 1 0 ? 1 1 1 ? <p></p>"},{"location":"lab0-1/#40","title":"\u9a8c\u6536\u548c\u4ee3\u7801\u63d0\u4ea4 40%","text":""},{"location":"lab0-1/#_13","title":"\u9a8c\u6536\u68c0\u67e5\u70b9","text":"<ul> <li>\u53cd\u76f8\u5668\u7684\u622a\u56fe 20%</li> <li>Logisim \u7535\u8def\u56fe\u548c\u751f\u6210\u7684\u5de5\u7a0b\u6587\u4ef6 20%</li> </ul>"},{"location":"lab0-1/#_14","title":"\u63d0\u4ea4\u6587\u4ef6","text":"<ul> <li>\u63d0\u4ea4 Logisim \u751f\u6210\u7684\u5de5\u7a0b\u6587\u4ef6</li> </ul>"},{"location":"lab0-2-appendix/","title":"Verilog \u548c\u7535\u8def\u7684\u5bf9\u5e94\u5173\u7cfb","text":"<p>\u6240\u8c13\u786c\u4ef6\u63cf\u8ff0\u8bed\u8a00\uff0c\u5c31\u662f\u63cf\u8ff0\u786c\u4ef6\u7684\u8bed\u8a00\uff0c\u5b83\u7684\u8bed\u53e5\u548c\u786c\u4ef6\u7684\u7535\u8def\u7ed3\u6784\u662f\u606f\u606f\u76f8\u5173\uff0c\u751a\u81f3\u662f\u4e00\u4e00\u5bf9\u5e94\u7684\uff0c\u73b0\u5728\u6211\u4eec\u6765\u6bd4\u5bf9\u4e00\u4e0b Lab0-1 \u7ed8\u5236\u7684\u7535\u8def\u56fe\u548c\u5f97\u5230 Verilog \u6587\u4ef6\uff0c\u6765\u770b\u770b Verilog \u662f\u5982\u4f55\u63cf\u8ff0\u8fd9\u91cc\u7684\u903b\u8f91\u7535\u8def\u7684\u3002</p>"},{"location":"lab0-2-appendix/#module-input-output","title":"module, input, output","text":"<pre><code>module main( \n    I0,\n    I1,\n    I2,\n    O );\n\n   input I0;\n   input I1;\n   input I2;\n   output O;\n   ....\nendmodule\n</code></pre> <p><code>module main ... endmodule</code> \u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u53eb\u505a main \u7684\u7535\u8def\u6a21\u5757\uff0c\u5b83\u7684\u5185\u5bb9\u4ece module \u5173\u952e\u5b57\u5f00\u59cb\uff0c\u5230 endmodule \u5173\u952e\u5b57\u7ed3\u675f\u3002\u4e4b\u540e\u7684 I0\u3001I1\u3001I2\u3001O \u662f\u7535\u8def\u6a21\u5757\u7684\u8f93\u5165\u8f93\u51fa\u5f15\u811a\u5e8f\u5217\uff0c\u8868\u793a\u6709\u56db\u4e2a 1 bit \u7684\u5f15\u811a\uff0c\u4ee5\u53ca\u6bcf\u4e2a\u5f15\u811a\u7684\u540d\u5b57\u3002\u4e4b\u540e\u7684 <code>input</code>\u3001<code>output</code> \u8fdb\u4e00\u6b65\u5b9a\u4e49\u6bcf\u4e2a\u5f15\u811a\u662f\u8f93\u5165\u5f15\u811a\u8fd8\u662f\u8f93\u51fa\u5f15\u811a\uff0c\u56e0\u6b64\u8fd9\u6bb5 Verilog \u786c\u4ef6\u63cf\u8ff0\u8bed\u8a00\u6307\u51fa\u5f53\u524d\u63cf\u8ff0\u7684\u7535\u8def\u6a21\u5757\u540d\u53eb main\uff0c\u5b83\u6709\u4e09\u4e2a\u8f93\u5165\u5f15\u811a\u5206\u522b\u662f I0\u3001I1\u3001I2\uff0c\u4e00\u4e2a\u8f93\u51fa\u5f15\u811a O\u3002\u5bf9\u5e94\u7684\u7535\u8def\u56fe\u5982\u4e0b\uff1a</p> <p> </p> <p>\u6b64\u5916\u6a21\u5757\u5f15\u811a\u8f93\u5165\u8f93\u51fa\u7684\u5b9a\u4e49\u4e5f\u53ef\u4ee5\u7528\u5982\u4e0b\u7684\u65b9\u5f0f\u58f0\u660e\u5728\u6a21\u5757\u58f0\u660e\u4e2d\uff0c\u76f8\u5bf9\u6765\u8bf4\u66f4\u52a0\u7b80\u6d01\u660e\u4e86\uff1a <pre><code>module main( \n    input I0,\n    input I1,\n    input I2,\n    output O );\n    ...\nendmodule\n</code></pre></p> <p>\u5728 Verilog \u8bed\u8a00\u4e2d\u56de\u8f66\u3001\u6362\u884c\u3001\u7a7a\u683c\u3001\u7f29\u8fdb\u548c C \u4e00\u6837\u6ca1\u6709\u610f\u4e49\uff0c\u4ec5\u5904\u4e8e\u53ef\u8bfb\u6027\u7684\u8003\u8651\uff0c\u800c\u4e0d\u662f\u50cf Python \u90a3\u5f20\u6709\u7f29\u8fdb\u6362\u884c\u7684\u9700\u6c42\u3002</p>"},{"location":"lab0-2-appendix/#wire","title":"wire","text":"<p><code>wire</code> \u8bed\u53e5\u8d1f\u8d23\u5b9a\u4e49\u4e00\u6761\u7ebf\u8def\uff0c\u5e76\u4e14\u7ed9\u7ebf\u8def\u63d0\u4f9b\u4e00\u4e2a\u540d\u5b57\u3002\u6211\u4eec\u5728 Lab0-1 \u4e2d\u7ed8\u5236\u7684\u6bcf\u4e00\u6761\u8fde\u7ebf\u90fd\u4f1a\u88ab\u8f6c\u6362\u4e3a\u4e0b\u9762\u7684\u4e00\u4e2a<code>wire</code>\u58f0\u660e\u8bed\u53e5\u3002</p> <pre><code>   /*******************************************************************************\n   ** The wires are defined here                                                 **\n   *******************************************************************************/\n   wire s_logisimNet0;\n   wire s_logisimNet1;\n   wire s_logisimNet10;\n   wire s_logisimNet2;\n   wire s_logisimNet3;\n   wire s_logisimNet4;\n   wire s_logisimNet5;\n   wire s_logisimNet6;\n   wire s_logisimNet7;\n   wire s_logisimNet8;\n   wire s_logisimNet9;\n</code></pre>"},{"location":"lab0-2-appendix/#assign","title":"assign \u8bed\u53e5","text":"<p><code>assign</code> \u6a21\u5757\u5c06 wire \u8fde\u63a5\u8d77\u6765\u3002\u6240\u8c13 wire \u5c31\u662f\u53ef\u4ee5\u8ba4\u4e3a\u5c31\u662f\u4e00\u6839\u5bfc\u7ebf\uff0c\u5b83\u6709\u8f93\u5165\u548c\u8f93\u51fa\u4e24\u7aef\uff0c\u4e14\u8f93\u5165\u7684\u4fe1\u53f7\u548c\u8f93\u51fa\u7684\u4fe1\u53f7\u4fdd\u6301\u4e00\u81f4\u3002I0\u3001I1\u3001I2 \u4f5c\u4e3a input \u53ef\u4ee5\u8ba4\u4e3a\u662f\u7279\u6b8a\u7684 wire\uff0c\u5b83\u7684\u8f93\u5165\u7aef\u8981\u4fdd\u7559\u7ed9\u5916\u90e8\u8fde\u63a5\u6a21\u5757\u7684\u7535\u8def\uff0c\u6240\u4ee5\u53ea\u6709\u5b83\u4eec\u7684\u8f93\u51fa\u7aef\u53ef\u4ee5\u5728\u6a21\u5757\u5185\u90e8\u4f7f\u7528\uff1bO \u4f5c\u4e3a output \u5219\u662f\u8f93\u51fa\u7aef\u4fdd\u7559\u7ed9\u5916\u90e8\u7535\u8def\uff0c\u8f93\u5165\u7aef\u53ef\u4ee5\u5728\u6a21\u5757\u5185\u90e8\u4f7f\u7528\uff08\u4f46\u662f O \u7684\u8f93\u51fa\u7aef\u4e5f\u53ef\u4ee5\u5728\u6a21\u5757\u5185\u90e8\u4f7f\u7528\uff0c\u6bd4\u8f83\u7279\u6b8a\uff09\u3002</p> <p><code>assign s_logisimNet1 = I1</code> \u5c06 I1 \u7684\u8f93\u51fa\u7aef\u548c s_logisimNet1 \u7684\u8f93\u5165\u7aef\u76f8\u8fde\uff0c\u6240\u4ee5 s_logisimNet1 \u7684\u8f93\u51fa\u4fe1\u53f7\u5c31\u662f I1 \u8f93\u5165\u7684\u4fe1\u53f7\u3002<code>assign O = s_logisimNet9</code> \u5c06 s_logisimNet9 \u7684\u8f93\u51fa\u7aef\u548c O \u7684\u8f93\u5165\u7aef\u76f8\u8fde\uff0c\u8fd9\u6837 O \u8f93\u51fa\u7684\u4fe1\u53f7\u6216\u8005\u8bf4 main \u6a21\u5757\u8f93\u51fa\u7684\u4fe1\u53f7\u5c31\u662f s_logisimNet9 \u8f93\u51fa\u7684\u4fe1\u53f7\u3002</p> <p>\u8fd9\u91cc\u7684 s_logisimNet1\u3001s_logisimNet2\u3001s_logisimNet5\u3001s_logisimNet9 \u5e76\u4e0d\u4ec5\u4ec5\u662f\u7bad\u5934\u6307\u5411\u7684\u90a3\u4e00\u6761\u6a2a\u7ebf\uff0c\u5b9e\u9645\u4e0a\u6574\u4e2a\u6df1\u7eff\u8272\u7684\u7ebf\u7f51\u7edc\u7684\u7535\u5e73\u90fd\u662f\u4fdd\u6301\u4e00\u81f4\u7684\uff0c\u90fd\u662f\u540c\u4e00\u4e2a wire \u7684\u8303\u56f4\u3002</p> <pre><code>   assign s_logisimNet1 = I1;\n   assign s_logisimNet2 = I0;\n   assign s_logisimNet5 = I2;\n   assign O = s_logisimNet9;\n</code></pre> <p> </p> <p>\u4ee5\u4e0b\u7684 assign \u8fde\u63a5\u8bed\u6cd5\u90fd\u662f\u6709\u610f\u4e49\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u6a21\u5757\u7684\u8f93\u5165\u7684\u4fe1\u53f7\u8f93\u5165\u8fde\u63a5\u5230\u67d0\u6839\u7ebf\u8def\u3001\u5c06\u4e00\u6839\u7ebf\u8def\u7684\u8f93\u51fa\u8fde\u63a5\u5230\u96f6\u4e00\u6839\u7ebf\u8def\u7684\u8f93\u5165\u3001\u5c06\u4e00\u6839\u7ebf\u8def\u7684\u8f93\u51fa\u8fde\u63a5\u5230\u6a21\u5757\u7684\u8f93\u51fa\u3002</p> <p>\u6b64\u5916\u6211\u4eec\u4e5f\u53ef\u4ee5\u5c06 1 \u4f4d\u7acb\u5373\u6570 0 \u548c 1 \u8f93\u5165\u5230\u7ebf\u8def\u4e2d\uff1a<code>assign wire3 = 1'b1</code> \u7684\u610f\u601d\u662f\u5c06\u9ad8\u7535\u5e73 Vcc \u8f93\u5165\u5230 wire3 \u4e2d\uff0c\u4f7f\u5f97 wire3 \u8f93\u51fa\u662f\u9ad8\u7535\u5e73\uff0c\u7acb\u5373\u6570 1'b1 \u76f8\u5f53\u4e8e Vcc\uff1b<code>assign wire3 = 1'b0</code> \u7684\u610f\u601d\u662f\u5c06\u4f4e\u7535\u5e73 GND \u8f93\u5165\u5230 wire3 \u4e2d\uff0c\u4f7f\u5f97 wire3 \u56e0\u4e3a\u63a5\u5730\u8f93\u51fa\u662f\u4f4e\u7535\u5e73\uff0c\u7acb\u5373\u6570 1'b0 \u76f8\u5f53\u4e8e GND\uff1a</p> <pre><code>    assign wire2 = I0;\n    assign wire1 = wire2;\n    assign O = wire1;\n    assign wire3 = 1'b1;\n    assign wire4 = 1'b0;\n</code></pre> <p>\u4ee5\u4e0b\u7684 assign \u8fde\u63a5\u8bed\u6cd5\u662f\u6ca1\u6709\u610f\u4e49\u7684\uff0c\u6216\u8005\u8bf4\u662f\u9519\u8bef\u7684\uff1a</p> <pre><code>    assign I0 = wire1;      // problem1\n\n    assign wire2 = wire3;   // problem2\n    assign wire3 = wire2;   // problem2\n    assign wire7 = wire7;   // problem2\n\n    assign wire4 = wire5;   // problem3\n    assign wire4 = wire6;   // problem3\n\n    assign 1'b0 = wire8;    // problem4\n    assign 1'b1 = wire8;    // problem4\n\n    assign wire9 = wire8;   // problem5\n    // \u4f46\u662f wire8 \u4ece\u6765\u6ca1\u6709\u88ab assign \u8f93\u5165\u8fc7\n</code></pre> <ul> <li>problem1\uff1aI0 \u4f5c\u4e3a\u8f93\u5165\u7aef\u53e3\u5728\u6a21\u5757\u5185\u90e8\u53ea\u6709\u8f93\u51fa\u7aef\uff0c\u4e0d\u53ef\u4ee5\u88ab\u6a21\u5757\u5185\u90e8\u7684\u7ebf\u8def\u8f93\u5165\uff0c\u4e0d\u8fc7 O \u867d\u7136\u662f\u8f93\u51fa\u7aef\u53e3\uff0c\u4f46\u662f\u5b83\u7684\u8f93\u51fa\u4e5f\u662f\u53ef\u4ee5\u5728\u6a21\u5757\u5185\u90e8\u88ab\u4f7f\u7528\u7684</li> <li>problem2\uff1a\u4e0d\u53ef\u4ee5\u5f62\u6210\u73af\u8def\uff0cwire2 \u548c wire3 \u76f8\u4e92\u8d4b\u503c\u3001wire7 \u81ea\u5df1\u7ed9\u81ea\u5df1\u8d4b\u503c\u4f1a\u5f62\u6210\u73af\u5f62\u7535\u8def\uff0c\u73af\u5f62\u7535\u8def\u5f88\u5fae\u5999\u5176\u4e2d\u7684\u95e8\u9053\u6211\u4eec\u4e4b\u540e\u518d\u4ecb\u7ecd\uff0c\u4f46\u662f\u5728\u5f53\u524d\u7684\u60c5\u5f62\u4e0b\u6211\u4eec\u4f1a\u770b\u5230\u8fd9\u7ec4\u7535\u8def\u5b64\u7acb\u4e8e\u5176\u4ed6\u7684\u7535\u8def\u4e4b\u5916\u6ca1\u6709\u6709\u6548\u7684\u8f93\u5165\u4fe1\u53f7\uff0c\u8fd9\u4ec5\u4ec5\u53ea\u4f1a\u89e6\u53d1 warning\uff0c\u6240\u4ee5\u8981\u683c\u5916\u5c0f\u5fc3</li> <li>problem3\uff1a\u4e00\u4e2a\u7ebf\u8def\u88ab\u591a\u4e2a\u7ebf\u8def\u8f93\u5165\uff0c\u8fd9\u4f1a\u5bfc\u81f4 multi-driven \u95ee\u9898\uff0c\u4ece\u903b\u8f91\u4e0a\u6765\u8bb2\u4e00\u4e2a wire4 \u53ea\u6709\u4e00\u4e2a\u8f93\u5165\u6ca1\u6cd5\u63a5\u53d7\u591a\u4e2a\u8fde\u7ebf\u7684\u8f93\u5165\uff0c\u4ece\u7269\u7406\u5b9e\u73b0\u4e0a\u5c06\u5982\u679c\u6211\u4eec\u771f\u7684\u5141\u8bb8\u8fd9\u6837\u505a\u8fde\u7ebf\u4f1a\u5bfc\u81f4\u77ed\u8def</li> <li>problem4\uff1a1'b0 \u662f GND\uff0c1'b1 \u662f Vcc \u8f93\u51fa\uff0c\u5c06 CMOS \u7ba1\u7684\u8f93\u51fa\u8fde\u63a5\u5230 Vcc \u6216\u8005 GND \u90fd\u6ca1\u6709\u610f\u4e49\uff0c\u8fd8\u4f1a\u5bfc\u81f4\u77ed\u8def\u7b49\u95ee\u9898</li> <li>problem5\uff1a\u7ebf\u8def\u6ca1\u6709\u88ab\u8d4b\u503c\uff0c\u5982\u679c\u4e00\u4e2a\u7ebf\u8def\u6ca1\u6709\u88ab\u8d4b\u503c\uff0c\u90a3\u4e48\u5b83\u5904\u4e8e\u9ad8\u963b\u6001\uff0c\u662f\u6ca1\u6709\u8f93\u51fa\u7684\uff0c\u88ab\u5b83\u8fde\u63a5\u8f93\u5165\u7684\u6240\u6709\u5176\u4ed6\u7ebf\u8def\u90fd\u4f1a\u6ca1\u6709\u8f93\u5165\u8fdb\u800c\u6ca1\u6709\u8f93\u51fa\u3002\u8fd9\u79cd\u7ebf\u8def\u7c7b\u4f3c\u4e8e C \u8bed\u53e5\u4e2d\u6ca1\u6709\u88ab\u521d\u59cb\u5316\u7684\u53d8\u91cf\uff0c\u7528\u5b83\u53c2\u4e0e\u8ba1\u7b97\u662f\u5371\u9669\u7684\uff0c\u4f46\u8fd9\u4ec5\u4ec5\u53ea\u4f1a\u89e6\u53d1 warning \u8981\u683c\u5916\u5c0f\u5fc3</li> </ul> <p>\u6240\u4ee5\u8c28\u8bb0\u4ee5\u4e0b wire \u7684\u7535\u6c14\u7279\u6027\uff1a</p> <ol> <li>wire \u5fc5\u987b\u88ab\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a assign \u8f93\u5165</li> <li>wire \u53ef\u4ee5\u6709 0 \u5230\u591a\u4e2a assign \u8f93\u51fa</li> </ol> <p>\u6211\u4eec\u518d\u56de\u8fc7\u5934\u6765\u770b input \u548c output\uff1a</p> <p>\u56e0\u4e3a input \u7684 wire \u53ea\u80fd\u6709\u4e00\u4e2a\u8f93\u5165\u4e14\u8fd9\u4e2a\u8f93\u5165\u5fc5\u987b\u9884\u7559\u7ed9\u5916\u90e8\u6a21\u5757\uff0c\u6240\u4ee5\u5728 module \u5185\u90e8\u4e0d\u53ef\u4ee5\u5728\u88ab\u8f93\u5165\u4e86\uff0c\u4e0d\u7136\u4f1a\u6709 multi-driven \u7684\u7535\u6c14\u95ee\u9898\uff0c\u4f46\u662f\u56e0\u4e3a\u53ef\u4ee5\u6709 0 \u5230\u591a\u4e2a\u8f93\u51fa\uff0c\u6240\u4ee5 input \u53ef\u4ee5\u7ed9\u5185\u90e8\u4efb\u4f55\u6709\u9700\u8981\u7684\u7ebf\u8def\u505a\u8f93\u5165\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u7ed9\u4efb\u4f55\u7ebf\u8def\u505a\u8f93\u5165\uff0c\u8fd9\u5c31\u76f8\u5f53\u4e8e C \u8bed\u8a00\u5b9a\u4e49\u4e86\u4e00\u4e2a\u53d8\u91cf\u4f46\u662f\u4e0d\u4f7f\u7528\uff0c\u4e0d\u4f1a\u6709\u5b9e\u9645\u7684\u5371\u5bb3\uff0c\u4e5f\u4e0d\u4f1a\u6709 warning\u3002</p> <p>\u800c output \u56e0\u4e3a\u5fc5\u987b\u8981\u6709\u4e00\u4e2a\u8f93\u5165\uff0c\u6240\u4ee5\u5fc5\u987b\u8981\u88ab\u8fde\u63a5\u4e0d\u7136\u5916\u90e8\u5f97\u4e0d\u5230\u8f93\u51fa\uff0c\u4f46\u662f\u5982\u679c\u4e0d\u8fde\u63a5\u4e0d\u4f1a\u6709 error\uff0c\u9700\u8981\u7f16\u7a0b\u4eba\u5458\u81ea\u5df1\u6ce8\u610f\uff0c\u56e0\u4e3a output \u53ef\u4ee5\u6709 0 \u5230\u591a\u4e2a\u8f93\u51fa\uff0c\u6240\u4ee5\u5728\u9884\u7559\u4e86\u4e00\u4e2a\u7ed9\u5916\u90e8\u6a21\u5757\u4e4b\u540e\u8fd8\u53ef\u4ee5\u7ee7\u7eed\u8f93\u51fa\u7ed9\u5185\u90e8\u6a21\u5757\u3002</p>"},{"location":"lab0-2-appendix/#_1","title":"\u53cd\u76f8\u5668\u7535\u8def/\u975e\u95e8\u7535\u8def","text":"<p>\u5728 C \u8bed\u8a00\u4e2d\u6211\u4eec\u53ef\u4ee5\u7528 <code>a=~b</code> \u6765\u5c06\u4e00\u4e2a\u6570\u636e\u53d6\u53cd\u8d4b\u503c\u7ed9\u53e6\u4e00\u4e2a\u53d8\u91cf\uff0c\u8fd9\u91cc\u7684\u8bed\u4e49\u5c31\u662f\u5c06\u4e00\u4e2a\u7ebf\u8def\u7684\u8f93\u51fa\u53d6\u53cd\u7136\u540e\u4f5c\u4e3a\u53e6\u4e00\u4e2a\u7ebf\u8def\u7684\u8f93\u5165\u3002\u5bf9\u5e94\u5230\u7535\u8def\u4e0a\u53d6\u53cd\u5c31\u662f\u7ecf\u8fc7\u4e00\u4e2a\u975e\u95e8\u7535\u8def\uff0c\u6240\u4ee5\u5c31\u662f\u5c06 b \u7ebf\u8def\u8fde\u63a5\u5230\u53cd\u5411\u5668\u7684\u8f93\u5165\uff0c\u7136\u540e\u5c06\u53cd\u5411\u5668\u7684\u8f93\u51fa\u8fde\u63a5\u5230\u53e6\u4e00\u4e2a\u7ebf\u8def\u4e0a\u3002\u4e0b\u9762\u7684\u4e09\u6761\u8bed\u53e5\u5c31\u5bf9\u5e94\u4e86 Lab0-1 \u7ebf\u8def\u4e2d\u7684\u4e09\u4e2a\u975e\u95e8\u7684\u7ebf\u8def\u8fde\u63a5\u3002</p> <pre><code>   assign s_logisimNet0 = ~s_logisimNet2;\n   assign s_logisimNet4 = ~s_logisimNet1;\n   assign s_logisimNet3 = ~s_logisimNet5;\n</code></pre> <p> </p>"},{"location":"lab0-2-appendix/#_2","title":"\u4e0e\u95e8\uff0c\u6216\u95e8\uff0c\u6a21\u5757\u8c03\u7528","text":"<p>\u6240\u8c13\u6a21\u5757\u5c31\u662f\u67d0\u4e00\u7535\u8def\u7ec4\u6210\uff0c\u5bf9\u4e8e AND3 \u95e8\u7535\u8def\u548c OR4 \u95e8\u7535\u8def Logisim \u751f\u6210\u4e86 AND_GATE_3_INPUTS \u6a21\u5757\uff08\u5b9a\u4e49\u5728 verilog/gates/AND_GATE_3_INPUTS.v\uff09\u548c OR_GATE_4_INPUTS \u6a21\u5757\uff08\u5b9a\u4e49\u5728 verilog/gates/OR_GATE_4_INPUTS.v\uff09\u6765\u5b9e\u73b0\uff0c\u5b83\u7684\u6a21\u5757\u58f0\u660e\u5982\u4e0b\uff1a</p> <pre><code>    module AND_GATE_3_INPUTS(\n        input input1,\n        input input2,\n        input input3,\n        output result\n    );\n\n    module OR_GATE_4_INPUTS(\n        input input1,\n        input input2,\n        input input3,\n        input input4,\n        output result\n    );\n</code></pre> <p>\u5bf9\u4e8e C \u51fd\u6570\u6211\u4eec\u5728\u8003\u8651\u8c03\u7528\u67d0\u4e00\u51fd\u6570\u7684\u65f6\u5019\u4e0d\u5728\u4e4e\u51fd\u6570\u5185\u90e8\u7684\u5b9e\u73b0\uff0c\u800c\u53ea\u5728\u4e4e\u5b83\u7684\u8f93\u5165\u8f93\u51fa\u5173\u7cfb\uff1b\u5bf9\u4e8e Verilog \u7684\u786c\u4ef6\u8bbe\u8ba1\u6a21\u5757\u5728\u4f7f\u7528\u7684\u65f6\u5019\u4e5f\u4e0d\u5728\u4e4e\u5185\u90e8\u7684\u8bbe\u8ba1\u7ec6\u8282\u548c\u7269\u7406\u5b9e\u73b0\uff0c\u53ea\u5728\u4e4e\u5b83\u7684\u8f93\u5165\u8f93\u51fa\u5173\u7cfb\uff0c\u4f8b\u5982\u5bf9\u4e8e AND_GATE_3_INPUTS \u6a21\u5757\u53ea\u9700\u8981\u77e5\u9053\u6709\u4e09\u4e2a\u8f93\u5165 input1\u3001input2\u3001input3 \u548c\u4e00\u4e2a\u8f93\u51fa result\uff0c\u53ef\u4ee5\u5b9e\u73b0\u548c AND3 \u95e8\u7535\u8def\u4e00\u81f4\u7684\u529f\u80fd\u5373\u53ef\u3002</p> <p>\u4e4b\u540e\u6211\u4eec\u7528 <code>AND_GATE_3_INPUTS GATES_1</code> \u5b9e\u4f8b\u5316\u4e00\u4e2a\u540d\u5b57\u53eb\u505a GATES_1 \u7684 AND_GATE_3_INPUTS \u6a21\u5757\uff0c\u7136\u540e\u5bf9\u6a21\u5757\u7684\u8f93\u5165\u8f93\u51fa\u8fdb\u884c\u8fde\u63a5\u3002<code>.input1(s_logisimNet2)</code> \u8bf4\u660e\u5c06 GATES_1 \u7684 input1 \u5f15\u811a\u548c s_logisimNet2 \u7ebf\u8def\u8fde\u63a5\uff0c\u4f59\u4e0b\u5f15\u811a\u8fde\u63a5\u540c\u7406\uff0c\u5982\u679c\u662f input \u5f15\u811a\u5c31\u662f\u7ebf\u8def\u63d0\u4f9b\u8f93\u5165\uff0c\u5982\u679c\u662f output \u5f15\u811a\u5c31\u662f\u7ebf\u8def\u83b7\u5f97\u8f93\u51fa\u3002</p> <p>\u540c\u7406\u5b9e\u4f8b\u5316\u4e00\u4e2a\u53eb\u505a GATE_5 \u7684 OR4 \u6216\u95e8\uff0c\u7136\u540e\u5c06 s_logisimNet10\u3001s_logisimNet6\u3001s_logisimNet7\u3001s_logisimNet8 \u4f5c\u4e3a\u8f93\u5165\uff0cs_logisimNet9 \u4f5c\u4e3a\u8f93\u51fa\u8fde\u63a5\u5230\u6216\u95e8\u3002</p> <pre><code>    AND_GATE_3_INPUTS GATES_1 (\n        .input1(s_logisimNet2),\n        .input2(s_logisimNet4),\n        .input3(s_logisimNet3),\n        .result(s_logisimNet10)\n    );\n\n    OR_GATE_4_INPUTS GATES_5 (\n        .input1(s_logisimNet10),\n        .input2(s_logisimNet6),\n        .input3(s_logisimNet7),\n        .input4(s_logisimNet8),\n        .result(s_logisimNet9)\n    );\n</code></pre> <p> </p> <p>\u9700\u8981\u6ce8\u610f\uff1a</p> <ul> <li>\u56e0\u4e3a\u6bcf\u4e2a\u5bfc\u7ebf\u90fd\u9700\u8981\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u8f93\u5165\uff0c\u6240\u4ee5\u6bcf\u4e2a\u6a21\u5757\u7684\u8f93\u5165\u7aef\u53e3\u90fd\u9700\u8981\u88ab\u8fde\u63a5\uff0c\u5982\u679c\u6ca1\u6709\u8fde\u63a5\u4f1a\u62a5\u9519 error</li> <li>\u56e0\u4e3a\u6bcf\u4e2a\u5bfc\u7ebf\u90fd\u9700\u8981\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u8f93\u5165\uff0c\u6240\u4ee5\u4e00\u65e6\u4e00\u6839\u7ebf\u8def\u88ab\u6a21\u5757\u7684\u8f93\u51fa\u7aef\u53e3\u9a71\u52a8\u4e86\uff0c\u5c31\u4e0d\u53ef\u4ee5\u5728\u88ab\u5176\u4ed6\u6a21\u5757\u7684\u8f93\u51fa\u7aef\u53e3\u6216\u8005 assign \u8bed\u53e5\u9a71\u52a8\u4e86</li> <li>\u56e0\u4e3a\u6bcf\u4e2a\u5bfc\u7ebf\u90fd\u53ef\u4ee5\u7531 0 \u5230\u591a\u4e2a\u8f93\u51fa\uff0c\u6240\u4ee5\u6bcf\u4e2a\u6a21\u5757\u7684\u8f93\u51fa\u7aef\u53e3\u53ef\u4ee5\u4e0d\u88ab\u8fde\u63a5\u4fdd\u6301\u60ac\u7a7a\uff0c\u8fd9\u662f\u65e0\u5bb3\u7684\u3002\u9700\u8981\u6ce8\u610f\u5982\u679c\u6211\u4eec\u5e0c\u671b result \u7aef\u53e3\u60ac\u7a7a\uff0c\u4e0d\u80fd\u8fd9\u6837\u8fde\u63a5\uff1a     <pre><code>    OR_GATE_4_INPUTS GATES_5 (\n        .input1(s_logisimNet10),\n        .input2(s_logisimNet6),\n        .input3(s_logisimNet7),\n        .input4(s_logisimNet8)\n    );\n</code></pre>     \u8fd9\u6837\u4e00\u822c\u8ba4\u4e3a\u4f60\u5fd8\u8bb0\u5904\u7406 OR4 \u6a21\u5757\u7684 result \u8f93\u51fa\u7aef\u53e3\u4e86\uff0c\u6240\u4ee5\u5e94\u8be5\u5982\u4e0b\u8fde\u63a5\uff0c\u663e\u5f0f\u58f0\u660e\u60ac\u7a7a\u8be5\u7aef\u53e3\uff1a     <pre><code>    OR_GATE_4_INPUTS GATES_5 (\n        .input1(s_logisimNet10),\n        .input2(s_logisimNet6),\n        .input3(s_logisimNet7),\n        .input4(s_logisimNet8),\n        .result()\n    );\n</code></pre></li> </ul> <p>\u6a21\u5757\u8fd8\u6709\u53e6\u4e00\u79cd\u4e0d\u9700\u8981\u663e\u793a\u58f0\u660e\u8fde\u63a5\u7aef\u53e3\u7684\u8fde\u63a5\u65b9\u5f0f\uff0c\u8fd9\u91cc GATE1 \u7684\u8f93\u5165\u8f93\u51fa\u6ca1\u6709\u58f0\u660e\u8fde\u63a5\u7684\u7aef\u53e3\uff0c\u6240\u4ee5\u7ebf\u8def\u8fde\u63a5\u7684\u7aef\u53e3\u9ed8\u8ba4\u548c AND_GATE_3_INPUTS \u58f0\u660e\u7aef\u53e3\u7684\u987a\u5e8f\u4fdd\u6301\u4e00\u81f4\uff0c\u4e5f\u5373\u7b2c\u4e00\u8fde\u7ebf s_logisimNet10 \u8fde\u63a5\u5230\u7b2c\u4e00\u4e2a\u7aef\u53e3 input1\uff0c\u4f9d\u6b64\u7c7b\u63a8\u3002</p> <pre><code>// declaration\nmodule AND_GATE_3_INPUTS(\n    input1,\n    input2,\n    input3,\n    result\n);\n    input input1;\n    input input2;\n    input input3;\n    output result;\n    ...\nendmodule\n\n//connection\nAND_GATE_3_INPUTS GATE1 (s_logisimNet10, s_logisimNet6, s_logisimNet7, s_logisimNet8);\n</code></pre> <p>\u6ce8\u610f\uff1a</p> <ul> <li>\u58f0\u660e\u7aef\u53e3\u7684\u8fde\u63a5\u65b9\u6cd5\u548c\u4e0d\u58f0\u660e\u7aef\u53e3\u7684\u8fde\u63a5\u65b9\u6cd5\u4e0d\u53ef\u4ee5\u6df7\u7528</li> </ul> <p>\u4e0d\u58f0\u660e\u7aef\u53e3\u867d\u7136\u4f7f\u7528\u8d77\u6765\u6bd4\u8f83\u7b80\u6d01\uff0c\u4f46\u662f\u6709\u5f88\u591a\u95ee\u9898\uff1a</p> <ol> <li>\u5982\u679c\u7aef\u53e3\u6570\u76ee\u5f88\u591a\uff0c\u4e0d\u58f0\u660e\u7aef\u53e3\u5bb9\u6613\u5bfc\u81f4\u7aef\u53e3\u8fde\u9519</li> <li>\u5982\u679c\u6a21\u5757\u7684\u7aef\u53e3\u987a\u5e8f\u8fdb\u884c\u4e86\u4fee\u6539\u548c\u8c03\u6574\uff0c\u6240\u6709\u4e0d\u58f0\u660e\u7aef\u53e3\u7684\u6a21\u5757\u5b9e\u4f8b\u90fd\u8981\u505a\u5bf9\u5e94\u7684\u8c03\u6574</li> <li>\u4e0d\u58f0\u660e\u7aef\u53e3\u7684\u8fde\u63a5\u65b9\u5f0f\u65e0\u6cd5\u505a\u8f93\u51fa\u7aef\u53e3\u7684\u60ac\u7a7a</li> <li>\u4e0d\u58f0\u660e\u7aef\u53e3\u4f1a\u5bfc\u81f4\u6a21\u5757\u5b9e\u4f8b\u8fde\u7ebf\u7684\u65f6\u5019\u7f3a\u4e4f\u7aef\u53e3\u8bed\u4e49\uff0c\u4e0d\u5229\u4e8e\u7f16\u7a0b\u8005\u7684\u5f00\u53d1\u7ef4\u62a4</li> </ol> <p>\u6240\u4ee5\u9664\u975e\u6a21\u5757\u975e\u5e38\u7b80\u5355\uff0c\u4e0d\u7136\u63a8\u8350\u4f7f\u7528\u58f0\u660e\u7aef\u53e3\u7684\u8fde\u63a5\u65b9\u6cd5</p>"},{"location":"lab0-2-appendix/#_3","title":"\u6a21\u5757\u548c\u8fd0\u7b97\u7b26","text":"<p>\u6211\u4eec\u975e\u95e8\u7684\u8fde\u63a5\u6709\u5982\u4e0b\u4e24\u79cd\u7b49\u4ef7\u7684\u65b9\u6cd5\uff1a\u7b2c\u4e00\u79cd\u76f4\u63a5\u5c55\u73b0\u7535\u8def\u8fde\u63a5\uff1b\u800c\u7b2c\u4e8c\u79cd\u7528\u7c7b\u4f3c C \u8bed\u8a00\u7684\u5199\u6cd5\uff0c\u6709\u66f4\u5f3a\u7684\u903b\u8f91\u8bed\u4e49\uff0c\u4f46\u662f\u6700\u540e\u8fd8\u662f\u4f1a\u843d\u811a\u4e8e\u7b2c\u4e00\u79cd\u7684\u7535\u8def\u8fde\u63a5\uff0c\u4ec5\u4ec5\u662f\u7ed9\u6211\u4eec\u63cf\u8ff0\u975e\u95e8\u7535\u8def\u63d0\u4f9b\u66f4\u7b80\u6d01\u5730\u8868\u8fbe\u65b9\u5f0f\u800c\u5df2\uff1a</p> <pre><code>    NOT GATE1(wire1 wire2);\n    assign wire1 = ~wire2;\n</code></pre> <p>\u5bf9\u4e8e AND2 \u4e0e\u95e8\u548c OR2 \u6216\u95e8\u4e5f\u6709\u5bf9\u5e94\u7684\u8fd0\u7b97\u7b26\u8bed\u6cd5\u7cd6\uff1a <pre><code>    AND2 GATE1(wire3, wire1, wire2);\n    assign wire3 = wire1 &amp; wire2;\n\n    OR2 GATE2(wire3, wire1, wire2);\n    assign wire3 = wire1 | wire2;\n</code></pre></p> <p>\u5f53\u7136 AND_GATE_3_INPUTS \u548c OR_DATE_4_INPUTS \u6a21\u5757\u5185\u90e8\u5c31\u662f\u7528 | \u548c &amp; \u8868\u793a\u7684\u4e0e\u95e8\u6216\u95e8\u7ec4\u5efa\u800c\u6210\u7684\u3002</p>"},{"location":"lab0-2-appendix/#_4","title":"\u6838\u5fc3\u601d\u60f3","text":"<p>\u5728\u4f7f\u7528 Verilog \u8bed\u8a00\u63cf\u8ff0\u7535\u8def\u4e4b\u524d\u8111\u5b50\u91cc\u4e00\u5b9a\u8981\u5148\u6709\u7535\u8def\uff01\uff01\uff01\uff01\uff01</p> <p>\u5982\u679c\u6211\u4eec\u662f\u5bf9\u7167\u7740 Lab0-1 \u7684\u7535\u8def\u8bbe\u8ba1\u56fe\u7f16\u7a0b\u786c\u4ef6\u63cf\u8ff0\u8bed\u8a00\uff0c\u90a3\u4e48\u5c31\u4e0d\u4f1a\u51fa\u73b0\u7b2c 3\u30015 \u8282\u4e2d\u63d0\u5230\u7684\u8f93\u5165\u8f93\u51fa\u63a5\u9519\u3001\u8fde\u63a5\u56de\u8def\u3001\u591a\u9a71\u52a8\u7b49\u5404\u7c7b\u95ee\u9898\uff0c\u56e0\u4e3a\u5927\u5bb6\u5bf9\u7167\u7740\u7535\u8def\u56fe\u5df2\u7ecf\u6709\u660e\u786e\u7684\u8fde\u63a5\u5173\u7cfb\u548c\u7535\u6d41\u65b9\u5411\u4e86\u3002\u4f46\u5982\u679c\u5f88\u591a\u540c\u5b66\u53ea\u662f\u60f3\u5f53\u7136\u7684\u505a assign \u8fde\u63a5\uff0c\u800c\u4e0d\u8003\u8651\u7535\u6c14\u7279\u6027\uff0c\u8fd9\u4e9b\u95ee\u9898\u5c31\u4f1a\u63a5\u8e35\u800c\u81f3\u3002\u5f53\u7136\u6f0f\u8fde\u3001\u5fd8\u8fde\u662f\u53e6\u4e00\u56de\u4e8b\u60c5\u3002</p> <p>\u5f88\u591a\u540c\u5b66\u5728\u5b66\u4e60\u5b8c ~\u3001|\u3001&amp; \u8fd9\u6837\u7684 Verilog \u8868\u8fbe\u5f0f\u4e4b\u540e\u5c31\u5f88\u5bb9\u6613\u5c06 Verilog \u5f53\u4f5c C \u8bed\u8a00\u6765\u5199\u3002\u4f8b\u5982\u63d0\u4f9b\u4e00\u4e2a\u8f93\u5165\u8f93\u51fa\u5173\u7cfb\uff0c\u7136\u540e\u8ba9\u4f60\u8bbe\u8ba1\u4e00\u5957\u7535\u8def\u5e76\u7528 Verilog \u8868\u793a\u51fa\u6765\uff0c\u90a3\u4e48\u6709\u4e9b\u540c\u5b66\u5bb9\u6613\u8fd9\u6837\uff1a</p> <ol> <li>\u5c06\u8f93\u5165\u8f93\u51fa\u5173\u7cfb\u8f6c\u6362\u4e3a\u4e00\u4e2a\u5361\u8bfa\u56fe</li> <li>\u5316\u7b80\u5361\u8bfa\u56fe\u5f97\u5230\u903b\u8f91\u8868\u8fbe\u5f0f</li> <li>\u6839\u636e\u903b\u8f91\u8868\u8fbe\u5f0f\u7684\u4e0e\u6216\u975e\u5173\u7cfb\uff0c\u50cf\u5199 C \u8bed\u8a00\u4e00\u6837\u76f4\u63a5\u5199 &amp;\u3001|\u3001~ \u8bed\u53e5</li> </ol> <p>\u8fd9\u6837\u5373\u4f7f\u4f60\u5bf9\u786c\u4ef6\u7279\u6027\u4e00\u65e0\u6240\u77e5\u3001\u5e76\u4e14\u4e22\u5f03\u4e86\u6700\u7ec8\u7684\u786c\u4ef6\u7ed3\u6784\uff0c\u4e5f\u53ef\u4ee5\u8f7b\u677e\u7684\u5199\u51fa\u6b63\u786e\u7684 Verilog \u6a21\u5757\u3002\u53ea\u8981\u628a Verilog \u7528 C \u7684\u903b\u8f91\u6765\u5199\u5c31\u597d\u4e86\uff0c\u8fd9\u5c31\u662f\u5f88\u591a\u540c\u5b66\u5b66\u4e60 Verilog \u8d70\u4e0a\u6b67\u8def\uff0c\u6700\u540e\u5b66\u4e0d\u597d Verilog \u7684\u539f\u56e0\u3002\u5c06\u6765\u6211\u4eec\u4f1a\u5b66\u4e60\u66f4\u591a Verilog \u7684\u8bed\u53e5\uff0c\u5b83\u4eec\u66f4\u50cf C \u8bed\u8a00\uff0c\u5b83\u4eec\u62bd\u8c61\u7a0b\u5ea6\u66f4\u9ad8\uff0c\u66f4\u8131\u79bb\u5e95\u5c42\u7684\u786c\u4ef6\u63cf\u8ff0\uff0c\u5f88\u591a\u5077\u61d2\u7684\u540c\u5b66\u5f88\u5bb9\u6613\u4e49\u65e0\u53cd\u987e\u5730\u6295\u5165\u8fd9\u4e9b\u8bed\u53e5\u7684\u6000\u62b1\u3002</p> <p>\u4f46\u662f\u8fd9\u6837\u4f60\u53ea\u5b66\u4e60\u4e86 Verilog \u8bed\u53e5\u903b\u8f91\u4e0a\u7684\u8f93\u5165\u8f93\u51fa\u8fd0\u7b97\u5173\u7cfb\uff0c\u5e76\u6ca1\u6709\u638c\u63e1\u5b83\u7535\u6c14\u5b9e\u73b0\u4e0a\u7684\u7269\u7406\u542b\u4e49\u3002\u5982\u679c\u662f\u6309\u7167 C \u7684\u601d\u8def\u7f16\u7a0b\u4e00\u6765\u5bb9\u6613\u628a Verilog \u8bed\u53e5\u7684\u903b\u8f91\u542b\u4e49\u60f3\u5f53\u7136\u5730\u548c C \u8bed\u53e5\u7684\u903b\u8f91\u542b\u4e49\u753b\u4e0a\u7b49\u53f7\u5bfc\u81f4\u903b\u8f91\u4e0a\u5c31\u7406\u89e3\u9519\u8bef\uff1b\u4e8c\u6765\u8fd9\u6837\u7f16\u7a0b\u4ec5\u4ec5\u80fd\u4fdd\u8bc1\u8bed\u53e5\u5728\u903b\u8f91\u9a8c\u8bc1\u4e0a\u662f\u6b63\u786e\u7684\uff0c\u4f46\u4e0d\u80fd\u4fdd\u8bc1\u5728\u7535\u6c14\u8bbe\u8ba1\u4e0a\u4e5f\u662f\u6b63\u786e\u7684\uff0c\u5bb9\u6613\u4ea7\u751f\u5404\u79cd\u5404\u6837\u7684\u7535\u6c14\u9519\u8bef\uff0c\u6700\u540e\u5bfc\u81f4\u8bbe\u8ba1\u51fa\u6765\u660e\u660e\u529f\u80fd\u6b63\u786e\u7684\u786c\u4ef6\u5b9e\u73b0\u51fa\u6765\u786e\u5b9e\u65e0\u6cd5\u8fd0\u884c\u7684\u3002</p> <p>\u8fd9\u79cd\u53cd\u76f4\u89c9\u7684\u60c5\u51b5\u4f1a\u5f88\u5927\u7a0b\u5ea6\u4e0a\u632b\u8d25\u540c\u5b66\u4eec\u5b66\u4e60\u786c\u4ef6\u7684\u81ea\u4fe1\u5fc3\uff0c\u8ba9\u4ed6\u4eec\u8ba4\u4e3a\u786c\u4ef6\u8bbe\u8ba1\u662f\u4e00\u4ef6\u7384\u5b66\u7684\u4e8b\u60c5\uff0c\u662f\u65e0\u6cd5\u5b66\u4f1a\u7684\uff0c\u6700\u540e\u75db\u82e6\u5730\u9003\u79bb\u786c\u4ef6\u8bbe\u8ba1\u7684\u9886\u57df\uff0c\u5e76\u4e14\u7559\u4e0b\u6df1\u523b\u7684\u9634\u5f71\u3002\u800c\u8fd9\u4e00\u5207\u5f80\u5f80\u662f\u56e0\u4e3a\u5b83\u4eec\u6ca1\u6709\u5c06 Verilog \u8bed\u8a00\u548c\u7535\u8def\u7279\u6027\u6df1\u523b\u7406\u89e3\u8d77\u6765\uff0c\u800c\u4ec5\u4ec5\u5077\u61d2\u7684\u505c\u7559\u5728\u7c7b\u4f3c C \u8bed\u8a00\u7684\u903b\u8f91\u5c42\u9762\u3002</p> <p>Verilog \u8bed\u8a00\u4f5c\u4e3a\u4e00\u95e8\u5de5\u5177\u8bed\u8a00\u5728\u8fc7\u53bb\u8ba1\u7b97\u673a\u4e13\u4e1a\u7684\u786c\u4ef6\u8bfe\u7a0b\u4e2d\u662f\u4e0d\u4f1a\u88ab\u4e13\u95e8\u6559\u5b66\u7684\uff0c\u8feb\u4f7f\u540c\u5b66\u53ea\u80fd\u5728\u6478\u7d22\u4e2d\u81ea\u5b66\u8fd9\u95e8\u8bed\u8a00\uff0c\u5728\u4e00\u4e2a\u4e2a\u9677\u9631\u548c\u6ce5\u6f6d\u4e2d\u6dcc\u51fa\u4e00\u6761\u4e5f\u8bb8\u53ef\u884c\u7684\u9053\u8def\uff0c\u7edd\u5927\u591a\u6570\u540c\u5b66\u5f80\u5f80\u4e2d\u9053\u5d29\u6b82\u6700\u540e\u548c\u786c\u4ef6\u65e0\u7f18\u3002\u8fd9\u662f\u4e00\u4ef6\u5f88\u53ef\u60dc\u7684\u4e8b\u60c5\uff0c\u6211\u4eec\u4e0d\u662f\u6ca1\u6709\u7ecf\u9a8c\uff0c\u6211\u4eec\u672c\u53ef\u4ee5\u505a\u5f97\u66f4\u597d\u3002\u8fd9\u4e5f\u662f\u6211\u4eec\u5728\u5b9e\u9a8c\u8bfe\u4e2d\u52a0\u5165 Verilog \u8bed\u8a00\u6559\u5b66\u7684\u521d\u8877\uff0c\u6211\u4eec\u5e0c\u671b\u5927\u5bb6\u53ef\u4ee5\u5207\u5b9e\u611f\u53d7\u5230\u786c\u4ef6\u8bbe\u8ba1\u7684\u751f\u8da3\uff0c\u4e00\u8d77\u6295\u8eab\u5230\u786c\u4ef6\u8bbe\u8ba1\u7684\u961f\u4f0d\u4e2d\u6765\u3002</p>"},{"location":"lab0-2/","title":"\u5b9e\u9a8c 0-2\uff1aFPGA \u5b9e\u9a8c\u73af\u5883\u51c6\u5907","text":""},{"location":"lab0-2/#_1","title":"\u5b9e\u9a8c\u76ee\u7684","text":"<ul> <li>\u638c\u63e1 FPGA \u8bbe\u8ba1\u8f6f\u4ef6 Vivado \u7684\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5</li> <li>\u638c\u63e1 FPGA \u548c Verilog \u8bed\u8a00\u7684\u6700\u57fa\u7840\u4f7f\u7528\u65b9\u6cd5</li> <li>\u5b66\u4e60\u5361\u8bfa\u56fe\u7684\u5316\u7b80\u548c\u5bf9\u5e94 Verilog \u8bed\u8a00\u7684\u8f6c\u6362</li> </ul>"},{"location":"lab0-2/#_2","title":"\u5b9e\u9a8c\u73af\u5883","text":"<ul> <li>EDA\u5de5\u5177\uff1aNgspice\uff0cLogSim Evolution</li> <li>\u64cd\u4f5c\u7cfb\u7edf\uff1aWindows 10+ 22H2\uff0cUbuntu 22.04+</li> <li>VHDL\uff1aVerilog</li> </ul>"},{"location":"lab0-2/#_3","title":"\u80cc\u666f\u77e5\u8bc6","text":""},{"location":"lab0-2/#fpga","title":"FPGA","text":"<p>FPGA \u5668\u4ef6\u5c5e\u4e8e\u4e13\u7528\u96c6\u6210\u7535\u8def\u4e2d\u7684\u4e00\u79cd\u534a\u5b9a\u5236\u7535\u8def\uff0c\u662f\u53ef\u7f16\u7a0b\u7684\u903b\u8f91\u5217\u9635\uff0c\u80fd\u591f\u6709\u6548\u7684\u89e3\u51b3\u539f\u6709\u7684\u5668\u4ef6\u95e8\u7535\u8def\u6570\u8f83\u5c11\u7684\u95ee\u9898\u3002</p> <p>FPGA \u7684\u57fa\u672c\u7ed3\u6784\u5305\u62ec\u53ef\u7f16\u7a0b\u8f93\u5165\u8f93\u51fa\u5355\u5143\uff0c\u53ef\u914d\u7f6e\u903b\u8f91\u5757\uff0c\u6570\u5b57\u65f6\u949f\u7ba1\u7406\u6a21\u5757\uff0c\u5d4c\u5165\u5f0f\u5757RAM\uff0c\u5e03\u7ebf\u8d44\u6e90\uff0c\u5185\u5d4c\u4e13\u7528\u786c\u6838\uff0c\u5e95\u5c42\u5185\u5d4c\u529f\u80fd\u5355\u5143\u3002</p>"},{"location":"lab0-2/#verilog","title":"Verilog","text":"<p>Verilog HDL \u662f\u4e00\u79cd\u786c\u4ef6\u63cf\u8ff0\u8bed\u8a00\uff0c\u7528\u4e8e\u4ece\u7b97\u6cd5\u7ea7\u3001\u95e8\u7ea7\u5230\u5f00\u5173\u7ea7\u7684\u591a\u79cd\u62bd\u8c61\u8bbe\u8ba1\u5c42\u6b21\u7684\u6570\u5b57\u7cfb\u7edf\u5efa\u6a21\u3002\u88ab\u5efa\u6a21\u7684\u6570\u5b57\u7cfb\u7edf\u5bf9\u8c61\u7684\u590d\u6742\u6027\u53ef\u4ee5\u4ecb\u4e8e\u7b80\u5355\u7684\u95e8\u548c\u5b8c\u6574\u7684\u7535\u5b50\u6570\u5b57\u7cfb\u7edf\u4e4b\u95f4\u3002\u6570\u5b57\u7cfb\u7edf\u80fd\u591f\u6309\u5c42\u6b21\u63cf\u8ff0\uff0c\u5e76\u53ef\u5728\u76f8\u540c\u63cf\u8ff0\u4e2d\u663e\u5f0f\u5730\u8fdb\u884c\u65f6\u5e8f\u5efa\u6a21\u3002</p> <p>Verilog HDL \u8bed\u8a00\u5177\u6709\u4e0b\u8ff0\u63cf\u8ff0\u80fd\u529b\uff1a\u8bbe\u8ba1\u7684\u884c\u4e3a\u7279\u6027\u3001\u8bbe\u8ba1\u7684\u6570\u636e\u6d41\u7279\u6027\u3001\u8bbe\u8ba1\u7684\u7ed3\u6784\u7ec4\u6210\u4ee5\u53ca\u5305\u542b\u54cd\u5e94\u76d1\u63a7\u548c\u8bbe\u8ba1\u9a8c\u8bc1\u65b9\u9762\u7684\u65f6\u5ef6\u548c\u6ce2\u5f62\u4ea7\u751f\u673a\u5236\u3002\u6240\u6709\u8fd9\u4e9b\u90fd\u4f7f\u7528\u540c\u4e00\u79cd\u5efa\u6a21\u8bed\u8a00\u3002</p> <p>\u6b64\u5916\uff0cVerilog HDL \u8bed\u8a00\u63d0\u4f9b\u4e86\u7f16\u7a0b\u8bed\u8a00\u63a5\u53e3\uff0c\u901a\u8fc7\u8be5\u63a5\u53e3\u53ef\u4ee5\u5728\u6a21\u62df\u3001\u9a8c\u8bc1\u671f\u95f4\u4ece\u8bbe\u8ba1\u5916\u90e8\u8bbf\u95ee\u8bbe\u8ba1\uff0c\u5305\u62ec\u6a21\u62df\u7684\u5177\u4f53\u63a7\u5236\u548c\u8fd0\u884c\u3002</p>"},{"location":"lab0-2/#_4","title":"\u5b9e\u9a8c\u6b65\u9aa4","text":""},{"location":"lab0-2/#verilog_1","title":"\u5c06\u539f\u7406\u56fe\u5bfc\u51fa\u4e3a Verilog","text":"<p>\u542f\u52a8 Logisim\uff0c\u4f9d\u6b21\u9009\u62e9 File &gt; Open \u6253\u5f00\u5728\u4e0a\u4e2a\u5b9e\u9a8c\u4e2d\u7ed8\u5236\u7684\u7535\u8def\u539f\u7406\u56fe\u6587\u4ef6\u3002\uff08\u4e5f\u53ef\u4ee5\u6267\u884c<code>java -jar logisim-evolution-3.8.0-all.jar /&lt;path_to_file&gt;/xxx.circ</code>\u6253\u5f00\u4fdd\u5b58\u7684\u8bbe\u8ba1\u6587\u4ef6\uff0c\u662f\u4f60\u4fdd\u5b58\u65f6\u7684\u6587\u4ef6\u8def\u5f84\uff09 <p>\u4f9d\u6b21\u9009\u62e9\u4e0a\u65b9\u72b6\u6001\u680f\u7684 FPGA &gt; Synthesize &amp; Download\u3002\u5728\u5f39\u51fa\u7684\u7a97\u53e3\u4e2d\uff1a</p> <ul> <li>\u5c06 Target board \u4fee\u6539\u4e3a FPGA4U</li> <li>\u9009\u62e9\u53f3\u4e0a\u89d2\u7684 Settings\uff0c\u5c06 Hardware description language used for FPGA-commander \u4fee\u6539\u4e3a Verilog\uff0c\u540c\u65f6\u4fee\u6539\u7684 Workspace location \u4e3a\u5e0c\u671b Verilog \u6587\u4ef6\u751f\u6210\u7684\u6587\u4ef6\u8def\u5f84</li> <li>\u70b9\u51fb Execute \u6309\u94ae\uff0c\u6b64\u65f6\u4f1a\u5f39\u51fa\u4e00\u4e2a\u5e26\u6709 FPGA \u56fe\u7247\u7684\u7a97\u53e3\uff0c\u70b9\u51fb Done \u5373\u53ef<ul> <li>\u5982\u679c\u62a5\u9519\u6ca1\u6709\u6dfb\u52a0 label\uff0c\u5148\u56de\u5230\u753b\u5e03\u7ed9\u7aef\u53e3\u6dfb\u52a0 label\uff1aI0\u3001I1\u3001I2\u3001O\uff08\u6ce8\u610f label \u5fc5\u987b\u4e0e\u8981\u6c42\u76f8\u540c\uff09</li> <li>\u53ef\u80fd\u5f39\u51fa\u7a97\u53e3 \u201cDesign is not completely mapped\u201d\uff0c\u9009\u62e9 \u201cYes\u201d \u7ee7\u7eed\u5373\u53ef</li> </ul> </li> </ul> <p>\u6839\u636e log \u4e2d\u7684\u8bb0\u5f55\u627e\u5230\u751f\u6210\u7684 Verilog \u6587\u4ef6\uff0c\u8def\u5f84\u4e3a <code>&lt;Workspace location&gt;/&lt;\u5de5\u7a0b\u540d&gt;/main/verilog</code>\u3002</p> <p>\u5176\u4e2d\uff0c\u5728 circuit \u76ee\u5f55\u4e0b\u7684 main.v \u6587\u4ef6\u4e2d\u5e94\u5f53\u5305\u542b\u5982\u4e0b\u5185\u5bb9\uff0c\u6ce8\u610f\u540e\u7eed\u5b9e\u9a8c\u8981\u6c42\u6a21\u5757\u540d\u548c\u7aef\u53e3\u540d\u5fc5\u987b\u548c\u7ed9\u51fa\u7684\u6837\u4f8b\u76f8\u540c\uff1a</p> <pre><code>module main( I0,\n             I1,\n             I2,\n             O );\n</code></pre> <p>\u6ce8\u610f</p> <p>\u9700\u8981\u5c06 circuit \u548c gates \u76ee\u5f55\u4e0b\u7684\u751f\u6210\u7684\u6240\u6709 Verilog \u6587\u4ef6\u62f7\u8d1d\u81f3\u672c\u4ed3\u5e93\u7684 <code>src/lab0-2/submit</code> \u76ee\u5f55\u4e0b\uff0c\u540e\u7eed\u5b9e\u9a8c\u4f1a\u7528\u5230\u3002</p> <p>\u4f7f\u7528 tree \u6307\u4ee4\u67e5\u770b src \u6587\u4ef6\u5939\u7ed3\u6784\uff0c\u5e94\u5f53\u5448\u73b0\u5982\u4e0b\u7ed3\u679c\uff1a <pre><code>.\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 lab0-2\n        \u251c\u2500\u2500 Makefile\n        \u2514\u2500\u2500 submit\n            \u251c\u2500\u2500 AND_GATE_3_INPUTS.v\n            \u251c\u2500\u2500 main.v\n            \u251c\u2500\u2500 OR_GATE_4_INPUTS.v\n            \u2514\u2500\u2500 readme.md\n</code></pre></p> <ul> <li>src: \u5b9e\u9a8c\u6e90\u4ee3\u7801</li> <li>src/lab0-2: lab0-2 \u5b9e\u9a8c\u7684\u6e90\u4ee3\u7801</li> <li>src/lab0-2/submit: lab0-2 \u5b9e\u9a8c\u9700\u8981\u540c\u5b66\u4eec\u5b9e\u73b0\u7684\u6e90\u4ee3\u7801\u5b58\u653e\u76ee\u5f55\uff0c\u5b9e\u9a8c\u7ed3\u675f\u8bf7\u63d0\u4ea4\u8fd9\u90e8\u5206\u4ee3\u7801</li> <li>src/lab0-2/Makefile: lab0-2 \u5b9e\u9a8c\u7684 makefile \u811a\u672c</li> </ul> <p>\u8bf7\u6839\u636e src/submit/readme.md \u7684\u6307\u793a\u4fee\u6539 AND_GATE_3_INPUTS.v \u548c OR_GATE_4_INPUTS.v \u6587\u4ef6\u4ee5\u6ee1\u8db3\u540e\u7eed\u9700\u8981\u3002</p> \u9644\uff1a\u4e00\u4e9b\u5e38\u89c1\u7684 Linux \u547d\u4ee4\u53c2\u8003 <p><code>$</code>\u5f00\u5934\u7684\u884c\u4ee3\u8868\u8f93\u5165\u7684\u6307\u4ee4\uff0c\u6ca1\u6709\u7684<code>$</code>\u7684\u884c\u4ee3\u8868\u6307\u4ee4\u6267\u884c\u7684\u7ed3\u679c\uff0c<code>#</code>\u540e\u7684\u5185\u5bb9\u4e3a\u6ce8\u91ca\u3002</p> <pre><code>$ pwd   # \u67e5\u770b\u5f53\u524d\u8def\u5f84\n$ cd &lt;path&gt; # \u5207\u6362\u8def\u5f84 \n# \u4f8b\uff1acd /tmp \u662f\u8fdb\u5165\u6839\u76ee\u5f55\u4e0b\u7684tmp\u6587\u4ef6\u5939\uff0c/\u4ee3\u8868\u6839\u76ee\u5f55\n# \u9664\u4e86\u4e0a\u9762\u7684\u7edd\u5bf9\u8def\u5f84\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\uff1a\n# \u4f8b\uff1acd .. \u5728linux\u4e2d\uff0c.\u4ee3\u8868\u5f53\u524d\u76ee\u5f55\uff0c..\u4ee3\u8868\u4e0a\u4e00\u7ea7\u7684\u7236\u6587\u4ef6\u5939\uff0c~\u4ee3\u8868\u7528\u6237Home\u76ee\u5f55\n$ ls &lt;path&gt; # \u663e\u793a\u6307\u5b9a\u8def\u5f84\u4e0b\u7684\u6587\u4ef6\n$ cp &lt;src file path&gt; &lt;dest path&gt;    # \u62f7\u8d1d\u6587\u4ef6\n# \u4f8b\uff1acp logisim_evolution_workspace/lab0.1/main/verilog/circuit/main.v sys1-sp23/src/lab0-2/sim/src\n# \u5176\u4e2d\uff0c\n#   logisim_evolution_workspace/lab0.1/main/verilog/circuit/main.v \u4e3a\u8981\u590d\u5236\u7684\u6587\u4ef6\u8def\u5f84\n#   sys1-sp23/src/lab0-2/sim/src \u4e3a\u76ee\u6807\u6587\u4ef6\u5939\u8def\u5f84\n</code></pre> <pre><code>$ pwd       # \u663e\u793a\u5f53\u524d\u8def\u5f84\n/home/&lt;your name&gt;\n$ ls        # \u67e5\u770b\u5f53\u524d\u8def\u5f84\u4e0b\u6240\u6709\u6587\u4ef6\nlab0.1.circ  logisim-evolution-3.8.0-all.jar  logisim_evolution_workspace  sys1-sp24\n# cp\u683c\u5f0f\uff1acp \u6307\u5b9a\u76ee\u5f55\u4e0b\u6587\u4ef6  \u76ee\u6807\u8def\u5f84\uff08\u4ed3\u5e93\u4e0b\u8981\u6c42\u76ee\u5f55\uff09\n$ cp logisim_evolution_workspace/lab0.1/main/verilog/circuit/main.v sys1-sp24/src/lab0-2/submit   \n# \u8fdb\u5165\u8def\u5f84\uff0c\u786e\u8ba4\u62f7\u8d1d\u5b8c\u6210\n$ cd sys1-sp24/src/lab0-2/submit\n$ ls        # \u8fd9\u91cc\u62f7\u8d1d\u7684\u6587\u4ef6\u662fmain.v\nmain.v\n# ~/\u8868\u793a\u7edd\u5bf9\u8def\u5f84\uff0c\u5373\u4e0d\u53d7\u5230\u524d\u9762\u5df2\u7ecf\u8fdb\u5165\u7684\u8def\u5f84\u7684\u5e72\u6270\uff1b\u8f93\u5165\u5b8c\u4e0d\u8981\u6309\u56de\u8f66\uff0c\u6309tab\u53ef\u4ee5\u663e\u793a\u8be5\u76ee\u5f55\u4e0b\u6587\u4ef6\u4f5c\u4e3a\u63d0\u793a\n$ cp ~/logisim_evolution_workspace/lab0.1/main/verilog/gates/\n# \u8fd9\u91cc\u662f\u6309tab\u4f5c\u4e3a\u63d0\u793a\u7684\u7ed3\u679c\nAND_GATE_3_INPUTS.v  OR_GATE_4_INPUTS.v\n#\u5df2\u7ecf\u5728\u8be5\u76ee\u5f55\u4e0b,\u53ef\u4ee5\u5728\u6700\u540e\u7528\u201c.\u201d\u6765\u79fb\u5165\u5f53\u524d\u8def\u5f84\n$ cp ~/logisim_evolution_workspace/lab0.1/main/verilog/gates/AND_GATE_3_INPUTS.v .\n\n# \u53ef\u4ee5\u6309\u65b9\u5411\u952e\u2191\u6765\u590d\u539f\u4e0a\u4e00\u6761\u6307\u4ee4\n# Tab\u53ef\u8d77\u5230\u63d0\u793a\u4f5c\u7528\uff0c\u53ef\u4ee5\u591a\u6309\u51e0\u6b21\u6765\u5c1d\u8bd5\n</code></pre> <p>\u5173\u4e8e verilog \u4e0e\u7535\u8def\u7684\u5173\u7cfb\uff0c\u89c1\u672c\u5b9e\u9a8c\u9644\u5f55</p>"},{"location":"lab0-2/#verilator","title":"Verilator \u4eff\u771f\u6d4b\u8bd5","text":"<p>\u7528 Verilog \u8bed\u8a00\u8bbe\u8ba1\u5b8c\u786c\u4ef6\u4e4b\u540e\uff0c\u6211\u4eec\u9700\u8981\u68c0\u6d4b\u786c\u4ef6\u529f\u80fd\u662f\u5426\u6b63\u786e\u3002\u4e00\u79cd\u65b9\u6cd5\u6211\u4eec\u76f4\u63a5\u7528\u7535\u5668\u5143\u4ef6\u642d\u5efa\u9700\u8981\u7684\u786c\u4ef6\uff0c\u7136\u540e\u7528\u793a\u6ce2\u5668\u3001\u63a5\u7ebf\u677f\u3001\u7535\u6e90\u3001\u7535\u7ebf\u68c0\u6d4b\u529f\u80fd\uff0c\u4f46\u65e0\u4e00\u8fd9\u4e2a\u6d4b\u8bd5\u7684\u8d44\u91d1\u548c\u65f6\u95f4\u6210\u672c\u662f\u5f88\u9ad8\u7684\uff0c\u5982\u679c\u6d4b\u8bd5\u5931\u8d25\u6392\u9664\u9519\u8bef\u4e5f\u662f\u5f88\u56f0\u96be\u7684\u3002</p> <p>\u6240\u4ee5\u6211\u4eec\u5e0c\u671b\u6709\u4e00\u79cd\u65b9\u6cd5\u53ef\u4ee5\u7528\u8ba1\u7b97\u673a\u6a21\u62df Verilog \u63cf\u8ff0\u7684\u903b\u8f91\u7535\u8def\u7684\u8fd0\u884c\uff0c\u7136\u540e\u68c0\u67e5\u6a21\u62df\u7684\u903b\u8f91\u7535\u8def\u8f93\u5165\u8f93\u51fa\u662f\u5426\u6b63\u786e\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u79f0\u4e4b\u4e3a\u4eff\u771f\u3002\u73b0\u5728\u6211\u4eec\u4ecb\u7ecd\u5982\u4f55\u7528 Verilator \u5de5\u5177\u8fdb\u884c\u4eff\u771f\u3002</p>"},{"location":"lab0-2/#_5","title":"\u73af\u5883\u914d\u7f6e","text":"<p>\u8fc7\u53bb Lab0-2 \u4f9d\u8d56\u7684\u4ee3\u7801\u5168\u90e8\u662f\u5728 src/lab0-2 \u6587\u4ef6\u5939\u4e0b\u7684\uff0c\u4f46\u4e3a\u4e86\u9632\u6b62\u90e8\u5206\u540c\u5b66\u7be1\u6539\u6211\u4eec\u7ed9\u51fa\u7684\u6d4b\u8bd5\u4ee3\u7801\uff0c\u4e5f\u4e3a\u4e86\u5e2e\u52a9\u540c\u5b66\u4eec\u5c06\u6ce8\u610f\u529b\u96c6\u4e2d\u5728\u81ea\u5df1\u7f16\u7a0b\u7684\u4ee3\u7801\u4e0a\uff0c\u6211\u4eec\u7279\u610f\u5c06\u540c\u5b66\u9700\u8981\u8bbe\u8ba1\u5b9e\u73b0\u7684\u4ee3\u7801\u548c\u6211\u4eec\u4e8b\u5148\u63d0\u4f9b\u7684\u5176\u4f59\u4ee3\u7801\u8fdb\u884c\u5206\u79bb\uff0c\u540c\u5b66\u4eec\u9700\u8981\u5b9e\u73b0\u7684\u4ee3\u7801\u4fdd\u7559\u5728 src/lab0-2\uff0c\u5176\u4f59\u4ee3\u7801\u88ab\u5b58\u653e\u5230\u5916\u90e8\u4f9d\u8d56\u4ed3\u5e93 sys-project\u3002</p> <p>\u8fd0\u884c\u4ee5\u4e0b\u6307\u4ee4\uff0c\u7136\u540e\u53ef\u4ee5\u5f97\u5230\u5982\u4e0b\u7684\u6587\u4ef6\u76ee\u5f55\uff1a</p> <p><pre><code>git submodule update --init repo/sys-project    // \u5c06 sys-project \u4ed3\u5e93\u540c\u6b65\u5230 repo/sys-project \u8def\u5f84\u4e0b\ngit checkout other                              // sys-project \u5207\u6362\u5230 other \u5206\u652f\ntree                                            // \u67e5\u770b\u5f53\u524d\u7684\u6587\u4ef6\u5939\u7ed3\u6784\n</code></pre> <pre><code>.\n\u251c\u2500\u2500 repo\n\u2502   \u2514\u2500\u2500 sys-project\n\u2502       \u2514\u2500\u2500 lab0-2\n\u2502           \u251c\u2500\u2500 sim\n\u2502           \u2502   \u2514\u2500\u2500 testbench.v\n\u2502           \u251c\u2500\u2500 syn\n\u2502           \u2502   \u251c\u2500\u2500 nexysa7.xdc\n\u2502           \u2502   \u2514\u2500\u2500 top.v\n\u2502           \u2514\u2500\u2500 tcl\n\u2502               \u2514\u2500\u2500 vivado.tcl\n\u2502\n</code></pre></p> <ul> <li>repo: submodule \u5916\u90e8\u4f9d\u8d56\u5e93\uff0c\u7528\u4e8e\u5b58\u653e sys1-sp24 \u4ed3\u5e93\u4ee5\u6765\u7684\u5176\u4ed6\u4ed3\u5e93<ul> <li>sys-project: \u6240\u4ee5\u662f sys1-sp24 \u7684 src \u4f9d\u8d56\u7684\u5176\u4ed6\u5b9e\u73b0\u63d0\u4f9b\u7684\u4ee3\u7801\uff0c\u8bf7\u4e0d\u8981\u624b\u52a8\u4fee\u6539\u91cc\u9762\u7684\u4ee3\u7801<ul> <li>lab0-2: \u5b9e\u9a8c\u4f9d\u8d56\u7684\u52a9\u6559\u63d0\u4f9b\u7684\u6e90\u4ee3\u7801<ul> <li>sim: \u4ec5\u7528\u4e8e\u4eff\u771f\u6d4b\u8bd5\u7684\u6e90\u4ee3\u7801</li> <li>syn: \u4ec5\u7528\u4e8e\u7efc\u5408\u4e0b\u677f\u7684\u6e90\u4ee3\u7801</li> <li>syn: \u7528\u4e8e\u7efc\u5408\u4e0b\u677f\u7684 vivado \u6267\u884c\u811a\u672c</li> </ul> </li> </ul> </li> </ul> </li> </ul>"},{"location":"lab0-2/#verilator_1","title":"verilator \u5b89\u88c5","text":"<p>\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c <code>sudo apt install verilator</code> \u6765\u5b89\u88c5 verilator \u5de5\u5177\uff0c\u4e0d\u8fc7\u8fd9\u4e2a\u76f4\u63a5\u4e0b\u8f7d\u5b89\u88c5\u7684 verilator \u5de5\u5177\u5bf9\u4e8e Verilog \u7684\u652f\u6301\u4e0d\u591f\u5168\u9762\uff0c\u6240\u4ee5\u5efa\u8bae\u624b\u52a8\u5b89\u88c5\u6700\u65b0\u7248\u672c\u3002</p> <p>\u8fd0\u884c\u5982\u4e0b\u6307\u4ee4\uff0c\u6240\u4ee5 sys1-sp24 \u4f1a\u81ea\u52a8\u62c9\u53d6\u8f83\u65b0\u7684 verilator \u6e90\u4ee3\u7801\uff0c\u7136\u540e\u6267\u884c makefile \u7684\u811a\u672c\u7f16\u8bd1\u5b89\u88c5 verilator\uff0c\u8fd9\u4e2a\u7248\u672c\u7684 verilator \u6682\u65f6\u53ef\u4ee5\u6ee1\u8db3\u540e\u7eed\u5168\u90e8\u7684\u4eff\u771f\u9700\u6c42\uff1a</p> <pre><code>git submodule update --init repo/verilator\ncd repo\nmake verilator\n</code></pre> <p>\u5982\u679c repo/verilator \u4ed3\u5e93 clone \u5b9e\u73b0\u7f51\u7edc\u8fde\u63a5\u5931\u8d25\u53ef\u4ee5\u8003\u8651\u79d1\u5b66\u4e0a\u7f51</p> <p><code>make verilator</code> \u5982\u679c\u51fa\u73b0\u7c7b\u4f3c\u4e8e <code>autoconf: not found, g++: command not found</code> \u7b49\u62a5\u9519\u8bf4\u660e\u5f53\u524d\u73af\u5883\u7f3a\u5c11\u4e00\u4e9b\u5de5\u5177\uff0c\u8003\u8651\u5148\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5\uff1a</p> <pre><code>sudo apt-get install git perl python3 make autoconf g++ flex bison ccache\nsudo apt-get install autoconf automake libtool\nsudo apt-get install help2man\n</code></pre>"},{"location":"lab0-2/#_6","title":"\u4eff\u771f\u6fc0\u52b1\u6587\u4ef6\u4ecb\u7ecd","text":"<p>\u6211\u4eec\u4f7f\u7528\u7684\u662f\u5f00\u6e90\u7684 RTL \u4eff\u771f\u5668 Verilator\uff0c\u5b83\u4f1a\u5c06\u786c\u4ef6\u4ee3\u7801\u8f6c\u5316\u6210\u4e3b\u673a\u53ef\u6267\u884c\u7684 C++ \u6a21\u578b\uff0c\u7136\u540e\u8fd0\u884c C++ \u7a0b\u5e8f\u8fdb\u884c\u7535\u8def\u6a21\u62df\u3002\u6b64\u5916\u5b83\u8fd8\u53ef\u4ee5\u5e2e\u6211\u4eec\u68c0\u67e5 Verilog \u7684\u8bed\u6cd5\u9519\u8bef\u3001\u63a5\u7ebf\u9519\u8bef\u3001\u8bed\u4e49\u9519\u8bef\u7b49\uff0c\u5e2e\u52a9\u6211\u4eec\u5728\u7f16\u8bd1\u671f\u95f4\u5c3d\u53ef\u80fd\u591a\u7684\u6392\u9664 bug\u3002</p> <p>\u6211\u4eec\u4f7f\u7528\u7684\u4eff\u771f\u6fc0\u52b1\u6587\u4ef6\u4f4d\u4e8e<code>repo/sys-project/lab0-2/sim/testbench.v</code>\uff0c\u5176\u57fa\u672c\u7684\u4eff\u771f\u6fc0\u52b1\u6a21\u578b\u5982\u4e0b\uff1a</p> <pre><code>module Testbench;\n\n    reg I0,I1,I2;\n    wire O;\n\n    initial begin\n        // \u8bbe\u7f6e\u8f93\u5165\u7684\u503c\n        I0 = 1'b0; I1 = 1'b0; I2 = 1'b0;\n        // \u7b49\u5f85 5 \u4e2a\u5355\u4f4d\u65f6\u95f4\u4fee\u6539\u8f93\u5165\u6fc0\u52b1\u7684\u503c\n        #5;\n        I0 = 1'b0; I1 = 1'b0; I2 = 1'b1;\n        ...\n        #5;\n        // \u7ed3\u675f\u4eff\u771f\n        $finish;\n    end\n\n    main dut( \n        .I0(I0),\n        .I1(I1),\n        .I2(I2),\n        .O(O) \n    );\n    // \u88ab\u4eff\u771f\u7684\u6a21\u5757\uff0c\u63a5\u53d7\u4e0d\u540c\u7684\u8f93\u5165\uff0c\u7136\u540e\u89c2\u5bdf\u8f93\u51fa\u662f\u5426\u6b63\u786e\n\n    `ifdef VERILATE\n        initial begin\n            // \u751f\u6210\u6ce2\u5f62\u6587\u4ef6 build/verilator/Testbench.vcd\n            $dumpfile({`TOP_DIR, \"/Testbench.vcd\"});\n            //\u8bb0\u5f55 dut \u6a21\u5757\u4ee5\u53ca\u5185\u90e8\u6a21\u5757\u7684\u7ebf\u8def\u4fe1\u53f7\u53d8\u5316\n            $dumpvars(0, dut);\n            // \u5f00\u59cb\u8bb0\u5f55\u4fe1\u53f7\n            $dumpon;\n        end\n    `endif\n\nendmodule\n</code></pre> <p>reg \u662f\u5bc4\u5b58\u5668\u7684\u610f\u601d\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e00\u4e2a\u80fd\u63d0\u4f9b\u56fa\u5b9a\u8f93\u51fa\u7684\u53d8\u91cf\u3002\u5982\u679c\u6211\u4eec\u5ffd\u7565 <code>initial begin ... end</code> \u5757\u4e2d\u7684\u5185\u5bb9\u53ef\u4ee5\u770b\u5230\u8fd9\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u7535\u8def\uff0c\u4e09\u4e2a\u5bc4\u5b58\u5668 I0\u3001I1\u3001I2 \u63d0\u4f9b\u8f93\u51fa\u7ed9\u9700\u8981\u6d4b\u8bd5\u7684 main \u6a21\u5757\uff0c\u7136\u540e main \u6a21\u5757\u8f93\u51fa\u5230\u7ebf\u8def O\u3002</p> <p>\u4e3a\u4e86\u68c0\u9a8c main \u6a21\u5757\u662f\u5426\u529f\u80fd\u6b63\u786e\uff0c\u6211\u4eec\u9700\u8981\u904d\u5386 I0\u3001I1\u3001I2 \u4ece 000 \u5230 111 \u7684 8 \u4e2a\u8f93\u5165\u7ec4\u5408\uff0c\u7136\u540e\u4f9d\u6b21\u68c0\u67e5\u5bf9\u5e94\u7684 O \u8f93\u51fa\u662f\u4e0d\u662f\u548c Lab0-1 \u7684\u771f\u503c\u8868\u7684\u5185\u5bb9\u4fdd\u6301\u4e00\u81f4\u3002</p> <p><code>initial</code> \u5757\u53ef\u4ee5\u7ed9 reg \u5bc4\u5b58\u5668\u8d4b\u503c\uff0c\u8ba9\u5b83\u4eec\u8f93\u51fa\u9700\u8981\u7684\u503c\uff0c\u6240\u4ee5\uff1a</p> <ul> <li>\u5728 inital \u5757\u5185\u7528 <code>I0 = 1'b0; I1 = 1'b0; I2 = 1'b0;</code> \u5c06 I0\u3001I1\u3001I2 \u5206\u522b\u8d4b\u503c\u4e3a\u4f4e\u7535\u5e73<ul> <li>\u7136\u540e main \u63a5\u6536\u4e09\u4e2a\u4f4e\u7535\u5e73\u8f93\u5165\u4eff\u771f\u6a21\u62df\u5f97\u5230\u5bf9\u5e94\u7684\u8f93\u51fa O</li> </ul> </li> <li>\u4e4b\u540e\u6211\u4eec\u7528 <code>#5;</code> \u8bed\u53e5\u5ef6\u8fdf 5 \u4e2a\u65f6\u95f4\u5355\u4f4d</li> <li>\u7136\u540e\u7528 <code>I0 = 1'b0; I1 = 1'b0; I2 = 1'b1;</code> \u4fee\u6539\u8f93\u5165\u4e3a 001 \u8fdb\u884c\u7b2c\u4e8c\u7ec4\u6d4b\u8bd5</li> <li>\u2026\u2026\u4f9d\u6b21\u7c7b\u63a8\u76f4\u5230 8 \u7ec4\u6d4b\u8bd5\u90fd\u6d4b\u8bd5\u5b8c\u6bd5</li> </ul> <p>\u4e4b\u6240\u4ee5\u8981\u5ef6\u8fdf 5 \u4e2a\u65f6\u95f4\u5355\u4f4d\u662f\u4e3a\u4e86\u8ba9 I0\u3001I1\u3001I2 \u5728\u7ed9\u5b9a\u8f93\u5165\u4e0b\u7684\u8f93\u51fa\u53ef\u4ee5\u7ef4\u6301 5 \u4e2a\u5355\u4f4d\u7684\u56fa\u5b9a\u7535\u5e73\uff0c\u4fbf\u4e8e\u901a\u8fc7\u6ce2\u5f62\u89c2\u5bdf O \u7684\u8f93\u51fa\u7535\u5e73\u3002\u5982\u679c\u7acb\u523b\u4fee\u6539 I0\u3001I1\u3001I2 \u7684\u8f93\u51fa\u4f1a\u5bfc\u81f4 O \u7684\u503c\u7acb\u523b\u53d8\u6362\uff0c\u4f7f\u5f97\u4e0a\u4e00\u7ec4\u8f93\u5165\u5bf9\u5e94\u7684\u8f93\u51fa\u65e0\u6cd5\u89c2\u5bdf\u5f97\u5230\u3002</p> <p>\u6700\u540e\u7528 <code>$finish;</code> \u8868\u793a\u4eff\u771f\u7ed3\u675f\u3002</p> <p>\u7b2c\u4e8c\u4e2a initial \u6a21\u5757\u4e2d\u7684 $dumpfile\u3001$dumpvars\u3001$dumpon \u7b49\u7528\u4e8e\u5c06\u6a21\u5757\u5185\u90e8\u7684\u6ce2\u5f62\u5bfc\u51fa\u5230\u6307\u5b9a\u6587\u4ef6\u4e2d\u3002Verilog \u9664\u4e86\u652f\u6301\u786c\u4ef6\u63cf\u8ff0\u3001\u7ebf\u8def\u8fde\u63a5\u4e4b\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u7279\u6b8a\u7684 $func \u51fd\u6570\u6765\u5b9e\u73b0\u7279\u6b8a\u7684\u8c03\u8bd5\u529f\u80fd\u3002</p>"},{"location":"lab0-2/#verilog_2","title":"\u4eff\u771f Verilog \u8bbe\u8ba1","text":"<p>\u8fdb\u5165\u5230\u672c\u4ed3\u5e93\u7684 <code>src/lab0-2</code> \u76ee\u5f55\u4e0b\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u9996\u5148\u5b89\u88c5\u5b9e\u9a8c\u6240\u9700\u7684\u4f9d\u8d56\uff0c\u7136\u540e\u5c06 Verilog \u8f6c\u6362\u6210 C++ \u6a21\u578b\u5e76\u6267\u884c\uff0c\u6700\u540e\u4f7f\u7528 gtkwave \u67e5\u770b\u4eff\u771f\u671f\u95f4\u4ea7\u751f\u7684\u6ce2\u5f62\uff08\u4fdd\u5b58\u5728 lab0-2/build/verilate/Testbench.vcd \u4e2d\uff09\uff1a</p> <pre><code>sudo apt install g++ make gtkwave perl-doc\nmake\nmake wave\n</code></pre> <p>gtkwave \u542f\u52a8\u540e\uff0c\u9996\u5148\u4ece\u5de6\u4fa7\u4f9d\u6b21\u5c55\u5f00\u6211\u4eec\u7684\u8bbe\u8ba1\uff0c\u7136\u540e\u9009\u4e2d main \u6a21\u5757\uff0c\u4ece\u4e0b\u65b9\u7684\u7a97\u53e3\u4e2d\u5c06\u6211\u4eec\u611f\u5174\u8da3\u7684 I0\u3001I1\u3001I2\u3001O \u4fe1\u53f7\u62d6\u52a8\u5230\u53f3\u4fa7\u7684 Signals \u7a97\u53e3\uff0c\u8fd9\u6837\u5b83\u4eec\u6211\u4eec\u5c31\u53ef\u4ee5\u5728\u7a97\u53e3\u4e2d\u67e5\u770b\u5b83\u4eec\u5728\u4eff\u771f\u8fc7\u7a0b\u4e2d\u7684\u503c\u4e86\u3002\u6211\u4eec\u53ef\u4ee5\u4eba\u5de5\u5bf9\u7167 I1\u3001I2\u3001I3\u3001O \u7684\u8f93\u5165\u8f93\u51fa\uff0c\u770b\u662f\u4e0d\u662f\u548c Lab0-1 \u7684\u771f\u503c\u8868\u4fdd\u6301\u4e00\u81f4\u3002</p> <p>\u5982\u679c wsl \u5185\u7684 GTKWave \u4e0d\u7a33\u5b9a\uff0c\u53ef\u4ee5\u5728 Windows \u672c\u673a\u5185\u5b89\u88c5\u67e5\u770b\u6ce2\u5f62</p> <p>\uff08\u6682\u65f6\u5148\u6ce8\u91ca\u6389 Makefile \u7684 <code>VIVADO_SETUP        :=  $(error \"please set your vivado's path\")</code>\uff09</p>"},{"location":"lab0-2/#vivado","title":"Vivado \u4f7f\u7528","text":"<p>FPGA \u662f Field Programmable Gate Array\uff0c\u662f\u4e00\u5757\u5c0f\u578b\u7684\u53ef\u7f16\u7a0b\u5e8f\u5217\uff0c\u91cc\u9762\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u53ef\u4ee5\u7ec4\u88c5\u7684\u7535\u5668\u5143\u4ef6\uff0c\u8bf8\u5982 LUT\uff08\u67e5\u627e\u8868\uff09\u3001MUX\uff08\u9009\u62e9\u5668\uff09\u3001FF\uff08\u5bc4\u5b58\u5668\uff09\u3001BRAM\uff08\u5757\u5b58\u50a8\u5668\uff09\u3001\u52a0\u6cd5\u5668\u3001\u4e58\u6cd5\u5668\u7b49\u3002</p> <p>\u6211\u4eec\u4eff\u771f\u9a8c\u8bc1\u8bbe\u8ba1\u7684\u786c\u4ef6\u6b63\u786e\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u7740\u624b\u5b9e\u73b0\u6211\u4eec\u7684\u786c\u4ef6\u4e86\u3002\u6211\u4eec\u53ea\u9700\u8981\u5c06 verilog \u8f6c\u6362\u4e3a\u7535\u8def\u8bbe\u8ba1\u683c\u5f0f bitstream \u7136\u540e\u53d1\u9001\u7ed9 FPGA \u82af\u7247\uff0cFPGA \u82af\u7247\u5c31\u4f1a\u6309\u7167 bitstream \u7684\u6307\u793a\u5c06\u8fd9\u4e9b\u7535\u5668\u5143\u4ef6\u7ec4\u88c5\u8d77\u6765\uff0c\u5f97\u5230\u7b49\u6548\u529f\u80fd\u7684\u7535\u8def\u3002</p>"},{"location":"lab0-2/#vivado_1","title":"Vivado \u4e0b\u677f\u5de5\u4f5c\u6d41\u7a0b","text":"<p>Vivado \u7684\u4f5c\u7528\u5c31\u662f\u5c06\u7535\u8def\u4ece verilog \u7684\u5b57\u7b26\u4e32\u63cf\u8ff0\u5f62\u5f0f\u8f6c\u6362\u4e3a FPGA \u53ef\u4ee5\u7406\u89e3\u7684 bitstream \u7684\u63cf\u8ff0\u5f62\u5f0f\u3002\u4e3a\u4e86\u8ba9\u5927\u5bb6\u5bf9 vivado \u7684\u5de5\u4f5c\u6d41\u6709\u4e00\u4e2a\u6bd4\u8f83\u5177\u4f53\u7684\u4e86\u89e3\uff0c\u6211\u4eec\u6765\u7b80\u8981\u5206\u6790\u4e00\u4e0b vivado \u662f\u5982\u4f55\u628a verilog \u4e00\u6b65\u6b65\u8f6c\u5316\u4e3a bitstream \u7684\u3002</p> Step 1. \u4e0b\u8f7d\u5b89\u88c5 vivado <p>\u8fdb\u5165 Xilinx \u5b98\u7f51\u4e0b\u8f7d vivado2022.2 \u7248\u672c\uff0c\u5b89\u88c5\u8bf7\u53c2\u8003\u73af\u5883\u914d\u7f6e\u6307\u5357\u3002</p> Step 2. \u521b\u5efa vivado \u5de5\u7a0b <p>\u9996\u5148\u542f\u52a8 vivado\uff0c\u65b0\u5efa\u5de5\u7a0b\uff0c\u547d\u540d\u4e3a sys1-lab0\u3002</p> <p></p> <p>\u9009\u62e9\u65e0\u4ee3\u7801\u7684RTL\u5de5\u7a0b\u3002</p> <p></p> <p>\u5f00\u53d1\u677f\u578b\u53f7\u4e0b\u65b9\u641c\u7d22\u5e76\u9009\u62e9 xc7a100tcsg324-1\u3002</p> <p></p> <p>\u70b9\u51fb Add Source \u9009\u62e9 Add or create design sources\uff0c\u5c06 /src/lab0-2/submit \u7684 verilog \u6587\u4ef6\u6dfb\u52a0\u8fdb\u5de5\u7a0b\u3002</p> <p></p> <p></p> <p>Design Sources \u81ea\u52a8\u663e\u793a\u4e86\u6211\u4eec\u7684 verilog \u786c\u4ef6\u6a21\u5757\u7684\u5c42\u6b21\u3002\u6700\u9876\u5c42\u7684\u6a21\u5757\u662f main \u6a21\u5757\uff0c\u5b83\u5185\u90e8\u6709 5 \u4e2a\u5b50\u6a21\u5757\u5206\u522b\u662f GATE_1 - GATE_5\uff0c\u6a21\u5757\u7c7b\u578b\u5206\u522b\u662f AND_GATE_3_INPUTS \u548c OR_GATE_4_INPUTS\u3002</p> <p></p> Step 3. \u7efc\u5408\uff08synthensis\uff09 <p>\u53f3\u952e\u9700\u8981\u7efc\u5408\u7684\u6a21\u5757\uff0c\u7136\u540e\u9009\u62e9 Set as Top\uff0c\u8be5\u6a21\u5757\u5c31\u4f1a\u53d8\u4e3a\u9876\u5c42\u6a21\u5757\uff0c\u4e4b\u540e\u7684 synthensis \u64cd\u4f5c\u53ea\u9488\u5bf9\u8be5\u6a21\u5757\u548c\u5b83\u5185\u90e8\u7684\u6a21\u5757\u8fdb\u884c\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u8bbe\u7f6e AND_GATE_3_INPUTS \u4e3a\u9876\u5c42\u6a21\u5757\u5219\u53ea\u7efc\u5408 AND3 \u7535\u8def\uff0c\u800c\u4e0d\u7efc\u5408 OR4 \u7535\u8def\u548c main \u7535\u8def\u3002</p> <p></p> <p>\u70b9\u51fb\u5de6\u4fa7 SYNTHENSIS &gt; Run Sythensis\uff0c\u7136\u540e\u70b9\u51fb OK \u5c31\u53ef\u4ee5\u5f00\u59cb\u7535\u8def\u7684\u7efc\u5408\u3002</p> <p></p> <p>\u7efc\u5408\u8fc7\u7a0b\u5927\u81f4\u5206\u4e3a\u4e24\u6b65\uff1a</p> <ul> <li>\u7b2c\u4e00\u6b65\u5c06 Verilog \u63cf\u8ff0\u7684\u7535\u8def\u8f6c\u5316\u4e3a\u5b9e\u73b0\u65e0\u5173\u7684\u4e0e\u6216\u975e\u903b\u8f91\u8868\u8fbe\u5f0f\u7684\u5f62\u5f0f\uff0c\u53ef\u4ee5\u7b80\u5355\u5730\u8ba4\u4e3a\u8f6c\u6362\u4e3a\u4ec5\u7531\u4e0e\u6216\u975e\u95e8\u7ec4\u6210\u7684\u7b80\u5355\u7535\u8def</li> <li>\u7b2c\u4e8c\u6b65\u5c06\u5b9e\u73b0\u65e0\u5173\u7684\u4e0e\u6216\u975e\u95e8\u7535\u8def\u8f6c\u6362\u4e3a FPGA \u5b9e\u73b0\u76f8\u5173\u7684\u7535\u8def</li> </ul> <p>\u4f8b\u5982 FPGA \u63d0\u4f9b\u4e86 LUT3 \u7535\u5668\u5143\u4ef6\uff0c\u6539\u7535\u5668\u5143\u4ef6\u6709\u4e00\u4e2a 8 bit \u7684\u53ef\u7f16\u7a0b\u6570\u7ec4 array\uff0cFPGA \u53ef\u4ee5\u6839\u636e\u9700\u8981\u5728\u6570\u7ec4\u5185\u586b\u5165\u9700\u8981\u7684 0\u30011 \u503c\u3002LUT3 \u63a5\u6536\u8f93\u5165 <code>I={I2,I1,I0}</code> \u4f5c\u4e3a\u7d22\u5f15\uff0c\u7136\u540e\u5c06\u6570\u7ec4\u4e2d\u7684\u7b2c I \u4f4d\u7684\u503c <code>array[I]</code> \u4f5c\u4e3a O \u7684\u8f93\u51fa\u3002</p> <p></p> <p>\u6211\u4eec\u53ef\u4ee5\u56de\u5fc6\u4e00\u4e0b main \u6a21\u5757\u5bf9\u5e94\u7684\u771f\u503c\u8868\uff0c\u8981\u6c42\u8f93\u5165 <code>I={I2,I1,I0}</code> \u5219\u8f93\u51fa\u4e3a <code>table[I]</code> \u7684\u503c\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u5c06\u771f\u503c\u8868\u4e2d\u5bf9\u5e94\u7684\u8f93\u51fa\u503c\u4f9d\u6b21\u586b\u5165 LUT3 \u5c31\u53ef\u4ee5\u5f97\u5230\u548c main \u6a21\u5757\u8f93\u5165\u8f93\u51fa\u5173\u7cfb\u76f8\u540c\u7684\u7535\u8def\uff0c\u6362\u53e5\u8bdd\u8bf4\u8fd9\u4e2a LUT3 \u7535\u8def\u7b49\u4ef7\u4e8e\u6211\u4eec\u8bbe\u8ba1\u7684 main \u7535\u8def\uff0c\u53ef\u4ee5\u7528\u8fd9\u4e2a LUT3 \u7535\u8def\u5b9e\u73b0\u6211\u4eec\u8bbe\u8ba1\u7684 main \u7535\u8def\u3002</p> <p></p> <p>sythensis \u5b8c\u6bd5\u540e\u70b9\u51fb SYNTHENSIS &gt; Sechematic \u5373\u53ef\u67e5\u770b\u7efc\u5408\u5f97\u5230\u7684\u7535\u8def\u56fe\u5b9e\u73b0\uff0c\u53ef\u4ee5\u770b\u5230 main \u6a21\u5757\u6700\u540e\u786e\u5b9e\u88ab\u7efc\u5408\u6210\u4e86\u4e00\u4e2a FPGA \u7684 LUT3 \u7535\u8def\u3002</p> <p></p> Step 4. \u8bbe\u7f6e\u8f93\u5165\u8f93\u51fa\u5f15\u811a <p>\u867d\u7136\u6211\u4eec\u5f97\u5230\u4e86 main \u6a21\u5757\u7684\u7535\u8def\u8bbe\u8ba1\uff0c\u4f46\u662f\u5728 FPGA \u677f\u5b50\u4e2d\u7528 LUT3 \u7535\u5668\u5143\u4ef6\u7ec4\u4ef6\u8fd9\u4e2a\u7535\u8def\u662f\u6ca1\u6709\u610f\u4e49\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u4eba\u65e2\u4e0d\u80fd\u63a7\u5236 main \u7684\u8f93\u5165\uff0c\u4e5f\u4e0d\u80fd\u770b\u5230 main \u7684\u8f93\u51fa\u3002\u8fd9\u5c31\u597d\u6bd4\u6211\u4eec\u6709\u4e00\u53f0\u7535\u8111\u4f46\u5b83\u65e2\u6ca1\u6709\u9f20\u6807\u952e\u76d8\uff0c\u4e5f\u6ca1\u6709\u663e\u793a\u5c4f\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u7ed9 main \u7535\u8def\u63d0\u4f9b\u4eba\u53ef\u4ee5\u63a7\u5236\u7684\u8f93\u5165\u8f93\u51fa\u3002</p> <p>\u70b9\u51fb Add Sources &gt; Add or create design sources &gt; Add Files \u5c06 repo/sys-project/lab0-2/syn/top.v \u52a0\u5165\u5de5\u7a0b\u3002</p> <p>\u8be5\u6a21\u5757\u8f93\u5165\u4e3a SW0\u3001SW1\u3001SW2\uff0c\u8f93\u51fa\u4e3a LED0\uff0c\u7136\u540e\u7528 SW0\u3001SW1\u3001SW2 \u4e3a main \u63d0\u4f9b\u8f93\u5165\uff0c\u7528 LED0 \u63a5\u6536 main \u7684\u8f93\u51fa\u3002</p> <pre><code>module top(\n    input SW0,\n    input SW1,\n    input SW2,\n    output LD0\n    );\n\n    main ldut( \n        .I0(SW0),\n        .I1(SW1),\n        .I2(SW2),\n        .O(LD0) \n    );\nendmodule\n</code></pre> <p>\u7136\u540e\u70b9\u51fb Add Source &gt; Add and create constraints \u5c06 repo/sys-project/lab0-2/syn/nexysa7.xdc \u5f15\u811a\u7ea6\u675f\u6587\u4ef6\u52a0\u5165\u5de5\u7a0b\u3002</p> <p>\u6211\u4eec\u7684 Nexysa7 \u5f00\u53d1\u677f\u9664\u4e86\u6838\u5fc3\u7684 FPGA \u82af\u7247\u5916\uff0c\u8fd8\u6709\u5f88\u591a\u914d\u5408\u4f7f\u7528\u7684 IO \u5916\u8bbe\u6bd4\u5982\u5f00\u5173\u3001LED \u706f\u3001\u6309\u94ae\u7b49\uff0c\u5b83\u4eec\u901a\u8fc7\u4e3b\u677f\u7ebf\u8def\u548c FPGA \u7684\u6307\u5b9a\u5f15\u811a\u76f8\u8fde\u4e3a FPGA \u82af\u7247\u63d0\u4f9b\u8f93\u5165\u8f93\u51fa\u3002</p> <p></p> <p>\u901a\u8fc7\u67e5\u9605 Nexysa7 \u624b\u518c\u53ef\u4ee5\u770b\u5230\u5f00\u5173 SW0-SW15 \u7684\u8f93\u5165\u8fde\u63a5\u5230\u4e86 FPGA \u82af\u7247\u7684 J15-V10 \u5f15\u811a\uff0c\u5f53\u5f00\u5173\u6253\u5f00\u65f6\u5bf9\u5e94\u7684\u82af\u7247\u5f15\u811a\u8f93\u5165\u9ad8\u7535\u5e73\uff0c\u53cd\u4e4b\u8f93\u5165\u4f4e\u7535\u5e73\uff1bFPGA \u82af\u7247\u7684 H17-V11 \u7684\u8f93\u51fa\u8fde\u63a5\u5230 LED \u706f LD0-LD15\uff0c\u5f53\u8f93\u51fa\u9ad8\u7535\u5e73\u65f6 LED \u706f\u4eae\u8d77\uff0c\u53cd\u4e4b LED \u706f\u7184\u706d\u3002</p> <p></p> <p>\u73b0\u5728\u6211\u4eec\u5e0c\u671b\u7528\u5f00\u5173 SW0-SW2 \u5f97\u8f93\u5165\u4f5c\u4e3a\u6211\u4eec top \u6a21\u5757\u7684 SW0-SW2 \u63a5\u53e3\u7684\u8f93\u5165\uff0c\u5e0c\u671b top \u6a21\u5757\u7684\u8f93\u51fa LED0 \u53d1\u9001\u5230 LED \u706f LD0 \u4e0a\uff0c\u4e8e\u662f\u6211\u4eec\u5728 nexysa7.xdc \u6587\u4ef6\u4e2d\u6307\u5b9a\u82af\u7247\u5916\u90e8\u8f93\u5165\u8f93\u51fa\u5f15\u811a\u548c\u9876\u5c42 top \u6a21\u5757\u7684\u8f93\u5165\u8f93\u51fa\u7684\u8fde\u63a5\u5173\u7cfb\u3002</p> <pre><code>## IO\nset_property PACKAGE_PIN {J15} [get_ports {SW0}]\n# \u5c06\u9876\u5c42\u6a21\u5757\u7684\u7aef\u53e3 SW0 \u548c\u82af\u7247\u7684 J15 \u5f15\u811a\u7ed1\u5b9a\nset_property IOSTANDARD {LVCMOS33} [get_ports {SW0}]\n# \u5f15\u811a\u7684\u9a71\u52a8\u7535\u5e73\u4e3a 3.3 V\nset_property PACKAGE_PIN {L16} [get_ports {SW1}]\nset_property IOSTANDARD {LVCMOS33} [get_ports {SW1}]\nset_property PACKAGE_PIN {M13} [get_ports {SW2}]\nset_property IOSTANDARD {LVCMOS33} [get_ports {SW2}]\nset_property PACKAGE_PIN {H17} [get_ports {LD0}]\nset_property IOSTANDARD {LVCMOS33} [get_ports {LD0}]\n</code></pre> <p>\u65e2\u7136\u6211\u4eec\u73b0\u5728\u4ee5 top \u6a21\u5757\u4e3a\u9876\u5c42\u6a21\u5757\uff0c\u6240\u4ee5\u53f3\u952e top\uff0c\u9009\u62e9 Set as top\uff0c\u5c06 top \u6a21\u5757\u8f6c\u6362\u4e3a\u9876\u5c42\u6a21\u5757\uff0c\u7136\u540e\u91cd\u65b0 sythensis\u3002</p> Step 5. \u6784\u5efa\uff08implementation\uff09 <p>\u901a\u8fc7 synthensis \u6b65\u9aa4\u6211\u4eec\u7528 FPGA \u53ef\u4ee5\u63d0\u4f9b\u7684\u8d44\u6e90\u642d\u5efa\u4e86 top \u7535\u8def\uff0c\u7136\u540e\u901a\u8fc7 implementation \u5c06\u8fd9\u4e9b\u8d44\u6e90\u548c\u8fde\u7ebf\u6620\u5c04\u5230 FPGA \u771f\u5b9e\u7684\u7535\u5668\u5143\u4ef6\u4e0a\u3002</p> <p>\u70b9\u51fb\u5de6\u4fa7 IMPLEMENTAION &gt; Run Implementation\uff0c\u7136\u540e\u70b9\u51fb OK \u5c31\u53ef\u4ee5\u5f00\u59cb\u7535\u8def\u7684\u6784\u5efa\uff1a</p> <p></p> <p>\u6267\u884c\u5b8c\u6bd5\u540e\u70b9\u51fb\u5f39\u7a97\u7684 OK \u6765 Open Implementation Design \u5f97\u5230\u6700\u540e FPGA \u7684\u5e03\u7ebf\u60c5\u51b5\uff1a</p> <p> </p> <p>\u6211\u4eec\u6765\u770b\u5e03\u7ebf\u7684\u7ec6\u8282\uff1a</p> <ol> <li>\u5f00\u5173\u3001LED \u706f\u5916\u8bbe\u8fde\u63a5\u7684\u82af\u7247 IO \u5f15\u811a\u914d\u5957\u7684 IO buffer \u88ab\u5bf9\u5e94\u7684\u542f\u7528\uff0c\u7528\u4e8e\u63a5\u6536\u5f00\u5173\u7684\u8f93\u5165\u548c\u53d1\u9001 LED \u706f\u7684\u8f93\u51fa</li> <li>top \u6a21\u5757\u7684 LUT3 \u7535\u8def\u88ab\u5206\u914d\u5230\u4e86 FPGA \u5185\u90e8\u7684\u4e00\u5757 LUT6 \u7535\u5668\u5143\u4ef6\uff08\u539f\u7406\u548c LUT3 \u4e00\u81f4\uff0c\u4f46\u662f\u5185\u90e8\u6570\u7ec4\u662f 64\uff09\u4e0a</li> <li>\u8fd8\u6709\u4ece IO \u8f93\u5165\u8f93\u51fa\u5230 LUT6 \u8f93\u5165\u8f93\u51fa\u7684\u4e00\u4e9b\u8fde\u7ebf\uff0c\u56fe\u4e0a\u6ca1\u6709\u4f53\u73b0</li> </ol> <p></p> <p>\u6240\u4ee5 implementation \u4e3b\u8981\u7684\u4efb\u52a1\u662f\uff1a</p> <ol> <li>\u542f\u7528 IO \u76f8\u5173\u7684\u5f15\u811a buffer</li> <li>\u5c06\u9876\u5c42\u6a21\u5757 synthensis \u5f97\u5230\u7684\u7535\u6c14\u5143\u4ef6\u6620\u5c04\u5230 FPGA \u82af\u7247\u7684\u7269\u7406\u8d44\u6e90\uff0c\u8bbe\u7f6e LUT6 \u5185\u90e8\u7684 array \u7684\u503c</li> <li>\u5c06 IO buffer\u3001\u542f\u7528\u7684\u7269\u7406\u8d44\u6e90\u8fde\u63a5\u8d77\u6765</li> <li>\u5bf9\u7269\u7406\u8d44\u6e90\u505a\u9002\u5f53\u7684\u4f18\u5316\uff0c\u5220\u9664\u591a\u4f59\u7684\u7269\u7406\u8d44\u6e90\uff0c\u5408\u5e76\u53ef\u91cd\u7528\u7684\u7269\u7406\u8d44\u6e90\u7b49\uff0c\u4fee\u6539\u7269\u7406\u8d44\u6e90\u7684\u5e03\u5c40\u6539\u5584\u7535\u6c14\u7279\u6027</li> </ol> Step 6. \u751f\u6210\u6bd4\u7279\u6d41\uff08gerenate bitstream\uff09 <p>implementation \u5df2\u7ecf\u5f97\u5230\u4e86 FPGA \u5e03\u7ebf\u7684\u5168\u90e8\u7ec6\u8282\uff0c\u73b0\u5728\u6211\u4eec\u9700\u8981\u5c06\u5e03\u7ebf\u7ec6\u8282\u6253\u5305\u4e3a\u7279\u5b9a\u683c\u5f0f\u7684 bitstream \u6587\u4ef6\uff0c\u7136\u540e\u53d1\u9001\u7ed9 FPGA \u82af\u7247\uff0c\u82af\u7247\u5c31\u4f1a\u81ea\u52a8\u6309\u7167 bitstream \u6307\u5b9a\u7684\u65b9\u5f0f\u8fdb\u884c\u8d44\u6e90\u7684\u7ec4\u88c5\u3002</p> <p>bitstream \u9700\u8981\u5305\u542b\u7684\u5185\u5bb9\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a</p> <ol> <li>\u9700\u8981\u88ab\u542f\u7528\u7684 IO \u5f15\u811a</li> <li>\u7269\u7406\u8d44\u6e90\u8f93\u5165\u8f93\u51fa\u4e4b\u95f4\u7684\u8fde\u63a5\u5173\u7cfb</li> <li>LUT6 \u5185\u90e8 array \u586b\u5145\u7684\u503c</li> </ol> <p>\u70b9\u51fb\u5de6\u4fa7 PROGRAM AND DEBUG &gt; Generate Bitstream\uff0c\u7136\u540e\u9009\u62e9 OK\uff0c\u5c31\u53ef\u4ee5\u751f\u6210\u6211\u4eec\u9700\u8981\u7684 bit \u6d41\u6587\u4ef6 top.bit\uff0c\u8be5\u6587\u4ef6\u4fdd\u5b58\u5728 project \u7684 top.runs/impl_1 \u76ee\u5f55\u3002</p> Step 7. \u4e0b\u677f\u9a8c\u8bc1 <p>\u6700\u540e\u6211\u4eec\u5c06\u751f\u6210\u7684 bitstream \u4e0b\u8f7d\u5230\u5f00\u53d1\u677f\u4e2d\uff0c\u5f97\u5230\u6700\u5f00\u59cb\u751f\u6210\u7684\u7535\u8def\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u7528\u5f00\u5173\u64cd\u7eb5\u8f93\u5165\uff0c\u901a\u8fc7 led \u7b49\u89c2\u5bdf\u8f93\u51fa\uff0c\u8fdb\u800c\u9a8c\u8bc1\u6211\u4eec\u8bbe\u8ba1\u7684\u7535\u8def\u662f\u4e0d\u662f\u771f\u7684\u6b63\u786e\u4e86\u3002</p> <ul> <li>\u5c06\u5f00\u53d1\u677f\u7684 jtag-uart \u901a\u7528\u7ebf\u7684 jtag \u53e3\u63d2\u5165\u677f\u5b50\u7684 jtag-uart \u7aef\u53e3\uff08\u2460\uff09\uff0c\u5c06 USB \u53e3\u63d2\u5165 pc \u673a\u7684 USB \u53e3\uff08\u2461\uff09</li> <li>\u6253\u5f00\u7535\u6e90\u5f00\u5173\uff08\u2462\uff09</li> </ul> <p></p> <ul> <li>\u70b9\u51fb PROGRAM AND DEBUG &gt; Open Hardware Manager &gt; Open Target &gt; Auto Connect \u8fde\u63a5\u5f00\u53d1\u677f</li> </ul> <p></p> <ul> <li>\u9009\u4e2d Hardware \u4e2d\u7684 xc7a100t \u5f00\u53d1\u677f\u4e3a\u6211\u4eec\u8981\u4e0b\u8f7d bitstream \u7684\u5f00\u53d1\u677f</li> <li>\u70b9\u51fb Program Device \u51c6\u5907\u8f7d\u5165 bitstream</li> <li>\u5728\u76ee\u5f55\u4e2d\u5bfb\u627e\u51c6\u5907\u4e0b\u677f\u7684 bitstream \u6587\u4ef6 top.bit</li> <li>\u6700\u540e\u70b9\u51fb Program \u4e0b\u677f</li> </ul> <p></p> <p>\u73b0\u5728\u5df2\u7ecf\u4e0b\u677f\u6210\u529f\u4e86\uff0c\u5927\u5bb6\u53ef\u4ee5\u81ea\u7531\u64cd\u7eb5 SW0-SW2 \u89c2\u5bdf LED \u706f\u7684\u73b0\u8c61\u4e86\u3002</p>"},{"location":"lab0-2/#vivado_2","title":"Vivado \u4eff\u771f","text":"<p>\u6211\u4eec\u4e4b\u524d\u5b66\u4e60\u4e86\u5982\u4f55\u7528 Verilator \u4eff\u771f\uff0c\u4f46\u5b9e\u9645\u4e0a vivado \u4e5f\u53ef\u4ee5\u4eff\u771f\u3002\u5177\u4f53\u89c1\u4e0b\uff1a</p> vivado \u5185\u4eff\u771f\u6d41\u7a0b <ol> <li>\u70b9\u51fb\u5de6\u4fa7 Add Source &gt; Add or create simulation sources &gt; OK\uff0c\u7136\u540e\u8f7d\u5165\u4eff\u771f\u6587\u4ef6 repo/sys-project/lab0-2/sim/testbench.v\uff0c\u4eff\u771f\u6587\u4ef6\u7684\u4f5c\u7528\u4e4b\u524d\u5df2\u7ecf\u4ecb\u7ecd\u8fc7\u4e86</li> <li>\u53f3\u952e Simulation Source \u7684 testbench\uff0c\u7136\u540e Set as top\uff0c\u4e0d\u7136\u7684\u8bdd\u9ed8\u8ba4 top \u662f\u9876\u5c42\u6a21\u5757\uff0c\u4e4b\u540e\u5c31\u4f1a\u4eff\u771f\u6a21\u62df top \u800c\u4e0d\u662f testbench</li> </ol> <p></p> <ol> <li>\u70b9\u51fb\u5de6\u4fa7 SIMULATION &gt; Run Simulation &gt; Run Behavior Simulation\uff0c\u67e5\u770b\u4eff\u771f\u6ce2\u5f62</li> </ol> <p></p> <p></p>"},{"location":"lab0-2/#vivado-batch","title":"Vivado Batch \u6a21\u5f0f","text":"<p>Vivado \u4e5f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u53ef\u4ee5\u5b8c\u5168\u901a\u8fc7\u547d\u4ee4\u884c\u4f7f\u7528\u7684 batch mode\uff0c\u8fd9\u6837\u524d\u9762\u4e0b\u677f\u7684\u4e00\u7cfb\u5217\u590d\u6742\u64cd\u4f5c\u5c31\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u6765\u6267\u884c\u4e86\uff0c\u4e0d\u5fc5\u518d\u901a\u8fc7 GUI \u9875\u9762\u9010\u4e2a\u8bbe\u7f6e\u5e76\u70b9\u51fb\u3002</p> <p>\u8fdb\u5165\u5230\u672c\u4ed3\u5e93\u7684<code>src/lab0-2</code>\u76ee\u5f55\u4e0b\uff0c\u5c06 Makefile \u4e2d\u7684 VIVADO_SETUP \u53d8\u91cf\u6309\u7167\u53c2\u7167\u6ce8\u91ca\u4e2d\u7684\u8bf4\u660e\u66ff\u6362\u4e3a\u4f60\u672c\u673a\u7684\u5b9e\u9645\u4f4d\u7f6e\u3002</p> <p>\u7136\u540e\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u9996\u5148\u5c06 Verilog \u4ee3\u7801\u7efc\u5408\u4e3a\u7528\u4e8e\u7f16\u7a0b FPGA \u7684 Bitstream \u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u7136\u540e\u6253\u5f00 Vivado \u7684\u56fe\u5f62\u5316\u754c\u9762\u5c06\u5176\u4e0b\u8f7d\u5230\u677f\u5b50\u4e0a\u3002</p> <pre><code>make bitstream\nmake vivado\n</code></pre> <p><code>make bitstream</code> \u547d\u4ee4\u4f1a\u542f\u52a8 vivado\uff0c\u7136\u540e vivado \u547d\u4ee4\u884c\u81ea\u52a8\u6267\u884c repo/sys-project/lab-2/tcl/vivado.tcl\uff0c\u5b8c\u6210\u5de5\u7a0b\u5efa\u7acb\u3001.v/.xdc \u6587\u4ef6\u8f7d\u5165\u3001synthensis\u3001implementation\u3001write bitstream \u7b49\u4e00\u7cfb\u5217\u8fc7\u7a0b\u3002\u6709\u5174\u8da3\u7684\u540c\u5b66\u53ef\u4ee5\u5bf9\u7167\u7740 Vivado GUI \u6d41\u7a0b\u7684\u5404\u6b65\u64cd\u4f5c\u81ea\u884c\u63a8\u65ad vivado.tcl \u811a\u672c\u7684\u4f5c\u7528\uff0c\u5e94\u8be5\u662f\u8f83\u4e3a\u660e\u4e86\u7684\u3002</p> <p>\u751f\u6210\u7684 project \u548c bitstream \u5728 src/lab0-2/build/project\u3002</p> <p><code>make vivado</code> \u53ef\u4ee5\u542f\u52a8 vivado \u56fe\u5f62\u754c\u9762\uff0c\u53ef\u4ee5\u5728\u8fd9\u91cc\u6253\u5f00 project \u548c\u4e0b\u8f7d bitstream \u5230\u5f00\u53d1\u677f\u3002</p>"},{"location":"lab0-2/#_7","title":"\u5b9e\u9a8c\u62a5\u544a","text":""},{"location":"lab0-2/#verilog-30","title":"Verilog \u7ec3\u4e60 30%","text":"<ul> <li>\u5199\u51fa\u5bf9\u5e94\u7684 Verilog \u4ee3\u7801\uff08\u8865\u5168 src/lab0-3/syn 10%\u3001src/lab0-3/submit 10%\uff09</li> <li>\u4e0a\u677f\u9a8c\u8bc1\uff0c\u5176\u4e2d\u5c06\u5f00\u5173 R15\u3001M13\u3001L16\u3001J15 \u4f5c\u4e3a\u8f93\u5165\uff0cLED \u706f H17 \u4f5c\u4e3a\u8f93\u51fa\uff08\u7ed9\u51fa\u4e0a\u677f\u7ed3\u679c 10%\uff09:  </li> </ul> \\[ F(A,B,C,D) = \\sum_{m}(0,2,3,5,7,8,10,11,14,15) \\]"},{"location":"lab0-2/#20","title":"\u4eff\u771f\u7ec3\u4e60 20%","text":"<ul> <li>\u4e3a\u8be5\u6a21\u5757\u8bbe\u8ba1\u4eff\u771f\u6fc0\u52b1\u6587\u4ef6\uff08\u8865\u5168 src/lab0-3/sim 10%\uff09\uff0c\u5206\u522b\u7528 verilator \u548c vivado \u8fdb\u884c\u4eff\u771f\uff0c\u89e3\u91ca\u4eff\u771f\u8bbe\u8ba1\u7684\u601d\u8def\uff0c\u5e76\u63d0\u4f9b\u4eff\u771f\u7684\u6ce2\u5f62\u622a\u56fe\uff0c\u4e24\u90e8\u5206\u601d\u8def\u622a\u56fe\u54045%\uff0c\u517110%</li> <li>\u5c1d\u8bd5 verilator\u3001vivado \u6ce2\u5f62\u7a97\u53e3\u7684\u5404\u4e2a\u6309\u952e\uff0c\u5c1d\u8bd5\u7406\u89e3\u6bcf\u4e2a\u6309\u952e\u7684\u529f\u80fd</li> </ul>"},{"location":"lab0-2/#60","title":"\u9a8c\u6536\u548c\u4ee3\u7801\u63d0\u4ea4 60%","text":""},{"location":"lab0-2/#_8","title":"\u9a8c\u6536\u68c0\u67e5\u70b9","text":"<ul> <li>\u4eff\u771f\u4ee3\u7801\u89e3\u91ca\u548c\u4eff\u771f\u6ce2\u5f62\u5c55\u793a 20% </li> <li>\u4ee3\u7801\u89e3\u91ca 20%</li> <li>\u4e0b\u677f\u9a8c\u8bc1 20%</li> </ul>"},{"location":"lab0-2/#_9","title":"\u63d0\u4ea4\u6587\u4ef6","text":"<ul> <li>5.1 \u7ec3\u4e60\u7f16\u5199\u7684\u6e90\u4ee3\u7801\u6587\u4ef6\u548c\u5f15\u811a\u7ea6\u675f\u6587\u4ef6</li> <li>5.2 \u7ec3\u4e60\u7f16\u5199\u7684\u4eff\u771f\u6587\u4ef6</li> </ul>"},{"location":"lab1-1/","title":"\u5b9e\u9a8c 1-1\uff1a\u516b\u9009\u4e00\u591a\u8def\u9009\u62e9\u5668","text":""},{"location":"lab1-1/#_1","title":"\u5b9e\u9a8c\u76ee\u7684","text":"<ul> <li>\u638c\u63e1\u7528\u4e8e\u8bbe\u8ba1\u548c\u4eff\u771f\u6570\u5b57\u903b\u8f91\u7535\u8def\u7684 Logisim \u7684\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5\uff0c\u5e76\u4f7f\u7528\u5176\u8fdb\u884c\u7535\u8def\u8bbe\u8ba1</li> <li>\u638c\u63e1\u591a\u8def\u590d\u7528\u5668\u548c\u52a0\u6cd5\u5668\u7684\u5185\u90e8\u7ed3\u6784\u548c\u529f\u80fd</li> <li>\u5229\u7528\u539f\u7406\u56fe\u6240\u4ea7\u751f\u7684 Verilog \u4ee3\u7801\u8fdb\u884c\u5b66\u4e60</li> </ul>"},{"location":"lab1-1/#_2","title":"\u5b9e\u9a8c\u73af\u5883","text":"<ul> <li>EDA\u5de5\u5177\uff1aNgspice\uff0cLogSim Evolution</li> <li>\u64cd\u4f5c\u7cfb\u7edf\uff1aWindows 10+ 22H2\uff0cUbuntu 22.04+</li> <li>VHDL\uff1aVerilog</li> </ul>"},{"location":"lab1-1/#_3","title":"\u80cc\u666f\u77e5\u8bc6","text":""},{"location":"lab1-1/#multiplexer","title":"\u591a\u8def\u9009\u62e9\u5668\uff08Multiplexer\uff09","text":"<p>N \u9009\u4e00\u591a\u8def\u9009\u62e9\u5668\u662f\u4e00\u79cd\u8bbe\u5907\uff0c\u5305\u62ec\u8f93\u5165\u4fe1\u53f7 \\(I_0, I_1, I_2, \\cdots, I_N\\)\uff0c\u9009\u62e9\u4fe1\u53f7 \\(S_0, S_1, \\cdots, S_{log_N}\\)\uff0c\u8f93\u51fa\u4fe1\u53f7 O\u3002\u5f53\u8f93\u5165\u4fe1\u53f7 \\(S=\\{S_{log_N}, \\cdots, S_1, S_0\\}\\) \u7b49\u4e8e \\(i\\)\uff0c\u5219\u8f93\u51fa\u4fe1\u53f7 \\(O=I_i\\)\u3002\u5b83\u5728\u6570\u5b57\u7cfb\u7edf\u4e2d\u6709\u7740\u975e\u5e38\u91cd\u8981\u7684\u5e94\u7528\u3002</p>"},{"location":"lab1-1/#_4","title":"\u4e8c\u9009\u4e00\u591a\u8def\u9009\u62e9\u5668","text":"<p>\u4e8c\u9009\u4e00\u591a\u8def\u9009\u62e9\u5668\uff08\u7b80\u79f0\u4e8c\u8def\u9009\u62e9\u5668\uff09\u771f\u503c\u8868\u5982\u4e0b\uff1a</p> <p> I0 I1 S O x y 0 x x y 1 y <p></p> <p>\u6240\u4ee5\u53ef\u4ee5\u5316\u7b80\u5f97\u5230\u903b\u8f91\u8868\u8fbe\u5f0f\u5982\u4e0b\uff1a</p> \\[O = SI_1 + \\bar{S}I_0\\] <p>\u5bf9\u5e94\u7684\u7535\u8def\u56fe\u5982\u4e0b\uff1a</p> <p> </p> <p>\u73b0\u5728\u6211\u4eec\u5c1d\u8bd5\u7528 Verilog \u8bed\u8a00\u5b9e\u73b0\u4e8c\u8def\u9009\u62e9\u5668\u3002</p> \u7ed3\u6784\u5316\u63cf\u8ff0\u6cd5 <p>Verilog \u4e09\u79cd\u63cf\u8ff0\u8303\u5f0f\u4e4b\u4e00\uff0c\u901a\u8fc7\u5185\u7f6e\u7684 AND\u3001OR\u3001NOT \u6a21\u5757\u76f4\u63a5\u63cf\u8ff0\u4e0e\u6216\u975e\u95e8\u7535\u8def\u548c\u8fde\u7ebf\u7684\u65b9\u6cd5\u63cf\u8ff0\u95e8\u7ea7\u7535\u8def\uff1a</p> <pre><code>module Mux2To1(\n    input I0,\n    input I1,\n    input S0,\n    output O\n);\n    wire S0_not;\n    NOT not0 (S0_not, S0);\n    wire I0_s;\n    wire I1_s;\n    AND and0(I0_s, I0, S0_not);\n    AND and1(I1_s, I1, S0);\n    OR or0(O, I0_s, I1_s);\nendmodule\n</code></pre> <p>\u8be5\u65b9\u6cd5\u7684\u7ebf\u8def\u548c\u6a21\u5757\u548c\u7535\u8def\u56fe\u7684\u5404\u4e2a\u95e8\u7ea7\u7535\u8def\u4e00\u4e00\u5bf9\u5e94\uff0c\u53ef\u4ee5\u975e\u5e38\u51c6\u786e\u7684\u8fd8\u539f\u7535\u8def\u56fe\u5173\u7cfb\uff0c\u9002\u5408\u65e9\u671f\u7535\u8def\u601d\u7ef4\u7684\u5f62\u6210\u548c\u953b\u70bc\uff0c\u4f46\u662f\u5199\u8d77\u6765\u975e\u5e38\u6b7b\u677f\u4e0d\u7075\u6d3b\uff0c\u4e0d\u9002\u7528\u4e8e\u5927\u578b\u7535\u8def\u7684\u7f16\u7a0b\u3002</p> \u6570\u636e\u6d41\u63cf\u8ff0\u6cd5 <p>\u8be5\u65b9\u6cd5\u4f7f\u7528\u4e0e\u3001\u6216\u3001\u975e\u3001\u5f02\u6216\u7b49\u8fd0\u7b97\u7b26\u6765\u4ee3\u66ff\u4e0e\u6216\u975e\u95e8\u8fdb\u884c\u7535\u8def\u63cf\u8ff0\uff0cLab0-2 \u6211\u4eec\u5df2\u7ecf\u4ecb\u7ecd\u8fc7\u4e0e\u6216\u975e\u95e8\u6a21\u5757\u548c\u4e0e\u6216\u975e\u8fd0\u7b97\u7b26\u4e4b\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb\u4e86\uff0c\u8fd9\u91cc\u53ef\u4ee5\u76f4\u63a5\u505a\u66ff\u6362\uff1a</p> <pre><code>module Mux2To1(\n    input I0,\n    input I1,\n    input S0,\n    output O\n);\n    wire S0_not;\n    assign S0_not = ~S0;\n    wire I0_s;\n    wire I1_s;\n    assign I0_s = I0 &amp; S0_not;\n    assign I1_s = I1 &amp; S0;\n    assign O = I0_s | I1_s;\nendmodule\n</code></pre> <p>\u751a\u81f3\u6211\u4eec\u53ef\u4ee5\u7528\u9012\u5f52\u8868\u8fbe\u5f0f\u5c55\u5f00\u7684\u65b9\u5f0f\u5199\u4f5c\uff1a</p> <pre><code>module Mux2To1(\n    input I0,\n    input I1,\n    input S0,\n    output O\n);\n    assign O = (I1 &amp; S0) | (I0 &amp; (~S0));\nendmodule\n</code></pre> <p>\u5728 Verilog \u5f53\u4e2d\u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7\u662f<code>() &gt; ~ &gt; &amp; &gt; |</code>\u7684\uff0c\u6240\u4ee5\u8fd9\u91cc\u53ef\u4ee5\u7701\u53bb\u62ec\u53f7\u5f97\u5230\uff1a</p> <pre><code>module Mux2To1(\n    input I0,\n    input I1,\n    input S0,\n    output O\n);\n    assign O = I1 &amp; S0 | I0 &amp; ~S0;\nendmodule\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\u8fd9\u79cd\u5199\u6cd5\u548c\u4e8c\u8def\u9009\u62e9\u5668\u7684\u903b\u8f91\u8868\u8fbe\u5f0f\u5b8c\u5168\u4e00\u81f4\uff0c\u548c\u5bf9\u5e94\u7684 C \u8bed\u8a00\u7684\u5199\u6cd5\u4e5f\u9ad8\u5ea6\u4e00\u81f4\u3002\u8fd9\u79cd\u5199\u6cd5\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u629b\u5f03\u4e86\u7ed3\u6784\u5316\u63cf\u8ff0\u6cd5\u95e8\u7ea7\u7535\u8def\u7684\u76f4\u89c2\u6027\uff0c\u66f4\u63a5\u8fd1\u4e8e\u7535\u8def\u60f3\u8981\u8868\u8fbe\u7684\u903b\u8f91\u8868\u8fbe\u5f0f\u672c\u8eab\u3002\u6211\u4eec Lab0-2 \u5c31\u8bb2\u8ff0\u4e86\u4efb\u4f55 I-O \u8f6c\u6362\u5173\u7cfb\u90fd\u53ef\u4ee5\u76f4\u63a5\u7528\u6570\u636e\u6d41\u63cf\u8ff0\u6cd5\u7684\u65b9\u5f0f\u7f16\u7a0b\u5f97\u5230\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u7528 C \u8bed\u8a00\u6570\u636e\u6d41\u4f20\u9012\u7684\u89c6\u89d2\u6765\u5ba1\u89c6\u8fd9\u4e2a\u8868\u8fbe\u5f0f\uff0cI1 \u662f I1 \u8f93\u5165\u7684\u503c\uff0cS0 \u662f S0 \u8f93\u5165\u7684\u503c\uff0c\u6240\u4ee5 I1&amp;S0 \u8fd4\u56de\u7684\u662f I1 \u7684\u503c\u4e0e\u4e0a S0 \u7684\u503c\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002</p> <p>\u4f46\u6211\u5e0c\u671b\u5927\u5bb6\u53ef\u4ee5\u65f6\u523b\u4fdd\u6301\u7535\u8def\u7684\u89c6\u89d2\u770b\u5f85\u95ee\u9898\uff0cI1 \u662f\u7ebf\u8def I1 \u7684\u8f93\u51fa\uff0cS0 \u662f\u7ebf\u8def S0 \u7684\u8f93\u51fa\uff0cI1&amp;S0 \u662f I1 \u548c S0 \u7684\u8f93\u51fa\u8fde\u63a5\u8fdb\u5165 AND \u4e0e\u95e8\u4e4b\u540e\u7684 AND \u4e0e\u95e8\u7684\u8f93\u51fa\u3002</p> <p>\u4e0b\u56fe\u53ef\u4ee5\u76f4\u89c2\u5730\u770b\u5230\u6570\u636e\u6d41\u56fe\u548c\u7535\u8def\u56fe\u4e4b\u95f4\u7684\u4e00\u4e00\u5bf9\u5e94\u5173\u7cfb\u4e86\uff1a</p> <p> </p> <p>\u8fdb\u4e00\u6b65\u7684\uff1a</p> <ol> <li>\u4e00\u4e2a\u7c7b C \u7684\u8fd0\u7b97\u7b26\u5176\u5b9e\u662f\u4e00\u4e2a\u7b80\u5316\u63cf\u8ff0\u7684\u7535\u8def</li> <li>\u4e00\u4e2a\u8fd0\u7b97\u7b26\u7684\u64cd\u4f5c\u6570\u662f\u8fd9\u4e2a\u7535\u8def\u7684\u8f93\u5165</li> <li>\u4e00\u4e2a\u8fd0\u7b97\u7b26\u8fd0\u7b97\u8868\u8fbe\u5f0f\u7684\u503c\u662f\u8fd9\u4e2a\u7535\u8def\u7684\u8f93\u51fa</li> <li>\u8fd0\u7b97\u8868\u8fbe\u5f0f\u7684\u5d4c\u5957\u662f\u95e8\u7535\u8def\u7684\u7ea7\u8054</li> </ol> <p>\u6570\u636e\u6d41\u63cf\u8ff0\u6cd5\u548c\u7ed3\u6784\u5316\u63cf\u8ff0\u6700\u5927\u7684\u4e0d\u540c\u5e76\u4e0d\u5728\u4e8e\u4e00\u4e2a\u662f\u7528\u7c7b C \u7684\u8bed\u6cd5\uff0c\u4e00\u4e2a\u4f7f\u7528 module \u7684\u8bed\u6cd5\uff0c\u800c\u5728\u4e8e\uff1a</p> <ul> <li>\u6570\u636e\u6d41\u63cf\u8ff0\u6cd5\u7684\u8bed\u53e5\u662f\u4ece\u7535\u8def\u8f93\u5165\u5230\u7535\u6d41\u8f93\u51fa\u7684\u987a\u5e8f\u63cf\u8ff0\u7535\u8def\u7684\uff0c\u662f\u6709\u7535\u6d41\u65b9\u5411\u6027\u7684\u3001\u52a8\u6001\u3001\u9762\u5411\u8fc7\u7a0b\u7684\u89c6\u89d2</li> <li>\u7ed3\u6784\u5316\u63cf\u8ff0\u6cd5\u7684\u8bed\u53e5\u662f\u4ee5\u6a21\u5757\u4e3a\u5355\u4f4d\u6309\u7167\u4efb\u610f\u987a\u5e8f\u63cf\u8ff0\u7535\u8def\u7684\uff0c\u662f\u6ca1\u6709\u7535\u6d41\u65b9\u5411\u6027\u3001\u9759\u6001\u3001\u9762\u5411\u5bf9\u8c61\u7684\u89c6\u89d2</li> </ul> \u884c\u4e3a\u63cf\u8ff0\u6cd5 <p>\u8fd9\u91cc\u5f15\u5165\u4e86\u5f88\u591a\u9ad8\u5ea6\u62bd\u8c61\u7684\u7c7b C \u8bed\u53e5\u6765\u63d0\u9ad8\u7f16\u7a0b\u7684\u7075\u6d3b\u6027\uff1a</p> <pre><code>module Mux2To1(\n    input I0,\n    input I1,\n    input S0,\n    output O\n);\n    assign O = S ? I1 : I0;\nendmodule\n</code></pre> <p>\u5728 C \u8bed\u8a00\u4e2d\uff0c<code>?:</code> \u4e09\u76ee\u8fd0\u7b97\u7b26\u8bed\u6cd5\u4e3a <code>exp0 ? exp1 : exp2</code>\uff0c\u5982\u679c\u8868\u8fbe\u5f0f exp0 \u7684\u5e03\u5c14\u503c\u662f 0 \u5219\u8fd4\u56de\u8868\u8fbe\u5f0f exp2 \u7684\u503c\uff0c\u5982\u679c\u8868\u8fbe\u5f0f exp0 \u7684\u5e03\u5c14\u503c\u662f 1 \u5219\u8fd4\u56de\u8868\u8fbe\u5f0f exp1 \u7684\u503c\u3002</p> <p>Verilog \u501f\u9274\u4e86\u8fd9\u4e2a\u8bed\u6cd5\u7528\u6765\u5b9e\u73b0\u4e8c\u8def\u9009\u62e9\u5668\uff1aexp1 \u5728\u8fd9\u91cc\u662f\u7b2c\u4e00\u4e2a\u7535\u8def\u7684\u8f93\u51fa\uff0cexp2 \u662f\u7b2c\u4e8c\u4e2a\u7535\u8def\u7684\u8f93\u51fa\uff0cexp0 \u662f\u6784\u9020\u9009\u62e9\u5b50\u7684\u7535\u8def\u7684\u8f93\u51fa\uff1b\u4e8e\u662f <code>?:</code> \u5728 C \u8bed\u8a00\u4e2d\u7684\u8bed\u4e49\u5c31\u548c\u4e8c\u8def\u9009\u62e9\u5668\u7684\u529f\u80fd\u4fdd\u6301\u4e00\u81f4\u4e86\u3002</p> <p>\u4ece\u7ed3\u6784\u5316\u63cf\u8ff0\uff0c\u5230\u6570\u636e\u6d41\u8868\u8ff0\uff0c\u518d\u5230\u884c\u4e3a\u63cf\u8ff0\uff0cVerilog \u8bed\u8a00\u7684\u7075\u6d3b\u7a0b\u5ea6\u3001\u8868\u8fbe\u80fd\u529b\u3001\u7f16\u7a0b\u6548\u7387\u4e0d\u65ad\u63d0\u9ad8\uff0c\u56e0\u6b64\u5728\u4e0d\u4e45\u7684\u5c06\u6765\uff0c\u5728\u6211\u4eec\u8bbe\u8ba1\u7684\u7535\u8def\u4e0d\u65ad\u590d\u6742\u7684\u540c\u65f6\uff0c\u884c\u4e3a\u63cf\u8ff0\u4f1a\u6210\u4e3a\u4e3b\u8981\u7684\u7f16\u7a0b\u65b9\u5f0f\u3002</p> <p>\u4f46\u540c\u65f6 Verilog \u8bed\u8a00\u7684\u62bd\u8c61\u7a0b\u5ea6\u3001\u8fdc\u79bb\u95e8\u7ea7\u7535\u8def\u7684\u7a0b\u5ea6\u4e5f\u5728\u4e0d\u65ad\u63d0\u9ad8\uff0c\u6211\u5e0c\u671b\u540c\u5b66\u4eec\u53ef\u4ee5\u6c38\u8fdc\u4ece\u7535\u8def\u7684\u89c6\u89d2\u7f16\u7a0b\u548c\u9605\u8bfb Verilog \u8bed\u8a00\uff0c\u4e0d\u8981\u8131\u79bb Verilog \u8bed\u8a00\u7684\u672c\u8d28\u3002</p>"},{"location":"lab1-1/#_5","title":"\u56db\u9009\u4e00\u591a\u8def\u9009\u62e9\u5668","text":"<p>\u56db\u9009\u4e00\u591a\u8def\u9009\u62e9\u5668\u7684\u5b9e\u73b0\u7ed3\u6784\u4e00\u822c\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a</p> <p> </p> <p>\u7b2c\u4e00\u79cd\u6839\u636e\u5361\u8bfa\u56fe\u5316\u7b80\u6216\u8005\u8bd1\u7801\u5668\u5f97\u5230\u903b\u8f91\u8868\u8fbe\u5f0f\uff1a</p> \\[O = \\bar{S_0}\\bar{S_1}I_0 + S_0\\bar{S_1}I_1 + \\bar{S_0}S_1I_2 + S_0S_1I_3\\] <p>\u5bf9\u5e94\u7684\u7535\u8def\u56fe\uff1a</p> <p> </p> <p>\u7b2c\u4e8c\u79cd\u4f7f\u7528\u4e8c\u8def\u9009\u62e9\u5668\u7ea7\u8054\u5f97\u5230\u56db\u8def\u9009\u62e9\u5668\u5f97\u5230\u903b\u8f91\u8868\u8fbe\u5f0f\uff1a</p> \\[\\text{Mux}(S,I_1,I_0) := SI_1 + \\bar{S}I_0\\] \\[O = \\text{Mux}(S_1, \\text{Mux}(S_0, I_3, I_2), \\text{Mux}(S_0, I_1, I_0))\\] <p>\u7535\u8def\u56fe\uff1a</p> <p> </p> <p>\u53ef\u4ee5\u770b\u5230\u4f7f\u7528\u68af\u5f62\u8868\u8fbe\u4e8c\u8def\u9009\u62e9\u5668\u5f97\u5230\u7684\u7535\u8def\u56fe\u6bd4\u76f4\u63a5\u7528\u4e0e\u95e8\u6216\u95e8\u5f97\u5230\u7684\u7535\u8def\u8981\u8fdc\u8fdc\u7b80\u5355\uff0c\u8fd9\u5c31\u662f\u6a21\u5757\u5316\u548c\u62bd\u8c61\u7684\u5999\u5904\u3002</p> <p>\u4e24\u79cd\u65b9\u5f0f\u7684\u7ed3\u6784\u5316\u63cf\u8ff0\u548c\u6570\u636e\u6d41\u63cf\u8ff0\u867d\u7136\u5199\u8d77\u6765\u5f88\u7e41\u7410\uff0c\u4f46\u662f\u601d\u8def\u90fd\u662f\u7b80\u5355\u7684\uff0c\u6240\u4ee5\u8fd9\u91cc\u53ea\u4ecb\u7ecd\u884c\u4e3a\u63cf\u8ff0\u7684\u65b9\u6cd5\u3002</p>"},{"location":"lab1-1/#_6","title":"\u4e8c\u8def\u9009\u62e9\u5668\u6a21\u5757\u7684\u7ea7\u8054","text":"<p>\u6211\u4eec\u53ef\u4ee5\u5c06\u4e8c\u8def\u9009\u62e9\u5668\u5c01\u88c5\u4e3a Mux2To1 \u6a21\u5757\uff0c\u7136\u540e\u5c06\u591a\u4e2a Mux2To1 \u6a21\u5757\u7ec4\u88c5\u8d77\u6765\uff1a <pre><code>module Mux4To1(\n    input I0,\n    input I1,\n    input I2,\n    input I3,\n    input S0,\n    input S1,\n    output O\n);\n\n    wire I01;\n    wire I23;\n\n    Mux2To1 mux0(I0,I1,S0,I01);\n    Mux2To1 mux1(I2,I3,S0,I23);\n    Mux2To1 mux2(I01,I23,S1,O);\n\nendmodule\n</code></pre> \u8fd9\u91cc\u6211\u4eec\u770b\u5230\u5982\u679c\u662f N \u8def\u9009\u62e9\u5668\u5c31\u8981\u5199<code>input I0 ... input IN</code>\u5171 N \u884c\uff0c\u592a\u7e41\u7410\u4e86\uff0c\u8fd9\u91cc Verilog \u63d0\u4f9b\u4e86\u66f4\u7b80\u6d01\u7684\u65b9\u6cd5\u3002</p> verilog \u7ebf\u8def\u7ec4\u8bed\u6cd5 <p>\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u5c06 I0-I3 \u7684 4 \u4e2a\u8f93\u5165\u6539\u4e3a 1 \u4e2a\u6570\u7ec4\u8f93\u5165 [3:0] I\uff0c\u5c31\u53ef\u4ee5\u7b80\u6d01\u5f88\u591a\uff1a</p> <pre><code>module Mux4To1(\n    input [3:0] I,\n    input [1:0] S,\n    output O\n);\n\n    wire [1:0] I_S;\n\n    Mux2To1 mux0(I[0],I[1],S[0],I_S[0]);\n    Mux2To1 mux1(I[2],I[3],S[0],I_S[1]);\n    Mux2To1 mux2(I_S[0],I_S[1],S[1],O);\n\nendmodule\n</code></pre>"},{"location":"lab1-1/#_7","title":"\u5355\u4e00\u7ebf\u8def","text":"<p>\u76f4\u63a5\u5b9a\u4e49\u4e00\u6839\u7ebf\u8def a\uff0c\u6570\u636e\u7c7b\u578b\u4e3a wire <pre><code>    wire a;\n</code></pre></p>"},{"location":"lab1-1/#_8","title":"\u7ebf\u8def\u6570\u7ec4","text":"<p>\u5b9a\u4e49\u4e00\u7ec4\u7ebf\u8def a\uff0c\u6570\u636e\u7c7b\u578b\u4e3a<code>wire [NUM1:NUM2]</code>\uff0c\u5176\u4e2d NUM1 \u548c NUM2 \u53ef\u4ee5\u662f\u4efb\u610f\u6b63\u6574\u6570\u3002<code>wire [NUM1:NUM2]</code> \u8bf4\u660e\u8fd9\u7ec4\u7ebf\u8def\u7684\u7ebf\u8def\u6761\u6570\u4e3a<code>|NUM1 - NUM2 | + 1</code>\u3002\u4f46\u662f\u4e00\u822c\u6765\u8bf4\u5b9a\u4e49\u4e00\u7ec4\u957f\u5ea6\u4e3a LEN \u7684\u7ebf\u8def\uff0c\u4f7f\u7528\u6570\u636e\u7c7b\u578b<code>wire [LEN-1:0]</code>\u3002</p>"},{"location":"lab1-1/#_9","title":"\u7ebf\u8def\u6570\u7ec4\u7d22\u5f15","text":"<p>\u53ef\u4ee5\u7528<code>a[i]</code> \u4f9d\u6b21\u7d22\u5f15 a \u4e2d\u7684\u5404\u6839\u7ebf\u8def\uff0c\u5176\u4e2d \\(i \\in [NUM1, NUM2] \\cup [NUM2, NUM1]\\)\uff0c\u6570\u636e\u7c7b\u578b\u4e3a wire</p> <pre><code>    wire [0:0] a;\n    //\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u4e3a a[0]\n    wire [3:0] a;\n    //\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u4e3a a[3] a[2] a[1] a[0]\n    wire [0:3] a;\n    //\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u4e3a a[0] a[1] a[2] a[3]\n    wire [7:1] a;\n    //\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u662f a[7] a[6] a[5] a[4] a[3] a[2] a[1]\n    wire [3:9] a;\n    //\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u662f a[3] a[4] a[5] a[6] a[7] a[8] a[9]\n</code></pre>"},{"location":"lab1-1/#_10","title":"\u7ebf\u8def\u5b50\u6570\u7ec4\u7d22\u5f15","text":"<p>\u53ef\u4ee5\u7528<code>a[i:j]</code>\u7d22\u5f15 wire \u6570\u7ec4\u7684\u4e00\u7ec4\u8fde\u7eed\u7684\u7ebf\u8def\uff0c\\(i, j \\in [NUM1, NUM2] \\cup [NUM2, NUM1]\\)\u3002\u4e0b\u9762\u7684\u4ee3\u7801\u9996\u5148\u5c06<code>a[7:0]</code>\u7684 a[2]\u3001a[3]\u3001a[4] \u53d6\u51fa\uff0c\u7136\u540e\u4ece\u5de6\u5230\u53f3\u7ec4\u5408\u8d77\u6765\u5f97\u5230 a[2:4]\u3002</p> <pre><code>    wire [7:0] a;\n    //\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u662f a[7] a[6] a[5] a[4] a[3] a[2] a[1] a[0]\n    a[2:4];\n    //\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u662f a[2] a[3] a[4]\n    a[4:2];\n    //\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u662f a[4] a[3] a[2]\n</code></pre>"},{"location":"lab1-1/#_11","title":"\u7acb\u5373\u6570\u7ebf\u8def\u6570\u7ec4","text":"<p>\u7acb\u5373\u6570\u6570\u7ec4\u7531\u4e09\u90e8\u5206\u7ec4\u6210: <code>imm = LEN ' BASE NUM</code></p> <ul> <li>\u7b2c\u4e00\u90e8\u5206 LEN \u662f\u7acb\u5373\u6570\u7684\u7ebf\u8def\u957f\u5ea6\uff0cLEN=3 \u8868\u793a\u7acb\u5373\u6570\u5927\u5c0f\u4e3a 3 \u4f4d\u7ebf\u8def</li> <li>\u7b2c\u4e8c\u90e8\u5206 BASE \u8868\u793a\u7acb\u5373\u6570\u7684\u8fdb\u5236\uff0cb\u3001d\u3001h \u5206\u522b\u8868\u793a\u4e8c\u8fdb\u5236\u3001\u5341\u8fdb\u5236\u3001\u5341\u516d\u8fdb\u5236</li> <li>\u7b2c\u4e09\u90e8\u5206 NUM \u662f\u5bf9\u5e94\u7acb\u5373\u6570\u7684\u503c\uff0c\u5fc5\u987b\u548c BASE \u6307\u793a\u7684\u8fdb\u5236\u76f8\u5bf9\u5e94\uff0c\u4f8b\u5982 4'b98 \u5c31\u662f\u975e\u6cd5\u7684</li> </ul> <p>\u5c06\u7acb\u5373\u6570\u8f6c\u5316\u4e3a\u7535\u8def\u7684\u65b9\u6cd5\u5982\u4e0b\uff1a</p> <ol> <li>\u5c06\u7acb\u5373\u6570\u8f6c\u6362\u4e3a\u4e8c\u8fdb\u5236\u7684 01 \u4e32\uff0c\u5982\u679c 01 \u4e32\u4f4d\u6570\u5c11\u4e8e LEN \u5219\u5728\u524d\u9762\u8865 0\uff0c\u5982\u679c\u5927\u4e8e LEN \u5219\u9ad8\u4f4d\u622a\u65ad</li> <li>\u7acb\u5373\u6570\u7684 0 \u8868\u793a\u8be5\u7ebf\u8def\u7684\u8f93\u5165\u662f GND\uff0c\u7acb\u5373\u6570\u662f 1 \u8868\u793a\u8be5\u7ebf\u8def\u8f93\u5165\u662f VCC</li> <li>\u7acb\u5373\u6570\u7684 01 \u4e32\u4ece\u4f4e\u4f4d\u5230\u9ad8\u4f4d\u4f9d\u6b21\u662f IMM[0], IMM[1], ..., IMM[LEN-1]</li> </ol> <pre><code>    3'b01     // 3'b001\n    6'd67     // 6'b1000011 -&gt; 6'b000011\n    16'h1234  // 16'b0001001000110100\n</code></pre>"},{"location":"lab1-1/#_12","title":"\u7ebf\u8def\u6570\u7ec4\u8fde\u63a5","text":"<p>\u5bbd\u5ea6\u76f8\u540c\u7684\u7ebf\u8def\u624d\u53ef\u4ee5\u76f8\u4e92 assign \u8fde\u63a5\u3002<code>wire a</code> \u5bbd\u5ea6\u4e3a 1\uff1b<code>wire [NUM1:NUM2] b</code> \u5bbd\u5ea6\u4e3a <code>|NUM2 - NUM1| + 1</code>\uff1b<code>b[i]</code> \u5bbd\u5ea6\u4e3a 1\uff1b<code>b[i:j]</code> \u5bbd\u5ea6\u4e3a <code>|i - j| + 1</code>\uff1b<code>LEN'BASE IMM</code> \u5bbd\u5ea6\u4e3a LEN\u3002\u8fd9\u91cc\u7684 a\u3001b\u3001b[i]\u3001b[i:j] \u90fd\u53ef\u4ee5\u5145\u5f53\u8f93\u5165\u8f93\u51fa\u7684\u7ebf\u8def\u3002</p> <pre><code>    assign a[2:4] = b[7:5];\n    // a \u4ece\u9ad8\u5230\u4f4e\u4f9d\u6b21\u662f a[2] a[3] a[4]\n    // b \u4ece\u9ad8\u5230\u4f4e\u4f9d\u6b21\u662f b[7] b[6] b[5]\n    // \u6240\u4ee5 a[2] \u8fde\u63a5 b[7]\uff0ca[3] \u8fde\u63a5 b[6]\uff0ca[4] \u8fde\u63a5 b[5]\n</code></pre> <ul> <li>\u6700\u597d a \u7684\u957f\u5ea6\u7b49\u4e8e b \u7684\u957f\u5ea6</li> <li>\u5982\u679c a \u7684\u957f\u5ea6\u5927\u4e8e b \u7684\u957f\u5ea6\uff0c\u4f1a\u6709\u7ebf\u8def\u6ca1\u6709\u88ab\u8f93\u5165\uff0c\u5bfc\u81f4 warn\uff0c\u5728 vivado \u4eff\u771f\u7684\u65f6\u5019\u4f1a\u770b\u5230\u7ebf\u8def\u53d8\u4e3a\u84dd\u8272\u8fdb\u5165\u9ad8\u963b\u6001 Z</li> <li>\u5982\u679c a \u7684\u957f\u5ea6\u77ed\u4e8e b \u7684\u957f\u5ea6\uff0c\u4f1a\u6709 b \u7684\u90e8\u5206\u8f93\u51fa\u88ab\u629b\u5f03\uff0c\u5bfc\u81f4 warn</li> </ul> <p>\u7b2c\u4e8c\u79cd\u548c\u7b2c\u4e09\u79cd\u90fd\u53ef\u80fd\u6697\u793a\u4e86\u7ebf\u8def\u957f\u5ea6\u58f0\u660e\u662f\u5b58\u5728\u9519\u8bef\uff0c\u597d\u5728\u6211\u4eec\u7684 verilator \u53ef\u4ee5\u81ea\u52a8\u68c0\u67e5\u7ebf\u8def\u5bbd\u5ea6\u4e0d\u5339\u914d\u9519\u8bef\uff0c\u5927\u5bb6\u5e73\u65f6\u8981\u517b\u6210\u8f93\u5165\u8f93\u51fa\u7ebf\u8def\u5b8c\u5168\u5339\u914d\u7684\u7f16\u7a0b\u4e60\u60ef</p>"},{"location":"lab1-1/#_13","title":"\u4e8c\u7ef4\u7ebf\u8def\u6570\u7ec4","text":"<p>\u53ef\u4ee5\u7528 <code>wire [NUM2:NUM1] a [NUM4:NUM3]</code> \u5b9a\u4e49\u4e8c\u7ef4\u6570\u7ec4\uff0c\u4e00\u5171\u6709 <code>|NUM4 - NUM3| + 1</code> \u7ec4\u7ebf\u8def\uff0c\u6bcf\u7ec4\u7ebf\u8def\u6709 <code>|NUM2 - NUM1| + 1</code> \u6839\u7ebf\u8def\u3002</p> <ul> <li><code>a[i]</code> \u8868\u793a\u5176\u4e2d\u4e00\u7ec4\u7ebf\u8def\uff0c\u6570\u636e\u7c7b\u578b\u662f <code>wire [NUM2:NUM1]</code></li> <li><code>a[i:j]</code> \u8868\u793a a[i]-a[j] \u7ec4\u7ebf\u8def\u603b\u548c</li> </ul> <p>\u4e0d\u540c\u4e8e <code>wire [NUM2:NUM1]</code> \u7684\u53d8\u91cf\u53ef\u4ee5\u76f4\u63a5\u62ff\u53bb\u505a\u8fde\u63a5\uff0ca \u548c a[i:j] \u662f\u4e0d\u53ef\u4ee5\u62ff\u53bb\u505a\u8fde\u63a5\u7684\u3002</p> <pre><code>    wire [3:0] a [0:3];\n    wire [3:0] b [0:3];\n    wire [3:0] c [0:3];\n    assign b[0] = a[0];     // allowed\n    assign b[2:1] = a[2:1]; // not allowed\n    assign c = a;           // not allowed\n</code></pre> <p>\u56e0\u6b64 module \u7684 input \u6570\u636e\u7c7b\u578b\u53ef\u4ee5\u662f wire\uff0c\u4e5f\u53ef\u4ee5\u662f <code>wire [NUM2:NUM1]</code>\uff0c\u4f46\u4e0d\u53ef\u4ee5\u662f <code>wire [NUM2:NUM1] [NUM4:NUM3]</code>\u3002</p>"},{"location":"lab1-1/#_14","title":"\u9ad8\u7ef4\u7ebf\u8def\u6570\u7ec4","text":"<p>\u53ef\u4ee5\u7533\u660e\u4efb\u610f N \u7ef4\u5ea6\u7684\u6570\u7ec4\uff0c\u4e0d\u8fc7\u4e00\u822c\u4e8c\u7ef4\u6570\u7ec4\u5df2\u7ecf\u591f\u7528\u4e86</p> <pre><code>    wire a [NUM_2N:NUM_(2N-1)]...[NUM_2:NUM_1];\n    wire [N_2:N_1] a [NUM_2N:NUM_(2N-1)]...[NUM_2:NUM_1];\n</code></pre>"},{"location":"lab1-1/#_15","title":"\u4f7f\u7528 ?: \u8fd0\u7b97\u7b26","text":"<p>\u5c06\u4e8c\u8def\u9009\u62e9\u5668\u6a21\u5757 mux \u7528 <code>?:</code> \u8fd0\u7b97\u7b26\u5b9e\u73b0\uff0c\u53ef\u4ee5\u5c06\u4e0a\u9762\u7684\u6a21\u5757\u7b80\u5316\u4e3a\uff1a</p> <pre><code>module Mux4To1(\n    input [3:0] I,\n    input [1:0] S,\n    output O\n);\n\n    wire [1:0] I_S;\n\n    assign I_S[0] = S[0] ? I[1] : I[0];\n    assign I_S[1] = S[0] ? I[3] : I[2];\n    assign O = S[1] ? I_S[1] : I_S[0];\n\n    // or\n    // assign O = S[1] ? (S[0] ? I[3] : I[2]) : (S[0] ? I[1] : I[0]);\n\nendmodule\n</code></pre>"},{"location":"lab1-1/#index","title":"\u4f7f\u7528 index \u7d22\u5f15","text":"<p>\u89c2\u5bdf\u4e0b\u9762\u7684\u4ee3\u7801\uff0cO[0] \u7684\u8fde\u7ebf\u662f I \u7684\u7f16\u53f7\u4e3a 1 \u7684\u7ebf\uff0cO[1] \u7684\u8fde\u7ebf\u662f I \u7684\u7f16\u53f7\u4e3a S \u7684\u7ebf\uff0c\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a 4 \u9009\u4e00\u591a\u8def\u9009\u62e9\u5668\u3002</p> <pre><code>    wire [3:0] I;\n    wire [1:0] S;\n    wire [1:0] O;\n    assign O[0] = I[1];\n    assign O[1] = I[S];\n</code></pre> <p>\u8fd8\u8bb0\u5f97 LUT3 \u5417\uff0c\u6211\u4eec\u8bf4\u5b83\u5185\u90e8\u662f\u4e00\u4e2a\u957f\u5ea6\u4e3a 8 \u4f4d\u7684\u6570\u7ec4\uff0c\u7136\u540e\u6839\u636e\u7d22\u5f15 I \u8f93\u51fa\u5bf9\u5e94\u7684\u6570\u7ec4\u503c\uff0c\u6240\u4ee5\u5b83\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u516b\u9009\u4e00\u591a\u8def\u9009\u62e9\u5668\uff1a</p> <pre><code>module LUT3(\n    input [2:0] S,\n    output O\n);\n    wire [7:0] array;\n    assign array = 8'b10010110;\n    assign O = array[S];\nendmodule\n</code></pre>"},{"location":"lab1-1/#if-else","title":"\u4f7f\u7528 if-else \u8bed\u53e5","text":"<p>\u6211\u4eec\u53ef\u4ee5\u7528 if-else \u8bed\u53e5\u6765\u8868\u8fbe\u4e8c\u8def\u9009\u62e9\uff0c\u8fd9\u91cc\u662f Verilog \u8bed\u6cd5\u6bd4\u8f83\u5783\u573e\u7684\u5730\u65b9\uff0c\u56e0\u4e3a\u6211\u4eec\u8981\u5b9e\u73b0\u7684\u662f wire \u4e4b\u95f4\u7684\u8fde\u7ebf\u5173\u7cfb\uff0c\u4f46\u662f\u56e0\u4e3a\u5176\u8bed\u6cd5\u672c\u8eab\u7684\u9650\u5236\u5bfc\u81f4 if-else \u8bed\u6cd5\u53ea\u80fd\u5728 always \u5757\u4e2d\u4f7f\u7528\uff0calways \u5757\u5185\u90e8\u53ea\u80fd\u5bf9 reg \u53d8\u91cf\u8d4b\u503c\u3002\u6240\u4ee5\u672c\u6765\u5e94\u8be5\u662f wire \u7684 O \u5728\u8fd9\u91cc\u53ea\u80fd\u662f reg\u3002</p> <p><code>always @(*)</code> \u8868\u793a\u5728\u5185\u90e8\u7684 reg \u7535\u8def\u5b9e\u9645\u4e0a\u4f1a\u88ab\u7efc\u5408\u4e3a wire \u7684\u5f62\u5f0f\uff0c\u6839\u636e if-else \u7684\u8bed\u4e49\u4e0d\u96be\u77e5\u9053\uff0c\u5f53 S0=1 \u7684\u65f6\u5019 O \u8f93\u51fa I[1] \u7684\u503c\uff0c\u4e0d\u7136\u8f93\u51fa I[0] \u7684\u503c\uff0c\u6700\u540e\u5f97\u5230\u7b80\u5355\u7684\u4e8c\u8def\u9009\u62e9\u5668\u3002\u8bf7\u8bb0\u4f4f if-else \u662f\u4e8c\u8def\u9009\u62e9\u5668\uff0c\u4e0d\u662f C \u8bed\u8a00\u7684\u8868\u8fbe\u5f0f\u3002</p> <pre><code>    reg O;\n    always @(*) begin\n        if (S0) O &lt;= I[1];\n        else O &lt;= I[0];\n    end\n</code></pre> <p>\u56db\u8def\u9009\u62e9\u5668\u7684\u4e8c\u8def\u9009\u62e9\u5668\u7684\u7ea7\u8054\u5b9e\u73b0\u4e5f\u53ef\u4ee5\u7528 if-else \u7684\u5d4c\u5957\u6765\u63cf\u8ff0\uff1a</p> <pre><code>module Mux4To1(\n    input [3:0] I,\n    input [1:0] S,\n    output O\n);\n\n    reg O_tmp;\n    always @(*) begin\n        if (S1) begin\n            if (S0) O_tmp &lt;= I[3];\n            else O_tmp &lt;= I[2];\n        end else begin\n            if (S0) O_tmp &lt;= I[1];\n            else O_tmp &lt;= I[0];\n        end\n    end\n\n    assign O = O_tmp;\n\nendmodule\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\u56e0\u4e3a\u6700\u540e\u9700\u8981\u505a <code>assign O = O_tmp</code> \u5c06\u5bc4\u5b58\u5668 O_tmp \u8f93\u9001\u7ed9\u7ebf\u8def O \u505a\u8f93\u51fa\uff0c\u4f46\u662f\u53ef\u4ee5\u76f4\u63a5\u8ba9 output \u7684\u7c7b\u578b\u4e3a\u5bc4\u5b58\u5668\uff0c\u4ece\u800c\u7b80\u5316\u7f16\u7a0b\u3002\u4e0d\u52a0 reg \u4fee\u9970\u9ed8\u8ba4\u8f93\u5165\u8f93\u51fa\u662f wire \u7c7b\u578b\uff0c\u4f46\u662f\u8f93\u5165\u4e00\u822c\u53ea\u80fd\u662f wire \u7c7b\u578b\uff1a</p> <pre><code>module Mux4To1(\n    input [3:0] I,\n    input [1:0] S,\n    output reg O\n);\n\n    always @(*) begin\n        if (S1) begin\n            if (S0) O &lt;= I[3];\n            else O &lt;= I[2];\n        end else begin\n            if (S0) O &lt;= I[1];\n            else O &lt;= I[0];\n        end\n    end\n\nendmodule\n</code></pre> <p><code>begin ... end</code> \u8868\u793a\u4e00\u4e2a\u4ee3\u7801\u5757\uff0c\u4f5c\u7528\u76f8\u5f53\u4e8e C \u8bed\u8a00\u7684 <code>{}</code>\uff0cif-else \u540e\u9ed8\u8ba4\u53ea\u80fd\u8ddf\u4e00\u6761\u8bed\u53e5\uff0c\u5982\u679c\u8981\u8ddf\u968f\u591a\u6761\u8bed\u53e5\uff0c\u8fd9\u4e2a\u65f6\u5019\u9700\u8981\u7528 <code>begin ... end</code> \u5305\u88f9\u3002</p>"},{"location":"lab1-1/#case","title":"\u4f7f\u7528 case \u8bed\u53e5","text":"<p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u7528\u7c7b\u4f3c C \u7684 switch-case \u7684\u65b9\u5f0f\u6765\u63cf\u8ff0\u591a\u8def\u9009\u62e9\u5668\uff0c\u6700\u540e\u5f97\u5230\u7684\u4e5f\u662f\u56db\u8def\u9009\u62e9\u5668\u3002\u5b9e\u9645\u4e0a swicth-case \u7684\u8bed\u6cd5\u6700\u65e9\u5c31\u662f\u6a21\u4eff\u591a\u8def\u9009\u62e9\u5668\u7684\u5de5\u4f5c\u6a21\u5f0f\u800c\u4ea7\u751f\u7684\u3002</p> <pre><code>module Mux4To1(\n    input [3:0] I,\n    input [1:0] S,\n    output reg O\n);\n\n    always @(*) begin\n        case (S)\n            2'b00: O &lt;= I[0];\n            2'b01: O &lt;= I[1];\n            2'b10: O &lt;= I[2];\n            2'b11: O &lt;= I[3];\n        endcase\n    end\n\nendmodule\n</code></pre>"},{"location":"lab1-1/#no-latch-warn","title":"no-latch warn","text":"<p>\u8bda\u7136 if-else \u548c case \u5f88\u597d\u7528\uff0c\u5f88\u591a Verilog \u6ca1\u6709\u5b66\u624e\u5b9e\u4f46\u662f C \u5b66\u7684\u4e0d\u9519\u7684\u540c\u5b66\u770b\u5230 if-else \u5c31\u60f3\u5f53\u7136\u5730\u89c9\u5f97\uff0c\u81ea\u5df1\u53ea\u8981\u6309\u7167 C \u7684\u8bed\u6cd5\u5199\u5c31\u53ef\u4ee5\u5199 Verilog \u4e86\uff0c\u8fd9\u662f\u4f1a\u57cb\u96f7\u7684\u3002</p> <p>\u4f8b\u5982\u6211\u73b0\u5728\u6709\u4e00\u4e2a\u9700\u6c42\uff0c\u5f53\u8f93\u5165\u662f 1'b1 \u7684\u65f6\u5019\u8f93\u51fa I0\u3002\u9996\u5148\u9700\u6c42\u6ca1\u6709\u8bf4\u660e\u8f93\u5165\u4e0d\u662f 1'b1 \u65f6\u8981\u600e\u4e48\u5904\u7406\uff0c\u4e00\u4e9b\u540c\u5b66\u53ef\u80fd\u5c31\u6ca1\u6709\u610f\u8bc6\u5230\u8fd9\u4e2a\u95ee\u9898\uff1b\u5176\u6b21\u53ef\u80fd\u89c9\u5f97\u8f93\u5165\u4e0d\u662f 1'b1 \u7684\u60c5\u51b5\u4e0d\u5b58\u5728\u6216\u8005\u6b64\u65f6\u8f93\u51fa\u662f\u591a\u5c11\u65e0\u5173\u7d27\u8981\uff0c\u4e8e\u662f\u8fd9\u4e9b\u540c\u5b66\u4f1a\u8fd9\u6837\u5199\uff1a</p> <pre><code>    always @(*) begin\n        if (I == 1'b1) O &lt;= I0;\n    end\n    // or\n    always @(*) begin\n        case (I)\n            1'b1: O &lt;= I0;\n        endcase\n    end\n</code></pre> <p>\u90a3\u4e48\u8bf7\u95ee\u5982\u679c I=0 \u600e\u4e48\u529e\uff1f\u5982\u679c\u662f C \u8bed\u8a00\u53ef\u80fd\u4f1a\u8bf4\u4fdd\u6301 O \u7684\u539f\u503c\u4e0d\u53d8\uff0creg \u4e5f\u662f\u8fd9\u6837\u7684\uff0c\u6240\u4ee5\u5bf9\u5e94\u7684\u8fde\u7ebf\u4f1a\u53d8\u4e3a\u8fd9\u4e2a\u6837\u5b50\uff0c\u8fd9\u4e2a\u7535\u8def\u7c7b\u4f3c\u4e8e\u9501\u5b58\u5668\uff0c\u5f53 I=0 \u7684\u65f6\u5019 wire O \u53ef\u4ee5\u4e00\u76f4\u4fdd\u6301\u539f\u6765\u7684\u503c\u4e0d\u53d8\uff0c\u76f8\u5f53\u4e8e wire \u5b58\u50a8\u4e86\u6570\u503c\uff1a</p> <p> </p> <p>\u8fd9\u79cd\u7535\u8def\u7684\u7535\u6c14\u7ed3\u6784\u662f\u5f88\u4e0d\u7a33\u5b9a\u7684\uff0c\u7279\u522b\u662f\u5728 I \u53d1\u751f 01 \u8df3\u53d8\u7684\u77ac\u95f4\uff0c\u5f88\u6709\u53ef\u80fd\u610f\u5916\u4ea7\u751f\u4f60\u9884\u671f\u4e4b\u5916\u7684\u7ed3\u679c\uff0c\u6240\u4ee5 <code>always @(*)</code> \u5199 if \u8bed\u53e5\u548c case \u8bed\u53e5\u7684\u65f6\u5019\u4e00\u5b9a\u8981\u8bb0\u5f97\uff1a</p> <ul> <li>if \u8bed\u53e5\u8981\u6709\u5b8c\u6574\u7684 if-else</li> <li>case \u8bed\u53e5\u8981\u904d\u5386\u6240\u6709\u7684 case \u786c\u4ef6\u7801\uff0c\u6216\u8005\u63d0\u4f9b default</li> </ul> <p>\u4f8b\u5982\u65e0\u5173\u9879\u8f93\u51fa 0\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5f97\u5230\u5b89\u5168\u7a33\u5b9a\u7684\u591a\u8def\u9009\u62e9\u5668\uff1a</p> <pre><code>    always @(*) begin\n        if (I == 1'b1) O &lt;= I0;\n        else O &lt;= 1'b0;\n    end\n    // or\n    always @(*) begin\n        case (I)\n            1'b1: O &lt;= I0;\n            default: O &lt;= 1'b0;\n        endcase\n    end\n</code></pre> <p>\u6216\u8005\u5982\u679c\u4f60\u4e0d\u5e0c\u671b I \u8f93\u5165\u9664 0 \u4ee5\u5916\u7684\u7ed3\u679c\u8ba9\u65e0\u5173\u9879\u8f93\u51fa x\uff1a</p> <ul> <li>\u4e00\u65b9\u9762\u5f53\u4eff\u771f\u7684\u65f6\u5019\u53d1\u73b0 O \u8f93\u51fa\u4e3a\u7ea2\u8272\u6ce2\u5f62\u672a\u5b9a\u4e49\u503c x \u5c31\u53ef\u4ee5\u63a8\u65ad\u5f97\u5230\u8be5\u6a21\u5757\u7684 I \u8f93\u5165\u6709\u9519\u8bef</li> <li>\u53e6\u4e00\u65b9\u9762\uff0cVerilog \u5728\u7efc\u5408\u7535\u8def\u7684\u65f6\u5019\u53ef\u4ee5\u505a\u8fdb\u4e00\u6b65\u7684\u5316\u7b80\uff0c\u6bd4\u5982\u76f4\u63a5\u5316\u7b80\u4e3a <code>assign O=I0</code></li> </ul> <pre><code>    always @(*) begin\n        if (I == 1'b1) O &lt;= I0;\n        else O &lt;= 1'bx;\n    end\n    // or\n    always @(*) begin\n        case (I)\n            1'b1: O &lt;= I0;\n            default: O &lt;= 1'bx;\n        endcase\n    end\n</code></pre> <p>\u4e0d\u8981\u6ee5\u7528 <code>always @(*)</code> \u548c if \u8bed\u53e5\u3001case \u8bed\u53e5\uff0c\u65f6\u523b\u8b66\u60d5\u6ce8\u610f no-latch warning\u3002\u4e0d\u7136\u5c31\u4f1a\u9047\u5230\u4eff\u771f\u6b63\u786e\u4f46\u662f\u4e0b\u677f\u9519\u8bef\u7684\u95ee\u9898\uff0c\u8fd9\u662f\u5f88\u6253\u51fb\u5f00\u53d1\u8005\u7684\u81ea\u4fe1\u5fc3\u7684\u3002</p>"},{"location":"lab1-1/#_16","title":"\u66f4\u590d\u6742\u7684\u591a\u8def\u9009\u62e9\u5668","text":"<p>\u53ef\u4ee5\u4eff\u7167\u4e8c\u8def\u9009\u62e9\u5668\u5230\u56db\u8def\u9009\u62e9\u5668\u7684\u8fc7\u6e21\uff0c\u4e0d\u96be\u63a8\u65ad\u516b\u8def\u3001\u5341\u516d\u8def\u4e43\u81f3\u66f4\u590d\u6742\u7684\u591a\u8def\u9009\u62e9\u5668\u7684\u8bbe\u8ba1\u3002</p>"},{"location":"lab1-1/#_17","title":"\u5b9e\u9a8c\u6b65\u9aa4","text":""},{"location":"lab1-1/#_18","title":"\u56db\u9009\u4e00\u4e00\u4f4d\u591a\u8def\u590d\u7528\u5668\u7684\u5b9e\u73b0","text":""},{"location":"lab1-1/#_19","title":"\u539f\u7406\u56fe\u7684\u7ed8\u5236","text":"<p>cd \u5230 Lab0-1 \u4e2d\u6240\u4e0b\u8f7d\u7684 <code>logisim-evolution-3.8.0-all.jar</code> \u6240\u5728\u7684\u76ee\u5f55</p> <p>\u6267\u884c <code>java -jar logisim-evolution-3.8.0-all.jar</code> \u547d\u4ee4\u542f\u52a8 Logisim \u5e76\u7ed8\u5236\u4e0b\u56fe\u6240\u793a\u7684\u7535\u8def\u56fe\uff1a</p> <p> </p> <p>\u5c06\u7535\u8def\u56fe\u4fdd\u5b58\u4e3a Mux4T1_1.circ</p> <p>\u6ce8\u610f</p> <ul> <li>\u53d6\u6570\u7ec4\u7684\u5206\u91cf\u7528 Wiring/Spiltter \u5b9e\u73b0\uff0c\u5e76\u4fee\u6539 Fan Out \u548c Bit Width in</li> <li>input \u7684\u6570\u7ec4\u957f\u5ea6\u4fee\u6539 Data Bits</li> <li>\u5728\u7ed8\u5236\u5b8c\u6210\u540e\u70b9\u51fb\u5de6\u4e0a\u89d2\u7684 main \u7136\u540e\u4fee\u6539\u53f3\u4e0b\u89d2\u7684 circuit name \u4e3a Mux4T1_1</li> </ul> <p></p> <p>\u53ef\u4ee5\u901a\u8fc7Simulate\u9a8c\u8bc1\u7535\u8def\u56fe\u662f\u5426\u6b63\u786e\uff0c\u771f\u503c\u8868\u5982\u4e0b\uff1a</p> <p> S[1:0] O 2'b00 I0 2'b01 I1 2'b10 I2 2'b11 I3 <p></p>"},{"location":"lab1-1/#verilog","title":"\u5c06\u539f\u7406\u56fe\u5bfc\u51fa\u4e3a verilog","text":"<p>\u4f9d\u636e Lab0-2 4.1 \u7684\u6b65\u9aa4\u8fdb\u884c\u5bfc\u51fa</p> <p>\u5176\u4e2d\uff0c\u5728 circuit \u76ee\u5f55\u4e0b\u7684 Mux4T1_1.v \u6587\u4ef6\u4e2d\u5e94\u5f53\u5305\u542b\u5982\u4e0b\u5185\u5bb9\uff0c\u6ce8\u610f\u540e\u7eed\u5b9e\u9a8c\u8981\u6c42\u6a21\u5757\u540d\u548c\u7aef\u53e3\u540d\u5fc5\u987b\u548c\u7ed9\u51fa\u7684\u6837\u4f8b\u76f8\u540c\uff1a</p> <pre><code>module Mux4T1_1( I0,\n                 I1,\n                 I2,\n                 I3,\n                 O,\n                 S );\n</code></pre> <p>\u6700\u540e\uff0c\u5c06 circuit \u548c gates \u76ee\u5f55\u4e0b\u7684\u751f\u6210\u7684\u6240\u6709 verilog \u6587\u4ef6\u62f7\u8d1d\u81f3\u672c\u4ed3\u5e93\u7684 <code>src/lab1-1/submit</code> \u76ee\u5f55\u4e0b\u5907\u7528\uff0c\u6ce8\u610f\u5c06 GATES \u7684 parameter \u7684\u5bbd\u5ea6\u505a\u4fee\u6539\u3002</p> <p>\u7136\u540e\u7528 Mux4T1_1.v \u4e3a\u57fa\u7840\u52a0\u4e00\u4e2a\u4e8c\u8def\u9009\u62e9\u5668\u7f16\u5199 Mux8T1_1.v\uff0c\u8be5\u4e8c\u8def\u9009\u62e9\u5668\u53ef\u4ee5\u7528\u4e0a\u9762\u63d0\u5230\u7684\u4efb\u4f55 verilog \u8bed\u53e5\u5b9e\u73b0\u3002</p>"},{"location":"lab1-1/#verilog_1","title":"\u4eff\u771f verilog \u8bbe\u8ba1","text":"<p>\u5728 <code>src/lab1-1/sim</code> \u4e2d\u8bbe\u8ba1\u4eff\u771f\u6837\u4f8b\uff0c\u5bf9\u4e8e\u7ed9\u5b9a\u7684 I \u8f93\u5165\u904d\u5386 S \u7684\u7ec4\u5408\uff0c\u7136\u540e\u8fdb\u884c\u4eff\u771f:</p> <pre><code>    make verilate\n    make wave\n</code></pre>"},{"location":"lab1-1/#vivado","title":"vivado \u4e0a\u677f\u9a8c\u8bc1","text":"<p>\u5728 <code>src/lab1-1/syn</code> \u4e2d\u8865\u5168 top \u6587\u4ef6\u548c xdc \u6587\u4ef6\uff0c\u7136\u540e\u7528 GUI \u6a21\u5f0f\u6216\u8005 batch \u6a21\u5f0f\u7efc\u5408\u4e0b\u677f\u3002\u5176\u4e2d\u8f93\u5165 I0-I7 S0-S2 \u5bf9\u5e94\u677f\u5b50\u4ece\u53f3\u5230\u5de6\u7684\u524d\u5341\u4e00\u4e2a\u5f00\u5173\uff0cLD0 \u5bf9\u5e94\u4ece\u53f3\u5230\u5de6\u7684\u7b2c\u4e00\u4e2aLED\u3002</p>"},{"location":"lab1-1/#50","title":"\u5b9e\u9a8c\u62a5\u544a 50%","text":"<p>\u8bf7\u5728\u5b9e\u9a8c\u62a5\u544a\u4e2d\u8be6\u7ec6\u63cf\u8ff0\u6bcf\u4e00\u6b65\u7684\u8fc7\u7a0b\u5e76\u914d\u6709\u9002\u5f53\u7684\u622a\u56fe\u548c\u89e3\u91ca\uff0c\u5bf9\u4e8e\u4eff\u771f\u8bbe\u8ba1\u548c\u4e0a\u677f\u9a8c\u8bc1\u7684\u7ed3\u679c\u4e5f\u5e94\u5f53\u6709\u9002\u5f53\u7684\u89e3\u91ca\u548c\u7167\u7247 Total : 23%</p> <p>\u7ec6\u5206\uff1a</p> <ul> <li>\u56db\u8def\u9009\u62e9\u5668\u539f\u7406\u56fe 3%</li> <li>\u516b\u8def\u9009\u62e9\u5668\u4ee3\u7801\u89e3\u91ca 5%</li> <li>TestBench \u8bbe\u8ba1 5%</li> <li>\u5176\u4f59\u5b9e\u9a8c\u6b65\u9aa4\u53ca\u622a\u56fe 10%</li> </ul> <p>\u5728\u5b9e\u9a8c\u4e2d\u6211\u4eec\u5df2\u7ecf\u62e5\u6709\u4e86 Mux4\uff08\u63a7\u5236\u7684\u4fe1\u53f7\u6570\uff09T1_1\uff08\u8f93\u5165\u7684\u4f4d\u6570\uff09\uff0c\u5b9e\u9645\u4e0a\u5b83\u662f\u7531\u5982 3.1 \u56fe\u4e2d\u5c55\u793a\u7684\u7ed3\u6784\u7ec4\u6210\uff0c\u601d\u8003\u5982\u4e0b\u95ee\u9898\uff1a</p> <ul> <li>Mux2T1_1 \u662f\u4e24\u4e2a AND\uff0c\u4e00\u4e2a OR \u548c\u4e00\u4e2a NOT \u7ec4\u6210\u7684\u7b80\u5355\u7ed3\u6784\uff0c\u5b83\u662f\u7531\u54ea\u79cd decoder \u548c AND-OR \u7ed3\u6784\u7ec4\u6210\u7684 5%</li> <li>Mux4T1_1 \u662f\u5982\u4f55\u7ec4\u6210\u7684 6%</li> <li>Mux8T1_1 \u662f\u5982\u4f55\u7ec4\u6210\u7684 6%</li> <li>\u90a3\u4e48 Mux2<sup>m</sup>T1_n\u662f\u5982\u4f55\u6784\u6210\u7684\u5462 10%</li> </ul> <p>\u8bf7\u5728\u62a5\u544a\u4e2d\u7ed9\u4e88\u89e3\u7b54\u3002</p>"},{"location":"lab1-1/#_20","title":"\u4ee3\u7801\u63d0\u4ea4","text":""},{"location":"lab1-1/#45","title":"\u9a8c\u6536\u68c0\u67e5\u70b9 45%","text":"<ul> <li>\u4eff\u771f\u4ee3\u7801\u89e3\u91ca\u548c\u4eff\u771f\u6ce2\u5f62\u5c55\u793a 10%</li> <li>Mux8T1 \u4ee3\u7801\u89e3\u91ca 15%</li> <li>\u4e0b\u677f\u9a8c\u8bc1 20%</li> </ul>"},{"location":"lab1-1/#_21","title":"\u63d0\u4ea4\u6587\u4ef6","text":"<p><code>src/lab1-1/</code> \u4e2d\u7f16\u5199\u7684 syn\u3001sim\u3001submit \u7684\u4ee3\u7801</p>"},{"location":"lab1-2/","title":"\u5b9e\u9a8c 1-2\uff1a\u4e03\u6bb5\u6570\u7801\u7ba1\u8bd1\u7801\u5668\u8bbe\u8ba1\u4e0e\u5e94\u7528","text":""},{"location":"lab1-2/#_1","title":"\u5b9e\u9a8c\u76ee\u7684","text":"<ul> <li>\u638c\u63e1\u4f7f\u7528 verilog \u8bed\u8a00\u8fdb\u884c\u7535\u8def\u8bbe\u8ba1\u7684\u65b9\u6cd5</li> <li>\u638c\u63e1\u4e03\u6bb5\u6570\u7801\u7ba1\u663e\u793a\u8bd1\u7801\u5668\uff08MC14495\uff09\u7684\u5185\u90e8\u7535\u8def\u7ed3\u6784\u53ca\u5176\u8bbe\u8ba1</li> <li>\u5b9e\u73b0 Nexys A7 \u5f00\u53d1\u677f\u4e03\u6bb5\u6570\u7801\u7ba1\u5341\u516d\u8fdb\u5236\u6570\u663e\u793a</li> </ul>"},{"location":"lab1-2/#_2","title":"\u5b9e\u9a8c\u73af\u5883","text":"<ul> <li>EDA\u5de5\u5177\uff1aNgspice\uff0cLogSim Evolution</li> <li>\u64cd\u4f5c\u7cfb\u7edf\uff1aWindows 10+ 22H2\uff0cUbuntu 22.04+</li> <li>VHDL\uff1aVerilog</li> </ul>"},{"location":"lab1-2/#_3","title":"\u80cc\u666f\u77e5\u8bc6","text":""},{"location":"lab1-2/#decoder","title":"\u53d8\u91cf\u8bd1\u7801\u5668\uff08decoder\uff09","text":"<p>\u8bd1\u7801\u5668\uff08decoder\uff09\u662f\u4e00\u7c7b\u591a\u8f93\u5165\u591a\u8f93\u51fa\u7ec4\u5408\u903b\u8f91\u7535\u8def\u5668\u4ef6\uff0c\u5176\u53ef\u4ee5\u5206\u4e3a\uff1a\u53d8\u91cf\u8bd1\u7801\u548c\u663e\u793a\u8bd1\u7801\u4e24\u7c7b\u3002</p> <ul> <li>\u53d8\u91cf\u8bd1\u7801\u5668\u4e00\u822c\u662f\u4e00\u79cd\u8f83\u5c11\u8f93\u5165\u53d8\u4e3a\u8f83\u591a\u8f93\u51fa\u7684\u5668\u4ef6\uff0c\u5e38\u89c1\u7684\u6709n\u7ebf-2<sup>n</sup>\u7ebf\u8bd1\u7801\u548c8421BCD\u7801\u8bd1\u7801\u4e24\u7c7b</li> <li>\u663e\u793a\u8bd1\u7801\u5668\u7528\u6765\u5c06\u4e8c\u8fdb\u5236\u6570\u8f6c\u6362\u6210\u5bf9\u5e94\u7684\u4e03\u6bb5\u7801\uff0c\u4e00\u822c\u5176\u53ef\u5206\u4e3a\u9a71\u52a8LED\u548c\u9a71\u52a8LCD\u4e24\u7c7b</li> </ul> <p> </p> <p>\u5e7f\u4e49\u7684\u8bd1\u7801\u5668\u662f\u6307\u5c06\u4e8c\u8fdb\u5236\u7f16\u7801\u8f93\u5165\u8f6c\u6362\u4e3a\u4efb\u610f\u7684\u7f16\u7801\u8f93\u51fa\uff0c\u4e14\u8fd9\u4e2a\u8f6c\u6362\u5173\u7cfb\u53ef\u4ee5\u4e0d\u6ee1\u8db3\u5355\u5c04\u3002\u6211\u4eec\u53cd\u601d\u4e00\u4e0b\uff0c\u5176\u5b9e\u4e00\u4e2a\u903b\u8f91\u8868\u8fbe\u5f0f\u6216\u8005\u8bf4\u4e00\u5f20\u771f\u503c\u8868\uff0c\u5c31\u662f\u4e00\u4e2a\u8f93\u5165\u5230\u8f93\u51fa\u7684\u7f16\u7801\u5bf9\u5e94\u5173\u7cfb\uff0c\u8f93\u5165\u5929\u7136\u6ee1\u8db3\u4e8c\u8fdb\u5236\u7f16\u7801\uff0c\u5982\u679c\u6211\u4eec\u5c06\u8f93\u51fa\u5b9a\u4e49\u4e3a\u4e00\u79cd\u65b0\u7684\u7f16\u7801\uff0c\u90a3\u4e48\u4efb\u4f55\u6709\u9650\u957f\u5ea6\u7684\u8f93\u5165\u8f93\u51fa\u6620\u5c04\u5bf9\u5e94\u7684\u7535\u8def\u90fd\u53ef\u4ee5\u79f0\u4e4b\u4e3a\u7f16\u7801\u5668\u3002</p> <pre><code>\u8f93\u5165\u8f93\u51fa\u5173\u7cfb &lt;=&gt; \u903b\u8f91\u8868\u8fbe\u5f0f &lt;=&gt; \u771f\u503c\u8868 &lt;=&gt; \u7f16\u7801\u5668\n                    /\\\n                    ||\n                    \\/\n                 \u7ec4\u5408\u7535\u8def\n</code></pre>"},{"location":"lab1-2/#_4","title":"\u590d\u5408\u591a\u8def\u9009\u62e9\u5668","text":"<p>\u591a\u8def\u9009\u62e9\u5668\u53ef\u4ee5\u6839\u636e selector \u4ece\u591a\u4e2a\u5355 bit \u8f93\u5165\u4e2d\u9009\u62e9\u5355 bit \u7684\u8f93\u51fa\uff0c\u90a3\u5982\u679c\u6211\u4eec\u9700\u8981\u4ece\u591a\u7ec4\u8f93\u5165\u4e2d\u6839\u636e selector \u9009\u51fa\u5355\u7ec4\u8f93\u51fa\u5462\uff1f\u53ef\u4ee5\u4f7f\u7528\u590d\u5408\u591a\u8def\u9009\u62e9\u5668\u3002</p> \u591a\u4e2a\u4e00\u4f4d\u591a\u8def\u9009\u62e9\u5668\u7ec4\u5408 <p>\u590d\u5408\u591a\u8def\u9009\u62e9\u5668\u5728\u786c\u4ef6\u5b9e\u73b0\u4e0a\u662f\u7528\u591a\u4e2a\u4e00\u4f4d\u591a\u8def\u9009\u62e9\u5668\u7ec4\u5408\u800c\u6210</p> <pre><code>module Mux4T1_4(\n    input [3:0] I0,\n    input [3:0] I1,\n    input [3:0] I2,\n    input [3:0] I3,\n    input [1:0] S,\n    output [3:0] O\n);\n\n    Mux4T1_1({I3[0], I2[0], I1[0], I0[0]}, S, O[0]);\n    Mux4T1_1({I3[1], I2[1], I1[1], I0[1]}, S, O[1]);\n    Mux4T1_1({I3[2], I2[2], I1[2], I0[2]}, S, O[2]);\n    Mux4T1_1({I3[3], I2[3], I1[3], I0[3]}, S, O[3]);\n\nendmodule\n</code></pre> <p><code>{}</code>\u662f<code>[i]</code>\u7684\u53cd\u64cd\u4f5c\uff0c<code>{ W0, W1, W2, ..., Wn }</code>\u5c06\u7ebf\u8def\u6570\u7ec4 W0, W1, ..., Wn \u7ec4\u62fc\u63a5\u6210\u4e00\u4e2a\u589e\u5e7f\u7684\u7ebf\u8def\u6570\u7ec4\uff1a</p> <ul> <li><code>LEN({ W0, W1, W2, ..., Wn }) = Sum(LEN(W0), LEN(W1), ..., LEN(Wn))</code></li> <li><code>{ W0, W1, W2, ..., Wn }</code> \u7684\u7ebf\u8def\u4ece\u9ad8\u5230\u4f4e\u7684\u8f93\u5165\u548c W0, W1, ..., Wn \u5185\u90e8\u4ece\u9ad8\u5230\u4f4e\u7684\u8f93\u51fa\u4fdd\u6301\u4e00\u81f4</li> </ul> \u4e0e\u6216\u5f62\u5f0f <p>\u4e5f\u53ef\u4ee5\u7528\u6700\u6734\u7d20\u7684\u903b\u8f91\u95e8\u7684\u5f62\u5f0f\u5f97\u5230\u7b26\u5408\u591a\u8def\u9009\u62e9\u5668\u7535\u8def\uff0c\u4e0d\u8fc7\u8fd9\u4e2a\u7535\u8def\u672a\u514d\u8fc7\u4e8e\u590d\u6742\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e9b Verilog \u8bed\u6cd5\u8fdb\u884c\u7b80\u5316\u3002 <pre><code>module Mux4T1_4(\n    input [3:0] I0,\n    input [3:0] I1,\n    input [3:0] I2,\n    input [3:0] I3,\n    input [1:0] S,\n    output reg [3:0] O\n);\n\n    assign O[0] = (~S[0]&amp;~S[1])&amp;I0[0] | (S[0]&amp;~S[1])&amp;I1[0] | (~S[0]&amp;S[1])&amp;I2[0] | (S[0]&amp;S[1])&amp;I3[0];\n    assign O[1] = (~S[0]&amp;~S[1])&amp;I0[1] | (S[0]&amp;~S[1])&amp;I1[1] | (~S[0]&amp;S[1])&amp;I2[1] | (S[0]&amp;S[1])&amp;I3[1];\n    assign O[2] = (~S[0]&amp;~S[1])&amp;I0[2] | (S[0]&amp;~S[1])&amp;I1[2] | (~S[0]&amp;S[1])&amp;I2[2] | (S[0]&amp;S[1])&amp;I3[2];\n    assign O[3] = (~S[0]&amp;~S[1])&amp;I0[3] | (S[0]&amp;~S[1])&amp;I1[3] | (~S[0]&amp;S[1])&amp;I2[3] | (S[0]&amp;S[1])&amp;I3[3];\n\nendmodule\n</code></pre></p> <ul> <li> <p>\u5411\u91cf\u64cd\u4f5c     \u4e24\u4e2a\u5411\u91cf\u7684\u6bcf\u4e2a bit \u4f9d\u6b21\u505a\u4e0e\u3001\u6216\u3001\u5f02\u6216\u3001\u53d6\u53cd\u64cd\u4f5c\uff0c\u5f97\u5230\u5411\u91cf\u8f93\u51fa\u3002 <pre><code>    wire [3:0] a;\n    wire [3:0] b;\n    wire [3:0] c [3:0];\n    assign c[0] = a &amp; b;\n    assign c[1] = a | b;\n    assign c[2] = a ^ b;\n    assign c[3] = ~a;\n</code></pre></p> </li> <li> <p>\u6269\u5c55\u64cd\u4f5c     <code>{}</code>\u5185\u7684\u7ebf\u8def\u4f1a\u88ab\u6269\u5c55 N \u4efd\uff0c\u5e38\u7528\u4e8e\u7b26\u53f7\u6269\u5c55\u30010 \u6269\u5c55\u3001\u4e00\u4e2a\u8f93\u51fa\u6269\u5c55\u4e3a\u5411\u91cf\u8f93\u51fa\u7b49\u573a\u666f <pre><code>    wire a;\n    wire [3:0] b;\n    assign b = {4{a}};\n</code></pre></p> </li> <li> <p>\u5f52\u7ea6\u64cd\u4f5c     \u5c06\u4e00\u4e2a\u5411\u91cf\u7684\u6240\u6709 bit \u6216\u3001\u4e0e\u3001\u5f02\u6216\u8d77\u6765\u3002 <pre><code>    wire [3:0] a [2:0];\n    wire b [2:0];\n    assign b[0] = |a[0];\n    assign b[1] = &amp;a[1];\n    assign b[2] = ^a[2];\n</code></pre></p> </li> </ul> <p>\u4e8e\u662f\u4e0a\u8ff0\u4ee3\u7801\u53ef\u4ee5\u5316\u7b80\u4e3a\uff1a <pre><code>module Mux4T1_4(\n    input [3:0] I0,\n    input [3:0] I1,\n    input [3:0] I2,\n    input [3:0] I3,\n    input [1:0] S,\n    output reg [3:0] O\n);\n\n    wire [3:0] sel;\n    assign sel[0] = ~S[0]&amp;~S[1];\n    assign sel[1] = S[0]&amp;~S[1];\n    assign sel[2] = ~S[0]&amp;S[1];\n    assign sel[3] = S[0]&amp;S[1];\n    assign O = {4{sel[0]}}&amp;I0 | {4{sel[1]}}&amp;I1 | {4{sel[2]}}&amp;I2 | {4{sel[3]}}&amp;I3;\n    // assign O = {LEN{cond0}}&amp;data[0] | {LEN{cond1}}&amp;data[1] | ... | {LEN{condN}}&amp;data[N]\n\nendmodule\n</code></pre></p> \u4f7f\u7528 ?: \u8bed\u6cd5 <p>\u5b9e\u9645\u4e0a Verilog \u63d0\u4f9b\u4e86\u66f4\u7b80\u6d01\u7684\u590d\u5408\u591a\u8def\u9009\u62e9\u5668\u7684\u8bed\u6cd5\uff1a</p> <pre><code>module Mux4T1_4(\n    input [3:0] I0,\n    input [3:0] I1,\n    input [3:0] I2,\n    input [3:0] I3,\n    input [1:0] S,\n    output [3:0] O\n);\n\n    assign O=S[1] ? (S[0] ? I3 : I2) : (S[0] ? I1 : I0);\n\nendmodule\n</code></pre> <p><code>exp0 ? exp1 : exp2</code> \u76f4\u63a5\u5bf9\u5e94\u4e00\u4e2a\u590d\u5408\u591a\u8def\u9009\u62e9\u5668\uff0cexp0 \u662f\u4e00\u4f4d\u7684\u9009\u62e9\u5b50\uff0c\u5219\u590d\u5408\u591a\u8def\u9009\u62e9\u5668\u7684\u8f93\u51fa exp1 \u7684\u8f93\u5165\uff0c\u53cd\u4e4b\u8f93\u51fa exp2 \u7684\u8f93\u5165\u3002</p> \u4f7f\u7528 index \u7d22\u5f15\u8bed\u6cd5 <p><pre><code>module Mux4T1_4(\n    input [3:0] I0,\n    input [3:0] I1,\n    input [3:0] I2,\n    input [3:0] I3,\n    input [1:0] S,\n    output [3:0] O\n);\n\n    wire [3:0] I [3:0];\n    assign I[0] = I0;\n    assign I[1] = I1;\n    assign I[2] = I2;\n    assign I[3] = I3;\n\n    assign O = I[S];\n\nendmodule\n</code></pre> \u6838\u5fc3\u5728\u4e8e\u5c06\u79bb\u6563\u7684\u7ebf\u8def\u6570\u7ec4\u6574\u5408\u4e3a\u53ef\u4ee5\u88ab\u7d22\u5f15\u7684\u4e8c\u7ef4\u6570\u7ec4\u3002</p> \u4f7f\u7528 if-else \u8bed\u6cd5 <pre><code>module Mux4T1_4(\n    input [3:0] I0,\n    input [3:0] I1,\n    input [3:0] I2,\n    input [3:0] I3,\n    input [1:0] S,\n    output reg [3:0] O\n);\n\n    always @(*) begin\n        if (S[1]) begin\n            if (S[0]) O &lt;= I3;\n            else O &lt;= I2;\n        end else begin\n            if (S[0]) O &lt;= I1;\n            else O &lt;= I0;\n        end      \n    end \n\nendmodule\n</code></pre> \u4f7f\u7528 case \u8bed\u6cd5 <pre><code>module Mux4T1_4(\n    input [3:0] I0,\n    input [3:0] I1,\n    input [3:0] I2,\n    input [3:0] I3,\n    input [1:0] S,\n    output reg [3:0] O\n);\n\n    always @(*) begin\n        case (S)\n            2'b00 : O &lt;= I0;\n            2'b01 : O &lt;= I1;\n            2'b10 : O &lt;= I2;\n            2'b11 : O &lt;= I3;\n        endcase\n    end \n\nendmodule\n</code></pre> \u4e0e\u6216\u5f0f vs \u9ad8\u7ea7\u8bed\u6cd5\u5f0f <p>\u4e0e\u6216\u5f0f\u7684\u8868\u8fbe\u80fd\u529b\u76f8\u8f83\u4e8e\u9ad8\u7ea7\u8bed\u6cd5\u66f4\u5f3a\uff0c\u5982\u679c\u6211\u4eec\u7684\u9700\u6c42\u662f\u6ee1\u8db3<code>cond0=1</code>\u8f93\u51fa<code>data0</code>\uff0c\u6ee1\u8db3<code>cond1=1</code>\u8f93\u51fa<code>data1</code>...\uff0c\u4e14<code>cond0\u3001cond1...condN</code>\u6ee1\u8db3 one-hot\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u4e0e\u6216\u5f0f\u76f4\u63a5\u7f16\u7a0b\uff0c\u4f46\u662f\u9ad8\u7ea7\u8bed\u6cd5\u5f80\u5f80\u9700\u8981\u5c06<code>cond0\u3001cond1...condN</code>\u7f16\u7801\u4e3a\u4e8c\u8fdb\u5236\u9009\u62e9\u5b50\u3002  </p> <p>\u4f46\u662f\u9ad8\u7ea7\u8bed\u6cd5\u7684\u9009\u62e9\u7535\u8def\u53ef\u4ee5\u76f4\u63a5\u7528 FPGA \u7684\u9009\u62e9\u7535\u8def\u76f4\u63a5\u6784\u5efa\uff0c\u7efc\u5408\u6548\u7387\u66f4\u9ad8\uff0c\u8fd0\u884c\u6548\u679c\u66f4\u597d\uff1b\u800c\u4e0e\u6216\u5f0f\u5219\u6ca1\u6709\u8fd9\u4e2a\u76f4\u63a5\u7684\u4f18\u70b9\uff0c\u4e14\u53ef\u8bfb\u6027\u66f4\u5dee\u3002</p> \u590d\u5408\u591a\u8def\u9009\u62e9\u5668\u5b9e\u73b0\u8bd1\u7801\u5668 <p>\u5bf9\u4e8e N \u4f4d\u8f93\u5165\uff0cM \u4f4d\u8f93\u51fa\u7684\u771f\u503c\u8868\u53ef\u4ee5\u7528\u5bbd\u5ea6\u4e3a M \u7684 2<sup>N</sup> \u591a\u8def\u9009\u62e9\u5668\u6765\u5b9e\u73b0\u3002\u5f53\u8f93\u5165\u4e3a 0\uff0c1\uff0c2 .... 2<sup>N</sup>-1 \u65f6\uff0c\u590d\u5408\u591a\u8def\u9009\u62e9\u5668\u8f93\u51fa\u771f\u503c\u8868\u5bf9\u5e94\u7684\u8f93\u51fa\u5373\u53ef\u3002\u4ee5 one-hot \u7801\u8bd1\u7801\u5668\u4e3a\u4f8b\uff1a</p> <p> Input Output I0 I1 O0 O1 O2 O3 0 0 1 0 0 0 1 0 0 1 0 0 0 1 0 0 1 0 1 1 0 0 0 1 </p> <p>\u53ef\u4ee5\u7528\u590d\u5408\u591a\u8def\u9009\u62e9\u5668\u5b9e\u73b0\uff1a <pre><code>module one-hot(\n    input [1:0] S,\n    output [3:0] O\n);\n\n    wire [3:0] I [3:0];\n    assign I[0]=4'b0001;\n    assign I[1]=4'b0010;\n    assign I[2]=4'b0100;\n    assign I[3]=4'b1000;\n\n    assign O=I[S];\n\nendmodule\n</code></pre></p> <p>\u518d\u52a0\u4e0a LUT \u548c\u591a\u8def\u9009\u62e9\u5668\u7b49\u4ef7\uff0c\u590d\u5408 LUT \u548c\u590d\u5408\u591a\u8def\u9009\u62e9\u5668\u7b49\u4ef7\uff0c\u6240\u4ee5\u6709\u5982\u4e0b\u7684\u7b49\u4ef7\u5173\u7cfb\uff1a</p> <pre><code>\u8f93\u5165\u8f93\u51fa\u5173\u7cfb &lt;=&gt; \u903b\u8f91\u8868\u8fbe\u5f0f &lt;=&gt; \u771f\u503c\u8868 &lt;=&gt; \u7f16\u7801\u5668\n                    /\\        /\\\n                    ||        ||\n                    \\/        \\/\n                 \u7ec4\u5408\u7535\u8def  \u591a\u8def\u9009\u62e9\u5668 &lt;=&gt; LUT\n</code></pre>"},{"location":"lab1-2/#_5","title":"\u4e03\u6bb5\u6570\u7801\u7ba1","text":"<p>\u6570\u7801\u7ba1\u7684\u4e00\u79cd\u662f\u534a\u5bfc\u4f53\u53d1\u5149\u5668\u4ef6\uff0c\u6570\u7801\u7ba1\u53ef\u5206\u4e3a\u4e03\u6bb5\u6570\u7801\u7ba1\u548c\u516b\u6bb5\u6570\u7801\u7ba1\uff0c\u533a\u522b\u5728\u4e8e\u516b\u6bb5\u6570\u7801\u7ba1\u6bd4\u4e03\u6bb5\u6570\u7801\u7ba1\u591a\u4e00\u4e2a\u7528\u4e8e\u663e\u793a\u5c0f\u6570\u70b9\u7684\u53d1\u5149\u4e8c\u6781\u7ba1\u5355\u5143 DP\uff08decimal point\uff09\uff0c\u5176\u57fa\u672c\u5355\u5143\u662f\u53d1\u5149\u4e8c\u6781\u7ba1\u3002</p> <p>\u4e03\u6bb5\u6570\u7801\u7ba1\u5206\u4e3a\u5171\u9633\u6781\u53ca\u5171\u9634\u6781\uff0c\u5171\u9633\u6781\u7684\u4e03\u6bb5\u6570\u7801\u7ba1\u7684\u6b63\u6781\uff08\u6216\u9633\u6781\uff09\u4e3a\u516b\u4e2a\u53d1\u5149\u4e8c\u6781\u7ba1\u7684\u5171\u6709\u6b63\u6781\uff0c\u5176\u4ed6\u63a5\u70b9\u4e3a\u72ec\u7acb\u53d1\u5149\u4e8c\u6781\u7ba1\u7684\u8d1f\u6781\uff08\u6216\u9634\u6781\uff09\uff0c\u4f7f\u7528\u8005\u53ea\u9700\u628a\u6b63\u6781\u63a5\u7535\uff0c\u4e0d\u540c\u7684\u8d1f\u6781\u63a5\u5730\u5c31\u80fd\u63a7\u5236\u4e03\u6bb5\u6570\u7801\u7ba1\u663e\u793a\u4e0d\u540c\u7684\u6570\u5b57\u3002\u5171\u9634\u6781\u7684\u4e03\u6bb5\u6570\u7801\u7ba1\u4e0e\u5171\u9633\u6781\u7684\u53ea\u662f\u63a5\u9a73\u65b9\u6cd5\u76f8\u53cd\u800c\u5df2\u3002</p> <p>NOTE: Nexys A7 \u5f00\u53d1\u677f\u7684\u4e03\u6bb5\u6570\u7801\u7ba1\u4e3a\u5171\u9633\u6781\u6570\u7801\u7ba1\uff0c\u5f53\u8f93\u5165\u4fe1\u53f7\u4e3a 0 \u65f6\uff0c\u5bf9\u5e94\u6570\u7801\u7ba1\u4eae\uff1b\u8f93\u5165\u4fe1\u53f7\u4e3a 1 \u65f6\uff0c\u5bf9\u5e94\u6570\u7801\u7ba1\u706d\u3002</p> <p></p> <p>\u4e03\u6bb5\u6570\u7801\u7ba1\u7684\u663e\u793a\u8bd1\u7801\u7684\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\uff0c\u6839\u636e\u590d\u5408\u591a\u8def\u9009\u62e9\u5668\u5b9e\u73b0\u8bd1\u7801\u5668\u7684\u5173\u7cfb\u4e0d\u96be\u5f97\u5230\u8bd1\u7801\u7535\u8def\u3002</p> <p></p>"},{"location":"lab1-2/#_6","title":"\u52a8\u6001\u65f6\u5206\u590d\u7528","text":"<p>Nexys-A7 \u5f00\u53d1\u677f\u6709\u516b\u4e2a\u4e03\u6bb5\u6570\u7801\u7ba1\uff0c\u6240\u6709\u4e03\u6bb5\u6570\u7801\u7ba1\u5171\u7528 CA\u3001CB ... DP \u7684\u8f93\u51fa\u3002\u6b64\u5916\u6bcf\u4e2a\u4e03\u6bb5\u6570\u7801\u7ba1\u6709\u81ea\u5df1\u4e13\u7528\u7684 AN \u4fe1\u53f7\u7ebf\u4f5c\u4e3a\u4f7f\u80fd\u4fe1\u53f7\uff0c\u5f53 AN=1 \u65f6\uff0c\u4e03\u6bb5\u6570\u7801\u7ba1\u65e0\u8bba CA\u3001CB ... DP \u8f93\u5165\u4e3a\u591a\u5c11\uff0c\u4e03\u6bb5\u6570\u7801\u7ba1\u4e0d\u4eae\uff1b\u5f53 AN=0 \u65f6\u4e03\u6bb5\u6570\u7801\u7ba1\u624d\u6839\u636e CA\u3001CB ... DP \u7684\u8f93\u5165\u4eae\u706d\u3002</p> <p> </p> <p>\u73b0\u5728\u6211\u4eec\u5e0c\u671b\u516b\u4e2a\u4e03\u6bb5\u6570\u7801\u7ba1\u5206\u522b\u663e\u793a 32'h12345678 \u8fd9\u516b\u4e2a\u6570\u636e\uff0c\u6211\u4eec\u5e94\u8be5\u600e\u4e48\u505a\u624d\u80fd\u8ba9\u63a5\u6536\u540c\u6837 CA\u3001CB ... DP \u8f93\u5165\u7684\u6570\u7801\u7ba1\u8f93\u51fa\u4e0d\u540c\u7684\u4fe1\u53f7\u5462\uff1f</p> <p>\u6211\u4eec\u5c06\u4e00\u4e2a\u65f6\u95f4\u5468\u671f\u5e73\u5747\u5206\u4e3a\u516b\u5206\uff0c\u5728\u7b2c\u4e00\u5206\u65f6\u95f4\u5185\u6211\u4eec\u5c06 4'h1 \u7684\u8bd1\u7801\u7ed3\u679c\u8f93\u51fa\u5230\u4e03\u6bb5\u6570\u7801\u7ba1\uff0c\u7136\u540e\u5c06\u7b2c\u4e00\u4e2a\u4e03\u6bb5\u6570\u7801\u7ba1\u7684 AN \u542f\u52a8\uff0c\u5176\u4f59\u4e03\u6bb5\u6570\u7801\u7ba1\u7684 AN \u5173\u95ed\uff0c\u8fd9\u6837\u7b2c\u4e00\u4e2a\u4e03\u6bb5\u6570\u7801\u7ba1\u4f1a\u663e\u793a\u6570\u5b57 1\uff0c\u5176\u4f59\u6570\u7801\u7ba1\u4e0d\u4eae\u3002</p> <p></p> <p>\u7b2c\u4e8c\u4e2a\u65f6\u95f4\u7247\u8f93\u51fa 4'h2 \u7684\u8bd1\u7801\u7ed3\u679c\uff0c\u4ec5\u4f7f\u80fd\u7b2c\u4e8c\u4e2a\u4e03\u6bb5\u6570\u7801\u7ba1\uff0c\u8fd9\u6837\u53ea\u6709\u7b2c\u4e8c\u4e2a\u4e03\u6bb5\u6570\u7801\u7ba1\u663e\u793a\u6570\u5b57 2\uff0c\u5176\u4f59\u6570\u7801\u7ba1\u4e0d\u4eae\u3002</p> <p></p> <p>\u4f9d\u6b21\u7c7b\u63a8\uff0c\u5982\u6b64\u8f6e\u56de\u3002\u6700\u540e\u6bcf\u4e2a\u6570\u7801\u7ba1\u90fd\u4f1a\u6709\u516b\u5206\u4e4b\u4e00\u7684\u65f6\u95f4\u663e\u793a\u81ea\u5df1\u5bf9\u5e94\u7684\u6570\u636e\uff0c\u7136\u540e\u56e0\u4e3a\u89c6\u89c9\u6b8b\u7559\uff0c\u6700\u540e\u4eba\u773c\u4f1a\u611f\u89c9\u516b\u4e2a\u6570\u7801\u7ba1\u540c\u65f6\u4eae\u8d77\uff0c\u4e14\u5206\u522b\u663e\u793a\u5bf9\u5e94\u7684\u6570\u636e\u3002</p> <p></p>"},{"location":"lab1-2/#_7","title":"\u5b9e\u9a8c\u6b65\u9aa4","text":""},{"location":"lab1-2/#_8","title":"\u5b9e\u9a8c\u524d\u51c6\u5907","text":"<p>\u4e0e Lab 1-1 \u76f8\u540c\uff0c\u542f\u52a8\u5b89\u88c5\u5728\u4f60\u7535\u8111\u4e2d\u7684 Ubuntu 22.04 \u73af\u5883\uff08WSL \u6216\u865a\u62df\u673a\uff09\uff0ccd \u5230 sys1-sp23 \u6587\u4ef6\u5939\u6267\u884c\uff1a</p> <pre><code>git pull\ncd repo/sys-project\ngit pull\n</code></pre> <p>\u8fd9\u4e2a\u547d\u4ee4\u5c06\u4ed3\u5e93\u66f4\u65b0\u5230\u6700\u65b0\u72b6\u6001\u3002</p> <p>\u5728\u8fdb\u884c\u63a5\u4e0b\u6765\u7684\u5b9e\u9a8c\u4e4b\u524d\uff0c\u8bf7\u4ed4\u7ec6\u9605\u8bfb 3.1 \u7684\u5185\u5bb9\uff0c\u5e76\u81ea\u5b66 Verilog \u4ee3\u7801\u7684\u8bed\u6cd5\u3002</p> <p>\u4e3a\u4e86\u4f7f\u540c\u5b66\u4eec\u7406\u89e3 Verilog \u662f\u63cf\u8ff0\u7535\u8def\u7684\u8bed\u8a00\uff0c\u6211\u4eec\u8ba4\u4e3a\u8fc7\u65e9\u7684\u4f7f\u7528\u884c\u4e3a\u63cf\u8ff0\u65b9\u5f0f\u4f1a\u5bfc\u81f4\u540c\u5b66\u4eec\u4ee5\u9ad8\u7ea7\u8bed\u8a00\u7f16\u7a0b\u7684\u65b9\u5f0f\u7406\u89e3 Verilog \u4ee3\u7801\uff0c\u504f\u79bb\u5b66\u4e60\u786c\u4ef6\u7535\u8def\u8bbe\u8ba1\u7684\u521d\u8877\uff0c\u6ce8\u610f\u5728\u672c\u6b21\u5b9e\u9a8c\u4e2d\uff0c\u4f60\u7684 Verilog \u4ee3\u7801\u53ea\u80fd\u662f\u7ed3\u6784\u5316\u63cf\u8ff0\u6216\u8005\u6570\u636e\u6d41\u63cf\u8ff0\u65b9\u5f0f\uff0c\u4e0d\u80fd\u4f7f\u7528\u884c\u4e3a\u63cf\u8ff0\u65b9\u5f0f\u3002</p> <p>\u53e6\u5916\u4e3a\u4e86\u65b9\u4fbf\u540c\u5b66\u4eec\u8fdb\u884c Verilog \u4ee3\u7801\u7684\u7f16\u5199\u53ca\u8c03\u8bd5\uff0c\u6211\u4eec\u5efa\u8bae\u4e0b\u8f7d VSCode \u5e76\u5b89\u88c5 Verilog \u63d2\u4ef6\u4f5c\u4e3a\u7f16\u8f91\u5668\u8fdb\u884c\u4ee3\u7801\u7f16\u5199\uff0c\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4f60\u81ea\u5df1\u559c\u6b22\u7684 IDE\u3002</p> <p></p>"},{"location":"lab1-2/#_9","title":"\u8bbe\u8ba1\u4e03\u6bb5\u6570\u7801\u7ba1\u8bd1\u7801\u5668","text":"<p>\u8bf7\u4f7f\u7528\u7ed3\u6784\u5316\u63cf\u8ff0\u6216\u8005\u6570\u636e\u6d41\u63cf\u8ff0\u65b9\u5f0f\u5b8c\u5584\u4ee3\u7801\u4ed3\u5e93\u4e2d\u7684 <code>src/lab1-2/submit/SegDecoder.v</code> \u6587\u4ef6</p> <p>\u8bf7\u4e0d\u8981\u4fee\u6539 module \u5b9a\u4e49\u7684\u8f93\u5165\u8f93\u51fa\uff0c\u4ee5\u514d\u81ea\u52a8\u5316\u7f16\u8bd1\u811a\u672c\u5931\u6548</p> <p><code>SegDecoder</code> \u6a21\u5757\u7684\u7535\u8def\u5982\u4e0b\uff1a</p> <p></p> <pre><code>module SegDecoder (\n    input wire [3:0] data,  //\u8981\u663e\u793a\u7684\u5341\u516d\u8fdb\u5236\u6570\n    input wire point,       //\u662f\u5426\u663e\u793a\u5c0f\u6570\u70b9\uff0c1 \u663e\u793a\u5c0f\u6570\u70b9\n    input wire LE,          //\u662f\u5426\u4f7f\u80fd\uff0c0 \u4f7f\u80fd\n\n    output wire a,          \n    output wire b,\n    output wire c,\n    output wire d,\n    output wire e,\n    output wire f,\n    output wire g,\n    output wire p           //\u5c0f\u6570\u70b9\u5bf9\u5e94\u7684\u6570\u7801\u7ba1\n);\n</code></pre> <p>\u7f16\u5199\u5b8c\u6210\u540e\uff0c\u8fd0\u884c <code>make verilate</code> \u8fdb\u884c\u4eff\u771f\u9a8c\u8bc1\u67e5\u770b\u6ce2\u5f62\u3002</p>"},{"location":"lab1-2/#32","title":"\u5b9e\u73b0 32 \u4f4d\u590d\u5408\u56db\u9009\u4e00\u591a\u8def\u9009\u62e9\u5668","text":"<p>\u5b66\u4e60\u5b9e\u9a8c\u539f\u7406\u90e8\u5206\u7684\u590d\u5408\u591a\u8def\u9009\u62e9\u5668\u90e8\u5206\uff0c\u9009\u62e9\u67d0\u4e00\u79cd\u8bed\u6cd5\u5b9e\u73b0\u56db\u9009\u4e00\u591a\u8def\u9009\u62e9\u5668\u6a21\u5757 <code>src/lab1-2/submit/Mux4T1_32.v</code>\uff0c\u5c1d\u8bd5\u6bd4\u8f83\u5404\u79cd\u8bed\u6cd5\u7684\u4f18\u52a3\u3002</p>"},{"location":"lab1-2/#_10","title":"\u7efc\u5408\u4e0b\u677f\u9a8c\u8bc1","text":"<p>\u4e0b\u677f\u7684\u4ee3\u7801\u7531 <code>src/lab1-2/submit</code> \u548c <code>repo/sys-project/lab1-2/syn</code> \u4e24\u90e8\u5206\u6a21\u5757\u7ec4\u6210\uff0c\u6574\u4f53\u7684\u7535\u8def\u56fe\u5982\u4e0b\uff1a</p> <p></p> <p><code>display</code> \u662f\u5f85\u663e\u793a\u7684\u503c\uff0c\u88ab\u5b9a\u4e49\u5728 <code>src/lab1-2/include</code> \u4e2d\uff1a\u524d\u534a\u90e8\u5206 <code>0123456789abcdef</code> \u7528\u4e8e\u9a8c\u8bc1\u8bd1\u7801\u6a21\u5757\u7684\u6b63\u786e\u6027\uff1b\u540e\u534a\u90e8\u5206\u7684 <code>x</code> \u8bf7\u66ff\u6362\u6210\u81ea\u5df1\u7684\u5b66\u53f7\u3002</p> <pre><code>`define DISPLAY 128'h01234567_89abcdef_000000xx_xxxxxxxx\n</code></pre> <p>`define \u7b49\u4ef7\u4e8e C \u7684 #define\uff0c\u4f46\u662f Verilog \u7684\u5b8f\u53d8\u91cf\u5728\u4f7f\u7528\u7684\u65f6\u5019\u9700\u8981\u5728\u524d\u9762\u52a0 ` \u624d\u53ef\u4ee5\uff0c\u4f8b\u5982 `DISPLAY\u3002</p> <ul> <li>\u5f00\u5173 sw[1:0] \u4e3a\u6700\u53f3\u4fa7\u4e24\u4e2a\u5f00\u5173\uff0c\u7ed3\u5408 32 \u4f4d\u56db\u9009\u4e00\u591a\u8def\u9009\u62e9\u5668\u4ece display \u4e2d\u9009\u62e9\u8981\u663e\u793a\u7684 32 \u4f4d\u6570\u636e\u8f93\u5165 SegDriver \u6a21\u5757</li> <li>\u5f00\u5173 sw[2] \u63a7\u5236\u4e03\u6bb5\u6570\u7801\u7ba1\u7684\u4eae\u706d\uff0c\u5f53 sw[2]=1 \u7684\u65f6\u5019\u4e03\u6bb5\u6570\u7801\u7ba1\u4e0d\u5de5\u4f5c</li> <li>clk_div \u6a21\u5757\u548c index \u5bc4\u5b58\u5668\u914d\u5408\u5de5\u4f5c\uff0cindex \u5bc4\u5b58\u5668\u7684\u503c\u5728 012...7 \u4e4b\u95f4\u5faa\u73af\uff0c\u7136\u540e\u6bcf\u4e2a\u65f6\u95f4\u7247\u8f93\u51fa\u5bf9\u5e94\u7684 AN \u4f7f\u80fd\u4fe1\u53f7\u548c data \u8981\u8f93\u51fa\u7684 4 \u4f4d\u6570\u636e\uff0c\u8fd9\u56db\u4f4d\u6570\u636e\u7531 SegDecoder \u8bd1\u7801\uff0c\u6700\u540e\u663e\u793a\u5230\u4e03\u6bb5\u6570\u7801\u7ba1\u4e0a\uff08\u5373\u52a8\u6001\u5237\u65b0\u65f6\u5206\u590d\u7528\uff09</li> </ul> <p>\u5b8c\u6210 <code>src/lab1-2/submit</code> \u7684\u4e24\u4e2a\u6a21\u5757\u4e4b\u540e\u8fd0\u884c\uff0c\u7f16\u8bd1\u5f97\u5230\u6bd4\u7279\u6d41\uff0c\u4e0b\u677f\u9a8c\u8bc1\uff1a</p> <pre><code>    make bitstream\n</code></pre>"},{"location":"lab1-2/#50","title":"\u5b9e\u9a8c\u62a5\u544a 50%","text":"<p>\u8bf7\u5728\u5b9e\u9a8c\u62a5\u544a\u4e2d\u8be6\u7ec6\u63cf\u8ff0\u6bcf\u4e00\u6b65\u7684\u8fc7\u7a0b\u5e76\u914d\u6709\u9002\u5f53\u7684\u622a\u56fe\u548c\u89e3\u91ca\uff0c\u5bf9\u4e8e\u4eff\u771f\u8bbe\u8ba1\u548c\u4e0a\u677f\u9a8c\u8bc1\u7684\u7ed3\u679c\u4e5f\u5e94\u5f53\u6709\u9002\u5f53\u7684\u89e3\u91ca\u548c\u7167\u7247 Total 30%</p> <p>\u7ec6\u5206\uff1a</p> <ul> <li>\u8bd1\u7801\u7ba1\u8bbe\u8ba1 10%</li> <li>\u590d\u5408\u591a\u8def\u9009\u62e9\u5668\u53ca\u8bed\u6cd5\u5206\u6790\u6bd4\u8f83 10%</li> <li>\u7efc\u5408\u5b9e\u73b0\u6570\u7801\u7ba1 10%</li> </ul> <p>\u9605\u8bfb <code>repo/sys-project/lab1-2/sim/testbench.v</code> \u7684\u6d4b\u8bd5\u6837\u4f8b\uff0c\u5c1d\u8bd5\u5c06 <code>for</code> \u8bed\u53e5\u5c55\u5f00\u4e3a\u521d\u59cb\u5316\u5e8f\u5217\uff0c\u7136\u540e\u5199\u51fa\u4f60\u5bf9 <code>for</code> \u8bed\u53e5\u7684\u7406\u89e3 10%</p> <p>\u5bf9\u4e8e\u5404\u79cd\u591a\u8def\u9009\u62e9\u5668\u7684\u5199\u6cd5\u8fdb\u884c\u6bd4\u8f83\uff0c\u8bf7\u5199\u51fa\u4f60\u6700\u559c\u6b22\u7684\u591a\u8def\u9009\u62e9\u5668\u8bed\u6cd5\uff0c\u5e76\u7ed9\u51fa\u7406\u7531 10%</p> <p>\u6709\u5174\u8da3\u7684\u540c\u5b66\u8bf7\u81ea\u884c\u9605\u8bfb <code>repo/sys-project/lab1-2/syn</code> \u7684\u4ee3\u7801\u7ec6\u8282\uff0c\u5206\u4eab\u4f60\u7684\u5fc3\u5f97\u4f53\u4f1a\u3002</p>"},{"location":"lab1-2/#_11","title":"\u4ee3\u7801\u63d0\u4ea4","text":""},{"location":"lab1-2/#55","title":"\u9a8c\u6536\u68c0\u67e5\u70b9 55%","text":"<ul> <li>\u4eff\u771f\u6ce2\u5f62\u5c55\u793a 15%</li> <li>\u4ee3\u7801\u89e3\u91ca\u6216\u8bbe\u8ba1\u601d\u8def 20%</li> <li>\u4e0b\u677f\u9a8c\u8bc1\uff08\u4e03\u6bb5\u6570\u7801\u7ba1\u80fd\u663e\u793a\u81ea\u5df1\u7684\u5b66\u53f7\uff0920%</li> </ul>"},{"location":"lab1-2/#_12","title":"\u63d0\u4ea4\u6587\u4ef6","text":"<p><code>src/lab1-2/</code> \u4e2d\u7f16\u5199\u7684 submit \u7684\u4ee3\u7801</p>"},{"location":"lab2-1-appendix/","title":"Verilog \u9ad8\u7ea7\u8bed\u6cd5","text":""},{"location":"lab2-1-appendix/#generate","title":"generate \u8bed\u53e5","text":"<p>\u4e0b\u9762\u7684\u4ee3\u7801\u5c06\u4e8c\u7ef4\u6570\u7ec4 b \u7684\u8f93\u51fa\u8fde\u63a5\u5230\u4e8c\u7ef4\u6570\u7ec4 a \u7684\u8f93\u5165\uff0c\u6211\u4eec\u5728 lab0-2 \u4e2d\u63d0\u5230\u6570\u7ec4\u4e4b\u95f4\u65e0\u6cd5\u76f4\u63a5\u8d4b\u503c\uff0c\u6240\u4ee5\u53ea\u80fd\u5bf9\u6570\u7ec4\u7684\u6bcf\u4e2a\u6210\u5458\u4f9d\u6b21\u8fde\u63a5\u3002\u4f46\u662f\u5982\u679c\u6211\u4eec\u7684\u6570\u7ec4\u662f <code>wire [3:0] a [255:0]</code> \u548c <code>wire [3:0] b [255:0]</code>\uff0c\u96be\u9053\u6211\u4eec\u8981\u624b\u52a8\u7f16\u5199 256 \u4e2a <code>assign</code> \u8bed\u53e5\uff0c\u6ca1\u6709\u66f4\u7b80\u6d01\u7684\u8bed\u6cd5\u4e86\u5417\uff1f <pre><code>    wire [3:0] a [3:0];\n    wire [3:0] b [3:0];\n\n    assign b[0] = a[0];\n    assign b[1] = a[1];\n    assign b[2] = a[2];\n    assign b[3] = a[3];\n</code></pre></p> <p>Verilog \u63d0\u4f9b\u4e86 <code>generate</code> \u8bed\u53e5\u548c <code>for</code> \u5faa\u73af\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002 <pre><code>    wire [3:0] a [3:0];\n    wire [3:0] b [3:0];\n\n    genvar i;\n    generate\n        for(i=0;i&lt;4;i=i+1)begin\n            assign b[i] = a[i];\n        end\n    endgenerate\n</code></pre></p> <p><code>genvar i</code> \u5b9a\u4e49\u4e86\u4e00\u4e2a\u4ec5\u7528\u4e8e <code>generate</code> \u8bed\u53e5\u5185\u90e8\u7684\u53d8\u91cf i\uff0c\u8fd9\u4e2a\u53d8\u91cf\u4ec5\u4ec5\u662f\u4e00\u4e2a\u7528\u4e8e\u4ee3\u7801\u751f\u6210\u7684\u53d8\u91cf\uff0c\u5b83\u4e0d\u4f1a\u751f\u6210\u6709\u6548\u7684\u7535\u8def\uff0c\u56e0\u800c\u4e5f\u4e0d\u4f1a\u63d0\u9ad8\u751f\u6210\u786c\u4ef6\u7684\u590d\u6742\u5ea6\u3002\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\u4e3a\u4e00\u4e2a <code>generate</code> \u5757\u5b9a\u4e49\u591a\u4e2a <code>genvar</code>\uff0c\u5e76\u4e14\u4e00\u4e2a <code>genvar</code> \u53ef\u4ee5\u5728\u591a\u4e2a <code>generate</code> \u5757\u4e2d\u4f7f\u7528\u3002</p> <p><code>generate ... endgenerate</code> \u8bed\u53e5\u5757\u7528\u4e8e\u786c\u4ef6\u4ee3\u7801\u751f\u6210\u3002\u6211\u4eec\u53ef\u4ee5\u5728 <code>generate</code> \u5757\u5185\u90e8\u4f7f\u7528 <code>for</code> \u5faa\u73af\u5bf9 <code>genvar</code> \u8fdb\u884c\u8d4b\u503c\u904d\u5386\uff0c\u8fd9\u91cc\u7684\u8bed\u6cd5\u548c C \u8bed\u8a00\u7684 for \u5faa\u73af\u8bed\u6cd5\u5728\u8bed\u6cd5\u548c\u8bed\u4e49\u4e0a\u662f\u4e00\u81f4\u7684\uff0c\u6700\u5927\u7684\u533a\u522b\u53ef\u80fd\u662f <code>genvar</code> \u7684\u9012\u589e\u4ec5\u652f\u6301 <code>i=i+1</code>\uff0c\u800c\u4e0d\u652f\u6301 <code>i+=1</code> \u548c <code>i++</code>\u3002</p> <p>\u6bcf\u8f6e\u5faa\u73af\u90fd\u4f1a\u6839\u636e <code>genvar</code> \u7684\u503c\u751f\u6210\u5bf9\u5e94\u7684 Verilog \u4ee3\u7801\uff0c\u4f8b\u5982\u7b2c\u4e00\u8f6e <code>for</code> \u5faa\u73af\uff0c<code>i=0</code>\uff0c\u4e8e\u662f\u5185\u90e8\u5c31\u4f1a\u751f\u6210 <code>assign b[0]=a[0]</code>\uff1b\u7b2c\u4e8c\u8f6e <code>for</code> \u5faa\u73af\u4f7f\u5f97 <code>i=1</code>\uff0c\u4e8e\u662f\u5c31\u4f1a\u751f\u6210\u4ee3\u7801 <code>assign b[1]=a[1]</code>\uff1b\u4f9d\u6b64\u7c7b\u63a8\u5c31\u53ef\u4ee5\u5f97\u5230\u5b8c\u6574\u7684 <code>b=a</code> \u7684 Verilog \u4ee3\u7801\u3002</p>"},{"location":"lab2-1-appendix/#integer","title":"integer \u53d8\u91cf","text":"<p>\u7ec6\u5fc3\u9605\u8bfb\u8fc7 lab1-2 \u7684 <code>testbench.v</code> \u7684\u540c\u5b66\u53ef\u80fd\u4f1a\u6ce8\u610f\u5230\u8fd9\u6bb5 <code>for</code> \u5faa\u73af\u3002\u6211\u4eec\u5728\u4eff\u771f\u7684\u65f6\u5019\u5e0c\u671b data \u7684\u503c\u53ef\u4ee5\u904d\u5386 0-7 \u4f46\u662f\u6211\u4eec\u4e0d\u5e0c\u671b\u624b\u52a8\u904d\u5386\u8fd9\u4e9b\u6d4b\u8bd5\u6837\u4f8b\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u53ef\u4ee5\u4f7f\u7528 <code>for</code> \u5faa\u73af\u6765\u52a0\u901f\u7f16\u7a0b\u6548\u7387\u3002 <pre><code>    integer i;\n    initial begin\n        ...\n        for(i=0;i&lt;8;i=i+1)begin\n            data=i[3:0];\n            #5;\n        end\n        ...\n    end\n</code></pre> \u4f46\u662f <code>initial</code> \u5757\u7684 <code>for</code> \u5faa\u73af\u8bed\u6cd5\u4e0d\u540c\u4e8e <code>generate</code> \u5757\uff0c\u5b83\u4f7f\u7528 <code>integer</code> \u5f97\u5230\u53d8\u91cf\u800c\u4e0d\u662f <code>genvar</code> \u53d8\u91cf\u3002<code>initial</code> \u5757\u7684 <code>for</code> \u5faa\u73af\u548c <code>generate</code> \u7684 <code>for</code> \u5faa\u73af\u5728\u8bed\u6cd5\u4e0a\u662f\u4fdd\u6301\u4e00\u81f4\u7684\uff0c\u4f46\u662f\u8bed\u4e49\u4e0a\u6709\u7ec6\u5fae\u533a\u522b\uff1agenerate \u7684 for \u5faa\u73af\u751f\u6210\u7684\u8bed\u53e5\u7528\u4e8e\u7535\u8def\u63cf\u8ff0\uff0c\u76f8\u4e92\u4e4b\u95f4\u662f\u7a7a\u95f4\u5e76\u5217\u5173\u7cfb\uff1b<code>initial</code> \u7684 <code>for</code> \u5faa\u73af\u751f\u6210\u7684\u8bed\u53e5\u7528\u4e8e\u4eff\u771f\u6fc0\u52b1\uff0c\u4f9d\u6b21\u4e4b\u95f4\u662f\u7531\u6fc0\u52b1\u7684\u65f6\u95f4\u5148\u540e\u5173\u7cfb\u7684\u3002</p> <p><code>integer</code> \u53d8\u91cf\u662f 32 \u4f4d\u7684\u53d8\u91cf\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u5b83\u662f\u4e00\u4e2a 32 \u4f4d bit \u5bbd\u7684 <code>reg</code>\u3002\u56e0\u6b64\u5b83\u88ab\u7528\u4e8e\u8f93\u51fa\u8d4b\u503c\u7684\u65f6\u5019\u9700\u8981\u8003\u8651\u4f4d\u5bbd\u95ee\u9898\u3002\u4e4b\u4e8e <code>integer</code> \u662f\u5426\u4f1a\u88ab\u7efc\u5408\u751f\u6210\u7535\u8def\u662f\u8981\u770b\u8bed\u5883\u7684\uff0c\u5982\u679c\u5b83\u88ab\u8bbe\u8ba1\u8005\u7528\u4f5c\u771f\u5b9e\u7684 32 \u4f4d\u5bc4\u5b58\u5668\uff0c\u90a3\u4e48\u4f1a\u751f\u6210\u5bf9\u5e94\u7684\u5bc4\u5b58\u5668\u7ec4\uff0c\u5982\u679c\u53ea\u662f\u88ab\u7528\u4e8e\u63d0\u4f9b\u7acb\u5373\u6570\u6216\u8005\u6267\u884c <code>for</code> \u5faa\u73af\u5219\u4f1a\u88ab\u9000\u5316\u4e3a\u7acb\u5373\u6570\u3002</p> <p>\u9664\u6b64\u4e4b\u5916\u8fd8\u6709 <code>short</code>\u3001<code>longint</code> \u5206\u522b\u662f 16 \u4f4d\u53d8\u91cf\u548c 64 \u4f4d\u53d8\u91cf\u3002</p>"},{"location":"lab2-1-appendix/#_1","title":"\u53c2\u6570\u5316\u7f16\u7a0b","text":"<p>\u5373\u4f7f\u5728 C \u8bed\u8a00\u4e2d\uff0c\u5927\u91cf\u4f7f\u7528\u7acb\u5373\u6570\u786c\u7f16\u7801\u4e5f\u662f\u4e0d\u5408\u9002\u7684\uff0c\u5982\u679c\u67d0\u4e00\u4e2a\u786c\u7f16\u7801\u5bf9\u5e94\u7684\u6570\u636e\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u6240\u6709\u5bf9\u5e94\u7684\u786c\u7f16\u7801\u90fd\u9700\u8981\u968f\u4e4b\u6539\u52a8\uff0c\u8fd9\u5c06\u964d\u4f4e\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u3002\u5e38\u7528\u7684\u65b9\u6cd5\u5c06\u7acb\u5373\u6570\u8f6c\u6362\u4e3a\u5b8f\u53d8\u91cf\u6216\u8005\u5e38\u91cf\u3002</p>"},{"location":"lab2-1-appendix/#_2","title":"\u5b8f\u53d8\u91cf\u53c2\u6570","text":"<p>\u5982\u679c\u6211\u4eec\u60f3\u5c06\u4e0b\u5217\u4e8c\u7ef4\u6570\u7ec4\u7684\u5bbd\u5ea6\u4ece 4 \u53d8\u4e3a 5\uff0c\u6211\u4eec\u9700\u8981\u4fee\u6539\u81f3\u5c11 3 \u5904\uff1a <pre><code>    wire [3:0] a [3:0];\n    wire [3:0] b [3:0];\n\n    genvar i;\n    generate\n        for(i=0;i&lt;4;i=i+1)begin\n            assign b[i] = a[i];\n        end\n    endgenerate\n</code></pre></p> <p>\u4f46\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u5b8f\u53d8\u91cf\u53d6\u4ee3\u786c\u7f16\u7801 3\uff0c\u8fd9\u6837\u5c31\u53ea\u9700\u8981\u4fee\u6539\u4e00\u5904\u5c31\u53ef\u4ee5\u4e86\uff0c\u5bf9\u5e94\u7684\u786c\u7f16\u7801\u90fd\u4f1a\u968f\u4e4b\u4fee\u6539\uff1a <pre><code>    `define LEN 4\n    wire [3:0] a [`LEN-1:0];\n    wire [3:0] b [`LEN-1:0];\n\n    genvar i;\n    generate\n        for(i=0;i&lt;`LEN;i=i+1)begin\n            assign b[i] = a[i];\n        end\n    endgenerate\n</code></pre></p>"},{"location":"lab2-1-appendix/#localparam","title":"localparam \u672c\u5730\u53c2\u6570","text":"<p>\u5b8f\u53d8\u91cf\u672c\u8eab\u53ea\u80fd\u505a\u7b80\u5355\u7684\u6587\u672c\u66ff\u6362\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8981\u652f\u6301\u4e00\u4e9b Verilog \u53c2\u6570\u8ba1\u7b97\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 <code>localparam</code> \u53c2\u6570\u3002\u8fd9\u5c31\u7c7b\u4f3c\u4e8e C \u8bed\u8a00\u5b9a\u4e49\u7684 <code>const</code> \u53d8\u91cf\uff0c<code>localparam</code> \u770b\u8d77\u6765\u662f\u5b9a\u4e49\u4e86\u4e00\u4e2a\u53d8\u91cf\uff0c\u4f46\u662f\u5728\u5b9e\u9645\u751f\u6210\u7684\u65f6\u5019\u53ea\u4f1a\u751f\u6210\u5bf9\u5e94\u7684\u7acb\u5373\u6570\u3002<code>localparam</code> \u53ea\u80fd\u88ab\u8d4b\u503c\u4e00\u6b21\uff0c\u8d4b\u503c\u8868\u8fbe\u5f0f\u53ef\u4ee5\u662f\u4efb\u610f <code>localparam</code>\u3001<code>parameter</code>\u3001\u7acb\u5373\u6570\u7684\u8ba1\u7b97\u7ed3\u679c\uff0c\u4f46\u662f\u4e0d\u80fd\u662f\u7535\u8def\u7684\u8f93\u51fa\uff0c\u56e0\u4e3a <code>localparam</code> \u53ea\u662f\u63d0\u4f9b\u53c2\u6570\u7acb\u5373\u6570\uff0c\u5b83\u4e0d\u662f\u7535\u8def\u7684\u4e00\u90e8\u5206\u3002 <pre><code>    localparam LEN=4;\n    wire [3:0] a [LEN-1:0];\n    wire [3:0] b [LEN-1:0];\n\n    genvar i;\n    generate\n        for(i=0;i&lt;LEN;i=i+1)begin\n            assign b[i] = a[i];\n        end\n    endgenerate\n</code></pre></p> <p>\u53e6\u5916\u5b8f\u53d8\u91cf\u53ef\u4ee5\u5b9a\u4e49\u5728 <code>module</code> \u5185\u90e8\u4e5f\u53ef\u4ee5\u5b9a\u4e49\u5728 <code>module</code> \u5916\u90e8\uff0c\u5bf9\u6574\u4e2a\u6587\u4ef6\u7684\u6240\u6709 <code>module</code> \u90fd\u6709\u6548\uff1b\u800c <code>localparam</code> \u53ea\u80fd\u5b9a\u4e49\u5728\u6a21\u5757\u5185\u90e8\uff0c\u4e14\u4ec5\u5bf9\u672c\u6a21\u5757\u6709\u6548\uff0c\u6240\u4ee5\u4e0d\u540c\u6a21\u5757\u53ef\u4ee5\u6709\u5404\u81ea\u7684 <code>LEN localparam</code>\uff0c\u800c\u4e0d\u5fc5\u62c5\u5fc3\u76f8\u4e92\u4e4b\u95f4\u5b58\u5728\u51b2\u7a81\u3002</p>"},{"location":"lab2-1-appendix/#parameter","title":"parameter \u53d8\u91cf","text":"<p>\u5047\u8bbe\u6211\u4eec\u5c06\u4e0a\u9762\u7684\u4e8c\u7ef4\u6570\u7ec4\u8d4b\u503c\u5c01\u88c5\u4e3a\u4e00\u4e2a\u6a21\u5757 <code>dummy</code>\u3002\u5982\u679c\u6211\u4eec\u5e0c\u671b\u4e8c\u7ef4\u6570\u7ec4\u5bbd\u5ea6\u4e3a 4\uff0c\u5219\u53ef\u4ee5\u5c06 <code>LEN</code> \u4fee\u6539\u4e3a 4\uff1b\u5982\u679c\u6211\u4eec\u5e0c\u671b\u4e8c\u7ef4\u6570\u7ec4\u5bbd\u5ea6\u4e3a 5\uff0c\u5219\u53ef\u4ee5\u5c06 <code>LEN</code> \u4fee\u6539\u4e3a 5\uff1b\u4f46\u662f\uff0c\u5982\u679c\u6211\u4eec\u540c\u65f6\u9700\u8981\u5bbd\u5ea6\u4e3a 4 \u7684 <code>dummy</code> \u90e8\u4ef6\u548c\u5bbd\u5ea6\u4e3a 5 \u7684 <code>dummy</code> \u90e8\u4ef6\u600e\u4e48\u529e\uff1f\u96be\u9053\u5c06 <code>dummy</code> \u7684\u4ee3\u7801\u590d\u5236\u4e24\u4efd\uff0c\u4ec5\u4ec5\u662f\u4e3a\u4e86\u5b9a\u4e49\u4e0d\u540c\u7684 <code>localparam</code>\uff1f\u597d\u5728 Verilog \u63d0\u4f9b\u4e86 <code>parameter</code> \u7684\u6a21\u5757\u53c2\u6570\u914d\u7f6e\u8bed\u6cd5\u3002 <pre><code>module dummy(\n    input ...\n    output ...\n);\n    ...\n    localparam LEN=4;\n    wire [3:0] a [LEN-1:0];\n    wire [3:0] b [LEN-1:0];\n\n    genvar i;\n    generate\n        for(i=0;i&lt;LEN;i=i+1)begin\n            assign b[i] = a[i];\n        end\n    endgenerate\n    ...\nendmodule\n</code></pre></p> <p>\u6a21\u5757\u540d\u548c\u6a21\u5757\u8f93\u5165\u8f93\u51fa\u7aef\u53e3\u5217\u8868\u4e4b\u95f4\u53ef\u4ee5\u52a0\u5165 <code>#( parameter \u53c2\u6570\u540d = \u9ed8\u8ba4\u503c ... )</code> \u53c2\u6570\u5217\u8868\uff0c\u53c2\u6570\u53ef\u4ee5\u6709\u591a\u4e2a\uff0c\u4f9d\u6b21\u7528 <code>,</code> \u9694\u5f00\uff0c\u53c2\u6570\u53ef\u4ee5 <code>=</code> \u63d0\u4f9b\u9ed8\u8ba4\u503c\u4e5f\u53ef\u4ee5\u4e0d\u63d0\u4f9b\u9ed8\u8ba4\u503c\u3002 <pre><code>module dummy #(\n    parameter LEN = 4\n) (\n    input ...\n    output ...\n);\n    ...\n    wire [3:0] a [LEN-1:0];\n    wire [3:0] b [LEN-1:0];\n\n    genvar i;\n    generate\n        for(i=0;i&lt;LEN;i=i+1)begin\n            assign b[i] = a[i];\n        end\n    endgenerate\n    ...\nendmodule\n</code></pre></p> <p>\u5f53\u6211\u4eec\u5b9e\u4f8b\u5316\u4e00\u4e2a <code>dummy</code> \u6a21\u5757\u7684\u65f6\u5019\u9664\u4e86\u9700\u8981\u5bf9\u8f93\u5165\u8f93\u51fa\u8fdb\u884c\u8fde\u7ebf\u4e4b\u5916\uff0c\u8fd8\u9700\u8981\u5bf9\u6240\u6709\u7684\u53c2\u6570\u8fdb\u884c\u53c2\u6570\u914d\u7f6e\u3002\u5982\u679c\u4e00\u4e2a\u53c2\u6570\u6ca1\u6709\u4f20\u53c2\uff0c\u90a3\u4e48\u4f1a\u4f7f\u7528\u9ed8\u8ba4\u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u4f46\u662f\u5982\u679c\u65e2\u6ca1\u6709\u4f20\u53c2\u4e5f\u6ca1\u6709\u9ed8\u8ba4\u503c\u5c31\u53ea\u80fd\u62a5\u9519\u4e86\u3002\u56e0\u6b64\u901a\u8fc7\u5b9e\u4f8b\u5316 <code>dummy</code> \u7684\u65f6\u5019\u7ed9 <code>LEN</code> \u53c2\u6570\u4e0d\u540c\u7684\u503c\u5c31\u53ef\u4ee5\u5f97\u5230\u4e0d\u540c\u4e8c\u7ef4\u6570\u7ec4\u5bbd\u5ea6\u7684 <code>dummy</code> \u7535\u8def\u3002 <pre><code>    dummy dummy1 (\n        ...\n    );// LEN = 4\n\n    dummy #(\n        .LEN(5)\n    ) dummy2 (\n        ...\n    );\n</code></pre></p> <p><code>parameter</code> \u4f20\u53c2\u7684\u503c\u53ef\u4ee5\u662f\u4efb\u610f <code>parameter</code>\u3001<code>localparam</code>\u3001\u7acb\u5373\u6570\u8ba1\u7b97\u5f97\u5230\u7684\u7acb\u5373\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u662f\u7535\u8def\u8f93\u51fa\u3002\u7279\u522b\u7684 <code>localparam</code> \u548c <code>parameter</code> \u7684\u503c\u4e5f\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32\u3002<code>localparam</code> \u548c <code>parameter</code> \u7684\u53c2\u6570\u7c7b\u578b\u4e5f\u4e0d\u662f\u4e8b\u5148\u786e\u5b9a\u7684\uff0c\u800c\u662f\u6839\u636e\u4f20\u5165\u53c2\u6570\u7684\u53c2\u6570\u7c7b\u578b\u52a8\u6001\u786e\u5b9a\u7684\uff0c\u4f8b\u5982\u4f20\u5165\u7684\u53c2\u6570\u662f\u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u5c31\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u662f 32 \u4f4d\u7acb\u5373\u6570\u5c31\u662f 32 \u4f4d\u7acb\u5373\u6570\u7c7b\u578b\u3002</p>"},{"location":"lab2-1/","title":"\u5b9e\u9a8c2-1: 64 \u4f4d\u5168\u52a0\u51cf\u6cd5\u5668\u7684\u5b9e\u73b0","text":""},{"location":"lab2-1/#_1","title":"\u5b9e\u9a8c\u76ee\u7684","text":"<ul> <li>\u5f3a\u5316\u4f7f\u7528 Verilog \u8bed\u8a00\u8fdb\u884c\u7535\u8def\u8bbe\u8ba1\u7684\u65b9\u6cd5</li> <li>\u638c\u63e1\u884c\u6ce2\u8fdb\u4f4d\u52a0\u6cd5\u5668\u548c\u5168\u52a0\u51cf\u6cd5\u5668\u7684\u539f\u7406</li> <li>\u8bbe\u8ba1\u5b9e\u73b0 64 bit\u8d85\u524d\u8fdb\u4f4d\u52a0\u6cd5\u5668</li> </ul>"},{"location":"lab2-1/#_2","title":"\u5b9e\u9a8c\u73af\u5883","text":"<ul> <li>\u64cd\u4f5c\u7cfb\u7edf\uff1aWindows 10+ 22H2\uff0cUbuntu 22.04+</li> <li>VHDL\uff1aVerilog</li> </ul>"},{"location":"lab2-1/#_3","title":"\u80cc\u666f\u77e5\u8bc6","text":""},{"location":"lab2-1/#1-bit","title":"1-bit \u5168\u52a0\u5668","text":"<p>\u5168\u52a0\u5668\u7684\u771f\u503c\u8868\u548c\u8f93\u5165\u8f93\u51fa\u5982\u4e0b\uff1a      </p> <p>\u5927\u5bb6\u53ef\u4ee5\u81ea\u7531\u4f7f\u7528\u4e4b\u524d\u5b66\u4e60\u7684 Verilog \u8bed\u6cd5\u8bbe\u8ba1\u903b\u8f91\u7535\u8def\uff0c\u586b\u5199 <code>src/lab2-1/submit/adder.v</code> \u7684\u4ee3\u7801\u3002 <pre><code>module Adder(\n    input a,        //\u88ab\u52a0\u6570\n    input b,        //\u52a0\u6570\n    input c_in,     //\u4f4e\u4f4d\u52a0\u6cd5\u8fd0\u7b97\u7684\u8fdb\u4f4d carry\n    output s,       //\u548c summary\n    output c_out    //\u8fdb\u4f4d carry\n);\n    //fill your code here\nendmodule \n</code></pre></p>"},{"location":"lab2-1/#_4","title":"\u884c\u6ce2\u8fdb\u4f4d\u52a0\u6cd5\u5668","text":"<p>\u6211\u4eec\u53ef\u4ee5\u7528 1-bit \u7684\u5168\u52a0\u5668\u4e3a\u57fa\u7840\u5b9e\u73b0\u4e00\u4e2a 32-bit \u5168\u52a0\u5668\uff0c\u53ea\u8981\u5c06\u4f4e\u4f4d\u5168\u52a0\u5668\u7684 <code>c_out</code> \u8fdb\u4f4d\u4f5c\u4e3a\u9ad8\u4f4d\u5168\u52a0\u5668\u7684 <code>c_in</code> \u5373\u53ef\u3002\u56e0\u4e3a\u9ad8\u4f4d\u8ba1\u7b97\u7684 <code>carry</code> \u7531\u4f4e\u4f4d\u8ba1\u7b97\u5f97\u5230\u7684 <code>carry</code> \u4f9d\u6b21\u4f20\u64ad\u5f97\u5230\uff0c<code>carry</code> \u50cf\u6ce2\u6d6a\u4e00\u6837\u5728\u5168\u52a0\u5668\u4e2d\u4ece\u4f4e\u4f4d\u5411\u9ad8\u4f4d\u4f20\u64ad\uff0c\u6240\u4ee5\u79f0\u4e4b\u4e3a\u884c\u6ce2\u8fdb\u4f4d\u52a0\u6cd5\u5668 ripple-carry adder\u3002      </p> <pre><code>module Adder32(\n    input [31:0] a,\n    input [31:0] b,\n    input c_in,\n    output [31:0] s,\n    output c_out\n);\n\n    wire [32:0] c;\n    assign c[0]=c_in;\n\n    Adder adder0(.a(a[0]),.b(b[0]),.c_in(c[0]),.s(s[0]),.c_out(c[1]));\n    Adder adder1(.a(a[1]),.b(b[1]),.c_in(c[1]),.s(s[1]),.c_out(c[2]));\n    Adder adder2(.a(a[2]),.b(b[2]),.c_in(c[2]),.s(s[2]),.c_out(c[3]));\n        ...\n    Adder adder31(.a(a[31]),.b(b[31]),.c_in(c[31]),.s(s[31]),c_out(c[32]));\nendmodule\n</code></pre> <p>\u4f46\u662f\u73b0\u5728\u6211\u4eec\u8981\u6c42\u8fd9\u4e2a\u5168\u52a0\u5668\u6a21\u5757\u53ef\u4ee5\u662f\u4efb\u610f\u957f\u5ea6\u7684\uff0c\u8bf7\u5927\u5bb6\u5584\u7528 <code>generate</code> \u8bed\u53e5\u548c <code>for</code> \u5faa\u73af\u81ea\u884c\u5b9e\u73b0 <code>src/lab2-1/submit/adders.v</code> \u6a21\u5757\u3002\u76f8\u5173\u8bed\u6cd5\u53ef\u89c1 Lab2-1 Appendix\u3002 <pre><code>module Adders #(\n    parameter LENGTH = 32   // \u53c2\u6570\uff0c\u5168\u52a0\u5668\u7684\u957f\u5ea6\n)(\n    input [LENGTH-1:0] a,   // \u88ab\u52a0\u6570\n    input [LENGTH-1:0] b,   // \u52a0\u6570\n    input c_in,             // \u4f4e\u4f4d\u8fdb\u4f4d\n    output [LENGTH-1:0] s,  // \u548c\n    output c_out            // \u9ad8\u4f4d\u8fdb\u4f4d\n);\n\n    ...\n\nendmodule\n</code></pre></p>"},{"location":"lab2-1/#_5","title":"\u8d85\u524d\u8fdb\u4f4d\u52a0\u6cd5\u5668","text":"<p>ripple-carry adder \u867d\u7136\u7ed3\u6784\u7b80\u5355\uff0c\u4f46\u968f\u4e4b\u800c\u6765\u7684\u5b58\u5728\u7f3a\u70b9\uff0c\u4e3a\u4e86\u89e3\u51b3 ripple-carry adder \u7684\u95ee\u9898\uff0c\u5de5\u7a0b\u5e08\u4eec\u8bbe\u8ba1\u4e86\u4e00\u79cd carry-lookahead adder\uff08\u8d85\u524d\u8fdb\u4f4d\u52a0\u6cd5\u5668\uff09\u3002</p> <p>\u56de\u5230 1-bit \u5168\u52a0\u5668\u4e2d\uff0c\u4e3a\u4e86\u4e86\u89e3 carry-lookahead adder \u7684\u601d\u8def\uff0c\u6211\u4eec\u9700\u8981\u589e\u52a0\u5bf9\u4e24\u4e2a\u4fe1\u53f7\u63cf\u8ff0\uff1a<code>P</code>\uff0c<code>G</code>.      </p> <p>\u53ef\u4ee5\u5f97\u5230\u4e0b\u9762\u7684\u516c\u5f0f: </p> <p>NOTE:\u516c\u5f0f\u4e2d\u7684\u52a0\u53f7\u662f\u771f\u6b63\u7684\u52a0\u53f7\uff0c\u5b9e\u9645\u4e0a\u53ef\u4ee5\u7406\u89e3\u4e3a\u5f02\u6216\u3002</p> \\[ \\begin{aligned} c_{i+1} &amp;= G_i + P_i \\cdot c_i\\\\ s_i &amp;= P_i \\oplus c_i\\\\ G_i &amp;=a_i\\cdot b_i\\\\ P_i &amp;=a_i\\oplus b_i \\end{aligned} \\] <p>\u90a3\u4e48\u5bf9\u4e8e\u4e00\u4e2a 4-bit \u7684 carry-lookahead adder\uff08\u5982\u56fe\uff09      </p> <p>\u901a\u8fc7\u5bf9\u4fe1\u53f7\u5206\u6790\u53ef\u4ee5\u5f97\u5230\uff1a</p> \\[ \\begin{aligned} c_1 &amp; = G_0 + P_0 \\cdot c_0\\\\ c_2 &amp; = G_1 + P_1 \\cdot G_0 + P_1\\cdot P_0 \\cdot c_0\\\\ c_3 &amp; = G_2 + P_2 \\cdot G_1 + P_2\\cdot P_1 \\cdot G_0 + P_2\\cdot P_1 \\cdot P_0 \\cdot c_0\\\\ c_4 &amp; = G_3 + P_3 \\cdot G_2 + P_3\\cdot P_2 \\cdot G_1 + P_3\\cdot P_2 \\cdot P_1 \\cdot G_0 + P_3\\cdot P_2 \\cdot P_1 \\cdot P_0 \\cdot c_0\\\\  \\end{aligned} \\] <p>\u90a3\u4e48\u4e00\u4e2a 4-bit \u7684 carry-lookahead \u7684\u52a0\u6cd5\u5668\u5c31\u5df2\u7ecf\u8bbe\u8ba1\u5b8c\u6210\u4e86\u3002\u5bf9\u4e8e 32-bit \u7684\u52a0\u6cd5\u5668\uff0c\u6211\u4eec\u4e5f\u53ea\u9700\u8981\u7528\u540c\u6837\u7684\u601d\u8def\u505a\u8d85\u524d\u8fdb\u4f4d\u5373\u53ef\u3002 </p> <p>\u5bf9\u4e8e 16-bit \u7684 carry-lookahead \u7684\u52a0\u6cd5\u5668\uff0c\u53ef\u4ee5\u5c06 4 \u4e2a 4-bit carry-lookahead \u52a0\u6cd5\u5668\u63a5\u5728\u4e00\u4e2a\u4e8c\u7ea7 carry-lookahead \u903b\u8f91\u4e0a\u3002\u90a3\u4e48\u5bf9\u4e8e\u4e00\u4e2a 4-bit carry-lookahead\uff0c\u5b83\u7684 P \u548c G \u4fe1\u53f7\u5206\u522b\u662f\uff1a</p> \\[ \\begin{aligned} P &amp; = P_3 \\cdot P_2 \\cdot P_1 \\cdot P_0\\\\ G &amp; = G_3 + P_3 \\cdot G_2 + P_3\\cdot P_2 \\cdot G_1 + P_3\\cdot P_2 \\cdot P_1 \\cdot G_0 \\end{aligned} \\] <p>\u5176\u5bf9\u5e94\u7684\u7535\u8def\u56fe\u5982\u4e0b\uff1a      </p> <p>\u6700\u540e\u4f7f\u7528 ripple-carry \u65b9\u6cd5\u5c06 2 \u4e2a 16-bit carry-lookahead \u52a0\u6cd5\u5668\u4e32\u8054\u6210\u4e00\u4e2a 32-bit \u52a0\u6cd5\u5668\u5373\u53ef\u3002</p>"},{"location":"lab2-1/#_6","title":"\u5168\u52a0\u51cf\u6cd5\u5668","text":"<p>N \u4f4d\u4e8c\u8fdb\u5236\u7684\u52a0\u51cf\u6cd5\u4e0d\u662f\u7eaf\u7cb9\u7684\u52a0\u51cf\u6cd5\uff0c\u800c\u662f \\(\\mod 2^N\\) \u610f\u4e49\u4e0b\u7684\u52a0\u6cd5\uff0c\u56e0\u6b64\uff1a</p> \\[ \\begin{aligned} a + b &amp; =  a + (b\\oplus \\underbrace{00\\ldots0}_N)  \\\\ a - b &amp; = a + (-b) \\equiv a + (((2^N-1) - b) + 1) = a + (b\\oplus \\underbrace{11\\ldots1}_N) + 1  \\end{aligned} \\] <p>\u5982\u679c\u6211\u4eec\u7528 <code>do_sub = 1</code> \u8868\u793a\u505a\u51cf\u6cd5\uff0c\u7528 <code>do_sub = 0</code> \u8868\u793a\u505a\u52a0\u6cd5\uff0c\u5219\u53ef\u4ee5\u5c06\u52a0\u6cd5\u548c\u51cf\u6cd5\u5408\u5e76\u4e3a\u5982\u4e0b\u903b\u8f91\u8868\u8fbe\u5f0f\uff1a\uff08\u8fd9\u91cc\u7528 \\(x\\) \u4ee3\u66ff <code>do_sub</code>\uff09</p> \\[ a + (b\\oplus\\underbrace{cc\\ldots c}_N) + c \\] <p>\u6240\u4ee5\u53ef\u4ee5\u5f97\u5230\u5982\u4e0b\u7684\u7535\u8def\u56fe\uff1a</p> <p> <p></p> <p></p> <p>\u6211\u4eec\u7684 adders \u6a21\u5757\u53ef\u4ee5\u5b9e\u73b0\u903b\u8f91\u4e09\u76ee\u8868\u8fbe\u5f0f <code>a + b + c</code>\uff0c\u56e0\u6b64\u8bf7\u4f7f\u7528\u5f02\u6216\u64cd\u4f5c\u548c adders \u6a21\u5757\u76f8\u7ed3\u5408\uff0c\u8865\u5168 <code>src/lab2-1/submit/add_subs.v</code> \u5b9e\u73b0\u5168\u52a0\u51cf\u6cd5\u5668\u3002</p> <pre><code>module AddSubers #(\n    parameter LENGTH = 32   //\u5168\u52a0\u51cf\u6cd5\u5668\u7684\u5bbd\u5ea6\n)(\n    input [LENGTH-1:0] a,   //\u88ab\u52a0\u6570/\u88ab\u51cf\u6570\n    input [LENGTH-1:0] b,   //\u52a0\u6570/\u51cf\u6570\n    input do_sub,           //0\u8868\u793a\u52a0\u6cd5\uff0c1\u8868\u793a\u51cf\u6cd5\n    output [LENGTH-1:0] s,  //\u548c/\u5dee\n    output c                //\u8fdb\u4f4d/\u501f\u4f4d\n);\n    //fill your code here\n\nendmodule\n</code></pre>"},{"location":"lab2-1/#_7","title":"\u4eff\u771f\u6d4b\u8bd5","text":""},{"location":"lab2-1/#_8","title":"\u968f\u673a\u6d4b\u8bd5","text":"<p>\u4e4b\u524d\u5b9e\u9a8c\u6211\u4eec\u7684 testbench \u7684\u6d4b\u8bd5\u6837\u4f8b\u90fd\u662f\u904d\u5386\u6240\u6709\u7684\u8f93\u5165\u7ec4\u5408\uff0c\u7136\u540e\u68c0\u67e5\u8f93\u51fa\u662f\u5426\u4e00\u4e00\u5bf9\u5e94\uff0c\u8fd9\u6837\u53ef\u4ee5\u6700\u5927\u7a0b\u5ea6\u5730\u786e\u4fdd\u903b\u8f91\u7535\u8def\u7684\u6b63\u786e\u6027\u3002\u4f46\u662f\u5bf9\u4e8e 32 \u4f4d\u5168\u52a0\u51cf\u6cd5\u5668\u751a\u81f3 64 \u4f4d\u5168\u52a0\u51cf\u6cd5\u5668\uff0c\u5176\u8f93\u5165\u7ec4\u5408\u7528 2^65 \u751a\u81f3 2^129 \u79cd\uff0c\u904d\u5386\u6240\u6709\u7684\u8f93\u5165\u7ec4\u5408\u662f\u4e0d\u73b0\u5b9e\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u8003\u8651\u968f\u673a\u4ea7\u751f\u8f93\u5165\u8fdb\u884c\u6d4b\u8bd5\u3002</p> <p>Verilog \u63d0\u4f9b\u4e86\u51fd\u6570 <code>$random()</code> \u6765\u63d0\u4f9b\u5bbd\u5ea6\u4e3a 32 \u4f4d\u7684\u968f\u673a\u6570\uff0c\u5982\u679c\u5bf9\u968f\u673a\u6570\u7684\u4f4d\u5bbd\u6709\u8981\u6c42\u53ef\u4ee5\u5bf9 <code>$random()</code> \u7684\u8f93\u51fa\u505a\u7d22\u5f15\u6216\u8005\u62fc\u63a5\u3002\u5207\u8bb0\uff0c<code>$random()</code> \u53ea\u80fd\u7528\u4e8e <code>initial</code> \u5757\u7684\u4eff\u771f\u6fc0\u52b1\uff0c\u5e76\u4e0d\u4f1a\u4ea7\u751f\u771f\u5b9e\u7684\u7535\u8def\u903b\u8f91\u3002</p>"},{"location":"lab2-1/#difftest","title":"\u5dee\u5206\u6d4b\u8bd5 difftest","text":"<p>\u901a\u8fc7\u89c2\u770b\u4eff\u771f\u6ce2\u5f62\uff0c\u7136\u540e\u624b\u5de5\u6bd4\u5bf9\u8f93\u5165\u8f93\u51fa\u7684\u5bf9\u5e94\u5173\u7cfb\u662f\u5426\u6b63\u786e\u65e0\u7591\u662f\u4f4e\u6548\u7684\uff0c\u7279\u522b\u662f\u5f53\u771f\u503c\u8868\u5f88\u96be\u76f4\u63a5\u63a8\u5bfc\u5f97\u5230\u7684\u65f6\u5019\u3002\u6b64\u65f6\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e2a\u5f85\u6d4b\u8bd5\u7535\u8def\u7684\u5bf9\u62cd\u5668\uff0c\u8fd9\u4e2a\u5bf9\u62cd\u5668\u7535\u8def\u7b49\u4ef7\u4e8e\u4ee3\u7801\u6d4b\u8bd5\u7535\u8def\uff0c\u7136\u540e\u4e3a\u4ed6\u4eec\u63d0\u4f9b\u4e00\u6837\u7684\u8f93\u5165\uff0c\u5728\u6bd4\u8f83\u4e8c\u8005\u7684\u8f93\u51fa\uff0c\u5982\u679c\u4e8c\u8005\u7684\u8f93\u51fa\u4fdd\u6301\u4e00\u81f4\u5219\u901a\u8fc7\u6d4b\u8bd5\uff0c\u53cd\u4e4b\u5219\u6d4b\u8bd5\u5931\u8d25\u3002</p> <p>\u5bf9\u62cd\u5668\u7535\u8def\u53ef\u4ee5\u7528 Verilog \u8bed\u8a00\u3001IP \u6838\u751a\u81f3 C \u8bed\u8a00\u7f16\u5199\uff0c\u4e14\u56e0\u4e3a\u53ea\u5728\u4eff\u771f\u4e2d\u4f7f\u7528\uff0c\u8bbe\u8ba1\u7684\u65f6\u5019\u5f80\u5f80\u53ea\u9700\u8981\u8003\u8651\u5176\u903b\u8f91\u6b63\u786e\u6027\uff0c\u800c\u65e0\u9700\u5173\u5fc3\u662f\u5426\u80fd\u751f\u6210\u771f\u6b63\u9ad8\u6548\u8fd0\u884c\u7684\u7535\u8def\u3002</p> <p><code>src/lab2-1/sim/judge.v</code> \u662f\u7528\u4e8e\u68c0\u6d4b <code>add_subs.v</code> \u6b63\u786e\u6027\u7684\u5bf9\u62cd\u5668\uff0c\u8fd9\u91cc\u76f4\u63a5\u7528 Verilog \u7684 <code>+/-</code> \u7b97\u5b50\u5b9e\u73b0\u52a0\u6cd5\u5668\u548c\u51cf\u6cd5\u5668\uff0c\u7528 <code>==</code> \u7b97\u5b50\u5b9e\u73b0\u6bd4\u8f83\u5668\uff0c\u68c0\u6d4b\u6700\u7ec8\u7ed3\u679c\u662f\u5426\u6b63\u786e\u3002</p> <p>Verilog \u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u7b97\u672f\u8fd0\u7b97\u7b97\u5b50\u5305\u62ec <code>+, -, *, /, %, &lt;&lt;, &gt;&gt;, &gt;&gt;&gt;, &gt;, &lt;, ==, !=, &lt;=, =&gt;</code> \u7b49\u5206\u522b\u5bf9\u5e94\u52a0\u6cd5\u5668\u3001\u51cf\u6cd5\u5668\u3001\u4e58\u6cd5\u5668\u3001\u9664\u6cd5\u5668\u3001\u6a21\u8fd0\u7b97\u5668\u3001\u79fb\u4f4d\u7535\u8def\u3001\u6bd4\u8f83\u7535\u8def\u7b49\u3002\u5b9e\u9645\u4e0a\u4f7f\u7528\u8fd9\u4e9b\u7b97\u5b50\u9664\u4e86\u5728\u7535\u8def\u8bbe\u8ba1\u4e0a\u66f4\u9ad8\u6548\u4ee5\u5916\uff0c\u7efc\u5408\u7684\u65f6\u5019 Vivado \u4e5f\u4f1a\u5145\u5206\u4f7f\u7528 FPGA \u4e0a\u5df2\u6709\u7684\u4e13\u7528\u7535\u8def\u642d\u5efa\u8fd9\u4e9b\u7535\u8def\uff0c\u6bd4\u6211\u4eec\u624b\u52a8\u7528\u903b\u8f91\u95e8\u642d\u5efa\u7684\u7535\u8def\u66f4\u52a0\u9ad8\u6548\u3002</p> <p>\u5927\u5bb6\u5728\u540e\u7eed\u8bbe\u8ba1\u590d\u6742\u7535\u8def\u7684\u65f6\u5019\u53ef\u4ee5\u5145\u5206\u4f7f\u7528\u8fd9\u4e9b\u7b97\u5b50\uff0c\u4f46\u662f\u73b0\u9636\u6bb5\u8bf7\u7ee7\u7eed\u7528\u95e8\u7535\u8def\u642d\u5efa\u8fd9\u4e9b\u8fd0\u7b97\u7535\u8def\uff0c\u4ee5\u671f\u5bf9\u5e95\u5c42\u7535\u8def\u6709\u4e00\u4e2a\u5177\u4f53\u6e05\u6670\u7684\u8ba4\u8bc6\u3002</p> function \u8bed\u6cd5\u548c <code>judge.v</code> \u5de5\u4f5c\u539f\u7406 <p>\u6211\u4eec\u5728\u4eff\u771f\u7684\u65f6\u5019\u53ef\u80fd\u9700\u8981\u6267\u884c\u4e00\u4e9b\u7b80\u5355\u7684\u51fd\u6570\u8ba1\u7b97\uff0c\u6240\u4ee5 Verilog \u63d0\u4f9b\u4e86 function \u8bed\u6cd5\u6765\u5b9e\u73b0\u7c7b\u4f3c C \u51fd\u6570\u7684\u529f\u80fd\u3002\u6211\u4eec\u4ee5\u4e0b\u9762\u8fd9\u6bb5\u4ee3\u7801\u4e3a\u4f8b\u4ecb\u7ecd\u4e00\u4e0b function \u51fd\u6570\u7684\u8bed\u6cd5\u3002</p> <pre><code>function unsigned add_judge(\n    input [31:0] a,\n    input [31:0] b,\n    input do_sub,\n    input [31:0] s,\n    input c\n);\n\n    reg [31:0] s_result;\n    reg c_result;\n\n    begin\n        if(do_sub)begin\n            {c_result,s_result}={1'b0,a}-{1'b1,b};\n        end else begin\n            {c_result,s_result}={1'b0,a}+{1'b0,b};\n        end\n        add_judge=(c_result==c)&amp;(s_result==s);\n    end\n\nendfunction\n</code></pre> <p>function \u51fd\u6570\u88ab<code>function ... endfunction</code>\u5173\u952e\u5b57\u5305\u56f4\u3002unsigned \u662f\u51fd\u6570\u7684\u8fd4\u56de\u7c7b\u578b\uff0c\u5fc5\u987b\u662f\u4e00\u4e2a Verilog \u7684\u53d8\u91cf\u7c7b\u578b\uff0c\u4e14\u548c C \u51fd\u6570\u4e00\u6837\uff0cfunction \u51fd\u6570\u53ea\u80fd\u6709\u4e00\u4e2a\u8fd4\u56de\u503c\u3002Verilog \u7684\u53d8\u91cf\u7c7b\u578b\u7531\u4f4d\u5bbd\u548c\u7b26\u53f7\u4e24\u90e8\u5206\u7ec4\u6210\uff0c\u4f8b\u5982<code>[1:0] unsigned</code>\u8868\u793a\u7c7b\u578b\u4e3a\u4f4d\u5bbd\u4e3a 2 bit \u7684\u65e0\u7b26\u53f7\u6570\u7c7b\u578b\u3002\u5982\u679c\u4f4d\u5bbd\u7f3a\u7701\u9ed8\u8ba4\u662f\u4e00\u4f4d\uff0c\u5982\u679c\u7b26\u53f7\u7c7b\u578b\u7f3a\u7701\uff0c\u9ed8\u8ba4\u662f unsigned \u7c7b\u578b\uff0c\u6240\u4ee5\u6211\u4eec\u5e73\u65f6\u5b9a\u4e49\u7684 wire\u3001reg \u5176\u5b9e\u90fd\u662f unsigned \u7c7b\u578b\u3002add_judge \u662f\u51fd\u6570\u7684\u540d\u5b57\u3002 <pre><code>function unsigned add_judge(\n    ...\n);\n    ...\nendfunction\n</code></pre></p> <p>function \u7684\u53c2\u6570\u5217\u8868\uff0c\u548c module \u7684\u53c2\u6570\u5217\u8868\u7ed3\u6784\u76f8\u4e00\u81f4\uff0c\u683c\u5f0f\u4e3a<code>input \u4f4d\u5bbd \u6570\u636e\u7c7b\u578b \u53c2\u6570\u540d</code>\u4f46\u662f\u56e0\u4e3a fuction \u65f6\u4f20\u5165\u53c2\u6570\u505a\u8ba1\u7b97\u7684\uff0c\u6240\u4ee5\u53c2\u6570\u53ea\u80fd\u662f input \u7c7b\u578b\uff0c\u4e0d\u5b58\u5728 output\u3002 <pre><code>    input [31:0] a,\n    input [31:0] b,\n    input do_sub,\n    input [31:0] s,\n    input c\n</code></pre></p> <p>\u6700\u540e\u662f function \u7684\u51fd\u6570\u4f53\u5b9a\u4e49\u3002\u6211\u4eec\u53ef\u4ee5\u7528\u4f20\u5165\u7684\u53c2\u6570\u76f4\u63a5\u4f5c\u4e3a\u53d8\u91cf\u52a0\u4ee5\u8ba1\u7b97\uff0c\u6b64\u5916 function \u81ea\u5e26\u4e00\u4e2a\u4e0e\u51fd\u6570\u540d\u540c\u540d\u3001\u4e0e\u8fd4\u56de\u7c7b\u578b\u540c\u7c7b\u578b\u7684\u53d8\u91cf add_judge\uff0c\u8fd9\u4e2a\u51fd\u6570\u6700\u540e\u88ab\u8d4b\u503c\u7684\u7ed3\u679c\uff0c\u5c31\u662f\u8be5\u51fd\u6570\u7684\u8fd4\u56de\u7ed3\u679c\u3002\u5982\u679c\u6211\u4eec\u9700\u8981\u989d\u5916\u7684\u53d8\u91cf\u53ef\u4ee5\u5728\u51fd\u6570\u4f53\u5f00\u5934\u624b\u52a8\u5b9a\u4e49\uff0c\u683c\u5f0f\u4e3a<code>reg \u53d8\u91cf\u7c7b\u578b \u53d8\u91cf\u540d</code>\uff0c\u8fd9\u91cc\u7684 reg \u548c\u5bc4\u5b58\u5668\u6ca1\u6709\u5173\u7cfb\uff0c\u4ec5\u4ec5\u53ea\u662f\u4e00\u4e2a\u51fd\u6570\u7684\u8fd0\u7b97\u53d8\u91cf\u800c\u5df2\u3002function \u4e0d\u5b58\u5728 wire \u53d8\u91cf\uff0c\u8fd9\u4e0d\u662f\u7535\u8def\uff0c\u6ca1\u6709\u5bfc\u7ebf\u3002 </p> <p>\u51fd\u6570\u4f53\u53ea\u80fd\u5305\u542b\u4e00\u53e5\u8fd0\u7b97\u8bed\u53e5\u3002\u5982\u679c\u6211\u4eec\u9700\u8981\u5305\u542b\u591a\u53e5\u53d8\u91cf\u8bed\u53e5\uff0c\u9700\u8981\u7528<code>begin ... end</code>\u5305\u88f9\u8d77\u6765\uff0c<code>begin ... end</code>\u8bed\u53e5\u5757\u88ab\u5f53\u4f5c\u5355\u4e00\u8bed\u53e5\u3002\u5185\u90e8\u53ef\u4ee5\u6709 for \u8bed\u53e5\u3001if-else \u8bed\u53e5\u3001case \u8bed\u53e5\u3001while \u8bed\u53e5\u3001\u7b97\u6570\u8fd0\u7b97\u8bed\u53e5\u7b49\uff0c\u8fd9\u91cc\u7684\u6267\u884c\u903b\u8f91\u548c\u7f16\u5199\u65b9\u5f0f\u548c C \u8bed\u8a00\u9ad8\u5ea6\u4e00\u81f4\u3002\u5bf9\u4e8e\u7efc\u5408\u7684\u7a0b\u5e8f\u6211\u4eec\u9700\u8981\u628a\u4ed6\u4eec\u8f6c\u5316\u4e3a\u5bf9\u5e94\u7684\u7535\u8def\u8fde\u63a5\uff0c\u4f46\u662f\u5bf9\u4e8e\u4ec5\u7528\u4e8e\u4eff\u771f\u7684\u8bed\u53e5\u53ea\u9700\u8981\u5f53\u4f5c\u4e14\u53ea\u80fd\u5f53\u4f5c C \u7a0b\u5e8f\u770b\u5f85\u3002 <pre><code>    reg [31:0] s_result;\n    reg c_result;\n\n    begin\n        if(do_sub)begin\n            {c_result,s_result}={1'b0,a}-{1'b1,b};\n        end else begin\n            {c_result,s_result}={1'b0,a}+{1'b0,b};\n        end\n        add_judge=(c_result==c)&amp;(s_result==s);\n    end\n</code></pre></p> <p>\u56e0\u4e3a function \u51fd\u6570\u662f\u5f53\u4f5c C \u51fd\u6570\u505a\u8fd0\u7b97\u7684\uff0c\u6240\u4ee5\u5b83\u4e0d\u80fd\u5305\u542b\u90a3\u4e9b\u7535\u8def\u7279\u6709\u7684\u8bed\u6cd5\uff0c\u6bd4\u5982 always \u5757\u89e6\u53d1\u3001wire \u53d8\u91cf\u3001#5 \u5ef6\u65f6\u8bed\u53e5\u3001\u65f6\u5e8f\u7535\u8def\u3001initial \u521d\u59cb\u5316\u7b49\u7b49\u3002</p> <p>\u4e4b\u540e judge \u6a21\u5757\u4f7f\u7528 add_judge \u51fd\u6570\u8fdb\u884c\u6b63\u786e\u6027\u7684\u68c0\u9a8c\u3002\u8be5\u51fd\u6570\u53ef\u4ee5\u50cf C \u51fd\u6570\u4e00\u6837\u8c03\u7528\uff0c\u4f20\u5165\u7684\u53c2\u6570\u53ef\u4ee5\u662f wire \u7684\u8f93\u51fa\uff0c\u4e5f\u53ef\u4ee5\u662f\u53c2\u6570\u3001\u7acb\u5373\u6570\uff0c\u51fd\u6570\u7684\u8f93\u51fa\u53ef\u4ee5\u88ab\u5f53\u4f5c\u53c2\u6570\u3001\u7acb\u5373\u6570\u7ed9\u5176\u4ed6\u7684 wire\u3001reg \u53d8\u91cf\u8d4b\u503c\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f function \u662f\u4ec5\u7528\u4e8e\u4eff\u771f\u7684\u8bed\u6cd5\uff0c\u5b83\u7684\u6267\u884c\u8ba1\u7b97\u662f\u6ca1\u6709\u7535\u8def\u5b9e\u9a8c\u5f00\u9500\u7684\uff0c\u65e0\u8bba\u5185\u90e8\u7684\u5185\u5bb9\u591a\u590d\u6742\u90fd\u53ef\u4ee5\u76f4\u63a5\u5f97\u5230\u6700\u7ec8\u7ed3\u679c\uff1b\u56e0\u4e3a function \u4ec5\u7528\u4e8e\u4eff\u771f\uff0c\u6240\u4ee5\u4e0d\u80fd\u5c06 function \u4ee3\u66ff\u590d\u6742\u7535\u8def\u903b\u8f91\u7528\u4e8e\u7535\u8def\u7efc\u5408\uff0c\u4ed6\u65e0\u6cd5\u751f\u6210\u6709\u610f\u4e49\u7684\u7535\u8def\u3002</p> <pre><code>module Judge(\n    input [31:0] a,\n    input [31:0] b,\n    input do_sub,\n    input [31:0] s,\n    input c,\n    output error\n);\n\n    assign error=~add_judge(a,b,do_sub,s,c);\n\nendmodule //Judge\n</code></pre> <p>\u5982\u679c Judge \u6a21\u5757\u5185\u90e8 add_judge \u51fd\u6570\u8ba1\u7b97\u8868\u660e\u5b58\u5728\u9519\u8bef\uff0c\u5219\u6bcf\u4e2a\u5468\u671f always \u5757\u88ab\u89e6\u53d1\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u68c0\u67e5 error \u662f\u4e0d\u662f\u7b49\u4e8e 1\uff0c\u5982\u679c\u7b49\u4e8e 1\uff0c\u5c31\u4f1a\u7528\u5185\u7f6e\u7684 $display \u51fd\u6570\u8f93\u51fa\u9519\u8bef\u4fe1\u606f\u3002\u5728\u4eff\u771f\u7684\u65f6\u5019 always \u5757\u5185\u90e8\u7684\u63cf\u8ff0\u7684\u5185\u5bb9\u662f\u4f1a\u88ab\u6309\u7167 C \u8bed\u8a00\u90a3\u6837\u6267\u884c\u7684\uff0c\u6bd4\u5982 if-else \u53ea\u6267\u884c if \u5757\u6216\u8005\u53ea\u6267\u884c else \u5757\uff0c\u4f46\u662f\u5f53\u8f6c\u6362\u7535\u8def\u7684\u65f6\u5019 if \u5bf9\u5e94\u7684\u7535\u8def\u548c else \u5bf9\u5e94\u7684\u7535\u8def\u603b\u662f\u540c\u65f6\u5de5\u4f5c\u7684\uff0c\u7406\u6e05\u4eff\u771f\u548c\u7efc\u5408\u7684\u533a\u522b\u6709\u5229\u4e8e\u52a0\u6df1\u5bf9 Verilog \u7535\u8def\u63cf\u8ff0\u8bed\u8a00\u548c\u4eff\u771f\u8bed\u8a00\u7684\u7406\u89e3\u3002 <pre><code>    wire error;\n    Judge judge(\n        .a(a),\n        .b(b),\n        .do_sub(do_sub),\n        .s(s),\n        .c(c),\n        .error(error)\n    );\n\n    always@(posedge clk)begin\n        if(error)begin\n            $display(\"a=%d, b=%d, do_sub=%d, s=%d, c=%d, error\", a, b, do_sub, s, c);\n        end\n    end\n</code></pre></p> <p><code>$display()</code> \u51fd\u6570\u7684\u7528\u6cd5\u548c C \u8bed\u8a00\u7684 <code>printf()</code> \u7c7b\u4f3c\uff0c\u53ef\u4ee5\u63a5\u53d7\u53c2\u6570\u4f5c\u4e3a\u8f93\u5165\uff0c\u4e5f\u53ef\u4ee5\u63a5\u53d7\u7535\u8def\u8f93\u51fa\u4f5c\u4e3a\u8f93\u5165\u3002\u4f46\u662f\u5207\u8bb0\uff0c<code>$display()</code> \u8fd9\u7c7b\u51fd\u6570\u53ea\u80fd\u7528\u4e8e <code>always</code> \u5757\u548c <code>initial</code> \u5757\u5185\u3002</p> <code>testbench.v</code> \u4eff\u771f\u4ee3\u7801\u539f\u7406 <p>\u4e0b\u9762\u7684\u4ee3\u7801\u6765\u81ea <code>src/lab2-1/sim/testbench.v</code>\uff0c\u7528\u4e8e\u6211\u4eec\u8fdb\u884c\u4eff\u771f\u6d4b\u8bd5\uff0c\u5305\u62ec\u5dee\u5206\u6d4b\u8bd5 difftest\u3002</p> <p>\u8fd9\u91cc\u7684 <code>always</code> \u5757\u5f88\u660e\u663e\u662f\u7528\u4e8e\u4eff\u771f\u7684\uff0c\u5b83\u5e76\u4e0d\u4f1a\u751f\u6210\u771f\u5b9e\u7684\u7535\u8def\uff0c\u5927\u5bb6\u53ef\u4ee5\u628a\u5b83\u5f53\u4f5c\u4e00\u4e2a C \u8bed\u8a00\u7684 if-else \u903b\u8f91\u6765\u770b\u5f85\u3002\u751f\u6210\u7535\u8def\u7684\u4ee3\u7801\u4ee5\u7535\u8def\u7684\u89c6\u89d2\u770b\u5f85\uff0c\u7528\u4e8e\u4eff\u771f\u7684\u4ee3\u7801\u4ee5 C \u903b\u8f91\u7684\u89c6\u89d2\u770b\u5f85\u5373\u53ef\u3002</p> <pre><code>        reg clk;\n        initial begin\n            clk=1'b0;\n        end\n        always begin\n            clk=~clk;\n            #5;\n        end\n        // \u63d0\u4f9b\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u4e3a 10 \u5355\u4f4d\u65f6\u95f4\u7684\u65f6\u949f\n\n        wire error;\n        Judge judge(\n            .a(a),\n            .b(b),\n            .do_sub(do_sub),\n            .s(s),\n            .c(c),\n            .error(error)\n        );\n        // \u5bf9\u62cd\u5668\u68c0\u67e5 add_subs \u7684\u8f93\u5165\u8f93\u51fa\u662f\u5426\u6b63\u786e\n\n        always@(posedge clk)begin\n            if(error)begin\n            // \u6bcf\u4e2a\u65f6\u949f\u5468\u671f\u68c0\u67e5\u4e00\u6b21 error \u7684\u503c\uff0c\u5982\u679c\u68c0\u67e5\u51fa\u6765\u7ed3\u679c\u662f\u9519\u7684\n                $display(\"a=%d, b=%d, do_sub=%d, s=%d, c=%d, error\", a, b, do_sub, s, c);\n                // display \u51fd\u6570\u8f93\u51fa\u9519\u8bef\u7684\u4fe1\u606f\n            end\n        end\n</code></pre>"},{"location":"lab2-1/#_9","title":"\u5b9e\u9a8c\u6b65\u9aa4","text":""},{"location":"lab2-1/#_10","title":"\u5b9e\u9a8c\u524d\u51c6\u5907","text":"<p>\u4e0e\u4e4b\u524d\u7684 lab \u76f8\u540c\uff0c\u542f\u52a8\u5b89\u88c5\u5728\u4f60\u7535\u8111\u4e2d\u7684 Ubuntu 22.04 \u73af\u5883\uff08 WSL \u6216\u865a\u62df\u673a\uff09\uff0c\u968f\u540e\u901a\u8fc7 <code>cd</code> \u79fb\u52a8\u5230 <code>sys1-sp24</code> \u76ee\u5f55\u4e0b\uff0c\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff1a <pre><code>git pull\ncd repo/sys-project\ngit pull\n</code></pre></p> <p>\u8fd9\u4e2a\u547d\u4ee4\u5c06\u4ed3\u5e93\u66f4\u65b0\u5230\u6700\u65b0\u72b6\u6001\uff0c\u4f60\u53ef\u4ee5\u770b\u5230 <code>src/</code> \u76ee\u5f55\u4e0b\u51fa\u73b0 <code>lab2-1/</code> \u76ee\u5f55\u3002</p>"},{"location":"lab2-1/#_11","title":"\u8bbe\u8ba1\u884c\u6ce2\u8fdb\u4f4d\u52a0\u6cd5\u5668","text":"<p>\u4ed4\u7ec6\u9605\u8bfb\u6307\u5bfc\uff0c\u7f16\u5199 <code>src/lab2-1/submit</code> \u6587\u4ef6\u5939\u4e0b\u7684\u6587\u4ef6 <code>adder.v</code>, <code>adders.v</code>, <code>add_subs.v</code>\uff0c\u8bbe\u8ba1\u53ef\u914d\u7f6e\u5bbd\u5ea6\u7684\u884c\u6ce2\u8fdb\u4f4d\u52a0\u6cd5\u5668\u3002\u4e0d\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 <code>+/-</code> \u7b49\u9ad8\u7ea7 Verilog \u8bed\u6cd5\u3002</p>"},{"location":"lab2-1/#_12","title":"\u4eff\u771f\u9a8c\u8bc1","text":"<p>\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528\u4e86\u5dee\u5206\u6d4b\u8bd5\u6765\u5bf9\u4ee3\u7801\u8fdb\u884c\u4eff\u771f\u6d4b\u8bd5\uff0c\u76f8\u5173\u539f\u7406\u53ef\u89c1 Lab2-1 Appendix \u5176\u4e2d\u5305\u62ec\u4e0b\u9762\u7684\u4e24\u4e2a\u6587\u4ef6\uff1a</p> <ul> <li><code>src/lab2-1/sim/testbench.v</code> \u63d0\u4f9b\u4e86\u5dee\u5206\u6d4b\u8bd5\u7684\u8c03\u7528\u4ee3\u7801\uff0c\u5bf9\u62cd\u5668\u8d1f\u8d23\u68c0\u67e5\u8f93\u5165\u8f93\u51fa\u662f\u5426\u6b63\u786e\uff0c\u6b64\u5916\u53e6\u4e00\u4e2a\u68c0\u67e5\u7535\u8def\u4f1a\u6bcf\u9694 10 \u65f6\u95f4\u5355\u4f4d\u68c0\u67e5\u5bf9\u62cd\u5668\u7684\u68c0\u6d4b\u7ed3\u679c\uff0c\u5982\u679c\u68c0\u6d4b\u5b58\u5728\u9519\u8bef\u5219\u8c03\u7528 <code>$display()</code> \u8f93\u51fa\u9519\u8bef\u4fe1\u606f\u3002</li> <li><code>src/lab2-1/sim/judge.v</code> \u662f\u7528\u4e8e\u68c0\u6d4b <code>add_subs.v</code> \u6b63\u786e\u6027\u7684\u5bf9\u62cd\u5668\uff0c\u8fd9\u91cc\u76f4\u63a5\u7528 Verilog \u7684 <code>+/-</code> \u7b97\u5b50\u5b9e\u73b0\u52a0\u6cd5\u5668\u548c\u51cf\u6cd5\u5668\uff0c\u7528 <code>==</code> \u7b97\u5b50\u5b9e\u73b0\u6bd4\u8f83\u5668\uff0c\u68c0\u6d4b\u6700\u7ec8\u7ed3\u679c\u662f\u5426\u6b63\u786e\u3002</li> </ul> <p>\u56e0\u6b64\uff0c\u672c\u90e8\u5206\u4f60\u9700\u8981\u505a\u7684\u662f\uff1a</p> <ul> <li>\u5728 <code>src/lab2-1/sim/testbench.v</code> \u4e2d\u52a0\u5165 20 \u7ec4\u968f\u673a\u6837\u4f8b\uff0c\u7136\u540e\u8fd0\u884c <code>make verilate</code> \u8fdb\u884c\u4eff\u771f\u6d4b\u8bd5\u3002\u8bf7\u5584\u7528<code>$random()</code> \u51fd\u6570\u3001<code>integer</code> \u53d8\u91cf\u548c <code>for</code> \u5faa\u73af\u3002<ul> <li>\u6bcf\u7ec4\u6d4b\u8bd5\u6837\u4f8b\u4e4b\u95f4\u7684\u65f6\u95f4\u95f4\u9694\u8bf7\u5927\u4e8e\u7b49\u4e8e 20 \u4e2a\u65f6\u95f4\u5355\u4f4d\uff0c\u4e0d\u7136\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5dee\u5206\u6d4b\u8bd5\u51fa\u9519\u3002</li> </ul> </li> </ul>"},{"location":"lab2-1/#_13","title":"\u4e0b\u677f\u9a8c\u8bc1","text":"<p><code>src/lab2-1/include/initial_file.vh</code> \u5b9a\u4e49\u4e86\u53d8\u91cf <code>FILE_PATH</code> \u7684\u503c\uff0c\u7528\u4e8e\u6307\u793a <code>initial.hex</code> \u7684\u6587\u4ef6\u8def\u5f84\uff0c\u8bf7\u5927\u5bb6\u5c06 <code>FILE_PATH</code> \u8bbe\u7f6e\u4e3a\u81ea\u5df1\u7684 <code>initial.hex</code> \u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\u3002\u5f53\u6211\u4eec verilate \u4eff\u771f\u7684\u65f6\u5019\u4f7f\u7528\u7684\u662f if \u5206\u652f\u7684\u8def\u5f84\uff0c\u5728 Vivado \u4eff\u771f\u6216\u8005\u7efc\u5408\u7684\u65f6\u5019\u5219\u662f\u4f7f\u7528 else \u5206\u652f\u7684\u8def\u5f84\u3002 <pre><code>    `ifdef VERILATE\n        localparam FILE_PATH=\"initial.hex\";\n    `else\n        localparam FILE_PATH=\"D:\\\\txt\\\\system2\\\\sys1-sp24\\\\src\\\\lab2-1\\\\build\\\\verilate\\\\initial.hex\";\n    `endif\n</code></pre></p> <p>\u8fd0\u884c <code>make bitstream</code> \u6216\u8005\u81ea\u884c\u901a\u8fc7 Vivado \u521b\u5efa\u5de5\u7a0b\uff0c\u5e76\u7efc\u5408\u751f\u6210\u6bd4\u7279\u6d41\uff0c\u968f\u540e\u4e0b\u677f\u9a8c\u8bc1\u3002</p> <code>top.v</code> \u5de5\u4f5c\u539f\u7406 <p><code>top.v</code> \u7684\u7535\u8def\u56fe\u5982\u4e0b\uff1a  </p> <p>\u6211\u4eec\u5bf9\u8bed\u6cd5\u548c\u8f93\u5165\u8f93\u51fa\u505a\u4e00\u4e2a\u7b80\u5355\u7684\u63cf\u8ff0\uff0c\u5177\u4f53\u7684\u7ec6\u8282\uff0c\u5927\u5bb6\u81ea\u884c\u7ed3\u5408\u7535\u8def\u56fe\u548c\u4ee3\u7801\u8fdb\u884c\u7406\u89e3\u3002</p> <p>\u4e0b\u9762\u662f <code>repo/sys-project/lab2-1/syn/top.v</code> \u4e2d\u7684\u90e8\u5206\u4ee3\u7801\uff0c\u8fd9\u91cc <code>FILE_PATH</code> \u662f <code>initial.hex</code> \u7684\u6587\u4ef6\u8def\u5f84\uff0cadder \u7528\u4e8e\u5b58\u50a8\u6d4b\u8bd5\u7684\u6570\u636e\u3002\u7136\u540e <code>$readmemh</code> \u51fd\u6570\u5c06 <code>initial.hex</code> \u6587\u4ef6\u7684 8 \u4e2a 64 \u4f4d\u6570\u636e\u5206\u522b\u521d\u59cb\u5316 adder \u7684\u6bcf\u4e00\u4e2a\u6210\u5458\u7684\u6bcf\u4e00\u4e2a bit\u3002\u7279\u522b\u7684\uff0c\u867d\u7136 <code>$readmemh</code>\u662f <code>initial</code> \u5757\u7684\u4ee3\u7801\uff0c\u4e14\u6211\u4eec\u4e00\u518d\u5f3a\u8c03 <code>initial</code> \u7684\u4eff\u771f\u4ee3\u7801\u4e0d\u4f1a\u88ab\u7efc\u5408\u751f\u6210\u7535\u8def\uff0c\u4f46\u662f <code>$readmemh</code> \u662f\u4e00\u4e2a\u4f8b\u5916\uff0c\u56e0\u6b64\u4e0b\u677f\u4e4b\u540e adder \u7684\u503c\u771f\u7684\u4f1a\u88ab\u521d\u59cb\u5316\u4e3a <code>initial.hex</code> \u7684\u503c\u3002 <pre><code>    `include\"initial_file.vh\"\n\n    reg [63:0] adder [0:7];//\u8fd9\u4e2a\u987a\u5e8f\u5f88\u91cd\u8981\n    initial begin\n        $readmemh(FILE_PATH, adder);\n    end\n</code></pre> <code>repo/sys-project/lab2-1/syn/initial.hex</code> \u5b58\u50a8\u4e86\u6d4b\u8bd5\u6570\u636e\uff0c\u53ef\u4ee5\u770b\u5230\u6bcf\u4e00\u884c\u90fd\u662f 16 \u4f4d\u7684 16 \u8fdb\u5236\u6570\uff0c\u8fd9\u5c31\u4ee3\u8868\u4e86\u4e00\u4e2a 64 \u4f4d\u6570\u636e\u7684\u6570\u503c\uff0c\u4e00\u5171\u6709 8 \u4e2a\u3002 <pre><code>    0123456789abcdef\n    473950283859bcda\n    1029bacd28dbcfa0\n    10294753bacdefbd\n    38472bdfacef2634\n    aef827527384facd\n    83726485937facde\n    afced27829378236\n</code></pre></p> <p>\u5c06\u6bd4\u7279\u6d41\u70e7\u5f55\u5230\u5b9e\u9a8c\u677f\u4e0a\uff0c\u7136\u540e\u901a\u8fc7\u5f00\u5173\u548c\u6570\u7801\u7ba1\u7684\u663e\u793a\u503c\u9a8c\u8bc1\u7535\u8def\u7684\u6b63\u786e\u6027\u3002</p> <ul> <li><code>sw[1:0]</code> \u9009\u62e9 adder \u4e2d\u7684 4 \u7ec4\u6d4b\u8bd5\u6837\u4f8b\u7684\u4e00\u7ec4\u3002</li> <li><code>sw[2]</code> \u9009\u62e9\u505a\u52a0\u6cd5\u8fd8\u662f\u51cf\u6cd5\u3002</li> <li><code>sw[5:3]</code> \u9009\u62e9\u8f93\u51fa a\u3001b\u3001s\u3001c \u7684\u503c\u7684\u9ad8 32 \u4f4d\u8fd8\u662f\u4f4e 32 \u4f4d\u3002</li> <li><code>SEG</code> \u663e\u793a 32 \u4f4d\u6570\u636e\u7684\u503c\u3002</li> </ul>"},{"location":"lab2-1/#100","title":"\u5b9e\u9a8c\u62a5\u544a 100%","text":"<ol> <li> <p>\u8bf7\u5728\u5b9e\u9a8c\u62a5\u544a\u4e2d\u8be6\u7ec6\u63cf\u8ff0\u6bcf\u4e00\u6b65\u7684\u8fc7\u7a0b\u5e76\u914d\u6709\u9002\u5f53\u7684\u622a\u56fe\u548c\u89e3\u91ca\uff0c\u5bf9\u4e8e\u4eff\u771f\u8bbe\u8ba1\u548c\u4e0a\u677f\u9a8c\u8bc1\u7684\u7ed3\u679c\u4e5f\u5e94\u5f53\u6709\u9002\u5f53\u7684\u89e3\u91ca\u548c\u7167\u7247\u3002Total : 50%</p> <p>\u7ec6\u5206\uff1a</p> <ul> <li>\u4f7f\u7528 <code>for</code> \u8bed\u53e5\u8fdb\u884c\u4eff\u771f\u548c\u7efc\u5408 15%</li> <li>\u4f7f\u7528 <code>$random()</code> \u51fd\u6570\u8fdb\u884c\u4eff\u771f\u6837\u4f8b\u751f\u6210 15%</li> <li>\u7efc\u5408\u5b9e\u73b0\u5168\u52a0\u51cf\u6cd5\u5668 20%</li> </ul> </li> <li> <p>\u601d\u8003\u5982\u4e0b\u95ee\u9898\uff1a</p> <ul> <li>\u5bf9\u4e8e <code>repo/sys-project/lab2-1/syn/top.v</code> \u4e2d\u7684 <code>reg [63:0] adder [0:7]</code>\uff0c\u8bf7\u4f9d\u6b21\u66ff\u6362\u4e3a\u4e0b\u9762\u7684\u56db\u79cd\u683c\u5f0f     <pre><code>    reg [0:63] adder [0:7];\n    reg [0:63] adder [7:0];\n    reg [63:0] adder [0:7];\n    reg [127:0] adder [0:7];\n</code></pre>     \u901a\u8fc7\u4eff\u771f\u6216\u8005\u7efc\u5408\u4e0b\u677f\u89c2\u5bdf adder \u7684\u6bcf\u4e2a bit \u4f1a\u88ab\u521d\u59cb\u5316\u4e3a\u4f55\u503c\uff1f\u8bf7\u5c1d\u8bd5\u5bf9\u6bcf\u4e00\u79cd\u683c\u5f0f\u90fd\u8fdb\u884c\u4eff\u771f\u6216\u8005\u7efc\u5408\uff0c\u5e76\u5bf9 <code>readmemh</code> \u5982\u4f55\u521d\u59cb\u5316\u4e00\u7ef4\u5411\u91cf\u6570\u7ec4\u7684\u6bcf\u4e2a bit \u7ed9\u51fa\u7ed3\u8bba\u300225%</li> <li>\u8bf7\u601d\u8003\u76f8\u5bf9\u4e8e\u8d85\u524d\u8fdb\u4f4d\u52a0\u6cd5\u5668\uff0c\u884c\u6ce2\u8fdb\u4f4d\u52a0\u6cd5\u5668\u5b58\u5728\u4ec0\u4e48\u7f3a\u70b9\uff1f10%</li> <li>\u5982\u4f55\u8868\u793a\u8fd0\u7b97\u6ea2\u51fa\uff1f\u8bf7\u7ed9\u51fa\u6ea2\u51fa\u8868\u793a\u7684\u5e03\u5c14\u4ee3\u6570\uff08\u7528 <code>Adder_32</code> \u7684\u8f93\u5165\u4e0e\u8f93\u51fa\u8ba1\u7b97\uff09\u300215%</li> </ul> </li> </ol>"},{"location":"lab2-1/#_14","title":"\u4ee3\u7801\u63d0\u4ea4","text":""},{"location":"lab2-1/#100_1","title":"\u9a8c\u6536\u68c0\u67e5\u70b9 100%","text":"<ul> <li>\u4eff\u771f\u6ce2\u5f62\u5c55\u793a 30%</li> <li>\u4ee3\u7801\u89e3\u91ca\u6216\u8bbe\u8ba1\u601d\u8def 30%</li> <li>\u4e0b\u677f\u9a8c\u8bc1 40%</li> </ul>"},{"location":"lab2-1/#_15","title":"\u63d0\u4ea4\u6587\u4ef6","text":"<p><code>src/lab2-1/</code> \u4e2d\u7f16\u5199\u7684 <code>submit/</code> \u548c <code>sim/</code> \u76ee\u5f55\u4e0b\u7684\u4ee3\u7801\u3002</p>"},{"location":"lab3-1-appendix/","title":"reg \u4e0e\u65f6\u5e8f\u7535\u8def","text":""},{"location":"lab3-1-appendix/#_1","title":"\u5bc4\u5b58\u5668","text":"<p>Verilog \u53ef\u4ee5\u7528<code>reg</code>\u5b9a\u4e49\u5bc4\u5b58\u5668\uff1a</p> <pre><code>    reg a; // \u5b9a\u4e49\u4e00\u4e2a\u5bc4\u5b58\u5668 a\n    reg [7:0] b; // \u5b9a\u4e49\u5bc4\u5b58\u5668\u7ec4 b[0]-b[7]\n    reg [7:0] b [11:0]; // \u5b9a\u4e49\u5bc4\u5b58\u5668\u4e8c\u7ef4\u6570\u7ec4\n    reg [7:0] b [11:0]...[11:0]; // \u5b9a\u4e49\u5bc4\u5b58\u5668\u9ad8\u7ef4\u6570\u7ec4\n    // \u6570\u7ec4\u957f\u5ea6\u3001\u6392\u5217\u987a\u5e8f\u3001\u7d22\u5f15\u7b49\u548c wire \u8bed\u6cd5\u4e00\u81f4\n</code></pre>"},{"location":"lab3-1-appendix/#_2","title":"\u89e6\u53d1\u5668","text":"<p>Verilog \u7684\u89e6\u53d1\u5668\u53ef\u4ee5\u7b80\u5355\u5730\u8ba4\u4e3a\u662f D \u89e6\u53d1\u5668\u3002\u6700\u7b80\u5355\u7684\u89e6\u53d1\u5668 Verilog \u8bed\u8a00\u5982\u4e0b\uff0c\u65f6\u949f\u8fb9\u6cbf\u6cbf\u89e6\u53d1\uff0c\u8f7d\u5165 data \u8f93\u5165\u7684\u503c\u3002\u8fd9\u4e9b\u5bc4\u5b58\u5668\u4e00\u822c\u4f1a\u4f7f\u7528 FPGA \u5185\u7f6e\u7684 Flip Flop \u5b9e\u73b0\u3002</p> <p></p> <p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230 flip flop \u7a00\u758f\u5747\u5300\u5730\u5206\u5e03\u5728 FPGA \u7684 slice \u4e0a\uff0c\u56e0\u6b64\u8fd9\u79cd\u5bc4\u5b58\u5668\u88ab\u79f0\u4e3a distribute register\uff0c\u7b80\u79f0 dram\uff0c\u5373\u5206\u5e03\u5f0f\u5bc4\u5b58\u5668\u3002</p> <p></p> <pre><code>    wire data;\n    reg a;\n    reg b;\n    always@(posedge clk)begin\n    // always at positive edge of clk\n    // \u603b\u662f\u5728 clk \u4fe1\u53f7\u7684\u4e0a\u5347\u6cbf\u89e6\u53d1\u4ee5\u4e0b\u529f\u80fd\u5757\n        a &lt;= data;\n        // \u5bc4\u5b58\u5668 a \u8f7d\u5165\u7ebf\u8def data \u7684\u6570\u636e\n    end\n\n    always@(negedge clk)begin\n    // always at negative edge of clk\n    // \u603b\u662f\u5728 clk \u4fe1\u53f7\u7684\u4e0b\u964d\u6cbf\u89e6\u53d1\u4ee5\u4e0b\u529f\u80fd\u5757\n        b &lt;= a;\n        // \u5bc4\u5b58\u5668 b \u8f7d\u5165\u7ebf\u8def a \u7684\u6570\u636e\n    end\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u52a8\u6001\u7684\u611f\u53d7\u4e00\u4e0b\u4e0a\u8ff0\u7535\u8def\u7684\u6ce2\u5f62\u53d8\u5316\uff0c\u4e00\u5f00\u59cb\u7684\u65f6\u5019\u5bc4\u5b58\u5668 a\u3001b \u5047\u8bbe\u503c\u662f 0\uff0cdata \u548c clk \u5f15\u811a\u63a5\u53d7\u7684\u8f93\u5165\u5982\u4e0b\uff1a</p> <p></p> <p>\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\uff0c\u7535\u7ebf\u4e0a\u7684\u6ce2\u5f62\u5f00\u59cb\u5411\u540e\u4f20\u64ad\uff0c\u4f46\u662f\u56e0\u4e3a\u5bc4\u5b58\u5668\u672c\u8eab\u7684\u7279\u6b8a\u6027\uff0c\u5f53 clk \u8f93\u5165\u6ce2\u5f62\u6ca1\u6709\u5230\u8fbe\u65b9\u6ce2\u8fb9\u6cbf\u7684\u65f6\u5019\u5bc4\u5b58\u5668\u5185\u90e8\u7684\u503c\u4e0d\u4f1a\u53d1\u751f\u6539\u53d8\uff0c\u6240\u4ee5 data \u4e2d\u7684\u9ad8\u7535\u5e73\u7535\u6ce2\u4f20\u9012\u5230 a \u5bc4\u5b58\u5668\u4e4b\u540e\u88ab\u9636\u6bb5\uff0c\u540e\u7eed\u7684\u4f20\u64ad\u4f9d\u65e7\u4fdd\u6301 a \u5bc4\u5b58\u5668\u672c\u8eab\u7684\u4f4e\u7535\u5e73\u4fe1\u53f7\u3002</p> <p></p> <p>\u968f\u7740\u6ce2\u5f62\u7684\u4f20\u64ad\uff0c\u5bc4\u5b58\u5668 a \u7684 clk \u6ce2\u5f62\u4ece\u4f4e\u7535\u5e73\u53d8\u4e3a\u4e86\u9ad8\u7535\u5e73\uff0c\u9047\u5230\u4e86\u4e00\u4e2a\u4e0a\u5347\u6cbf\u3002\u56e0\u4e3a\u5bc4\u5b58\u5668 a \u662f\u4e0a\u5347\u6cbf\u89e6\u53d1\u7684\uff0c\u6240\u4ee5\u5bc4\u5b58\u5668\u5185\u90e8\u5b58\u50a8\u7684\u7535\u5e73\u5f00\u59cb\u8f7d\u5165\u4e3a data \u8f93\u5165\u7684\u9ad8\u7535\u5e73\uff0c\u6b64\u65f6\u5bc4\u5b58\u5668 a \u5185\u90e8\u7684\u7535\u5e73\u5904\u4e8e\u4f4e\u7535\u5e73\u5411\u9ad8\u7535\u5e73\u8f6c\u6362\u7684\u4e2d\u95f4\u72b6\u6001\u3002</p> <p>\u5bc4\u5b58\u5668 b \u5219\u56e0\u4e3a\u662f\u4e0b\u964d\u6cbf\u89e6\u53d1\uff0c\u6240\u4ee5\u4e0d\u4fee\u6539\u5185\u90e8\u5b58\u50a8\u7684\u7535\u5e73\uff0c\u540e\u7eed\u7684\u8f93\u51fa\u4e5f\u4fdd\u6301\u4e0d\u53d8\u3002</p> <p></p> <p>\u4e00\u6bb5\u65f6\u95f4\u540e\u5bc4\u5b58\u5668 a \u5185\u90e8\u7684\u7535\u5e73\u7a33\u5b9a\u4e3a\u9ad8\u7535\u5e73\uff0c\u8fd9\u4e2a\u65f6\u95f4\u975e\u5e38\u77ed\u6682\uff0c\u57fa\u672c\u5728 clk \u4e0a\u5347\u6cbf\u524d\u540e\u65f6\u95f4\u5b8c\u6210\uff0c\u8fd9\u4e2a\u671f\u95f4 data \u5f97\u8f93\u5165\u7535\u5e73\u8981\u4fdd\u6301\u7a33\u5b9a\uff0c\u4e0d\u7136\u5bc4\u5b58\u5668 a \u7684\u503c\u5c06\u4f1a\u4e0d\u786e\u5b9a\u3002\u4e0a\u5347\u6cbf\u5230\u6765\u524d\u7684\u7535\u5e73\u7a33\u5b9a\u65f6\u95f4\u79f0\u4e3a slack time\uff0c\u4e0a\u5347\u6cbf\u5230\u6765\u540e\u7684\u7535\u5e73\u7a33\u5b9a\u65f6\u95f4\u79f0\u4e3a hold time\u3002\u7535\u5e73\u53ea\u6709\u5728 slack time + hold time \u7684\u8303\u56f4\u5185\u90fd\u4fdd\u6301\u7a33\u5b9a\u624d\u80fd\u786e\u4fdd\u5bc4\u5b58\u5668\u5185\u90e8\u7535\u5e73\u53d8\u5316\u6b63\u786e\u3002 </p> <p>\u4e4b\u540e\uff0c\u5bc4\u5b58\u5668 a \u548c\u5bc4\u5b58\u5668 b \u4e2d\u95f4\u7684\u7ebf\u8def\u4e2d\u5f00\u59cb\u4f20\u64ad\u5bc4\u5b58\u5668 a \u7684\u9ad8\u7535\u5e73\u3002</p> <p></p> <p>\u5bc4\u5b58\u5668 a \u548c b \u4e4b\u95f4\u7684\u7ebf\u8def\u968f\u7740\u5bc4\u5b58\u5668 a \u9ad8\u7535\u5e73\u7684\u4f20\u64ad\u5df2\u7ecf\u90fd\u662f\u9ad8\u7535\u5e73\u4e86\uff0c\u4f46\u662f\u56e0\u4e3a\u5bc4\u5b58\u5668 b \u4e0b\u964d\u6cbf\u89e6\u53d1\uff0c\u6240\u4ee5\u5bc4\u5b58\u5668\u5185\u90e8\u7684\u7535\u5e73\u548c\u540e\u7eed\u7535\u5e73\u90fd\u4fdd\u6301\u4f4e\u7535\u5e73\u4e0d\u53d8\u3002\u5728\u4e0b\u964d\u6cbf\u5230\u6765\u4e4b\u524d\u5bc4\u5b58\u5668 b \u7684 data \u8f93\u5165\u5df2\u7ecf\u662f\u7a33\u5b9a\u7684\u9ad8\u7535\u5e73\u4e86\uff0c\u8fd9\u6837\u53ef\u4ee5\u786e\u4fdd\u6ee1\u8db3 slack time\u3002</p> <p></p> <p>\u4e0b\u964d\u6cbf\u4e4b\u540e\u5bc4\u5b58\u5668 b \u8f7d\u5165\u9ad8\u7535\u5e73\uff0c\u4e4b\u540e\u8f93\u5165\u7684\u9ad8\u7535\u5e73\u4e5f\u4f1a\u6301\u7eed\u4e00\u6bb5\u65f6\u95f4\u4ee5\u6ee1\u8db3 hold time \u7684\u9700\u6c42\uff0c\u786e\u4fdd\u5bc4\u5b58\u5668 b \u5185\u90e8\u7535\u5e73\u987a\u5229\u8f6c\u6362\u4e3a\u9ad8\u7535\u5e73\u3002</p> <p></p> <p>\u5982\u679c\u6211\u4eec\u8bf4\u7ebf\u8def\u662f\u6cb3\u6d41\uff0c\u7535\u6d41\u662f\u6cb3\u6c34\uff0c\u7535\u5e73\u662f\u6cb3\u6d41\u7684\u6c34\u4f4d\uff0c\u90a3\u4e48\u5bc4\u5b58\u5668\u5c31\u597d\u6bd4\u662f\u6c34\u575d\u3002\u5728\u89e6\u53d1\u8fb9\u6cbf\u6ca1\u6709\u51fa\u73b0\u7684\u65f6\u5019\u5bc4\u5b58\u5668\u5c06\u8f93\u5165\u8f93\u51fa\u7684\u7535\u5e73\u9694\u5f00\uff0c\u4f7f\u5f97\u8f93\u5165\u7684\u7535\u5e73\u4e0d\u4f1a\u5f71\u54cd\u8f93\u51fa\u7684\u7535\u5e73\uff1b\u4e00\u65e6\u8fb9\u6cbf\u88ab\u89e6\u53d1\uff0c\u5bc4\u5b58\u5668\u5c31\u50cf\u6c34\u575d\u5f00\u95f8\u4e86\u4e00\u6837\uff0c\u4e0a\u6e38\u7684\u6cb3\u6c34\u6d8c\u5165\u4e0b\u6e38\u4f7f\u5f97\u4e0b\u6e38\u7684\u6c34\u4f4d\u548c\u4e0a\u6e38\u4e00\u81f4\uff0c\u4e5f\u5373\u5bc4\u5b58\u5668\u8f7d\u5165\u8f93\u5165\u7684\u7535\u5e73\uff0c\u4f7f\u5f97\u8f93\u51fa\u7684\u7535\u5e73\u7b49\u4e8e\u8f93\u5165\u7684\u7535\u5e73\uff1b\u4e00\u65e6\u8fb9\u6cbf\u7ed3\u675f\uff0c\u5bc4\u5b58\u5668\u5c31\u50cf\u6c34\u575d\u5173\u95ed\u4e86\u4e00\u6837\uff0c\u8f93\u5165\u7684\u7535\u5e73\u5c31\u4e0d\u4f1a\u5f71\u54cd\u8f93\u51fa\u7684\u7535\u5e73\u4e86\u3002</p>"},{"location":"lab3-1-appendix/#_3","title":"\u65f6\u5e8f\u7ea6\u675f","text":"<p>\u4f46\u662f\u6709\u65f6\u5019\u4f1a\u9047\u5230\u8fd9\u79cd\u95ee\u9898\uff1a\u5982\u679c\u5bc4\u5b58\u5668 a \u548c\u5bc4\u5b58\u5668 b \u4e4b\u95f4\u7684\u7ebf\u8def\u7279\u522b\u957f\u3001\u7ecf\u8fc7\u7684\u95e8\u7535\u8def\u7279\u522b\u591a\uff0c\u8fd9\u5c31\u4f1a\u5bfc\u81f4\u5bc4\u5b58\u5668 a \u7684\u7535\u5e73\u53d8\u5316\u4e4b\u540e\uff0c\u4f20\u64ad\u5230\u5bc4\u5b58\u5668 b \u5f97\u8f93\u5165\u4f1a\u9700\u8981\u5f88\u957f\u65f6\u95f4\uff0c\u6bd4\u5982\u4e0b\u56fe\u7684\u60c5\u51b5\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u5bc4\u5b58\u5668 a \u7684\u503c\u53d8\u4e3a 1\uff0c\u4f46\u662f\u5bc4\u5b58\u5668 a \u548c b \u4e4b\u95f4\u7684\u7ebf\u8def\u4e2d\u5bc4\u5b58\u5668 a \u7684\u9ad8\u7535\u5e73\u53ea\u4f20\u64ad\u4e86\u5927\u534a\u7684\u7ebf\u8def\uff0c\u8fd9\u5bfc\u81f4\u4e0b\u964d\u6cbf\u5230\u6765\u7684\u65f6\u5019\u5bc4\u5b58\u5668 b \u7684 data \u7aef\u53e3\u8f93\u5165\u7684\u503c\u5728 0-1 \u4e4b\u95f4\uff0c\u6ca1\u6709\u7a33\u5b9a\uff0c\u90a3\u4e48\u5bc4\u5b58\u5668 b \u5185\u90e8\u7535\u5e73\u5c31\u53ef\u80fd\u65e0\u6cd5\u987a\u5229\u53d8\u4e3a\u9ad8\u7535\u5e73\uff0c\u5bfc\u81f4\u7535\u8def\u8fd0\u884c\u7684\u7ed3\u679c\u548c\u8bbe\u8ba1\u76f8\u8fdd\u80cc\u3002</p> <p></p> <p>\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u7535\u8def\u7684\u6750\u6599\u3001\u7535\u7ebf\u7684\u957f\u5ea6\u3001\u4e2d\u95f4\u7684\u95e8\u7535\u8def\u7279\u6027\u7b49\u5165\u624b\u4f30\u7b97\u51fa\u5bc4\u5b58\u5668 a \u7684\u8f93\u51fa\u5230\u5bc4\u5b58\u5668 b \u7684\u8f93\u5165\u4e4b\u95f4\u7535\u5e73\u4f20\u64ad\u9700\u8981\u7684\u65f6\u95f4\u3002\u7136\u540e\u56e0\u4e3a\u5bc4\u5b58\u5668 a \u662f\u4e0a\u5347\u6cbf\u89e6\u53d1\uff0cb \u662f\u4e0b\u964d\u6cbf\u89e6\u53d1\uff0c\u6240\u4ee5\u4ece\u5bc4\u5b58\u5668 a \u6570\u636e\u53d8\u5316\u5230\u5bc4\u5b58\u5668 b \u8f7d\u5165\u65b0\u7684\u7535\u5e73\u7684\u65f6\u95f4\u7a97\u53e3\u4ec5\u534a\u4e2a\u65f6\u949f\u5468\u671f\uff0c\u8fd9\u5c31\u8981\u6c42\u7535\u5e73\u4f20\u64ad\u65f6\u95f4\u5c0f\u4e8e\u534a\u4e2a\u5468\u671f\u3002\u5982\u679c\u8fdd\u4f8b\u5c31\u4f1a\u5bfc\u81f4\u7535\u8def\u8fd0\u884c\u7ed3\u679c\u548c\u8bbe\u8ba1\u7ed3\u679c\u4e0d\u4e00\u81f4\uff0c\u5bfc\u81f4\u65f6\u5e8f\u9519\u8bef\u3002</p> <p>\u5e38\u7528\u7684\u89e3\u51b3\u65b9\u6cd5\uff1a</p> <ol> <li>\u5e03\u7ebf\u4f18\u5316\uff1a\u7ebf\u8def\u5e03\u7ebf\u7684\u65f6\u5019\u5c06\u5bc4\u5b58\u5668 a \u548c\u5bc4\u5b58\u5668 b \u7684\u4f4d\u7f6e\u653e\u7f6e\u7684\u8db3\u591f\u8fd1\uff0c\u51cf\u5c11\u4e4b\u95f4\u7535\u8def\u7684\u957f\u5ea6\uff0c\u4ece\u800c\u964d\u4f4e\u65f6\u5ef6\uff0c\u6ee1\u8db3\u65f6\u5e8f\u7ea6\u675f\u3002Vivado \u7684 implementation \u4f1a\u5c3d\u53ef\u80fd\u7684\u8fdb\u884c\u5e03\u7ebf\u4f18\u5316\u3002</li> <li>\u903b\u8f91\u4f18\u5316\uff1a\u7b80\u5316\u5bc4\u5b58\u5668 a \u548c\u5bc4\u5b58\u5668 b \u4e4b\u95f4\u7684\u95e8\u7535\u8def\u903b\u8f91\uff0c\u4f7f\u5f97\u7ebf\u8def\u7684\u65f6\u5ef6\u51cf\u5c11\u3002Vivado \u7684 implementation \u4f1a\u5c3d\u53ef\u80fd\u7684\u8fdb\u884c\u903b\u8f91\u4f18\u5316\u3002</li> <li>\u964d\u4f4e\u9891\u7387\uff1a\u5c06\u65f6\u949f\u9891\u7387\u964d\u4f4e\uff0c\u4f7f\u5f97\u89e6\u53d1\u6cbf\u4e4b\u95f4\u7684\u65f6\u95f4\u95f4\u9694\u589e\u5927\uff0c\u4f46\u662f\u6574\u4f53\u7535\u8def\u7684\u5de5\u4f5c\u6548\u7387\u4f1a\u53d8\u5dee</li> <li>\u7edf\u4e00\u65f6\u949f\u6cbf\uff1a\u5bc4\u5b58\u5668 a \u7528\u4e0a\u5347\u6cbf\u89e6\u53d1\uff0c\u5bc4\u5b58\u5668 b \u7528\u4e0b\u964d\u6cbf\u89e6\u53d1\uff0c\u5176\u65f6\u95f4\u7a97\u53e3\u53ea\u6709\u534a\u4e2a\u5468\u671f\uff0c\u4f46\u662f\u5982\u679c\u7edf\u4e00\u7528\u4e0a\u5347\u6cbf\u6216\u8005\u4e0b\u964d\u6cbf\u5c31\u4f1a\u6709\u4e00\u4e2a\u5468\u671f\uff0c\u65f6\u95f4\u95f4\u9694\u589e\u5927\u3002\u867d\u7136\u5c40\u90e8\u7684\u5de5\u4f5c\u6548\u7387\u4f1a\u6709\u6240\u964d\u4f4e\uff0c\u4f46\u662f\u6574\u4f53\u7684\u5de5\u4f5c\u6548\u7387\u57fa\u672c\u4e0d\u53d7\u5f71\u54cd\uff0c\u6240\u4ee5\u8bf7\u5927\u5bb6\u5982\u65e0\u5fc5\u8981\uff0c\u7edf\u4e00\u65f6\u949f\u6cbf\u8bbe\u8ba1\u7535\u8def\u3002</li> <li>\u5176\u4ed6\uff1a...</li> </ol>"},{"location":"lab3-1-appendix/#_4","title":"\u4f7f\u80fd\u5bc4\u5b58\u5668","text":"<p>\u6709\u4e9b\u5bc4\u5b58\u5668\u4f1a\u6709\u4e00\u4e2a\u4f7f\u80fd\u5f15\u811a CE\uff0c\u53ea\u6709\u5f53 CE=1 \u7684\u65f6\u5019\u5bc4\u5b58\u5668\u624d\u4f1a\u8f7d\u5165\u8f93\u5165 data \u7684\u503c\u3002</p> <pre><code>    always@(posedge clk)begin\n    // always at positive edge of clk\n    // \u603b\u662f\u5728 clk \u4fe1\u53f7\u7684\u4e0a\u5347\u6cbf\u89e6\u53d1\u4ee5\u4e0b\u529f\u80fd\u5757\n        if(wen)begin\n        // \u5f53 wen=1 \u7684\u65f6\u5019\n            a &lt;= data;\n            // \u5bc4\u5b58\u5668 a \u8f7d\u5165\u6570\u636e data \u7684\u503c\n        end\n        // \u4e0d\u7136\u4fdd\u6301\u539f\u6765\u7684\u503c\u4e0d\u53d8\n    end\n</code></pre> <p>\u6211\u4eec\u4e4b\u524d\u5c06<code>always@(*)</code>\u7684\u65f6\u5019\uff0cif \u662f\u9700\u8981\u642d\u914d else \u4f7f\u7528\u7684\uff0c\u4e0d\u7136\u4f1a\u5bfc\u81f4\u73af\u8def\u9519\u8bef\uff0c\u4f46\u662f\u8fd9\u91cc\u4e0d\u9700\u8981\uff0c\u56e0\u4e3a<code>always@(*)</code>\u7efc\u5408\u5f97\u5230\u7684\u7535\u8def\u662f\u7528 wire \u642d\u5efa\u7684\uff0c\u5b83\u53ea\u662f\u501f\u7528\u4e86 reg \u7684 always \u5757\u8bed\u6cd5\u800c\u5df2\u3002\u4f46\u662f<code>always@(posedge clk)</code>\u5f97\u5230\u7684\u7535\u8def\u4f7f\u7528\u771f\u5b9e\u7684\u5bc4\u5b58\u5668\u642d\u5efa\u7684\uff0c\u662f\u4e0d\u4f1a\u5f62\u6210\u73af\u8def\u95ee\u9898\u7684\u3002</p> <p>\u8fd9\u4e00\u533a\u522b\u518d\u6b21\u8bf4\u660e\u4e86\u7535\u8def\u7279\u6027\u5728 Verilog \u8bed\u8a00\u4e2d\u7684\u91cd\u8981\u6027\uff0c\u4e0d\u4e86\u89e3\u7535\u8def\u662f\u5f88\u96be\u5b66\u597d Verilog \u7684\u3002\u3002</p>"},{"location":"lab3-1-appendix/#_5","title":"\u5bc4\u5b58\u5668\u521d\u59cb\u5316","text":"<p>\u8bb8\u591a\u65f6\u5019\u6211\u4eec\u9700\u8981\u5bc4\u5b58\u5668\u6709\u4e00\u4e2a\u521d\u59cb\u503c\uff08\u4e4b\u540e\u4ecb\u7ecd\u7684\u6709\u9650\u72b6\u6001\u673a FSM \u5c31\u9700\u8981\u5bc4\u5b58\u5668\u6709\u521d\u59cb\u503c\uff09\uff0c\u56e0\u6b64\u53ef\u4ee5\u7528\u4ee5\u4e0b\u8bed\u6cd5\u5b9e\u73b0\u3002</p>"},{"location":"lab3-1-appendix/#_6","title":"\u5f02\u6b65\u521d\u59cb\u5316","text":"<pre><code>    reg a;\n    //\u9ad8\u7535\u5e73\u5f02\u6b65\u590d\u4f4d\u5bc4\u5b58\u5668\n    always@(posedge clk or posedge rst)begin\n    // always at positive edge of clk\n    // or at posedge edge of rst \n        if(rst)begin\n        // \u5982\u679c rst=1\n            a &lt;= INTIAL_VALUE;\n            // a \u8f7d\u5165\u521d\u59cb\u5316\u7684\u503c\n        end else if(wen)begin\n            a &lt;= data;\n            // \u5982\u679c rst=0\uff0c\u6267\u884c\u6b63\u5e38\u7684\u903b\u8f91\u7535\u8def\u64cd\u4f5c\n        end\n    end\n\n    reg a;\n    //\u4f4e\u7535\u5e73\u5f02\u6b65\u590d\u4f4d\u5bc4\u5b58\u5668\n    always@(posedge clk or negedge rstn)begin\n    // always at positive edge of clk\n    // or at negitive edge of rstn \n        if(~rstn)begin\n        // \u5982\u679c rstn=0\n            a &lt;= INTIAL_VALUE;\n            // a \u8f7d\u5165\u521d\u59cb\u5316\u7684\u503c\n        end else if(wen)begin\n            a &lt;= data;\n            // \u5982\u679c rstn=1\uff0c\u6267\u884c\u6b63\u5e38\u7684\u903b\u8f91\u7535\u8def\u64cd\u4f5c\n        end\n    end\n</code></pre> <p>\u8fd9\u6bb5\u4ee3\u7801\u5bf9\u5e94\u7684\u5bc4\u5b58\u5668\u662f\u5f02\u6b65\u590d\u4f4d\u5bc4\u5b58\u5668\uff0c\u8fd9\u7c7b\u5bc4\u5b58\u5668\u9664\u4e86\u6709\u65f6\u949f\u8f93\u5165 clk\u3001\u4f7f\u80fd\u8f93\u5165 CE\u3001\u6570\u636e\u8f93\u5165 data \u4e4b\u5916\uff0c\u8fd8\u4f1a\u6709\u4e00\u4e2a\u989d\u5916\u7684\u8f93\u5165\u5f15\u811a rst/rstn\u3002\u8fd9\u4e2a\u5f15\u811a\u5982\u679c\u8f93\u5165 0 \u5219\u5bc4\u5b58\u5668\u4f1a\u88ab\u590d\u4f4d\uff0c\u5219\u8be5\u5bc4\u5b58\u5668\u662f\u4f4e\u7535\u5e73\u5f02\u6b65\u590d\u4f4d\uff0c\u590d\u4f4d\u5f15\u811a\u6807\u6ce8\u4e3a rstn\uff1b\u8fd9\u4e2a\u5f15\u811a\u5982\u679c\u8f93\u5165 1 \u5219\u5bc4\u5b58\u5668\u4f1a\u88ab\u590d\u4f4d\uff0c\u5219\u8be5\u5bc4\u5b58\u5668\u662f\u9ad8\u7535\u5e73\u5f02\u6b65\u590d\u4f4d\uff0c\u590d\u4f4d\u5f15\u811a\u6807\u6ce8\u4e3a rst\u3002</p> <p>\u7b2c\u4e00\u79cd\u5199\u6cd5\u5c31\u662f\u5728\u63cf\u8ff0\u9ad8\u7535\u5e73\u5f02\u6b65\u590d\u4f4d\u5bc4\u5b58\u5668\u7684\u884c\u4e3a\uff0c\u7b2c\u4e8c\u79cd\u5199\u6cd5\u5219\u662f\u5728\u63cf\u8ff0\u4f4e\u7535\u5e73\u5f02\u6b65\u590d\u4f4d\u5bc4\u5b58\u5668\u7684\u884c\u4e3a\u3002</p> <p>\u6b64\u5916\u6839\u636e\u590d\u4f4d\u7684\u65f6\u5019\u5185\u90e8\u7535\u5e73\u88ab\u590d\u4f4d\u4e3a 0 \u8fd8\u662f 1\uff0c\u5f02\u6b65\u590d\u4f4d\u5bc4\u5b58\u5668\u53c8\u88ab\u5206\u4e3a\u4e24\u5927\u7c7b\uff0c\u6240\u4ee5\u4e24\u4e24\u7ec4\u5408\uff0c\u5b9e\u9645\u4e0a\u6709\u56db\u7c7b\u5f02\u6b65\u590d\u4f4d\u5bc4\u5b58\u5668\u3002FPGA \u5185\u7f6e\u7684 Flip Flop \u662f\u5f02\u6b65\u9ad8\u7535\u5e73\u590d\u4f4d\u7684\u5e26\u4f7f\u80fd\u4fe1\u53f7\u7684\u4e0a\u5347\u6cbf\u89e6\u53d1\u5668\uff1a</p> <p></p>"},{"location":"lab3-1-appendix/#_7","title":"\u540c\u6b65\u521d\u59cb\u5316","text":"<pre><code>    reg a;\n    //\u9ad8\u7535\u5e73\u540c\u6b65\u590d\u4f4d\u5bc4\u5b58\u5668\n    always@(posedge clk)begin\n    // always at positive edge of clk\n        if(rst)begin\n        // \u5982\u679c rst=1\n            a &lt;= INTIAL_VALUE;\n            // a \u8f7d\u5165\u521d\u59cb\u5316\u7684\u503c\n        end else if(wen)begin\n            a &lt;= data;\n            // \u5982\u679c rst=0\uff0c\u6267\u884c\u6b63\u5e38\u7684\u903b\u8f91\u7535\u8def\u64cd\u4f5c\n        end\n    end\n\n    reg a;\n    //\u4f4e\u7535\u5e73\u540c\u6b65\u590d\u4f4d\u5bc4\u5b58\u5668\n    always@(posedge clk)begin\n    // always at positive edge of clk\n        if(~rstn)begin\n        // \u5982\u679c rstn=0\n            a &lt;= INTIAL_VALUE;\n            // a \u8f7d\u5165\u521d\u59cb\u5316\u7684\u503c\n        end else if(wen)begin\n            a &lt;= data;\n            // \u5982\u679c rstn=1\uff0c\u6267\u884c\u6b63\u5e38\u7684\u903b\u8f91\u7535\u8def\u64cd\u4f5c\n        end\n    end\n</code></pre> <p>\u540c\u6b65\u7535\u8def\u6ca1\u6709\u663e\u5f0f\u7684\u5f02\u6b65\u590d\u4f4d\u5f15\u811a\uff0c\u5b83\u7684\u8f93\u5165 data \u524d\u6709\u4e00\u4e2a\u591a\u8def\u9009\u62e9\u5668\uff0c\u7136\u540e\u7528 rst/~rstn \u4f5c\u4e3a\u9009\u62e9\u5b50\u9009\u62e9\u8f7d\u5165 INITIAL_VALUE \u7684\u7ed3\u679c\u8fd8\u662f data \u7684\u7ed3\u679c\u3002\u800c ~rstn|wen \u5219\u4f1a\u88ab\u4f5c\u4e3a\u5bc4\u5b58\u5668 CE \u7684\u8f93\u5165\u3002</p> <p>\u6240\u4ee5\u4e0d\u540c\u4e8e\u5f02\u6b65\u590d\u4f4d\u53ea\u8981 rst=1/rstn=0\uff0c\u5bc4\u5b58\u5668\u5c31\u53ef\u4ee5\u590d\u4f4d\u5f97\u5230\u521d\u59cb\u5316\u503c\uff1b\u540c\u6b65\u590d\u4f4d\u53ea\u6709\u5728\u65f6\u949f\u8fb9\u6cbf\u5230\u6765\u7684\u65f6\u5019\u624d\u4f1a\u590d\u4f4d\u5f97\u5230\u521d\u59cb\u5316\u7684\u503c\u3002</p> <p></p>"},{"location":"lab3-1-appendix/#fpga","title":"FPGA \u521d\u59cb\u5316","text":"<p>FPGA \u7684\u590d\u4f4d\u4fe1\u53f7 rstn \u7531 FPGA \u82af\u7247\u7684 C12 \u5f15\u811a\u5f15\u5165\u3002\u5f53 vivado \u5c06 bitstream \u4e0b\u8f7d\u5230 FPGA \u677f\u4e4b\u540e\uff0crstn \u4fe1\u53f7\u4f1a\u5148\u4fdd\u6301\u4e00\u6bb5\u65f6\u95f4\u7684 0\uff0c\u4f7f\u5f97\u6240\u6709\u7684\u5bc4\u5b58\u5668\u53ef\u4ee5\u88ab\u5145\u5206\u521d\u59cb\u5316\uff0c\u7136\u540e rstn \u4fe1\u53f7\u53d8\u4e3a 1 \u4e14\u4e00\u76f4\u4fdd\u6301\u4e0d\u53d8\uff0c\u8fd9\u6837\u6240\u6709\u7684\u5bc4\u5b58\u5668\u5c31\u4ece\u521d\u59cb\u5316\u9636\u6bb5\u8fdb\u5165\u5de5\u4f5c\u9636\u6bb5\uff0c\u5f00\u59cb\u8f7d\u5165\u6570\u636e\u3002</p> <p>FPGA \u8fdb\u5165\u5de5\u4f5c\u9636\u6bb5\u540e\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u6309\u5f00\u53d1\u677f\u7684 reset \u6309\u94ae\uff0c\u8ba9 rstn \u518d\u6b21\u8f93\u5165 0\uff0c\u91cd\u65b0\u590d\u4f4d\u6240\u6709\u5bc4\u5b58\u5668\u7684\u503c\u3002</p> <pre><code>    set_property -dict {PACKAGE_PIN C12 IOSTANDARD LVCMOS33} [get_ports rstn]\n</code></pre> <p>\u56e0\u4e3a FPGA \u677f\u7684 rstn \u5728\u521d\u59cb\u5316\u9636\u6bb5\u662f\u4f4e\u7535\u5e73\uff0c\u6240\u4ee5\u8be5\u4fe1\u53f7\u53ea\u80fd\u76f4\u63a5\u7528\u4e8e\u590d\u4f4d\u4f4e\u7535\u5e73\u590d\u4f4d\u5bc4\u5b58\u5668\u3002\u5bf9\u4e8e\u9ad8\u7535\u5e73\u590d\u4f4d\u7684\u5bc4\u5b58\u5668\u53ef\u4ee5\u5c06 rstn \u53d6\u53cd\uff0c\u7136\u540e\u7528 rst \u4f5c\u4e3a\u590d\u4f4d\u4fe1\u53f7\u3002 <pre><code>    wire rst;\n    assign rst = ~rstn;\n</code></pre></p>"},{"location":"lab3-1-appendix/#_8","title":"\u89e6\u53d1\u4fe1\u53f7","text":"<p><pre><code>    always@(posedge clk) // \u4e0a\u5347\u6cbf\u89e6\u53d1\n\n    always@(negedge clk) // \u4e0b\u964d\u6cbf\u89e6\u53d1\n\n    always@(posedge clk or negedge rstn) // \u4e0a\u5347\u6cbf\u89e6\u53d1\u548c\u4e0b\u964d\u6cbf\u590d\u4f4d\n\n    always@(posedge clk or posedge rstn) // \u4e0a\u5347\u6cbf\u89e6\u53d1\u548c\u4e0a\u5347\u6cbf\u590d\u4f4d\n</code></pre> \u5b9e\u9645\u4e0a reg \u7684\u89e6\u53d1\u8fb9\u6cbf\u548c\u590d\u4f4d\u7535\u5e73\u662f\u7531\u5bc4\u5b58\u5668\u672c\u8eab\u7684\u7535\u6c14\u7279\u6027\u51b3\u5b9a\u7684\uff0c\u6bd4\u5982 FPGA \u7684 FF \u4e00\u822c\u662f\u4e0a\u5347\u6cbf\u89e6\u53d1\u548c\u9ad8\u7535\u5e73\u590d\u4f4d\u3002\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u7ed9 clk \u548c rstn \u7ecf\u8fc7\u975e\u95e8\u5728\u8fde\u63a5\u5230 reg \u7684\u65b9\u5f0f\u5b9e\u73b0\u6240\u8c13\u7684\u4e0b\u964d\u6cbf\u89e6\u53d1\u548c\u4f4e\u7535\u5e73\u590d\u4f4d\uff08\u5c06\u975e\u95e8\u548c reg \u770b\u6210\u4e00\u4e2a\u6574\u4f53\u7684\u8bdd\uff09\u3002</p>"},{"location":"lab3-1-appendix/#_9","title":"\u95ee\u9898\u4e00\uff1a\u591a\u65f6\u949f\u89e6\u53d1","text":"<p><pre><code>    always@(posedge clk1 or posedge clk2) // \u4e0a\u5347\u6cbf\u89e6\u53d1\n</code></pre> \u4ece\u8bed\u4e49\u4e0a\u770b\u8fd9\u4e2a always \u5757\u65e2\u5728 clk1 \u4e0a\u5347\u6cbf\u89e6\u53d1\uff0c\u53c8\u5728 clk2 \u4e0a\u5347\u6cbf\u89e6\u53d1\u3002\u5f53\u6211\u4eec\u4eff\u771f\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u5b9e\u73b0\u8fd9\u4e2a\u903b\u8f91\u529f\u80fd\uff0c\u4f46\u662f\u56e0\u4e3a reg \u53ea\u6709\u4e00\u4e2a\u65f6\u949f\u8f93\u5165\u7aef\u53e3\uff0c\u6240\u4ee5\u7efc\u5408\u7684\u65f6\u5019\u5b9e\u9645\u4e0a\u5e76\u4e0d\u80fd\u505a\u5230 clk1\u3001clk2 \u540c\u65f6\u4f5c\u4e3a\u65f6\u949f\u89e6\u53d1\u3002</p>"},{"location":"lab3-1-appendix/#_10","title":"\u95ee\u9898\u4e8c\uff1a\u591a\u8fb9\u6cbf\u89e6\u53d1","text":"<p><pre><code>    always@(clock) // \u4e0a\u5347\u6cbf\u4e5f\u89e6\u53d1\u3001\u4e0b\u964d\u6cbf\u4e5f\u89e6\u53d1\uff0c\u5373\u65f6\u949f\u7535\u5e73\u7ffb\u8f6c\u5c31\u89e6\u53d1\n    always@(a or b or c) // a\u3001b\u3001c \u7535\u5e73\u53cd\u8f6c\u5c31\u89e6\u53d1\n</code></pre> \u4ece\u8bed\u4e49\u4e0a\u770b\u53ea\u8981 clock\u3001a\u3001b\u3001c \u6570\u636e\u53d8\u5316\u5c31\u4f1a\u5f15\u8d77 always \u5757\u89e6\u53d1\u3002\u4eff\u771f\u53ef\u4ee5\u63a5\u53d7\u8fd9\u6837\u7684\u903b\u8f91\u8bbe\u8ba1\uff0c\u4f46\u662f\u56e0\u4e3a\u4e0d\u5b58\u5728\u5373\u4e0a\u5347\u6cbf\u89e6\u53d1\u53c8\u4e0b\u964d\u6cbf\u89e6\u53d1\uff0c\u6240\u4ee5\u5b9e\u9645\u4e0a\u5e76\u4e0d\u80fd\u7efc\u5408\u5f97\u5230\u8fd9\u6837\u7684\u65f6\u5e8f\u7535\u8def\u3002</p> <p><pre><code>    reg d;\n    always@(a or b or c)begin\n        if(a) d &lt;= c;\n        else d &lt;= b;\n    end\n</code></pre> \u867d\u7136\u4e0d\u80fd\u5f97\u5230\u65f6\u5e8f\u7535\u8def\uff0c\u4f46\u662f\u53ef\u4ee5\u7efc\u5408\u5f97\u5230\u7ec4\u5408\u7535\u8def\u3002d \u7684\u7ed3\u679c\u4f9d\u8d56\u4e8e a\u3001b\u3001c\uff0c\u4e00\u4f46 a\u3001b\u3001c \u7684\u8f93\u5165\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u5219 d \u968f\u7740\u53d8\u5316\uff0c\u8fd9\u662f\u7b26\u5408\u7ec4\u5408\u7535\u8def\u7684\u903b\u8f91\u8bed\u4e49\u7684\u3002\u6700\u540e\u4f1a\u5f97\u5230 b\u3001c \u4f5c\u4e3a\u6570\u636e\uff0ca \u4f5c\u4e3a\u9009\u62e9\u5b50\u7684\u4e8c\u9009\u4e00\u591a\u8def\u9009\u62e9\u5668\u3002</p> <p>!!! \u6ce8\u610f if-else\u3001case-default \u642d\u914d\u4f7f\u7528\uff0c\u4e0d\u7136\u4e5f\u4f1a\u6709 latch warning\u3002 !!! \u4ec5\u5728 always \u89e6\u53d1\u7684\u4fe1\u53f7\u662f always \u5757\u5185\u90e8\u8f93\u51fa\u4ee5\u6765\u7684\u6240\u6709\u8f93\u5165\u65f6\uff0c\u8fd9\u4e2a\u5199\u6cd5\u624d\u6709\u610f\u4e49\u3002</p> <p><pre><code>    reg d;\n    always@(*)begin\n        if(a) d &lt;= c;\n        else d &lt;= b;\n    end\n</code></pre> \u4efb\u4f55\u4fe1\u53f7\u53d8\u5316\u5c31\u89e6\u53d1 always \u5757\uff0c\u6240\u4ee5\u8fd9\u5c31\u662f\u6211\u4eec\u4e4b\u524d\u4ecb\u7ecd\u7684 always@(*) \u5199\u6cd5\u7684\u7ec4\u5408\u7535\u8def\uff0c\u5b83\u65e0\u8bba\u5982\u4f55\u90fd\u662f\u5728\u66f4\u6539\u7535\u5e73\u7684\u72b6\u6001\u3002</p>"},{"location":"lab3-1-appendix/#always","title":"\u95ee\u9898\u4e09\uff1a\u591a always \u5757\u89e6\u53d1","text":"<p><pre><code>    always@(posedge clk)begin\n        d &lt;= a;\n    end\n    always@(negedge clk)begin\n        d &lt;= b;\n    end\n</code></pre> \u4e0a\u5347\u6cbf\u7684\u65f6\u5019 d \u8f7d\u5165 a \u7684\u503c\uff0c\u4e0b\u964d\u6cbf\u7684\u65f6\u5019 d \u8f7d\u5165 b \u7684\u503c\u3002\u4eff\u771f\u5141\u8bb8 reg \u5728\u4e0d\u540c\u7684 always \u5757\u88ab\u4e0d\u540c\u7684\u65f6\u949f\u6cbf\u89e6\u53d1\uff0c\u4f46\u662f\u5728\u7efc\u5408\u7684\u65f6\u5019\u4e00\u4e2a reg \u4e0d\u80fd\u88ab\u4e24\u4e2a\u65f6\u949f\u6cbf\u89e6\u53d1\u3002</p> <p><pre><code>    always@(posedge clk)begin\n        if(c) d &lt;= a;\n    end\n    always@(posedge clk)begin\n        if(~c) d &lt;= b;\n    end\n</code></pre> \u8fd9\u4e2a\u903b\u8f91\u662f\u8fde\u4eff\u771f\u4e5f\u65e0\u6cd5\u901a\u8fc7\u7684\uff0c\u56e0\u4e3a\u5728\u540c\u4e00\u65f6\u95f4 d \u88ab\u4e24\u4e2a\u8fc7\u7a0b\u540c\u65f6\u4ef2\u88c1\uff0c\u5373\u4f7f\u6211\u4eec\u77e5\u9053\u8fd9\u4e24\u4e2a\u8fc7\u7a0b\u5e76\u4e0d\u51b2\u7a81\uff0c\u4f46\u662f\u4e5f\u4e0d\u53ef\u4ee5\u88ab\u7f16\u8bd1\u901a\u8fc7\u3002\u7c7b\u4f3c\u4e8e wire \u4e0d\u80fd\u88ab\u4e24\u4e2a\u8f93\u51fa\u540c\u65f6\u8f93\u5165\uff0creg \u4e5f\u4e0d\u80fd\u5728\u4e24\u4e2a always \u5757\u5185\u88ab\u8d4b\u503c\uff0c\u8fd9\u90fd\u4f1a\u5f15\u8d77 multi-driven \u9519\u8bef\u3002</p>"},{"location":"lab3-1-appendix/#_11","title":"\u95ee\u9898\u56db\uff1a\u5f02\u6b65\u89e6\u53d1","text":"<pre><code>    reg [1:0] d;\n    wire problem;\n    reg cond1;\n    reg cond2;\n    assign problem = cond1 &amp; cond2;\n\n    always@(posedge problem)begin\n        d &lt;= d + 2'b1;\n    end\n</code></pre>"},{"location":"lab3-1-appendix/#_12","title":"\u6570\u636e\u7ade\u4e89","text":"<p>\u5f53 cond1 \u548c cond2 \u540c\u65f6\u4e3a 1\uff0cproblem \u53d8\u4e3a 1 \u7684\u65f6\u5019\u89e6\u53d1 always \u5757\u3002\u8fd9\u5728\u4eff\u771f\u7684\u65f6\u5019\u4e0d\u5bb9\u6613\u53d1\u73b0\u95ee\u9898\uff0c\u4f46\u662f\u8bf7\u8003\u8651\u4e0b\u9762\u8fd9\u4e2a\u60c5\u5f62\uff1a</p> <p><pre><code>    initial begin\n        cond1=1'b0;cond2=1'b1;\n        #5;\n        cond1=1'b1;cond2=1'b0;\n    end\n</code></pre> \u5728\u4eff\u771f\u7684\u65f6\u5019\u4f1a\u770b\u5230 problem \u6c38\u8fdc\u7b49\u4e8e 0\uff0calways \u5757\u4e0d\u4f1a\u89e6\u53d1\u3002\u4f46\u662f\u771f\u5b9e\u7684\u7535\u8def\u7efc\u5408\u4e4b\u540e\u4f1a\u56e0\u4e3a\u65f6\u5ef6\u9020\u6210\u95ee\u9898\u3002\u5f53 cond1 \u4ece 0 \u53d8\u4e3a 1 \u7684\u65f6\u5019\u9ad8\u7535\u5e73\u9700\u8981\u4e00\u6bb5\u65f6\u95f4\u5728\u53ef\u4ee5\u5230\u7684 problem = cond1 &amp; cond2 \u7684\u4e0e\u95e8\uff1bcond2 \u4ece 1 \u53d8\u4e3a 0\uff0c\u4f4e\u7535\u5e73\u4e5f\u9700\u8981\u4e00\u6bb5\u65f6\u95f4\u5230\u8fbe\u4e0e\u95e8\u3002\u5982\u679c cond1 \u7684\u9ad8\u7535\u5e73\u5728 cond2 \u7684\u4f4e\u7535\u5e73\u4e4b\u524d\u5148\u5230\u8fbe\uff0c\u5219\u4f1a\u77ed\u6682\u7684\u51fa\u73b0\u4e0e\u95e8\u7684\u8f93\u5165\u90fd\u662f\u9ad8\u7535\u5e73\uff0c\u6700\u540e problem \u77ed\u6682\u51fa\u73b0\u9ad8\u7535\u5e73\uff0c\u8fdb\u800c always \u5757\u88ab\u89e6\u53d1\uff0c\u5bc4\u5b58\u5668\u88ab\u590d\u5236\u3002</p>"},{"location":"lab3-1-appendix/#_13","title":"\u8f6c\u6362\u4e3a\u540c\u6b65\u7535\u8def","text":"<p>\u5f52\u6839\u7ed3\u5e95\u662f\u56e0\u4e3a\u4e0d\u540c\u8def\u5f84\u7684\u7535\u5e73\u4f20\u64ad\u901f\u5ea6\u6709\u5feb\u6162\uff0c\u7535\u5e73\u5728\u4f20\u64ad\u671f\u95f4\u7535\u8def\u672c\u8eab\u5904\u4e8e\u4e0d\u7a33\u5b9a\u72b6\u6001\uff0c\u6709\u5f88\u591a\u4e2d\u95f4\u6001\u662f\u903b\u8f91\u5206\u6790\u65e0\u6cd5\u8986\u76d6\u7684\u3002\u56e0\u6b64\u6211\u4eec\u5f88\u591a\u65f6\u5019\u91c7\u7528\u548c\u5e94\u7528\u903b\u8f91\u65e0\u5173\u7684 clk \u65b9\u6ce2\u4fe1\u53f7\u8fdb\u884c\u89e6\u53d1\uff0c\u786e\u4fdd\u4e0a\u5347\u6cbf\u6765\u4e34\u7684\u65f6\u5019\u7535\u8def\u7684\u7535\u5e73\u5df2\u7ecf\u5168\u90e8\u4f20\u64ad\u5b8c\u6bd5\u5e76\u4e14\u4fdd\u6301\u7a33\u5b9a\uff1a</p> <pre><code>    reg [1:0] d;\n    wire problem;\n    reg cond1;\n    reg cond2;\n    assign problem = cond1 &amp; cond2;\n\n    always@(posedge clk)begin\n        if(problem) d &lt;= d + 2'b1;\n    end\n</code></pre> <p>\u5982\u679c\u53ea\u5e0c\u671b problem \u7684\u4e0a\u5347\u6cbf\u4f7f\u5f97 d \u5bc4\u5b58\u5668\u7ec4\u52a0 1\uff0c\u5219\u53ef\u4ee5\u5148\u8bd5\u7528 PosSample \u4e0a\u5347\u6cbf\u91c7\u6837\u7535\u8def\u5bf9 problem \u8fdb\u884c\u91c7\u6837\u3002\u53c2\u89c1\u5e38\u7528\u6a21\u5757-\u8fb9\u6cbf\u91c7\u6837\u3002</p>"},{"location":"lab3-1-appendix/#logic","title":"logic","text":"<p>SystemVerilog \u63d0\u4f9b\u7684\u65b0\u53d8\u91cf\u7c7b\u578b\u3002logic \u7c7b\u578b\u7684\u53d8\u91cf\u65e2\u53ef\u4ee5\u7528\u5728<code>assign\u3001always@(*)</code>\u7b49\u7ec4\u5408\u7535\u8def\uff0c\u4e5f\u53ef\u4ee5\u7528\u5728<code>always@(posedge clk)</code>\u7b49\u65f6\u5e8f\u7535\u8def\uff1a\u5982\u679c\u7528\u5728<code>assign\u3001always@(*)</code>\u7b49\u7ec4\u5408\u7535\u8def\u8bbe\u8ba1\u4e2d\uff0c\u5b83\u7684\u884c\u4e3a\u5c31\u662f\u548c wire \u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u7684\uff0c\u6700\u540e\u4f1a\u88ab\u7efc\u5408\u5f97\u5230 wire\uff1b\u5982\u679c\u7528\u5728<code>always@(posedge clk)</code>\u7b49\u65f6\u5e8f\u7535\u8def\u8bbe\u8ba1\u4e2d\uff0c\u5b83\u7684\u884c\u4e3a\u5c31\u662f\u548c reg \u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u7684\uff0c\u6700\u540e\u4f1a\u88ab\u7efc\u5408\u5f97\u5230 reg \u7c7b\u578b\u3002</p> <p>\u6240\u4ee5\u5927\u5bb6\u5728\u7f16\u7a0b\u7684\u65f6\u5019\u53ef\u4ee5\u7528 logic \u5168\u9762\u66ff\u4ee3 wire/reg \u53d8\u91cf\uff0c\u7136\u540e\u8ba9 SystemVerilog \u81ea\u5df1\u6839\u636e\u573a\u666f\u786e\u5b9a logic \u7684\u5b9e\u9645\u7c7b\u578b\uff0c\u65b9\u4fbf\u7f16\u7a0b\u8005\u5c06\u66f4\u591a\u7684\u7cbe\u529b\u653e\u5728\u903b\u8f91\u8bbe\u8ba1\u672c\u8eab\uff0c\u800c\u8fdb\u4e00\u6b65\u5ffd\u7565\u7535\u8def\u7ec4\u4ef6\u7684\u7ec6\u8282\u3002 <pre><code>    logic [1:0] d;\n    logic problem;\n    logic cond1;\n    logic cond2;\n    assign problem = cond1 &amp; cond2; // problem \u81ea\u52a8\u8bc6\u522b\u4e3a wire\n    always@(posedge clk)begin   \n        if(problem) d &lt;= d + 2'b1;  // d \u81ea\u52a8\u8bc6\u522b\u4e3a d\n    end\n</code></pre></p> <p>\u5176\u5b9e\u5bf9\u4e8e\u4eff\u771f\u672c\u8eab\u800c\u8a00\uff0cwire/reg \u90fd\u53ea\u662f\u4e00\u4e2a C \u8bed\u8a00\u53d8\u91cf\u800c\u5df2\uff0c\u6240\u4ee5\u5168\u90e8\u53d6\u4ee3\u4e3a logic \u5b8c\u5168\u6ca1\u6709\u95ee\u9898\u3002wire \u548c reg \u7684\u533a\u522b\u4ec5\u4ec5\u5728\u7efc\u5408\u6210\u7535\u8def\u3001\u5177\u6709\u7535\u6c14\u7279\u6027\u4e4b\u540e\u624d\u6709\u610f\u4e49\u3002</p>"},{"location":"lab3-1-appendix/#always_1","title":"\u6269\u5c55 always","text":"<p>always \u5757\u672c\u8eab\u662f\u4e3a reg \u8bbe\u8ba1\u7684\uff0c\u4f46\u662f\u56e0\u4e3a\u5176\u5bf9\u4e8e\u884c\u4e3a\u63cf\u8ff0\u8f83\u597d\u7684\u652f\u6301\uff0c\u56e0\u6b64\u4e5f\u88ab\u501f\u7528\u7ed9\u4e86\u7ec4\u5408\u7535\u8def\u8bbe\u8ba1\u3002\u8fd9\u4f7f\u5f97 always \u5757\u8bed\u6cd5\u65e2\u53ef\u4ee5\u7528\u4e8e\u751f\u6210\u65f6\u5e8f\u7535\u8def\uff0c\u4e5f\u53ef\u4ee5\u751f\u6210\u7ec4\u5408\u7535\u8def\u3001latch \u7535\u8def\uff0c\u800c\u5177\u4f53\u751f\u6210\u90a3\u79cd\u7535\u8def\u7eaf\u7cb9\u53d6\u51b3\u4e86\u4e0d\u53ef\u9760\u7684\u7f16\u7a0b\u8005\u7684\u63cf\u8ff0\u7ec6\u8282\uff1b\u8be5\u8bed\u6cd5\u8981\u6c42\u7f16\u7a0b\u8005\u7f16\u7a0b\u65f6\u6781\u5176\u5c0f\u5fc3\uff0c\u4ee5\u9632\u6b62 always \u751f\u6210\u7684\u7535\u8def\u7c7b\u578b\u548c\u8bbe\u8ba1\u7684\u7535\u8def\u7c7b\u578b\u4e0d\u4e00\u81f4\u3002\u4e3a\u6b64 SystemVerilog \u6269\u5c55\u4e86 always \u8bed\u6cd5\uff0c\u4e3a\u65f6\u5e8f\u7535\u8def\u3001\u7ec4\u5408\u7535\u8def\u3001\u9501\u5b58\u5668\u7535\u8def\u5206\u522b\u63d0\u4f9b\u4e86 always_ff\u3001always_comb\u3001always_latch \u4e09\u4e2a\u5173\u952e\u5b57\u3002</p>"},{"location":"lab3-1-appendix/#always_comb","title":"always_comb","text":"<p>\u4f60\u8fd8\u5728\u4e3a always@(*) \u8bed\u6cd5\u7684\u770b\u8d77\u6765\u5728\u505a reg \u7f16\u7a0b\u5b9e\u9645\u4e0a\u5728\u505a wire \u7f16\u7a0b\u82e6\u607c\u5417\uff1falways_comb \u5173\u952e\u5b57\u5c31\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u5b83\u8bf4\u660e\u4e00\u4e0b\u7684\u884c\u4e3a\u63cf\u8ff0\u5c31\u662f\u76f4\u63a5\u88ab\u751f\u6210\u7ec4\u5408\u7535\u8def\u7684\uff0c\u5185\u90e8\u88ab\u8d4b\u503c\u7684 logic \u90fd\u4f1a\u88ab\u7efc\u5408\u4e3a wire\uff0c\u7136\u540e\u4f1a\u5bf9 if-else \u7f3a\u5931\u3001case-default \u7f3a\u5931\u7b49\u95ee\u9898\u8fdb\u884c\u68c0\u67e5\u3002\u5927\u5bb6\u53ef\u4ee5\u7528<code>logic+always_comb</code>\u8bed\u6cd5\u5168\u9762\u66ff\u4ee3<code>reg+always@(*)</code>\u8bed\u6cd5\uff0c\u8fd9\u6837\u5728\u4eab\u53d7 always \u4fbf\u5229\u7684\u884c\u4e3a\u63cf\u8ff0\u8bed\u6cd5\u7684\u540c\u65f6\uff0c\u4e5f\u53ef\u4ee5\u4eab\u53d7\u7f16\u8bd1\u5668\u7684\u7535\u8def\u95ee\u9898\u68c0\u67e5\u3002 <pre><code>    // \u4fee\u6539\u524d\n    reg d;\n    always@(*)begin\n        if(a) d &lt;= c;\n        else d &lt;= b;\n    end\n\n    // \u4fee\u6539\u540e\n    logic d;\n    always_comb begin\n        if(a) d &lt;= c;\n        else d &lt;= b;\n    end\n\n    // \u4fee\u6539\u524d\n    reg d;\n    always@(*)begin\n        if(a) d &lt;= c; // \u53ef\u80fd\u5f97\u5230\u9501\u5b58\u5668 latch \u7535\u8def\n    end\n\n    // \u4fee\u6539\u540e\n    logic d;\n    always_comb begin\n        if(a) d &lt;= c; // \u6ca1\u6709 else \u5206\u652f\uff0c\u7ed9\u51fa\u62a5\u9519\n    end\n</code></pre></p>"},{"location":"lab3-1-appendix/#always_ff","title":"always_ff","text":"<p>always_ff \u8bed\u6cd5\u8bf4\u660e\u8fd9\u4e2a always \u5757\u662f\u4e13\u95e8\u7528\u4e8e\u751f\u6210 ff \u7535\u8def\uff0c\u5185\u90e8\u88ab\u8d4b\u503c\u7684 logic \u90fd\u4f1a\u88ab\u7efc\u5408\u4e3a reg\u3002\u8bed\u6cd5\u4e0a\u53ea\u9700\u8981\u5c06 always \u66ff\u6362\u4e3a always_ff \u5373\u53ef\u3002</p> <pre><code>    always_ff@(posedge clk)begin\n        if(problem) d &lt;= d + 2'b1;\n    end\n</code></pre>"},{"location":"lab3-1-appendix/#always_latch","title":"always_latch","text":"<p>always_latch \u8bed\u6cd5\u8bf4\u660e\u8fd9\u4e2a always \u5757\u662f\u4e13\u95e8\u7528\u4e8e\u751f\u6210 latch \u7535\u8def\u7684\uff0c\u8fd9\u662f\u5f88\u4e0d\u5e38\u7528\u3001\u5f88\u5371\u9669\u7684\u7535\u8def\uff0c\u5927\u5bb6\u5982\u65e0\u5fc5\u8981\u4e0d\u8981\u5c1d\u8bd5\u4f7f\u7528\u3002\u539f\u6765\u7684 always@(*) \u5982\u679c if-else\u3001case-default \u5b8c\u6574\u5c31\u662f\u5f97\u5230\u7ec4\u5408\u7535\u8def\uff0c\u6709\u6240\u7f3a\u5931\u5c31\u662f\u5f97\u5230 latch \u7535\u8def\uff1balways_latch \u5219\u662f\u4f1a\u4e25\u683c\u68c0\u67e5\u8bed\u6cd5\uff0c\u786e\u4fdd\u5b58\u5728 if-else\u3001case-default \u7f3a\u5931\u3002</p> <pre><code>    // \u4fee\u6539\u524d\n    reg d;\n    always@(*)begin\n        if(a) d &lt;= c;\n    end\n\n    // \u4fee\u6539\u540e\n    logic d;\n    always_latch begin\n        if(a) d &lt;= c;\n    end\n</code></pre>"},{"location":"lab3-1-appendix/#_14","title":"\u5e38\u7528\u6a21\u5757\u4ecb\u7ecd","text":"<p>\u4ecb\u7ecd\u51e0\u4e2a\u5e38\u7528\u7684\u7535\u8def\u6a21\u5757\uff1a</p>"},{"location":"lab3-1-appendix/#_15","title":"\u5206\u9891\u5668","text":"<pre><code>    module ClkDiv( // repo/sys-project/lab3-1/syn/ClkDiv.v\n        input clk,\n        input rstn,\n        output reg [31:0] clk_div\n    );\n\n        always@(posedge clk)begin\n            if(~rstn)clk_div&lt;=32'b0;\n            else clk_div&lt;=clk_div+32'b1;\n        end\n\n    endmodule\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\u5206\u9891\u5668\u5c31\u662f\u5bf9\u4e00\u4e2a 32 \u4f4d\u7684 clk_div \u505a\u7d2f\u52a0\uff0c\u4eff\u771f\u53ef\u4ee5\u770b\u5230\u5bf9\u5e94\u7684\u6ce2\u5f62\u5982\u4e0b\uff1a</p> <p></p> <p><code>clk_div[0]</code> \u6bcf\u4e2a\u65f6\u949f\u5468\u671f\u7ffb\u8f6c\u4e00\u6b21\uff0c\u6240\u4ee5\u5b83\u7684\u65f6\u949f\u9891\u7387\u662f clk \u7684\u4e00\u534a\uff1b<code>clk_div[1]</code> \u6bcf\u4e24\u4e2a\u65f6\u949f\u5468\u671f\u7ffb\u8f6c\u4e00\u6b21\uff0c\u65f6\u949f\u9891\u7387\u662f clk \u7684\u56db\u5206\u4e4b\u4e00\uff1b<code>clk_div[2]</code> \u5230 <code>clk_div[31]</code> \u4f9d\u6b21\u51cf\u534a\u3002</p> <p>\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u7528\u5206\u9891\u5668\u5f97\u5230\u4e0d\u540c\u9891\u7387\u7684\u65f6\u949f\u3002\u6211\u4eec lab1-2 \u7684\u4e03\u6bb5\u6570\u7801\u7ba1\u52a8\u6001\u5237\u65b0\u6240\u4f7f\u7528\u7684\u65f6\u949f\u8981\u6c42\u9891\u7387\u6bd4\u8f83\u4f4e\uff0c\u56e0\u6b64\u4f7f\u7528 <code>clk_div[10]</code> \u4ee5\u6ee1\u8db3\u65f6\u949f\u9891\u7387\u7684\u8981\u6c42\u3002</p>"},{"location":"lab3-1-appendix/#_16","title":"\u6309\u952e\u53bb\u6296\u5668","text":"<p>\u6211\u4eec\u5e0c\u671b\u6309\u94ae\u6309\u4e0b\u4e3a\u9ad8\u7535\u5e73\uff0c\u5f39\u8d77\u4e3a\u4f4e\u7535\u5e73\u3002\u4f46\u662f\u6309\u94ae\u672c\u8eab\u5177\u6709\u4e00\u5b9a\u7684\u5f39\u6027\uff0c\u5f53\u6211\u4eec\u6309\u4e0b\u6309\u94ae\u7684\u65f6\u5019\u5b83\u4f1a\u8fdb\u884c\u4e00\u6bb5\u65f6\u95f4\u7684\u6296\u52a8\uff0c\u65f6\u800c\u9ad8\u7535\u5e73\u3001\u65f6\u800c\u4f4e\u7535\u5e73\uff0c\u5982\u679c\u6211\u4eec\u4ecd\u7136\u5047\u5b9a\u9ad8\u7535\u5e73\u662f\u6309\u94ae\u6309\u4e0b\u3001\u4f4e\u7535\u5e73\u662f\u6309\u94ae\u5f39\u8d77\uff0c\u90a3\u4e48\u5728\u7535\u8def\u7684\u89c6\u89d2\u91cc\u6309\u94ae\u5c31\u88ab\u8fde\u7eed\u6309\u4e86\u5f88\u591a\u4e0b\u3002\u56e0\u6b64\u9700\u8981\u4e00\u4e2a\u7535\u8def\u903b\u8f91\u5c06\u6309\u94ae\u6296\u52a8\u4ea7\u751f\u7684\u6bdb\u523a\u8fc7\u6ee4\u6389\uff0c\u5373\u53bb\u6296\u7535\u8def\uff1a</p> <pre><code>    module Debouncer ( // repo/sys-project/lab3-1/syn/Debouncer.v\n        input  wire  clk,//100Mhz 2^10\n        input  wire  btn,\n        output wire  btn_dbnc\n    );\n\n        reg [7:0] shift = 0;\n\n        always @ (posedge clk) begin\n            shift &lt;= {shift[6:0], btn};\n        end\n\n        assign btn_dbnc = &amp;shift;\n    endmodule\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\u5982\u679c\u8fde\u7eed 8 \u4e2a\u5468\u671f\u7684\u65f6\u949f\u8f93\u5165\u662f\u9ad8\u7535\u5e73\uff0c\u5219\u8f93\u51fa\u9ad8\u7535\u5e73\uff1b\u8fd9\u91cc\u7684\u65f6\u949f\u4f7f\u7528 100 KHz\uff0c\u65f6\u949f\u5468\u671f\u4e3a 10 us\uff0c\u4e5f\u5c31\u662f\u8fde\u7eed 80us \u90fd\u662f\u9ad8\u7535\u5e73\uff0c\u5219\u8ba4\u4e3a\u6309\u94ae\u8f93\u5165\u9ad8\u7535\u5e73\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5c06\u6309\u94ae\u6309\u4e0b\u548c\u677e\u5f00\u65f6\u6296\u52a8\u4ea7\u751f\u7684\u6bdb\u523a\u8fc7\u6ee4\u6389\u3002</p> <p></p>"},{"location":"lab3-1-appendix/#_17","title":"\u8fb9\u6cbf\u91c7\u6837","text":"<pre><code>    module PosSample ( // repo/sys-project/lab3-1/syn/Debouncer.v\n        input clk,\n        input data,\n        output sample\n    );\n\n        reg old_data;\n        always@(posedge clk)begin\n            old_data &lt;= data;\n        end\n\n        assign sample = ~old_data &amp; data;\n\n    endmodule\n</code></pre> <p>\u5982\u679c\u4e0a\u4e00\u4e2a\u5468\u671f\u91c7\u6837\u7684\u662f\u4f4e\u7535\u5e73\u800c\u8fd9\u4e2a\u5468\u671f\u91c7\u6837\u7684\u662f\u9ad8\u7535\u5e73\uff0c\u5219\u53d1\u73b0\u4e86\u4e00\u4e2a\u4e0a\u5347\u6cbf\uff0c\u8f93\u51fa\u9ad8\u7535\u5e73\u3002\u5982\u679c\u4e4b\u540e\u4e00\u76f4\u662f\u6301\u7eed\u9ad8\u7535\u5e73\u6216\u8005\u4f4e\u7535\u5e73\u5219\u4e0d\u54cd\u5e94\uff0c\u8f93\u51fa\u4f4e\u7535\u5e73\u3002\u540c\u7406\u8fd8\u53ef\u4ee5\u5b9e\u73b0\u4e0b\u964d\u6cbf\u91c7\u6837\u548c\u7ffb\u8f6c\u91c7\u6837\u3002</p> <p></p>"},{"location":"lab3-1/","title":"\u5b9e\u9a8c3-1: \u65f6\u5e8f\u7535\u8def\u8bbe\u8ba1\u4e4b\u6709\u9650\u72b6\u6001\u673a","text":""},{"location":"lab3-1/#_1","title":"\u5b9e\u9a8c\u76ee\u7684","text":"<ul> <li>\u5b66\u4e60\u4f7f\u7528 Verilog \u8bed\u8a00\u8fdb\u884c\u65f6\u5e8f\u7535\u8def\u8bbe\u8ba1\u7684\u65b9\u6cd5</li> <li>\u638c\u63e1\u65f6\u5e8f\u7535\u8def\u8bbe\u8ba1\u7684\u57fa\u672c\u601d\u8def</li> <li>\u638c\u63e1\u6709\u9650\u72b6\u6001\u673a\u7684\u8bbe\u8ba1\u548c\u5b9e\u73b0</li> </ul>"},{"location":"lab3-1/#_2","title":"\u5b9e\u9a8c\u73af\u5883","text":"<ul> <li>\u64cd\u4f5c\u7cfb\u7edf\uff1aWindows 10+ 22H2\uff0cUbuntu 22.04+</li> <li>VHDL\uff1aVerilog\uff0cSystemVerilog</li> </ul>"},{"location":"lab3-1/#_3","title":"\u80cc\u666f\u77e5\u8bc6","text":""},{"location":"lab3-1/#_4","title":"\u6709\u9650\u72b6\u6001\u673a","text":""},{"location":"lab3-1/#_5","title":"\u57fa\u672c\u6982\u5ff5","text":"<p>\u5728\u65f6\u5e8f\u7535\u8def\u8bbe\u8ba1\u4e2d\uff0c\u7406\u6e05\u8bbe\u8ba1\u7684\u65f6\u5e8f\u662f\u6700\u91cd\u8981\u7684\u4e00\u73af</p> <p>\u6709\u9650\u72b6\u6001\u673a\uff08Finite State Machine\uff0c\u7b80\u79f0FSM\uff09\u662f\u5728\u6709\u9650\u4e2a\u72b6\u6001\u4e4b\u95f4\u6309\u4e00\u5b9a\u89c4\u5f8b\u8f6c\u6362\u7684\u65f6\u5e8f\u7535\u8def\u3002</p> <p>\u6709\u9650\u72b6\u6001\u673a\u901a\u5e38\u662f\u7531\u5bc4\u5b58\u5668\u7ec4\u548c\u7ec4\u5408\u903b\u8f91\u7ec4\u6210\uff0c\u6839\u636e\u5f53\u524d\u72b6\u6001\u548c\u8f93\u5165\u4fe1\u53f7\u53ef\u4ee5\u63a7\u5236\u4e0b\u4e00\u4e2a\u72b6\u6001\u7684\u8df3\u8f6c\u3002\u6709\u9650\u72b6\u6001\u673a\u5728\u7535\u8def\u4e2d\u901a\u5e38\u662f\u4f5c\u4e3a\u63a7\u5236\u6a21\u5757\uff0c\u4f5c\u4e3a\u6574\u4e2a\u7535\u8def\u6a21\u5757\u7684\u6838\u5fc3\u800c\u5b58\u5728\u3002</p> <p>\u5b83\u4e3b\u8981\u5305\u62ec\u4e24\u5927\u7c7b\uff1aMealy\u578b\u72b6\u6001\u673a \u548c Moore\u578b\u72b6\u6001\u673a\u3002</p> <p>Mealy\u578b\u72b6\u6001\u673a: \u5176\u7ec4\u5408\u903b\u8f91\u7684\u8f93\u51fa\u4e0d\u4ec5\u4e0e\u5f53\u524d\u72b6\u6001\u6709\u5173\uff0c\u8fd8\u4e0e\u8f93\u5165\u6709\u5173\u3002</p> <p></p> <p>Moore\u578b\u72b6\u6001\u673a\uff1a\u5176\u7ec4\u5408\u903b\u8f91\u7684\u8f93\u51fa\u53ea\u4e0e\u5f53\u524d\u7684\u72b6\u6001\u6709\u5173</p> <p></p> <p>\u57fa\u672c\u6982\u5ff5\uff1a</p> <ul> <li>\u72b6\u6001\u5bc4\u5b58\u5668\u7531\u4e00\u7ec4\u89e6\u53d1\u5668\u7ec4\u6210\uff0c\u7528\u6765\u8bb0\u5fc6\u72b6\u6001\u673a\u5f53\u524d\u6240\u5904\u7684\u72b6\u6001\uff0c\u72b6\u6001\u7684\u6539\u53d8\u53ea\u53d1\u751f\u5728\u65f6\u949f\u7684\u8df3\u53d8\u6cbf\u3002</li> <li>\u72b6\u6001\u662f\u5426\u6539\u53d8\u3001\u5982\u4f55\u6539\u53d8\uff0c\u53d6\u51b3\u4e8e\u7ec4\u5408\u903b\u8f91F\u7684\u8f93\u51fa\uff0cF\u662f\u5f53\u524d\u72b6\u6001\u548c\u8f93\u5165\u4fe1\u53f7\u7684\u51fd\u6570\u3002</li> <li>\u72b6\u6001\u673a\u7684\u8f93\u51fa\u662f\u7531\u8f93\u51fa\u7ec4\u5408\u903b\u8f91G\u63d0\u4f9b\u7684\uff0cG\u4e5f\u662f\u5f53\u524d\u72b6\u6001\u548c\u8f93\u5165\u4fe1\u53f7\u7684\u51fd\u6570\u3002 </li> </ul>"},{"location":"lab3-1/#_6","title":"\u8bbe\u8ba1\u6b65\u9aa4","text":"<p>\u7cfb\u7edf\u67b6\u6784\u548c\u63a5\u53e3\u5b9a\u4e49\uff1a</p> <p></p> <p>\u72b6\u6001\u5b9a\u4e49\u548c\u7f16\u7801\uff1a</p> <ul> <li>\u72b6\u6001\u673a\u7684\u7f16\u7801\u65b9\u5f0f\u4e3b\u8981\u5305\u62ec\uff1a\u4e8c\u8fdb\u5236\u7801\uff08Binary\uff09\uff0c\u683c\u96f7\u7801\uff08gray\uff09\uff0c\u72ec\u70ed\u7801(one hot) </li> <li>\u683c\u96f7\u7801\u76f8\u5bf9\u4e8e\u4e8c\u8fdb\u5236\u7801\u800c\u8a00\uff0c\u5728\u76f8\u90bb\u72b6\u6001\u8df3\u8f6c\u7684\u65f6\u5019\uff0c\u53ea\u6709\u5355\u6bd4\u7279\u7ffb\u8f6c\uff0c\u5b83\u7684\u529f\u8017\u76f8\u5bf9\u6bd4\u8f83\u4f4e\u3002\u72ec\u70ed\u7801\u76f8\u5bf9\u4e8e\u683c\u96f7\u7801\u6216\u8005\u4e8c\u8fdb\u5236\u7801\u800c\u8a00\uff0c\u5b83\u589e\u52a0\u4e86\u4e24\u4e2a\u5bc4\u5b58\u5668\u6765\u8868\u793a\u72b6\u6001\uff0c\u4f46\u662f\u5b83\u4f1a\u66f4\u8282\u7701\u7ec4\u5408\u903b\u8f91\u7535\u8def\uff0c\u56e0\u4e3a\u5b83\u5728\u6bd4\u8f83\u72b6\u6001\u7684\u65f6\u5019\uff0c\u53ea\u9700\u8981\u6bd4\u8f83\u4e00\u4e2a\u6bd4\u7279\u4f4d\uff0c\u90a3\u4e48\u5176\u7535\u8def\u7684\u901f\u5ea6\u548c\u53ef\u9760\u6027\u5c31\u4f1a\u589e\u52a0</li> </ul> <p></p> \u4e09\u6bb5\u5f0f\u8bbe\u8ba1\u65b9\u6cd5 <p>\u6709\u9650\u72b6\u6001\u673a\u5728Verilog\u7f16\u7a0b\u4e2d\u6709\u5982\u4e0b\u4e09\u79cd\u8bbe\u8ba1\u65b9\u6cd5</p> <ul> <li>\u4e00\u6bb5\u5f0f\u63cf\u8ff0\uff08\u72b6\u6001\u8df3\u8f6c\u4e0e\u8f93\u51fa\u4fe1\u53f7\u90fd\u5728\u540c\u4e00\u4e2aalways\u5757\u91cc\u9762\u8fdb\u884c\u63cf\u8ff0\uff09</li> <li>\u4e8c\u6bb5\u5f0f\u63cf\u8ff0\uff08\u5c06\u8f93\u51fa\u4fe1\u53f7\u4e0e\u72b6\u6001\u8df3\u8f6c\u5206\u5f00\u63cf\u8ff0\uff0c\u4fbf\u4e8e\u8bbe\u8ba1\u4ee3\u7801\u7ba1\u7406\uff09</li> <li>\u4e09\u6bb5\u5f0f\u63cf\u8ff0\uff08\u5c06\u8f93\u51fa\u4fe1\u53f7\u4e0e\u72b6\u6001\u8df3\u8f6c\u5206\u5f00\u63cf\u8ff0\uff0c\u5e76\u4e14\u72b6\u6001\u8df3\u8f6c\u7528\u7ec4\u5408\u903b\u8f91\u6765\u63a7\u5236\uff09</li> </ul> <p>\u4e3a\u4e86\u65f6\u5e8f\u7684\u6e05\u695a\u68b3\u7406\u548c\u8868\u793a\uff0c\u6211\u4eec\u5f3a\u70c8\u5efa\u8bae\u4f7f\u7528\u4e09\u6bb5\u5f0f\u63cf\u8ff0\u8fdb\u884cFSM\u8bbe\u8ba1</p> <p>\u5728\u7f16\u5199FSM\u524d\uff0c\u5e94\u8be5\u5148\u7ed9\u51fa\u72b6\u6001\u8f6c\u6362\u56fe\u7406\u6e05\u65f6\u5e8f\uff0c\u518d\u8fdb\u884c\u7535\u8def\u8bbe\u8ba1\uff0c\u4e0b\u9762\u4e3e\u4e00\u4e2a\u5177\u4f53\u7684\u4f8b\u5b50\uff1a</p> <p>\u8bbe\u8ba1\u4e00\u4e2a\u5e8f\u5217\u68c0\u6d4b\u5668\uff0c\u68c0\u6d4b\u7684\u5e8f\u5217\u4e3a\u201c1110010\u201d\uff1b\u5f53\u8f93\u5165\u4fe1\u53f7X\u4e2d\u51fa\u73b0\u5e8f\u5217\u201c1110010\u201d\u65f6\uff0c\u8f93\u51fa\u4fe1\u53f7Y\u8f93\u51fa\u4e00\u4e2a\u9ad8\u7535\u5e73 \uff0c\u5426\u5219\u8f93\u51fa\u4fe1\u53f7Y\u4e3a\u4f4e\u7535\u5e73\u3002</p> <p>\u5176\u72b6\u6001\u8f6c\u6362\u56fe\u5982\u4e0b</p> <p></p> <p>Verilog\u4e09\u6bb5\u5f0f\u8bbe\u8ba1\u5982\u4e0b</p> <pre><code>module seq(\n    input clk,\n    input reset,\n    input in,\n    output out\n    );\n\n    localparam [2:0] S0 = 3'b000;\n    localparam [2:0] S1 = 3'b001;\n    localparam [2:0] S2 = 3'b010;\n    localparam [2:0] S3 = 3'b011;\n    localparam [2:0] S4 = 3'b100;\n    localparam [2:0] S5 = 3'b101;\n    localparam [2:0] S6 = 3'b110;\n    localparam [2:0] S7 = 3'b111;  \n\n    reg [2:0] curr_state, next_state;\n    reg out_reg;\n\n//\u7b2c\u4e00\u6bb5\uff1a\u4f20\u9012\u5bc4\u5b58\u5668\u72b6\u6001\uff0c\u65f6\u5e8f\u903b\u8f91\uff0c\u975e\u963b\u585e\u8d4b\u503c\n    always @(posedge clk or negedge reset) begin\n        if(!reset)\n            curr_state &lt;= S0;\n        else\n            curr_state &lt;= next_state;\n    end\n\n//\u7b2c\u4e8c\u6bb5\uff1a\u6839\u636e\u5f53\u524d\u72b6\u6001\u548c\u5f53\u524d\u8f93\u5165\u786e\u5b9a\u4e0b\u4e00\u72b6\u6001\uff0c\u7ec4\u5408\u903b\u8f91\uff0c\u963b\u585e\u8d4b\u503c\n    always @(*) begin\n        if(!reset)\n            next_state = S0;\n        else begin\n            case(curr_state)\n                S0: begin \n                    if(in == 0) next_state = S0;\n                    else next_state = S1;\n                end\n                S1: begin \n                    if(in == 0) next_state = S0;\n                    else next_state = S2;\n                end\n                S2: begin \n                    if(in == 0) next_state = S0;\n                    else next_state = S3;\n                end\n                S3: begin \n                    if(in == 0) next_state = S4;\n                    else next_state = S3;\n                end\n                S4: begin \n                    if(in == 0) next_state = S5;\n                    else next_state = S1;\n                end\n                S5: begin \n                    if(in == 0) next_state = S0;\n                    else next_state = S6;\n                end\n                S6: begin \n                    if(in == 0) next_state = S7;\n                    else next_state = S2;\n                end\n                S7: begin \n                    if(in == 0) next_state = S0;\n                    else next_state = S1;\n                end\n                default: next_state = S0;\n            endcase\n        end\n    end\n\n//\u7b2c\u4e09\u6bb5\uff1a\u6839\u636e\u5f53\u524d\u72b6\u6001\u548c\u5f53\u524d\u8f93\u5165\u786e\u5b9a\u8f93\u51fa\uff0c\u65f6\u5e8f\u903b\u8f91\uff0c\u975e\u963b\u585e\u8d4b\u503c\n    always @(posedge clk or negedge reset) begin\n        if(!reset)\n            out_reg &lt;= 0;\n        else\n            out_reg &lt;= (curr_state == S7)?1:0;\n    end\n    assign out = out_reg;\n\nendmodule\n</code></pre> <p>\u672c\u6b21\u5b9e\u9a8c\u7684\u5b9e\u73b0\u53ef\u53c2\u8003\u5982\u4e0a\u4ee3\u7801\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5df1\u6574\u7406\u51fa\u65f6\u5e8f</p> enum \u679a\u4e3e <p>\u5bf9\u4e8e\u4e0a\u9762\u90a3\u4e2a\u4f8b\u5b50\uff0c\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u72b6\u6001\u56fe\u7ed8\u5236\u5bf9\u5e94\u7684\u771f\u503c\u8868\uff0c\u8fd9\u91cc\u7684 Y \u6307\u7684\u662f\u4e0b\u4e2a\u5468\u671f\u7684 Y \u503c\uff1a</p> S2 S1 S0 X S2 S1 S0 Y 0 0 0 0 0 0 0 0 0 0 0 1 0 0 1 0 0 0 1 0 0 0 0 0 0 0 1 1 0 1 0 0 0 1 0 0 0 0 0 0 0 1 0 1 1 0 0 0 0 1 1 0 1 0 0 0 0 1 1 1 0 1 1 0 1 0 0 0 1 0 1 0 1 0 0 1 0 0 1 0 1 0 1 0 0 0 0 0 1 0 1 1 1 1 0 0 1 1 0 0 1 1 1 1 1 1 0 1 0 1 0 0 1 1 1 0 0 0 0 0 1 1 1 1 0 0 1 0 <p>\u6211\u4eec\u53ef\u4ee5\u50cf\u4e09\u6bb5\u5f0f\u7684\u4ee3\u7801\u6837\u4f8b\u90a3\u6837\u4f7f\u7528 localparam \u4e3a\u72b6\u6001\u4fee\u6539\u522b\u540d\uff0c\u8fd9\u6837\u6bd4\u76f4\u63a5\u7528\u7acb\u5373\u6570\u786c\u7f16\u7801\u89c4\u8303\u5f88\u591a\uff0c\u4f46\u662f SystemVerilog \u63d0\u4f9b\u4e86\u66f4\u8d34\u5408\u7684\u8bed\u6cd5 enum\uff1a</p> <pre><code>    typedef enum logic [2:0] {S0,S1,S2,S3,S4,S5,S6,S7} fsm_state;\n\n    fsm_state state;\n    always@(posedge clk or negedge rstn)begin\n        if(~rstn)begin\n            state &lt;= S0;\n        end else begin\n            case(state)\n                S0:if(X) state&lt;=S1; else state&lt;=S0; \n                S1:if(X) state&lt;=S2; else state&lt;=S0;\n                S2:if(X) state&lt;=S3; else state&lt;=S0;\n                S3:if(X) state&lt;=S3; else state&lt;=S4;\n                S4:if(X) state&lt;=S1; else state&lt;=S5;\n                S5:if(X) state&lt;=S6; else state&lt;=S0;\n                S6:if(X) state&lt;=S2; else state&lt;=S7;\n                S7:if(X) state&lt;=S1; else state&lt;=S0;\n            endcase\n        end\n    end\n\n    assign Y = state == S7;\n</code></pre> <ul> <li><code>enum</code>\u5b9a\u4e49\u4e00\u4e2a\u679a\u4e3e\u7c7b\u578b\uff0c<code>logic [2:0]</code>\u8bf4\u660e\u8fd9\u4e2a\u7c7b\u578b\u7684\u4f4d\u5bbd\u662f 3 \u4f4d\uff0c\u6240\u6709\u7684\u679a\u4e3e\u53d8\u91cf\u548c\u5e38\u91cf\u90fd\u662f 3 \u4f4d\u6570\u636e\u3002</li> <li><code>{S0,S1,S2,S3,S4,S5,S6,S7}</code>\u4e00\u6b21\u5b9a\u4e49\u679a\u4e3e\u5e38\u91cf\uff0c\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u662f 0\u30011\u30012 ... 7\u3002\u800c\u4e0d\u9700\u8981\u50cf<code>localparam</code>\u663e\u5f0f\u63d0\u4f9b\u7acb\u5373\u6570\u7684\u503c\u3002</li> <li><code>typedef ... fsm_state</code>\uff0c\u5c06\u8fd9\u4e2a\u679a\u4e3e\u7c7b\u578b\u5b9a\u4e49\u4e3a fsm_state \u7c7b\u578b\u3002\u7528<code>fsm_state</code>\u7c7b\u578b\u5b9a\u4e49\u53d8\u91cf\u53ef\u4ee5\u786e\u4fdd state reg \u7684\u4f4d\u5bbd\u548c\u679a\u4e3e\u503c\u4fdd\u6301\u4e00\u81f4\u3002</li> </ul> \u8bd1\u7801\u5668\u8303\u5f0f <p>\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u7528\u591a\u8def\u9009\u62e9\u5668\uff0c\u6839\u636e\u771f\u503c\u8868\u5f97\u5230\u6700\u540e\u7684\u7ed3\u679c\uff0c\u53ea\u4e0d\u8fc7\u73b0\u5728\u7684\u8f93\u5165\u4e0d\u4ec5\u4ec5\u662f X\uff0c\u8fd8\u5305\u62ec\u72b6\u6001\u5bc4\u5b58\u5668\u7684 S0\u3001S1\u3001S2\uff1b\u8f93\u51fa\u4e0d\u4ec5\u4ec5\u662f Y\uff0c\u8fd8\u5305\u62ec\u72b6\u6001\u5bc4\u5b58\u5668\u7684 S0\u3001S1\u3001S2\u3002</p> <pre><code>reg [2:0] state;\nalways@(posedge clk or negedge rstn)begin\n    if(~rstn)begin\n        state &lt;= 3'b000;\n    end else begin\n        case({state, X})\n            4'b0000:{state,Y} &lt;= 4'b0000;\n            4'b0001:{state,Y} &lt;= 4'b0010;\n            4'b0010:{state,Y} &lt;= 4'b0000;\n            4'b0011:{state,Y} &lt;= 4'b0100;\n            4'b0100:{state,Y} &lt;= 4'b0000;\n            4'b0101:{state,Y} &lt;= 4'b1000;\n            4'b0110:{state,Y} &lt;= 4'b1000;\n            4'b0111:{state,Y} &lt;= 4'b0110;\n            4'b1000:{state,Y} &lt;= 4'b0010;\n            4'b1001:{state,Y} &lt;= 4'b0010;\n            4'b1010:{state,Y} &lt;= 4'b0000;\n            4'b1011:{state,Y} &lt;= 4'b1100;\n            4'b1100:{state,Y} &lt;= 4'b1111;\n            4'b1101:{state,Y} &lt;= 4'b0100;\n            4'b1110:{state,Y} &lt;= 4'b0000;\n            4'b1111:{state,Y} &lt;= 4'b0010;\n        endcase\n    end\nend\n</code></pre> <p>\u6216\u8005\u53ef\u4ee5\u5199\u505a\u5982\u4e0b\u7684\u7535\u8def\uff0c\u4e0a\u4e0b\u4e24\u4e2a\u7535\u8def\u662f\u7b49\u4ef7\u7684\uff0c\u751a\u81f3\u4ed6\u4eec\u7684\u7535\u8def\u6a21\u578b\u4e5f\u662f\u7b49\u4ef7\u7684\u3002\u53ea\u4e0d\u8fc7\u4e0a\u9762\u7684\u5199\u6cd5\u5c06\u5bc4\u5b58\u5668 data \u524d\u7684\u591a\u8def\u9009\u62e9\u5668\u7ec4\u5408\u7535\u8def\u90e8\u5206\u5199\u5728\u4e86 always \u5757\u5185\u90e8\uff0c\u800c\u4e0b\u9762\u7684\u5199\u6cd5\u5199\u5728\u4e86 always \u5757\u5916\u90e8\u3002</p> <pre><code>wire [3:0] table [15:0];\nassign table[0]  = 4'b0000;\nassign table[1]  = 4'b0010;\nassign table[2]  = 4'b0000;\nassign table[3]  = 4'b0100;\nassign table[4]  = 4'b0000;\nassign table[5]  = 4'b1000;\nassign table[6]  = 4'b1000;\nassign table[7]  = 4'b0110;\nassign table[8]  = 4'b0010;\nassign table[9]  = 4'b0010;\nassign table[10] = 4'b0000;\nassign table[11] = 4'b1100;\nassign table[12] = 4'b1111;\nassign table[13] = 4'b0100;\nassign table[14] = 4'b0000;\nassign table[15] = 4'b0010;\n\nalways@(posedge clk or negedge rstn)begin\n    if(~rstn)begin\n        state &lt;= 3'b000;\n    end else begin\n        {state, Y} &lt;= table[{state, X}];\n    end\nend\n</code></pre> \u67e5\u8868\u6cd5 <p>table \u4e8c\u7ef4\u6570\u7ec4\u53ef\u4ee5\u8ba4\u4e3a\u662f\u5c06\u771f\u503c\u8868\u4fdd\u5b58\u5728 table \u6570\u7ec4\u4e2d\uff0c\u7136\u540e\u6839\u636e\u8f93\u5165\u8fdb\u884c\u67e5\u8868\u5f97\u5230\u7ed3\u679c\uff0c\u8fd9\u91cc\u7684 table \u8868\u4f7f\u7528 wire \u6784\u9020\u7684\uff1b\u5176\u5b9e\u6211\u4eec\u8fd8\u53ef\u4ee5\u7528\u5bc4\u5b58\u5668\u6784\u9020\u8868\u683c\u3002</p> <p>\u9996\u5148\u5c06\u8868\u683c\u7684\u6570\u636e\u5b58\u5165\u4e00\u4e2a hex \u6587\u4ef6\uff1a <pre><code>0\n2\n0\n4\n0\n8\n8\n6\n2\n2\n0\nc\nf\n4\n0\n2\n</code></pre></p> <p>\u7136\u540e\u7528 $readmemh \u64cd\u4f5c\u7528 hex \u6587\u4ef6\u7684\u5185\u5bb9\u521d\u59cb\u5316\u5bc4\u5b58\u5668\u6570\u7ec4\uff1a</p> <pre><code>reg [3:0] table [15:0];\nalways@(posedge clk or negedge rstn)begin\n    if(~rstn)begin\n        state &lt;= 3'b000;\n    end else begin\n        {state, Y} &lt;= table[{state, X}];\n    end\nend\n\ninitial begin\n    $readmemh(\"table.hex\", table);\nend\n</code></pre> <p>\u8bd1\u7801\u5668\u7684\u7f16\u7a0b\u8303\u5f0f\u4e2d\uff0c\u67e5\u8868\u6216\u8005\u591a\u8def\u9009\u62e9\u5668\u7684\u64cd\u4f5c\u662f\u7528\u7ec4\u5408\u7535\u8def\u5b9e\u73b0\u7684\uff0c\u7efc\u5408\u4e4b\u540e\u4f1a\u7528 4 \u4e2a LUT4 \u6765\u5b9e\u73b0\u3002\u5982\u679c\u6211\u4eec\u7684\u6709\u9650\u72b6\u6001\u673a\u6bd4\u8f83\u5c0f\u5de7\uff0c\u8fd9\u662f\u8db3\u591f\u4e86\u7684\uff0c\u4f46\u662f\u5982\u679c\u6709\u9650\u72b6\u6001\u673a\u5f88\u5e9e\u5927\uff0cLUT \u7684\u6570\u76ee\u4f1a\u5f88\u591a\uff0c\u7535\u8def\u4f1a\u6bd4\u8f83\u590d\u6742\uff08\u6bd4\u5982 24 \u4e2a\u8f93\u5165\uff0c24 \u4e2a\u8f93\u51fa\u7684\u60c5\u51b5\uff09\u3002</p> <p>\u4f46\u662f\u5982\u679c\u662f\u7528\u4e8c\u7ef4\u5bc4\u5b58\u5668\u6570\u7ec4\u5b58\u50a8\u8868\u683c\uff0c\u6700\u540e\u7efc\u5408\u53ef\u80fd\u4f1a\u4f7f\u7528\u7535\u8def\u4e2d\u7684 block ram \u82af\u7247\u6765\u5b9e\u73b0\u4e8c\u7ef4\u6570\u7ec4\uff08\u9700\u8981\u6ee1\u8db3\u4e00\u4e9b\u6761\u4ef6\uff0c\u8fd9\u91cc\u4e0d\u5c55\u5f00\u6765\u8bb2\uff09\u3002\u8fd9\u4e2a block ram \u662f\u4e00\u5757\u5c0f\u578b\u7d27\u51d1\u7684\u5b58\u50a8\u82af\u7247\uff0c\u5b83\u7684\u5927\u5c0f\u53ea\u6709 slice \u7684 2 \u500d\uff0c\u4f46\u662f\u53ef\u4ee5\u5b58\u50a8\u7684\u6570\u636e\u91cf\u662f slice \u7684 LUT \u7684 8 \u500d\u4ee5\u4e0a\uff0c\u56e0\u6b64\u53ef\u4ee5\u5f97\u5230\u66f4\u7b80\u5355\u7d27\u51d1\u7684\u7535\u8def\uff0c\u4ece\u800c\u5f97\u5230\u66f4\u597d\u7684\u7535\u8def\u65f6\u5e8f\u3002</p> <p></p> <p>\u4e0d\u8fc7 block ram \u7684\u6536\u76ca\u4ec5\u5728\u72b6\u6001\u8f6c\u79fb\u8868\u975e\u5e38\u5927\u7684\u65f6\u5019\u6709\u6548\uff0c\u5728\u72b6\u6001\u8f6c\u79fb\u8868\u5f88\u5c0f\u7684\u65f6\u5019 LUT \u66f4\u52a0\u7684\u7cbe\u7b80\u3002\u6b64\u5916\u9664\u975e\u6709\u81ea\u52a8\u5316\u811a\u672c\u751f\u6210 table.hex (\u4e0d\u5efa\u8bae\u624b\u5199\uff0c\u56e0\u4e3a\u5f88\u5bb9\u6613\u5199\u9519)</p>"},{"location":"lab3-1/#_7","title":"\u5b9e\u9a8c\u6b65\u9aa4","text":""},{"location":"lab3-1/#_8","title":"\u5b9e\u9a8c\u524d\u51c6\u5907","text":"<p>\u4e0e\u4e4b\u524d\u7684 lab \u76f8\u540c\uff0c\u542f\u52a8\u5b89\u88c5\u5728\u4f60\u7535\u8111\u4e2d\u7684 Ubuntu 22.04 \u73af\u5883\uff08 WSL \u6216\u865a\u62df\u673a\uff09</p> <p>cd \u5230 sys1-sp24 \u6587\u4ef6\u5939</p> <p>\u6267\u884c</p> <pre><code>git pull\ncd repo/sys-project\ngit pull\n</code></pre> <p>\u8fd9\u4e2a\u547d\u4ee4\u5c06\u4ed3\u5e93\u66f4\u65b0\u5230\u6700\u65b0\u72b6\u6001</p>"},{"location":"lab3-1/#_9","title":"\u8bbe\u8ba1\u7b80\u5355\u7684\u6709\u9650\u72b6\u6001\u673a","text":"<p>\u6709\u9650\u72b6\u6001\u673a\u63a5\u6536\u4e00\u4e2a\u7531\u5b57\u7b26<code>a, b</code>\u505a\u6210\u7684\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u5b57\u7b26\u4e32\u5305\u542b\u8fde\u7eed\u7684\u4e09\u4e2a\u5b57\u7b26 a\uff0c\u5219\u63a5\u53d7\u8be5\u5b57\u7b26\u4e32\uff0c\u53cd\u4e4b\u5219\u62d2\u7edd\u8be5\u5b57\u7b26\u4e32\u3002\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u8bbe\u8ba1\u5f97\u5230\u72b6\u6001\u56fe\u5982\u4e0b\uff1a</p> <p></p> <p>\u6211\u4eec\u8bbe\u8ba1\u7684\u7535\u8def\u6709\u4e24\u4e2a\u8f93\u5165 a\u3001b\uff1a</p> <ul> <li>a=1\u3001b=0: \u8f93\u5165\u7684\u662f\u5b57\u7b26 a</li> <li>a=0\u3001b=1: \u8f93\u5165\u7684\u662f\u5b57\u7b26 b</li> <li>a=1\u3001b=1: \u8f93\u5165\u7684\u662f\u5b57\u7b26 a</li> <li>a=0\u3001b=0: \u6ca1\u6709\u8f93\u5165\uff0c\u72b6\u6001\u4fdd\u6301\u4e0d\u53d8</li> </ul> <p>\u4e8e\u662f\u53ef\u4ee5\u8fdb\u4e00\u6b65\u5f97\u5230\u72b6\u6001\u8868\uff1a</p> a b state next_state 0 0 s s 0 1 00 00 1 x 00 01 0 1 01 00 1 x 01 10 0 1 10 00 1 x 10 11 x x 11 11 <p>\u8bf7\u5927\u5bb6\u5728<code>src/lab3-1/submit/FSM.sv</code>\u4e2d\u5b9e\u73b0\u8fd9\u4e2a\u6709\u9650\u72b6\u6001\u673a\uff0c\u6ce8\u610f\u590d\u4f4d\u7535\u5e73\u3001\u521d\u59cb\u5316\u72b6\u6001\u3001enum \u8bed\u6cd5\u7b49\u4fe1\u606f\u3002</p> <pre><code>module FSM(\n    input rstn,\n    input clk,\n    input a,\n    input b,\n    output [1:0] state\n);\n\n    // fill your code\n\nendmodule\n</code></pre>"},{"location":"lab3-1/#_10","title":"\u4eff\u771f","text":"<p>\u6267\u884c<code>make verilate</code>\u8fdb\u884c\u4eff\u771f\u6d4b\u8bd5\uff0c\u5982\u679c\u6d4b\u8bd5\u6210\u529f\u6700\u540e\u4f1a\u8f93\u51fa<code>success!!!</code>\uff0c\u5982\u679c\u6d4b\u8bd5\u5931\u8d25\u5219\u4f1a\u8f93\u51fa<code>fail!!!</code>\u3002</p>"},{"location":"lab3-1/#dpi","title":"DPI \u6a21\u5757\u548c\u5dee\u5206\u6d4b\u8bd5","text":"<p>\u5728 lab2-1 \u7684\u5dee\u5206\u6d4b\u8bd5\u4e2d\u6211\u4eec\u4f7f\u7528\u4e86 function \u51fd\u6570\u5b9e\u73b0\u5bf9\u62cd\u5668\u3002</p> <p>\u672c\u5b9e\u9a8c\u6211\u4eec\u4e5f\u9700\u8981\u5b9e\u73b0\u4e00\u4e2aFSM \u5bf9\u62cd\u5668\u7136\u540e\u548c FSM \u7535\u8def\u8fdb\u884c\u7ed3\u679c\u6bd4\u8f83\uff0c\u9a8c\u8bc1\u6b63\u786e\u6027\u3002\u6211\u4eec\u6709\u4e09\u79cd\u9009\u62e9\uff1a</p> <ul> <li>\u5b9e\u73b0\u53e6\u4e00\u4e2a FSM \u7535\u8def\uff1b\u4f46\u662f\u8fd9\u4e2a\u5de5\u4f5c\u91cf\u8f83\u5927\uff0c\u4e14\u6b63\u786e\u6027\u96be\u4ee5\u4fdd\u8bc1</li> <li>\u5b9e\u73b0\u4e00\u4e2a function \u51fd\u6570\uff1b\u4f46\u662f function \u51fd\u6570\u6ca1\u6709\u72b6\u6001\u8bb0\u5fc6\u7684\u529f\u80fd\uff0c\u65e0\u6cd5\u4fdd\u7559 FSM \u7684\u4e0a\u4e00\u4e2a\u72b6\u6001</li> <li>\u5b9e\u73b0\u4e00\u4e2a\u7b49\u4ef7\u7684 C \u7a0b\u5e8f\uff0c\u5f53\u4f5c function \u4f7f\u7528\uff1b\u5de5\u4f5c\u91cf\u5c0f\u3001\u6613\u4e8e\u8c03\u8bd5\u3001\u53ef\u4ee5\u4fdd\u7559\u72b6\u6001\u3001\u529f\u80fd\u53ef\u4ee5\u5f88\u5f3a\u5927</li> </ul> <p>DPI \u51fd\u6570\u4e3a Verilog \u8bed\u8a00\u63d0\u4f9b\u4e86 C \u51fd\u6570\u8c03\u7528\u7684\u63a5\u53e3\uff0c\u53ef\u4ee5\u50cf\u8c03\u7528 function \u51fd\u6570\u90a3\u6837\u8c03\u7528 C \u51fd\u6570\u3002</p> <p>\u6211\u4eec\u5728<code>repo/sys-project/lab3-1/sim/judge.cpp</code>\u4e2d\u662f\u5b9e\u73b0\u4e86 fsm_state \u51fd\u6570\uff0c\u8be5\u51fd\u6570\u63a5\u53d7\u5f53\u524d\u65f6\u949f\u6cbf\u7684 a\u3001b\u3001rstn\uff0c\u6a21\u62df FSM \u7684\u5de5\u4f5c\u903b\u8f91\u66f4\u65b0 state \u7684\u503c\uff0c\u7136\u540e\u8fd4\u56de\u8fd9\u4e2a\u65f6\u949f\u6cbf\u65f6\u7684 state \u7684\u503c\u3002\u4e3a\u4e86\u53ef\u4ee5\u88ab Verilog \u8c03\u7528\uff0cC \u7a0b\u5e8f\u9700\u8981\u5305\u542b <code>svdpi.h</code> \u5934\u6587\u4ef6\uff0c\u5e76\u4e14\u505a<code>extern \"C\"</code>\u58f0\u660e\u3002</p> <pre><code>#include &lt;svdpi.h&gt;\n\nenum fsm_state {IDLE, ONE, TWO, YES};\nextern \"C\" unsigned int fsm_judge (unsigned int a, unsigned int b,unsigned int rstn){\n    static fsm_state state = IDLE;\n    unsigned int temp_state = state;\n    update_state(&amp;state, a, b, rstn);\n    return temp_state;\n}\n</code></pre> <p>\u8c03\u7528 C \u51fd\u6570\u7684 Verilog \u6587\u4ef6\u9700\u8981\u4ee5 Verilog \u51fd\u6570\u7684\u5f62\u5f0f\u58f0\u660e\u8fd9\u4e2a\u51fd\u6570\u7684\u4f20\u53c2\u548c\u8fd4\u56de\u503c\uff0c\u4e14\u7528<code>import \"DPI-C\"</code>\u6765\u58f0\u660e\u662f\u5916\u90e8\u8c03\u7528\u7684 dpi C \u51fd\u6570\u3002(\u53c2\u89c1<code>repo/sys-project/lab3-1/sim/Judge.v</code>)</p> <pre><code>import \"DPI-C\" function int fsm_judge(\n    input int unsigned a, \n    input int unsigned b,\n    input int unsigned rstn,\n);\n</code></pre> <p>always \u5757\u5185\u90e8\u7684\u8bed\u53e5\u662f\u53ef\u4ee5\u6309\u7167 C \u8bed\u8a00\u7684\u903b\u8f91\u4e60\u60ef\u6765\u5206\u6790\u8003\u8651\u7684\uff0c\u5927\u5bb6\u53ea\u8981\u4e0d\u628a\u7535\u8def\u601d\u7ef4\u5b8c\u5168\u629b\u63b7\u8111\u540e\u5c31\u597d\u4e86\uff08\u4f46\u662f always \u5757\u5916\u90e8\u548c always \u5757\u4e4b\u95f4\u4e0d\u80fd\u7528 C \u8bed\u8a00\u903b\u8f91\u4e60\u60ef\u6765\u5206\u6790\u8003\u8651\uff0c\u5207\u8bb0\u5207\u8bb0\uff09\u3002\u5f53\u4e0a\u5347\u6cbf\u89e6\u53d1\u7684\u65f6\u5019\u6267\u884c if \u8bed\u53e5\uff0c\u8be5\u8bed\u53e5\u8c03\u7528 fsm_judge \u51fd\u6570\u8fdb\u884c\u7ed3\u679c\u7684\u5224\u65ad\uff0c\u7136\u540e\u5c06\u6a21\u62df\u5f97\u5230\u7684 state \u503c\u548c\u8f93\u5165\u7684 state \u503c\u8fdb\u884c\u6bd4\u8f83\uff0c\u5982\u679c\u76f8\u7b49 error \u8f93\u51fa 0\uff0c\u53cd\u4e4b\u8f93\u51fa 1\uff0c\u5e76\u62a5\u9519\u7ed3\u675f\u8fdb\u7a0b\u3002</p> <p>always \u5757\u5185\u90e8\u65e0\u8bba\u6709\u591a\u5c11\u51fd\u6570\u8c03\u7528\u3001\u65e0\u8bba\u51fd\u6570\u8c03\u7528\u591a\u4e48\u590d\u6742\uff0c\u90fd\u53ef\u4ee5\u5728\u4e00\u4e2a\u5468\u671f\u5185\u90e8\u8ba1\u7b97\u5b8c\u6bd5\uff0c\u56e0\u4e3a\u4eff\u771f\u53ea\u9700\u8981\u8003\u8651\u903b\u8f91\u6b63\u786e\u6027\uff0c\u800c\u65e0\u9700\u8003\u8651\u7535\u6c14\u7279\u6027\u3002\u4f46\u662f\u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u5185\u90e8\u7684\u903b\u8f91\u8fc7\u4e8e\u590d\u6742\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5f97\u5230\u7684\u7535\u8def\u6781\u5176\u590d\u6742\uff0c\u65f6\u5ef6\u5f88\u5927\uff0c\u65e0\u6cd5\u5728\u4e00\u4e2a\u5468\u671f\u5185\u8ba1\u7b97\u5b8c\u6210\uff0c\u9020\u6210\u65f6\u5e8f\u9519\u8bef\u3002</p> <pre><code>module Judge(\n    input a,\n    input b,\n    input rstn,\n    input clk,\n    input [1:0] state,\n    output reg error\n);\n\n    wire [31:0] param_a = {31'b0, a};\n    wire [31:0] param_b = {31'b0, b};\n    wire [31:0] param_rstn = {31'b0, rstn};\n    wire [31:0] param_state = {30'b0, state};\n\n    always@(posedge clk)begin\n        if(fsm_judge(param_a,param_b,param_rstn) == param_state)\n            error &lt;= 1'b0;\n        else \n            error &lt;= 1'b1;\n    end\n\nendmodule //Judge\n</code></pre> <p>\u4f7f\u7528 DPI-C \u53ef\u4ee5\u7528\u4e00\u4e9b C \u51fd\u6570\u3001C \u5e93\u6765\u8fdb\u884c\u5bf9\u62cd\u6a21\u62df\uff0c\u5229\u7528\u5f88\u591a\u73b0\u6210\u7684\u529f\u80fd\u5e93\u53ef\u4ee5\u5927\u5927\u51cf\u8f7b\u6211\u4eec\u6784\u9020\u5bf9\u62cd\u5668\u7684\u5de5\u4f5c\u91cf\u3002\u4f46\u662f DPI-C \u51fd\u6570\u53ea\u80fd\u7528\u4e8e\u4eff\u771f\uff0c\u4e14\u4e0d\u88ab vivado \u76f4\u63a5\u652f\u6301\uff0c\u6240\u4ee5\u8bf7\u4e0d\u8981\u5728 vivado \u4eff\u771f\u548c\u7efc\u5408\u4e2d\u4f7f\u7528\uff08\u4f60\u6307\u671b\u4e00\u4e2a C \u51fd\u6570\u88ab\u7efc\u5408\u4e3a\u7535\u8def\u5417\uff09\u3002</p>"},{"location":"lab3-1/#_11","title":"\u7efc\u5408\u4e0b\u677f","text":"<p>\u8fd0\u884c<code>make bitstream</code>\u751f\u6210\u6bd4\u7279\u6d41\uff0c\u7136\u540e\u4e0b\u677f\u9a8c\u8bc1\u3002</p>"},{"location":"lab3-1/#_12","title":"\u9876\u5c42\u7535\u8def","text":"<p>top \u7535\u8def\u7684\u6a21\u5757\u5982\u4e0b\u3002</p> <p>\u6309\u94ae 0 \u548c\u6309\u94ae 1 \u5f97\u8f93\u5165\u5206\u522b\u7ecf\u8fc7\u53bb\u6296\u6a21\u5757\u548c\u4e0a\u5347\u6cbf\u91c7\u6837\u6a21\u5757\u4f5c\u4e3a FSM \u6a21\u5757\u7684 a \u548c b \u8f93\u5165\u3002\u6309\u4e00\u4e0b\u6309\u94ae 0 \u76f8\u5f53\u4e8e\u8f93\u5165\u4e00\u4e2a\u5b57\u7b26 a\uff0c\u6309\u4e00\u4e0b\u6309\u94ae 1 \u76f8\u5f53\u4e8e\u8f93\u5165\u4e00\u4e2a\u5b57\u7b26 b\u3002</p> <p>FSM \u6a21\u5757\u7b49\u5f85 a\u3001b \u5f15\u811a\u7684\u5b57\u7b26 a\u3001b \u5f97\u8f93\u5165\uff0c\u7136\u540e\u6839\u636e\u4f9d\u6b21\u8f93\u5165\u7684\u5b57\u7b26\u5e8f\u5217\u4fee\u6539\u72b6\u6001\u673a\u7684\u72b6\u6001\uff0c\u8fdb\u800c\u5224\u65ad\u8fd9\u4e2a\u5b57\u7b26\u5e8f\u5217\u662f\u5426\u6ee1\u8db3\u8981\u6c42\u3002FSM \u5185\u90e8\u7684 state \u9001\u5165 SegDriver \u6a21\u5757\u8f93\u51fa\u5728 LED \u706f\u4e0a\u3002</p> <p></p>"},{"location":"lab3-1/#30","title":"\u5b9e\u9a8c\u62a5\u544a 30%","text":"<ol> <li>\u8bf7\u5728\u5b9e\u9a8c\u62a5\u544a\u4e2d\u8be6\u7ec6\u63cf\u8ff0\u6bcf\u4e00\u6b65\u7684\u8fc7\u7a0b\u5e76\u914d\u6709\u9002\u5f53\u7684\u622a\u56fe\u548c\u89e3\u91ca\uff0c\u5bf9\u4e8e\u4eff\u771f\u8bbe\u8ba1\u548c\u4e0a\u677f\u9a8c\u8bc1\u7684\u7ed3\u679c\u4e5f\u5e94\u5f53\u6709\u9002\u5f53\u7684\u89e3\u91ca\u548c\u7167\u7247 Total: 15%</li> </ol> <p>\u7ec6\u5206\uff1a</p> <ul> <li>\u4f7f\u7528 enum \u8bed\u6cd5 FSM \u8bbe\u8ba1 5%</li> <li>\u7efc\u5408\u5b9e\u73b0\u6709\u9650\u72b6\u6001\u673a 10%</li> </ul> <ol> <li> <p>\u601d\u8003\u6bd4\u8f83<code>enum + case</code>\u7684\u7f16\u7a0b\u8303\u5f0f\u548c\u6570\u7ec4\u67e5\u8868\u7684\u7f16\u7a0b\u8303\u5f0f\u4e4b\u95f4\u7684\u4f18\u52a3 5%</p> </li> <li> <p>\u7ed8\u5236\u4e00\u4e2a\u6709\u9650\u72b6\u6001\u673a\u7684\u72b6\u6001\u56fe\u548c\u72b6\u6001\u8f6c\u79fb\u8868\uff0c\u5982\u679c\u8f93\u5165\u7684 01 \u5b57\u7b26\u4e32\u4e2d 1 \u7684\u4e2a\u6570\u5927\u4e8e 3 \u4e2a\uff0c\u5219 FSM \u8f93\u51fa 1 \u8868\u793a\u63a5\u53d7\uff0c\u53cd\u4e4b\u8f93\u51fa 0 \u8868\u793a\u62d2\u7edd\u300210%</p> </li> </ol> <p>\u7b26\u53f7\u8868\u793a: \u8f93\u5165\u4fe1\u53f7 X\uff0c\u8f93\u51fa\u4fe1\u53f7 Y\uff0c\u5185\u90e8\u72b6\u6001\u4e3a S0\u3001S1...</p> <ol> <li>\u89c2\u5bdf\u4ee5\u4e0b\u6709\u9650\u72b6\u6001\u673a\u7535\u8def\u5b9e\u73b0\u5b58\u5728\u7684\u4e0d\u8db3\u548c\u4e0d\u8db3\u7684\u539f\u56e0\uff0c\u5982\u679c\u7535\u8def\u4e0d\u7a33\u5b9a\u53ef\u80fd\u4f1a\u53d1\u751f\u4ec0\u4e48\u95ee\u9898\uff08bonus\uff0c\u5206\u6570\u4e0d\u6ea2\u51fa report\uff09\uff1a+10%</li> </ol> <pre><code>    always@(posedge clk)begin\n        if(~rstn) state &lt;= 2'b01;\n        else state[1:0] &lt;= state[0:1];\n    end\n</code></pre>"},{"location":"lab3-1/#_13","title":"\u4ee3\u7801\u63d0\u4ea4","text":""},{"location":"lab3-1/#20","title":"\u9a8c\u6536\u68c0\u67e5\u70b9 20%","text":"<ul> <li>\u4eff\u771f\u6ce2\u5f62\u5c55\u793a 6%</li> <li>\u4ee3\u7801\u89e3\u91ca\u6216\u8bbe\u8ba1\u601d\u8def 6%</li> <li>\u4e0b\u677f\u9a8c\u8bc1 8%</li> </ul>"},{"location":"lab3-1/#_14","title":"\u63d0\u4ea4\u6587\u4ef6","text":"<p><code>src/lab3-1/</code> \u4e2d\u7f16\u5199\u7684 submit \u548c include \u7684\u4ee3\u7801\uff08include \u6309\u9700\u586b\u5199\uff09</p>"},{"location":"lab3-2/","title":"\u5b9e\u9a8c3-2: \u8ba1\u6570\u5668/\u5b9a\u65f6\u5668\u8bbe\u8ba1\u4e0e\u5e94\u7528","text":"<p>\u672c\u5b9e\u9a8c\u4e3b\u4f53\u5185\u5bb9\u53c2\u8003\u65bd\u9752\u677e\u3001\u8463\u4e9a\u6ce2\u7b49\u8001\u5e08\u7f16\u8457\u7684\u300a\u6570\u5b57\u903b\u8f91\u7535\u8def\u8bbe\u8ba1\u4e0e\u5b9e\u8df5\u300b\u4e00\u4e66\u8fdb\u884c\u8bbe\u8ba1</p>"},{"location":"lab3-2/#_1","title":"\u5b9e\u9a8c\u76ee\u7684","text":"<ul> <li>\u5b66\u4e60\u4f7f\u7528Verilog\u8bed\u8a00\u8fdb\u884c\u590d\u6742\u7535\u8def\u8bbe\u8ba1\u7684\u65b9\u6cd5</li> <li>\u8fdb\u4e00\u6b65\u638c\u63e1\u7ec4\u5408\u7535\u8def\u3001\u65f6\u5e8f\u7535\u8def\u8bbe\u8ba1</li> </ul>"},{"location":"lab3-2/#_2","title":"\u5b9e\u9a8c\u73af\u5883","text":"<ul> <li>\u64cd\u4f5c\u7cfb\u7edf\uff1aWindows 10+ 22H2\uff0cUbuntu 22.04+</li> <li>VHDL\uff1aVerilog\uff0cSystemVerilog</li> </ul>"},{"location":"lab3-2/#_3","title":"\u80cc\u666f\u77e5\u8bc6","text":""},{"location":"lab3-2/#_4","title":"\u8ba1\u6570\u5668","text":"<p>\u8ba1\u6570\u5668\u662f\u4e00\u79cd\u57fa\u672c\u7684\u6570\u5b57\u7535\u8def\u7ec4\u4ef6\uff0c\u5b83\u53ef\u4ee5\u5bf9\u4e00\u4e2a\u4fe1\u53f7\u8fdb\u884c\u8ba1\u6570\u548c\u7d2f\u52a0\uff0c\u8f93\u51fa\u4e00\u4e2a\u6570\u5b57\u8868\u793a\u8ba1\u6570\u5668\u8ba1\u6570\u7684\u6b21\u6570\u3002 \u8ba1\u6570\u5668\u5e7f\u6cdb\u5e94\u7528\u4e8e\u5404\u79cd\u6570\u5b57\u7cfb\u7edf\u4e2d\uff0c\u5982\u65f6\u949f\u53d1\u751f\u5668\u3001\u5206\u9891\u5668\u3001\u9891\u7387\u8ba1\u3001\u8ba1\u65f6\u5668\u7b49\u3002</p> <p>\u8ba1\u6570\u5668\u53ef\u4ee5\u6309\u7167\u4e0d\u540c\u7684\u5de5\u4f5c\u6a21\u5f0f\u8fdb\u884c\u5206\u7c7b\uff0c\u6700\u5e38\u89c1\u7684\u662f\u4e8c\u8fdb\u5236\u8ba1\u6570\u5668\u548cBCD\u8ba1\u6570\u5668\u3002 \u4e8c\u8fdb\u5236\u8ba1\u6570\u5668\u662f\u5c06\u8ba1\u6570\u5668\u7684\u8f93\u51fa\u8868\u793a\u4e3a\u4e8c\u8fdb\u5236\u6570\u7684\u5f62\u5f0f\uff0c\u800cBCD\u8ba1\u6570\u5668\u662f\u5c06\u8ba1\u6570\u5668\u7684\u8f93\u51fa\u8868\u793a\u4e3aBCD\u7801\u7684\u5f62\u5f0f\u3002</p> <p>\u8ba1\u6570\u5668\u7684\u5de5\u4f5c\u539f\u7406\u662f\u57fa\u4e8e\u65f6\u949f\u4fe1\u53f7\u7684\u4e0a\u5347\u6cbf\u6216\u4e0b\u964d\u6cbf\u89e6\u53d1\u8ba1\u6570\u5668\u8ba1\u6570\u7684\u529f\u80fd\u3002 \u4f8b\u5982\uff0c\u5f53\u4e00\u4e2a\u4e0a\u5347\u6cbf\u89e6\u53d1\u5668\u88ab\u8fde\u63a5\u5230\u8ba1\u6570\u5668\u7684\u65f6\u949f\u8f93\u5165\u7aef\u65f6\uff0c\u6bcf\u5f53\u65f6\u949f\u4fe1\u53f7\u4e0a\u5347\u6cbf\u5230\u6765\u65f6\uff0c\u8ba1\u6570\u5668\u5c31\u4f1a\u589e\u52a01\u3002 \u5f53\u8ba1\u6570\u5668\u7684\u8ba1\u6570\u8fbe\u5230\u6700\u5927\u503c\u65f6\uff0c\u5b83\u4f1a\u81ea\u52a8\u590d\u4f4d\u4e3a0\uff0c\u91cd\u65b0\u5f00\u59cb\u8ba1\u6570\u3002 \u56e0\u6b64\uff0c\u8ba1\u6570\u5668\u53ef\u4ee5\u7528\u4e8e\u4ea7\u751f\u5468\u671f\u6027\u7684\u8109\u51b2\u4fe1\u53f7\uff0c\u4ee5\u53ca\u7528\u4e8e\u5b9e\u73b0\u5206\u9891\u5668\u548c\u5176\u4ed6\u6570\u5b57\u7535\u8def\u3002</p> <p>\u5e7f\u4e49\u7684\u8ba1\u6570\u5668\u5e76\u975e\u65e5\u5e38\u751f\u6d3b\u4e2d\u7684\u52a0\u51cf\u8ba1\u6570\uff0c\u800c\u662f\u5bf9\u72b6\u6001\u8fdb\u884c\u6709\u5e8f\u904d\u5386\u7684\u65f6\u5e8f\u7535\u8def\u3002 \u8fd9\u79cd\u8ba1\u6570\u5668\u4e5f\u88ab\u79f0\u4e3a\u6a21N\u8ba1\u6570\u5668\uff0c\u5176\u529f\u80fd\u662f\u53cd\u590d\u904d\u5386N\u4e2a\u56fa\u5b9a\u72b6\u6001\u7684\u8ba1\u6570\u5668\uff0c\u76f8\u5f53\u4e8e\u5728M\u4e2a\u72b6\u6001\u4e2d\u9009\u62e9N\u4e2a\u6765\u904d\u5386\uff0c\u6545\u79f0\u4e3a\u6a21N\u8ba1\u6570\u5668\u3002</p> <p>\u4e0b\u56fe\u662f\u4e00\u4e2a\u6a21 6 \u8ba1\u6570\u5668\u7684\u72b6\u6001\u56fe\u548cVerilog\u5b9e\u73b0\uff1a</p> <p></p> <pre><code>module counter_mod6(clk, reset, out);\n    input wire clk;\n    input wire reset;\n    output wire [2:0] out;\n\n    reg [2:0] cnt;\n\n    always @(posedge clk) begin\n        if (reset) begin\n            cnt &lt;= 0;\n        end\n        else case(out)\n            3'b000: cnt &lt;= 3'b001;\n            3'b001: cnt &lt;= 3'b010;\n            3'b010: cnt &lt;= 3'b011;\n            3'b011: cnt &lt;= 3'b100;\n            3'b100: cnt &lt;= 3'b101;\n            3'b101: cnt &lt;= 3'b000;\n            default: cnt &lt;= cnt + 1;\n        endcase\n    end\n\n    assign out = cnt;\nendmodule\n</code></pre> <p>\u8fd9\u91cc\u4f7f\u7528\u72b6\u6001\u673a\u7684\u65b9\u5f0f\u8fdb\u884c\u7684\u7535\u8def\u63cf\u8ff0\uff0c\u4f46\u662f\u72b6\u6001\u673a\u7684\u672c\u8d28\u5176\u5b9e\u4e5f\u662f\u51fd\u6570\u6620\u5c04\u5173\u7cfb\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u8fd9\u4e2a\u51fd\u6570\u6620\u5c04\u5173\u7cfb\uff0c\u5176\u5b9e\u53ef\u4ee5\u7528\u4e00\u4e2a\u7b80\u5355\u7684\u52a0\u6cd5\u51fd\u6570\u6765\u5b9e\u73b0\uff0c\u5373\uff1a</p> <pre><code>    always @(posedge clk) begin\n        if (reset) begin\n            cnt &lt;= 0;\n        end else if(cnt == 3'd5)begin\n            cnt &lt;= 0;\n        end else begin\n            cnt &lt;= cnt + 3'd1;\n        end\n    end\n</code></pre> <p>\u8fd9\u91cc\u7684<code>cnt == 3'd5</code>\u4e5f\u53ef\u4ee5\u5199\u4f5c<code>cnt &gt;= 3'd5</code>\uff0c\u5728\u903b\u8f91\u4e0a\u662f\u6ca1\u6709\u95ee\u9898\u7684\uff0c\u4f46\u662f<code>==</code>\u4f1a\u88ab\u7efc\u5408\u4e3a\u7b80\u5355\u7684\u540c\u6216\u7535\u8def\uff0c\u800c<code>&gt;=</code>\u5219\u4f1a\u88ab\u7efc\u5408\u4e3a\u590d\u6742\u7684\u5927\u4e8e\u7b49\u4e8e\u6bd4\u8f83\u5668\u7535\u8def\uff0c\u4f1a\u5bfc\u81f4\u7535\u8def\u5f00\u9500\u53d8\u5f97\u6bd4\u8f83\u5927\uff08\u5f53\u6211\u4eec\u60f3\u4f7f\u7528\u4e00\u4e2a\u7b97\u5b50\u6765\u63d0\u9ad8\u7f16\u7a0b\u6548\u7387\uff0c\u8bf7\u65f6\u523b\u6ce8\u610f\u5b83\u5bf9\u5e94\u7684\u7535\u8def\u5f00\u9500\uff09\u3002</p>"},{"location":"lab3-2/#bcd","title":"BCD \u7801\u8ba1\u6570\u5668","text":"<p>\u5982\u679c\u6211\u4eec\u8981\u5b9e\u73b0\u4e00\u4e2a 60 \u4f4d\u7684\u79d2\u949f\u8ba1\u6570\u5668\uff0c\u6211\u4eec\u53ef\u4ee5\u6309\u7167\u201c\u8ba1\u6570\u5668\u201d\u4e00\u8282\u7684\u4ee3\u7801\u52a0\u4ee5\u5b9e\u73b0\u3002\u4f46\u662f\u56e0\u4e3a\u8ba1\u6570\u5668\u7684\u503c\u662f\u6309\u7167\u4e8c\u8fdb\u5236\u5b58\u50a8\u7684\uff0c\u6240\u4ee5\u5982\u679c\u6211\u4eec\u5e0c\u671b\u5c06\u4e03\u6bb5\u6570\u7801\u7ba1\u7b49\u663e\u793a\u8bbe\u5907\u6309\u7167\u5341\u8fdb\u5236\u663e\u793a\u8ba1\u6570\u5668\u7684\u503c\uff0c\u5219\u9700\u8981\u4e00\u5957\u590d\u6742\u7684\u4e58\u9664\u6cd5\u7535\u8def\u6765\u8fdb\u884c\u4e8c\u8fdb\u5236\u7f16\u7801\u548c\u5341\u8fdb\u5236\u7f16\u7801\u7684\u8f6c\u6362\u3002\u4f46\u5982\u679c\u8ba1\u6570\u5668\u5185\u90e8\u662f\u6309\u7167 BCD \u7801\u8fdb\u884c\u6570\u636e\u5b58\u50a8\u5c31\u53ef\u4ee5\u907f\u514d\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p>BCD \u7801\u4f7f\u7528 4 \u4f4d\u4e8c\u8fdb\u5236\u8868\u793a\u5341\u8fdb\u5236\u7684 0-9\uff0c\u4e0b\u8868\u4e3a\u5176\u4e2d\u4e00\u79cd BCD \u7801\u683c\u5f0f\u3002\u5bf9\u4e8e\u6570\u5b57 34\uff0c\u5728\u4e8c\u8fdb\u5236\u539f\u7801\u7f16\u7801\u4e0b\u4e8c\u8fdb\u5236\u503c\u4e3a 00100010\uff0c\u800c\u5728 BCD \u7801\u7f16\u7801\u4e0b\u4e3a 00110100\uff083\uff1a0011\uff0c4\uff1a0100\uff09\u3002\u53ef\u4ee5\u770b\u5230\u540e\u8005\u53ef\u4ee5\u76f4\u63a5\u53d1\u9001\u7ed9\u4e03\u6bb5\u6570\u7801\u7ba1\u8fdb\u884c\u8f93\u51fa\u3002</p> <p> \u5341\u8fdb\u5236\u6570 BCD \u7801 \u5341\u8fdb\u5236\u6570 BCD \u7801 0 0000 1 0001 2 0010 3 0011 4 0100 5 0101 6 0110 7 0111 8 1000 9 1001 <p></p> <p>\u6211\u4eec\u53ef\u4ee5\u5c06\u4e00\u4e2a mod 10 \u7684\u4e8c\u8fdb\u5236\u8ba1\u6570\u5668\u548c\u4e00\u4e2a mod 6 \u7684\u4e8c\u8fdb\u5236\u8ba1\u6570\u5668\u7ec4\u5408\u5f97\u5230 60 BCD \u7801\u8ba1\u6570\u5668\u3002</p> <p></p> <ul> <li>co\uff1aco=1 \u8868\u793a\u8ba1\u6570\u5668\u8fdb\u4f4d\uff0c\u7528\u4e8e\u901a\u77e5\u5916\u90e8\u8bbe\u5907\u8fdb\u4f4d\u4e8b\u4ef6\u7684\u53d1\u751f</li> <li>low_co\uff1a\u9ad8\u4f4d\u8ba1\u6570\u5668\u7528\u4e8e\u63a5\u6536\u4f4e\u4f4d\u8ba1\u6570\u5668\u7684\u8fdb\u4f4d\u4fe1\u606f\uff0c\u5982\u679c low_co = 1\uff0c\u9ad8\u4f4d\u8ba1\u6570\u5668\u5e94\u8be5\u9012\u589e\uff08\u4e0a\u56fe\u6700\u4f4e\u4f4d\u8ba1\u6570\u5668\u7684 co \u8f93\u5165\u4e3a 60 BCD \u8ba1\u6570\u5668\u7684 low_co \u8f93\u5165\uff0c\u56e0\u4e3a 60 BCD \u8ba1\u6570\u5668\u5df2\u662f\u6700\u9876\u5c42\uff0c\u8fd9\u91cc\u8ba9\u5176\u6052\u7b49\u4e8e 1\uff09</li> <li>en: \u8868\u793a\u8ba1\u6570\u5668\u4f7f\u80fd\uff0cen=1\u65f6\uff0c\u8ba1\u6570\u5668\u8fdb\u884c\u5de5\u4f5c</li> </ul>"},{"location":"lab3-2/#_5","title":"\u5b9e\u9a8c\u6b65\u9aa4","text":""},{"location":"lab3-2/#_6","title":"\u5b9e\u73b0\u8ba1\u6570\u5668\u6a21\u5757","text":"<p>\u8865\u5168<code>src/lab3-2/submit/Cnt.sv</code>\u7684\u4ee3\u7801\uff0c\u5b9e\u73b0\u6a21\u6570\u8ba1\u6570\u5668\u3002</p> <pre><code>module Cnt #(\n    parameter BASE = 10,    \n    // \u6a21\u6570\u503c\uff0c\u5f53 cnt == BASE-1 \u7684\u65f6\u95f4\u53d1\u751f\u8fdb\u4f4d\uff0ccnt \u5f52\u96f6\n    parameter INITIAL = 0\n    // \u521d\u59cb\u5316\u503c\uff0c\u4f5c\u4e3a cnt \u521d\u59cb\u5316\u65f6\u7684\u503c\n) (\n    input en,\n    // \u8ba1\u6570\u5668\u4f7f\u80fd\u4fe1\u53f7\n    input clk,\n    input rstn,\n    input low_co,\n    // \u8868\u793a\u4f4e\u4f4d\u8ba1\u6570\u5668\u8fdb\u4f4d\uff0ccnt \u9012\u589e\n    input high_rst,\n    // \u4e0a\u5c42\u6a21\u5757\u7684\u4e0d\u540c\u590d\u4f4d\u4fe1\u53f7\uff0ccnt \u5f52\u96f6\n    output co,\n    // \u8868\u793a\u8be5\u8ba1\u6570\u5668\u8981\u53d1\u751f\u8fdb\u4f4d\n    output reg [3:0] cnt\n    // \u8ba1\u6570\u5668\u7684\u503c\n);\n\n    // fill the code\n\nendmodule\n</code></pre>"},{"location":"lab3-2/#24-bcd","title":"\u5b9e\u73b0 24 BCD \u7801\u8ba1\u6570\u5668","text":"<p>\u8865\u5168<code>src/lab3-2/submit/Cnt2num.sv</code>\u7684\u4ee3\u7801\uff0c\u5b9e\u73b0 24 BCD \u7801\u8ba1\u6570\u5668\u3002\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u7528\u4e00\u4e2a mod2 \u7684\u8ba1\u6570\u5668\u548c\u4e00\u4e2a mod10 \u7684\u8ba1\u6570\u5668\u7ec4\u5efa Cnt2num\uff0c\u4f46\u662f\u5f53\u5b83\u4eec\u7684\u7ed3\u679c\u662f 23 \u7684\u65f6\u5019\uff0c\u4e0b\u4e00\u6b21\u9012\u589e\u4e0d\u4f1a\u53d1\u751f\u5f52\u96f6\u3002\u56e0\u6b64\u6211\u4eec\u63d0\u524d\u4e3a Cnt \u6a21\u5757\u63d0\u4f9b\u4e86 high_rst \u5f15\u811a\uff0c\u5f53 Cnt2num \u6a21\u5757\u8ba1\u6570\u4e3a 23 \u7684\u65f6\u5019\u5c31\u53ef\u4ee5\u5229\u7528 high_rst \u5f15\u811a\u5c06\u4e24\u4e2a Cnt \u5185\u90e8\u7684\u8ba1\u6570\u5f52\u96f6\u3002</p> <pre><code>module Cnt2num #(\n    // \u7528\u4e24\u4e2a Cnt \u914d\u5408\u5b9e\u73b0 Cnt2num\n    parameter BASE = 24,\n    // \u6a21\u6570\u503c\uff0c\u5f53 cnt == BASE-1 \u7684\u65f6\u95f4\u53d1\u751f\u8fdb\u4f4d\uff0ccnt \u5f52\u96f6\n    parameter INITIAL = 16\n    // \u521d\u59cb\u5316\u503c\uff0c\u4f5c\u4e3a cnt \u521d\u59cb\u5316\u65f6\u7684\u503c\n)(\n    input en,\n    // \u8ba1\u6570\u5668\u4f7f\u80fd\u4fe1\u53f7\n    input clk,\n    input rstn,\n    input low_co,\n    // \u8868\u793a\u4f4e\u4f4d\u8ba1\u6570\u5668\u8fdb\u4f4d\uff0ccnt \u9012\u589e\n    input high_rst,\n    // \u4e0a\u5c42\u6a21\u5757\u7684\u4e0d\u540c\u590d\u4f4d\u4fe1\u53f7\uff0ccnt \u5f52\u96f6\n    output co,\n    // \u8868\u793a\u8be5\u8ba1\u6570\u5668\u8981\u53d1\u751f\u8fdb\u4f4d\n    output [7:0] cnt\n    // \u8ba1\u6570\u5668\u7684\u503c\n);\n\n    localparam HIGH_BASE = 10;\n    localparam LOW_BASE  = 10;\n    // \u9ad8\u4f4d Cnt \u548c\u4f4e\u4f4d Cnt \u90fd\u53ef\u4ee5\u662f\u6a21 10 \u7684\u8ba1\u6570\u5668\n    localparam HIGH_INIT = INITIAL/10;\n    localparam LOW_INIT  = INITIAL%10;\n    // \u9ad8\u4f4d Cnt \u548c\u4f4e\u4f4d Cnt \u5404\u81ea\u7684\u521d\u59cb\u503c\n    localparam HIGH_CO   = (BASE-1)/10;\n    localparam LOW_CO    = (BASE-1)%10;\n    // \u9ad8\u4f4d\u5bc4\u5b58\u5668\u548c\u4f4e\u4f4d\u5bc4\u5b58\u5668\u68c0\u67e5\u662f\u5426\u53d1\u751f\u8fdb\u4f4d\u65f6\u5019\u7528\u7684\u53c2\u8003\u503c\n\n    // fill the code\nendmodule\n</code></pre> <p>Hint\uff1a<code>en</code> \u4e0e <code>low_co</code></p> <ul> <li><code>en=1</code> \u4e0e <code>low_co=1</code> \u8868\u9762\u4e0a\u770b\u90fd\u8868\u793a\u8ba1\u6570\u5668\u5de5\u4f5c\u3002\u5b9e\u9645\u4e0a\uff0c\u76f8\u6bd4 <code>low_co</code>, <code>en</code> \u8d77\u5230\u4e86\u5168\u5c40\u4f5c\u7528\u3002</li> <li>\u5173\u4e8e 24cnt \u7684\u8bbe\u8ba1\u903b\u8f91\u53ef\u4ee5\u53c2\u8003 60 BCD \u7684\u8bbe\u8ba1\u56fe\uff1a<ul> <li><code>en</code> \u7528\u4e8e\u63a7\u5236\u6240\u6709\u8ba1\u6570\u5668\u662f\u5426\u5de5\u4f5c\uff08\u5305\u62ec\u8ba1\u6570\u4ee5\u53ca\u4e0a\u5c42\u8ba1\u6570\u5668\u5bf9\u4e0b\u5c42\u8ba1\u6570\u5668\u7684\u5f3a\u5236\u590d\u4f4d\uff09</li> <li><code>low_co</code> \u7aef\u53e3\u5219\u76f8\u5f53\u4e8e\u4e0a\u5c42\u5bf9\u4e0b\u5c42\u7684\u6700\u4f4e\u4f4d\u8ba1\u6570\u5668\uff0c\u4ee5\u53ca\u4f4e\u4f4d\u5bf9\u76f8\u90bb\u9ad8\u4f4d\u8ba1\u6570\u5668\u7684\u4f7f\u80fd\u4fe1\u53f7</li> </ul> </li> </ul>"},{"location":"lab3-2/#_7","title":"\u4eff\u771f","text":"<p>\u6267\u884c<code>make verilate</code>\u8fdb\u884c\u4eff\u771f\uff0c\u5177\u4f53\u4ee3\u7801\u53c2\u8003<code>repo/sys-project/lab3-2/sim</code>\u3002</p> <p>\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528 cnt_init \u548c cnt_judge \u4e24\u4e2a DPI-C \u51fd\u6570\u8fdb\u884c\u5dee\u5206\u6d4b\u8bd5\u3002cnt_init \u7684\u903b\u8f91\u5bf9\u5e94\u4e8e Cnt2num \u7684\u521d\u59cb\u5316\u64cd\u4f5c\uff0ccnt_judge \u7684\u903b\u8f91\u5bf9\u5e94\u4e8e Cnt2num \u9012\u589e\u7684\u64cd\u4f5c\u3002\u5982\u679c\u6267\u884c\u6b63\u786e\u6700\u540e\u4f1a\u8f93\u51fa<code>success!!!</code>\uff0c\u53cd\u4e4b\u4f1a\u8f93\u51fa<code>fail!!!</code>\u3002</p>"},{"location":"lab3-2/#_8","title":"\u4e0b\u677f\u9a8c\u8bc1","text":"<p>\u6267\u884c<code>make bitstream</code>\u8fdb\u884c\u4eff\u771f\uff0c\u5177\u4f53\u4ee3\u7801\u53c2\u8003<code>repo/sys-project/lab3-2/syn</code>\u3002</p> <p>\u9876\u5c42\u6a21\u5757\u7535\u8def\u5982\u4e0b\uff1a </p> <p>\u6267\u884c\u6b63\u786e\u6548\u679c\uff1a\u7b2c\u4e00\u4e2a\u5f00\u5173\u5f00\u542f\u5f00\u59cb\u8ba1\u6570\u4e14\u53ef\u4ee5\u770b\u5230\u4e03\u6bb5\u6570\u7801\u7ba1\u663e\u793a\u7684\u6570\u636e\u5728 0-23 \u4e4b\u95f4\u5faa\u73af\u9012\u589e\uff1b\u5f53\u62e8\u4e0b\u65f6\u8ba1\u6570\u6682\u505c\u3002</p>"},{"location":"lab3-2/#30","title":"\u5b9e\u9a8c\u62a5\u544a 30%","text":"<ol> <li>\u8bf7\u5728\u5b9e\u9a8c\u62a5\u544a\u4e2d\u8be6\u7ec6\u63cf\u8ff0\u6bcf\u4e00\u6b65\u7684\u8fc7\u7a0b\u5e76\u914d\u6709\u9002\u5f53\u7684\u622a\u56fe\u548c\u89e3\u91ca\uff0c\u5bf9\u4e8e\u4eff\u771f\u8bbe\u8ba1\u548c\u4e0a\u677f\u9a8c\u8bc1\u7684\u7ed3\u679c\u4e5f\u5e94\u5f53\u6709\u9002\u5f53\u7684\u89e3\u91ca\u548c\u7167\u7247 Total: 20%</li> </ol> <p>\u7ec6\u5206\uff1a</p> <ul> <li>\u4eff\u771f\u901a\u8fc7\uff0c\u8f93\u51fa<code>success!!!</code> 10%</li> <li>\u7efc\u5408\u5b9e\u73b0\u8ba1\u6570\u5668 10%</li> </ul> <ol> <li>\u7b80\u8ff0\u5982\u4f55\u4f7f\u7528 Cnt2num \u5b9e\u73b0 1234 \u7684 BCD \u7801\u8ba1\u6570\u5668\uff0c\u5e76\u601d\u8003 Cnt2num \u9884\u7559 co\u3001low_co\u3001high_rst \u5f15\u811a\u7684\u610f\u4e49 10%</li> </ol>"},{"location":"lab3-2/#_9","title":"\u4ee3\u7801\u63d0\u4ea4","text":""},{"location":"lab3-2/#40","title":"\u9a8c\u6536\u68c0\u67e5\u70b9 40%","text":"<ul> <li>\u4eff\u771f\u6ce2\u5f62\u5c55\u793a 10%</li> <li>\u4ee3\u7801\u89e3\u91ca\u6216\u8bbe\u8ba1\u601d\u8def 15%</li> <li>\u4e0b\u677f\u9a8c\u8bc1 15%</li> </ul>"},{"location":"lab3-2/#_10","title":"\u63d0\u4ea4\u6587\u4ef6","text":"<p><code>src/lab3-2/</code> \u4e2d\u7f16\u5199\u7684 submit \u548c include \u7684\u4ee3\u7801\uff08include \u6309\u9700\u586b\u5199\uff09</p>"},{"location":"lab3-3-appendix/","title":"\u963b\u585e\u8d4b\u503c\u548c\u975e\u963b\u585e\u8d4b\u503c","text":"<p>\u4e0d\u540c\u4e8e wire \u53d8\u91cf\u53ea\u80fd\u88ab = \u8d4b\u503c\uff0creg \u53d8\u91cf\u5728 always \u5757\u4e2d\u5176\u5b9e\u53ef\u4ee5\u88ab = \u548c &lt;= \u4e24\u4e2a\u8fd0\u7b97\u7b26\u8d4b\u503c\uff0c\u4f7f\u7528 = \u8d4b\u503c\u7684\u65b9\u5f0f\u88ab\u79f0\u4e3a\u963b\u585e\u8d4b\u503c\uff0c\u4f7f\u7528 &lt;= \u7684\u8d4b\u503c\u65b9\u5f0f\u88ab\u79f0\u4e4b\u4e3a\u975e\u963b\u585e\u8d4b\u503c\u3002\u6211\u4eec\u5728\u4e4b\u524d\u7684\u5b9e\u9a8c\u4e2d\u4f7f\u7528\u7684 always \u8d4b\u503c\u8bed\u53e5\u90fd\u662f\u975e\u963b\u585e\u8d4b\u503c\u8bed\u53e5\uff0c\u963b\u585e\u8d4b\u503c\u662f\u4e00\u79cd\u4f7f\u7528\u7075\u6d3b\u3001\u529f\u80fd\u5f3a\u5927\u7684\u8bed\u6cd5\uff0c\u4f46\u662f\u4e5f\u5f88\u5bb9\u6613\u51fa\u9519\uff0c\u56e0\u6b64\u6211\u4eec\u5728\u8fd9\u4e00\u8282\u8be6\u7ec6\u4ecb\u7ecd\u4e00\u4e0b\u963b\u585e\u8d4b\u503c\uff0c\u4ee5\u53ca\u4f7f\u7528\u963b\u585e\u8d4b\u503c\u9700\u8981\u6ce8\u610f\u7684\u7ec6\u8282\u3002\u4e2a\u4eba\u5efa\u8bae\uff0c\u5c3d\u91cf\u4e0d\u4f7f\u7528\u963b\u585e\u8d4b\u503c\u3002</p> <pre><code>    always@(posedge clk)begin\n        a = b; // \u963b\u585e\u8d4b\u503c \n    end\n\n    always@(posedge clk)begin\n        a &lt;= b; // \u975e\u963b\u585e\u8d4b\u503c\n    end\n</code></pre>"},{"location":"lab3-3-appendix/#_2","title":"\u4e00\u4e2a\u4f8b\u5b50","text":"<p>\u4e3a\u4e86\u7406\u89e3\u963b\u585e\u8d4b\u503c\u548c\u975e\u963b\u585e\u8d4b\u503c\u7684\u5dee\u5f02\uff0c\u6211\u4eec\u7ed9\u51fa\u5982\u4e0b\u7684\u4f8b\u5b50\uff1a <pre><code>    reg a;\n    reg b;\n    reg c;\n    always@(posedge clk)begin\n        c &lt;= b;\n        a &lt;= c;\n        b &lt;= a;\n    end\n    always@(posedge clk)begin\n        c = b;\n        a = c;\n        b = a;\n    end\n</code></pre> \u975e\u963b\u585e\u8d4b\u503c\u8bed\u53e5\u7684<code>&lt;=</code>\u5de6\u4fa7\u662f\u4f1a\u88ab\u8d4b\u503c\u7684\u5bc4\u5b58\u5668\uff0c\u53f3\u4fa7\u662f\u5404\u4e2a\u5bc4\u5b58\u5668\u548c\u7ebf\u8def\u7684\u8f93\u51fa\u6784\u9020\u7684\u7ec4\u5408\u7535\u8def\u3002\u540c\u4e00\u4e2a always \u5757\u5185\u7684\u6240\u6709\u8d4b\u503c\u8bed\u53e5\u662f\u88ab\u540c\u65f6\u6267\u884c\u7684\uff0c\u76f8\u4e92\u4e4b\u95f4\u6ca1\u6709\u4f9d\u8d56\u5173\u7cfb\uff0c\u6211\u4eec\u9488\u5bf9\u6bcf\u4e00\u4e2a\u88ab\u8d4b\u503c\u7684\u5bc4\u5b58\u5668\u5206\u522b\u5b9e\u73b0\u5bf9\u5e94\u7684\u7535\u8def\u3002\u6240\u4ee5\u4e0a\u8ff0\u4ee3\u7801\u7684\u529f\u80fd\u5c31\u662f\u5bc4\u5b58\u5668 a\u3001b\u3001c \u5728\u4e0b\u4e2a\u65f6\u949f\u5468\u671f\u5206\u522b\u8f7d\u5165\u5bc4\u5b58\u5668 c\u3001a\u3001b \u7684\u503c\u3002\u7535\u8def\u56fe\u5982\u4e0b\uff1a </p> <p>\u5982\u679c\u662f<code>=</code>\u7684\u8bed\u53e5\uff0c\u8d4b\u503c\u8bed\u53e5\u5de6\u4fa7\u7684 reg \u53d8\u91cf\u5e76\u4e0d\u4e00\u5b9a\u4f1a\u88ab\u5efa\u6a21\u4e3a\u5bc4\u5b58\u5668\uff0c\u800c\u662f\u5982\u4e0b\u56fe\u3002\u8fd9\u4e09\u53e5\u8d4b\u503c\u8bed\u53e5\u662f\u6709\u5148\u540e\u5173\u7cfb\u7684\uff0c\u9996\u5148\u53d8\u91cf c \u83b7\u5f97\u53d8\u91cf b \u7684\u503c\uff0c\u7136\u540e\u53d8\u91cf a \u83b7\u5f97\u53d8\u91cf c \u7684\u503c\u4e5f\u5c31\u662f\u539f\u6765 b \u7684\u503c\uff0c\u6700\u540e b \u540e\u7684\u53d8\u91cf a \u7684\u503c\u4e5f\u5c31\u662f\u6700\u5f00\u59cb\u53d8\u91cf b \u7684\u503c\uff0c\u5f62\u6210\u73af\u8def\u3002\u6700\u540e\u53ea\u6709\u8fd9\u4e2a\u73af\u8def\u7684\u6700\u7ec8\u7ed3\u679c b \u4f1a\u88ab\u5efa\u6a21\u4e3a\u5bc4\u5b58\u5668\uff0c\u5176\u4ed6\u7684 a\u3001c \u5219\u4f1a\u88ab\u5efa\u6a21\u4e3a wire\u3002 </p>"},{"location":"lab3-3-appendix/#_3","title":"\u963b\u585e\u8d4b\u503c\u7684\u7535\u8def","text":""},{"location":"lab3-3-appendix/#_4","title":"\u91cd\u547d\u540d","text":"<p>\u4e0d\u540c\u4e8e\u975e\u963b\u585e\u8bed\u53e5\u4e00\u4e2a\u5bc4\u5b58\u5668\u53ea\u80fd\u88ab\u8d4b\u503c\u4e00\u6b21\uff0c\u963b\u585e\u8bed\u53e5\u7684\u5bc4\u5b58\u5668\u53ef\u4ee5\u88ab\u591a\u6b21\u8d4b\u503c\u3002\u4f8b\u5982\uff1a</p> <pre><code>    reg tmp;\n    wire [1:0] data;\n    always@(posedge clk)begin\n        tmp = 1'b0;\n        tmp = tmp + data[0];\n        tmp = tmp + data[1];\n        sum = tmp;\n    end\n</code></pre> <p>\u867d\u7136\u770b\u8d77\u6765 tmp \u5bc4\u5b58\u5668\u88ab\u8d4b\u503c\u4e86\u5f88\u591a\u6b21\uff0c\u4f46\u662f\u6bcf\u4e2a\u88ab\u8d4b\u503c\u7684 tmp \u662f\u4e0d\u540c\u7684\u53d8\u91cf\uff0c\u4ed6\u4eec\u53ea\u662f\u6682\u65f6\u5171\u7528\u4e86 tmp \u8fd9\u4e2a\u540d\u5b57\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u88ab\u5148\u540e\u8d4b\u503c\u7684 tmp \u91cd\u547d\u540d\u4e3a tmp\u3001tmp0\u3001tmp1\uff0c\u5219\u53ef\u4ee5\u5f97\u5230\u5982\u4e0b\u7684 Verilog \u8bed\u53e5\u3002\u5b9e\u9645\u4e0a\u53d8\u91cf\u7684\u540d\u5b57\u4e0d\u662f\u90a3\u4e48\u91cd\u8981\uff0c\u5b83\u4ee3\u8868\u7684\u6570\u636e\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u5b83\u5c31\u662f\u4e00\u4e2a\u65b0\u7684\u6570\u636e\uff1a</p> <pre><code>    reg tmp;\n    wire [1:0] data;\n    always@(posedge clk)begin\n        tmp = 1'b0;\n        tmp0 = tmp + data[0];\n        tmp1 = tmp0 + data[1];\n        sum = tmp1;\n    end\n</code></pre> <p>\u4e8e\u662f\u5bf9\u5e94\u7684\u7535\u8def\u56fe\u5982\u4e0b\uff1a </p> <p>\u91cd\u547d\u540d\u7684\u65b9\u6cd5\u53ef\u4ee5\u5982\u4e0b\uff1a</p> <ul> <li>\u5f53\u4e00\u4e2a\u53d8\u91cf\u88ab\u8d4b\u503c\uff0c\u4e14\u5728\u4e4b\u524d\u5df2\u7ecf\u88ab\u8d4b\u503c\u8fc7\u6216\u8005\u5145\u5230\u6e90\u64cd\u4f5c\u6570\u4e4b\u540e\uff0c\u8be5\u53d8\u91cf\u5206\u914d\u4e00\u4e2a\u65b0\u7684\u540d\u5b57</li> <li>\u540e\u7eed\u4f7f\u7528\u8fd9\u4e2a\u53d8\u91cf\u505a\u6e90\u64cd\u4f5c\u6570\u7684\u65f6\u5019\uff0c\u7528\u8be5\u53d8\u91cf\u6700\u65b0\u88ab\u5206\u914d\u7684\u540d\u5b57\u505a\u6e90\u64cd\u4f5c\u6570</li> </ul>"},{"location":"lab3-3-appendix/#_5","title":"\u65e0\u73af\u56fe","text":"<p>always \u5757\u5185\u90e8\u7684\u963b\u585e\u8d4b\u503c\u5173\u7cfb\u53ef\u4ee5\u975e\u5e38\u590d\u6742\uff0c\u4f46\u65e0\u8bba\u591a\u4e48\u590d\u6742\u90fd\u662f\u53ef\u4ee5\u8868\u793a\u4e3a\u4e00\u4e2a\u6570\u636e\u6d41\u56fe\u7684\uff0c\u6570\u636e\u6d41\u56fe\u662f\u6709\u5411\u65e0\u73af\u56fe\uff0c\u90a3\u4e9b\u6700\u7ec8\u90a3\u4e9b\u51fa\u5ea6\u4e3a 0 \u7684\u8282\u70b9\u624d\u4f1a\u88ab\u6700\u7ec8\u751f\u6210\u5bc4\u5b58\u5668\uff0c\u800c\u90a3\u4e9b\u4e2d\u95f4\u8d4b\u503c\u7684\u53d8\u91cf\u503c\u4f1a\u88ab\u751f\u6210 wire\u3002\u4f8b\u5982\uff1a</p> <pre><code>    always@(posedge clk)begin\n        a = b + c;\n        d = a + c;\n        e = a + b;\n    end\n</code></pre> <p>\u5bf9\u5e94\u7684\u63a7\u5236\u6d41\u56fe\u5982\u4e0b\uff1a </p> <p>\u6240\u4ee5\u6700\u540e\u751f\u6210\u7535\u8def\u7684\u65f6\u5019\uff0ce \u548c f \u4f1a\u751f\u6210\u5bc4\u5b58\u5668\uff0c\u4f46\u662f a \u53ea\u4f1a\u5f97\u5230\u7ebf\u8def wire</p>"},{"location":"lab3-3-appendix/#reg","title":"\u4e2d\u95f4\u53d8\u91cf\u7684 reg","text":"<p>\u4e00\u4e0b\u82e5\u5e72\u79cd\u60c5\u51b5\u4e2d\u95f4\u53d8\u91cf\u4f1a\u53d8\u4e3a\u5bc4\u5b58\u5668\uff0c\u5373\u8fd9\u4e2a\u4e2d\u95f4\u53d8\u91cf\u7684\u6e90\u64cd\u4f5c\u6570\u7684\u503c\u548c\u81ea\u5df1\u6709\u5173\uff0c\u5b83\u7684\u7535\u8def\u6210\u73af\uff0c\u5982\uff1a</p> <pre><code>    wire d;\n    reg a,b,c;\n\n    assign d = a;\n\n    always@(posedge clk)begin\n        a = b + d;\n        b = a;\n        c = b;\n    end\n</code></pre> <p>\u5bf9\u5e94\u7684\u7535\u8def\u56fe\u5982\u4e0b\uff1a </p> <p>\u56e0\u4e3a\u7ebf\u8def a \u4f9d\u8d56\u4e8e\u4e2d\u95f4\u53d8\u91cf a \u7684\u503c\uff0c\u6240\u4ee5 a \u4e0d\u80fd\u88ab\u7efc\u5408\u4e3a wire \u4e0d\u7136\u4f1a\u4ea7\u751f\u73af\u8def\uff0c\u56e0\u6b64\u8fd9\u91cc a \u7684\u7ebf\u8def\u7ed3\u679c\u4f1a\u88ab\u4fdd\u5b58\u8fdb\u5165\u5bc4\u5b58\u5668 a\uff0c\u6362\u53e5\u8bdd\u8bf4\u53d8\u91cf a \u786e\u5b9e\u4f1a\u88ab\u7efc\u5408\u4e3a\u5bc4\u5b58\u5668\uff0c\u4f46\u662f\u53d8\u91cf b \u5f97\u5230\u7684\u4e0d\u662f\u5bc4\u5b58\u5668 a \u7684\u8f93\u51fa\uff0c\u800c\u662f\u548c a \u4e00\u6837\u7684\u8f93\u5165\u3002</p> <p>b \u4e5f\u4e00\u6837\uff0cb \u5982\u679c\u88ab\u7efc\u5408\u4e3a wire \u4e5f\u4f1a\u6709\u73af\u8def\u95ee\u9898\uff0c\u6240\u4ee5 b \u88ab\u7efc\u5408\u4e3a\u5bc4\u5b58\u5668\uff0c\u53d8\u91cf c \u8f7d\u5165\u7684\u503c\u662f\u5bc4\u5b58\u5668 b \u5f97\u8f93\u5165\u800c\u4e0d\u662f\u8f93\u51fa\u3002</p>"},{"location":"lab3-3-appendix/#_6","title":"\u963b\u585e\u8d4b\u503c\u7684\u4f18\u70b9","text":""},{"location":"lab3-3-appendix/#_7","title":"\u8bbe\u8ba1\u7b80\u5355","text":"<p>\u963b\u585e\u8d4b\u503c\u7684\u6267\u884c\u65b9\u5f0f\u548c C \u8bed\u8a00\u7684\u6267\u884c\u65b9\u5f0f\u9ad8\u5ea6\u7c7b\u4f3c\uff0c\u5982\u679c\u6709\u4e00\u6bb5 C \u4ee3\u7801\uff0c\u53ef\u4ee5\u5c06\u5b83\u51e0\u4e4e\u4e0d\u52a0\u4fee\u6539\u7684\u7528\u963b\u585e\u8d4b\u503c\u7684\u65b9\u5f0f\u5b9e\u73b0\uff0c\u4f8b\u5982\u4e0b\u9762\u8fd9\u6bb5\u4ee3\u7801\uff1a</p> <pre><code>    b = b + a;\n    if(b &lt; 0){\n        b = b - a;\n    }\n</code></pre> <p>\u5c31\u53ef\u4ee5\u76f4\u63a5\u7528\u5982\u4e0b\u963b\u585e\u8bed\u53e5\u5b9e\u73b0</p> <pre><code>    always@(posedge clk)begin\n        b = b + a;\n        if(b &lt; 0)begin\n            b = b - a;\n        end\n    end\n</code></pre>"},{"location":"lab3-3-appendix/#_8","title":"\u5b9e\u73b0\u7075\u6d3b","text":"<p>\u5bf9\u4e8e\u590d\u6742\u7684\u4e2d\u95f4\u8fc7\u7a0b\u7684\u8ba1\u7b97\u53ef\u4ee5\u7528\u5b9a\u4e49\u5927\u91cf\u4e2d\u95f4\u53d8\u91cf\u8fdb\u884c\u6682\u5b58\uff0c\u751a\u81f3\u53ef\u4ee5\u642d\u914d for\u3001if \u7b49\u9ad8\u7ea7\u8bed\u6cd5\u4f7f\u7528\uff0c\u975e\u5e38\u7075\u6d3b\u65b9\u4fbf\uff0c\u6709\u5f88\u597d\u7684\u53ef\u8bfb\u6027\u3002\u4f8b\u5982\u4e0b\u9762\u8fd9\u6bb5\u4ee3\u7801\uff1a</p> <pre><code>    always@(posedge clk)begin\n        if(multiplier[0])begin\n            result = result + multiplicant;\n        end\n        result = result &gt;&gt; 1;\n    end\n</code></pre> <p>\u5982\u679c\u4f7f\u7528\u963b\u585e\u8d4b\u503c\u7684\u65b9\u5f0f\u5b9e\u73b0\u7684\u8bdd\uff0c\u8981\u4e48\u5c06\u591a\u6761\u8868\u8fbe\u5f0f\u7528\u5d4c\u5957\u7684\u5f62\u5f0f\u6539\u4e3a\u4e00\u6761\u8868\u8fbe\u5f0f\uff0c\u4f46\u662f\u8fd9\u79cd\u8868\u8fbe\u5f0f\u53ef\u8bfb\u6027\u6bd4\u8f83\u5dee\uff0c\u4e2d\u95f4\u8fc7\u7a0b\u8bed\u4e49\u4e0d\u660e\uff0c\u4e14\u5bb9\u6613\u5199\u9519\u3002</p> <pre><code>    always@(posedge clk)begin\n        result &lt;= (multiplier[0]?result + multiplicant:result) &gt;&gt; 1;\n    end\n</code></pre> <p>\u6216\u8005\u53ef\u4ee5\u5c06\u590d\u6742\u7684\u7ec4\u5408\u7535\u8def\u8fd0\u7b97\u62ff\u5230 always \u5757\u5916\u9762\u7528 assign \u8bed\u6cd5\u52a0\u4ee5\u5206\u5e03\u5b9e\u73b0\u3002\u8fd9\u6837\u5728\u53ef\u8bfb\u6027\u4e0a\u867d\u7136\u597d\u4e86\u5f88\u591a\uff0c\u4f46\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u903b\u8f91\u4f1a\u88ab\u62c6\u5206\u4e3a\u4e24\u5757\u4ee3\u7801\uff0c\u8fd8\u662f\u6709\u4e00\u5b9a\u7684\u95f4\u79bb\u3002</p> <pre><code>    wire [31:0] add_one;\n    wire [31:0] shift;\n    assign add_one = multiplier[0]?result + multiplicant:result;\n    assign shift = add_one &gt;&gt; 1;\n\n    always@(posedge clk)begin\n        result = shift;\n    end\n</code></pre>"},{"location":"lab3-3-appendix/#_9","title":"\u963b\u585e\u8d4b\u503c\u7684\u7f3a\u70b9","text":""},{"location":"lab3-3-appendix/#_10","title":"\u5ffd\u7565\u7535\u8def\u5b9e\u73b0","text":"<p>\u56e0\u4e3a\u963b\u585e\u8d4b\u503c\u53ef\u4ee5\u5b9e\u73b0\u4ece C \u8bed\u8a00\u5230 Verilog \u7684\u5feb\u901f\u8f6c\u6362\uff0c\u6240\u4ee5\u5bb9\u6613\u51fa\u73b0\u5bf9\u4ee3\u7801\u4e0d\u52a0\u4fee\u6539\u7684\u76f4\u63a5\u7167\u6284\u3002\u4e0d\u540c\u4e8e C \u8bed\u8a00\u6bcf\u884c\u4ee3\u7801\u8f83\u4e3a\u5ec9\u4ef7\uff0c\u591a\u4e00\u6761 C \u8bed\u53e5\u53ea\u4f1a\u5bfc\u81f4 CPU \u591a\u6267\u884c\u51e0\u4e2a\u5468\u671f\uff0c\u5bf9\u4e8e Verilog \u800c\u8a00\u591a\u4e00\u6761\u8bed\u53e5\u53ef\u80fd\u5c31\u4f1a\u591a\u4e00\u4e2a\u5927\u578b\u7535\u8def\u3002\u4f8b\u5982\u4e0a\u9762\u6211\u4eec\u7167\u642c\u7684\u4f8b\u5b50\uff0c\u53ef\u4ee5\u770b\u5230\u9700\u8981\u4e00\u5957\u52a0\u6cd5\u5668\u548c\u4e00\u6761\u51cf\u6cd5\u5668\u3002</p> <pre><code>    always@(posedge clk)begin\n        b = b + a;\n        if(b &lt; 0)begin\n            b = b - a;\n        end\n    end\n</code></pre> <p>\u4f46\u6211\u4eec\u53ea\u8981\u7a0d\u4f5c\u4fee\u6539\u5c31\u53ef\u4ee5\u53ea\u7528\u4e00\u4e2a\u52a0\u6cd5\u5668\uff0c\u800c\u8282\u7ea6\u4e0b\u4e00\u4e2a\u51cf\u6cd5\u5668\u3002\u8bed\u6cd5\u7b80\u6d01\u4e86\u4e4b\u540e\uff0c\u7f16\u7a0b\u8005\u5bb9\u6613\u5ffd\u7565\u5e95\u5c42\u7684\u786c\u4ef6\u5f00\u9500\u548c\u7535\u8def\u5b9e\u73b0\uff0c\u4ece\u800c\u5bfc\u81f4\u6d6a\u8d39\uff0c\u5c31\u50cf Java \u7684\u5f00\u9500\u8fdc\u5927\u4e8e C \u4e00\u6837\u3002</p> <pre><code>    assign result = b + a;\n    always@(posedge clk)begin\n        if(result &gt;= 0)begin\n            b = result;\n        end\n    end\n</code></pre> <p>\u4e0a\u9762\u7684\u4f8b\u5b50\u53ea\u4f1a\u5bfc\u81f4\u7535\u8def\u7684\u6d6a\u8d39\uff0c\u4f46\u662f\u4e0b\u9762\u7684\u4f8b\u5b50\u4f1a\u5bfc\u81f4\u7535\u8def\u7ed3\u6784\u53d1\u751f\u5de8\u5927\u7684\u53d8\u5316\u3002\u6211\u4eec\u4ee5\u4e58\u6cd5\u5668\u4e3a\u4f8b\uff0c\u5728 lab3-3 \u7684\u6559\u7a0b\u4e2d\u6211\u4eec\u63d0\u5230\u5c06\u6bcf\u6b21\u8fed\u4ee3\u5f53\u4f5c\u4e00\u4e2a\u72b6\u6001\uff0c\u7136\u540e\u5c06\u8fd9\u4e2a\u72b6\u6001\u8fed\u4ee3 32 \u6b21\u3002\u4f46\u662f\u90e8\u5206\u540c\u5b66\u4f1a\u7167\u6284\u4f2a\u4ee3\u7801\u5f97\u5230\u5982\u4e0b\u7684 Verilog\uff1a</p> <pre><code>    always@(posedge clk)begin\n        for(i=0;i&lt;32;i++)begin\n            if(multiplier[0])begin\n                product = product + multiplicant;\n            end\n            multiplier = multiplier &gt;&gt; 1;\n            multiplicant = multiplicant &lt;&lt; 1;\n        end\n    end\n</code></pre> <p>\u8be5\u7535\u8def\uff08\u5f53\u7136\u8fd8\u9700\u8981\u505a\u8c03\u6574\u624d\u53ef\u4ee5\u771f\u7684\u6267\u884c\uff09\u786e\u5b9e\u53ef\u4ee5\u5b9e\u73b0\u4e58\u6cd5\u5668\u7684\u529f\u80fd\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a for \u5faa\u73af\u4f1a\u628a\u7535\u8def\u5c55\u5f00\u4e3a 32 \u4efd\uff0c\u4e5f\u5c31\u662f\u6bcf\u6b21\u8fed\u4ee3\u6267\u7684\u52a0\u6cd5\u5668\u3001\u9009\u62e9\u5668\u3001\u79fb\u4f4d\u5668\u4f1a\u88ab\u91cd\u590d 32 \u6b21\u3002\u6700\u540e\u6211\u4eec\u4e0d\u662f\u4e00\u7ec4\u7535\u8def 32 \u6b21\u8fed\u4ee3\u5f97\u5230\u6700\u7ec8\u7ed3\u679c\uff0c\u800c\u662f 32 \u7ec4\u7535\u8def\u4e32\u8054\u7136\u540e\u4e00\u4e2a\u5468\u671f\u5f97\u5230\u6700\u7ec8\u7ed3\u679c\u3002</p> <pre><code>    always@(posedge clk)begin\n        if(multiplier[0])begin\n            product = product + multiplicant;\n        end\n        multiplier = multiplier &gt;&gt; 1;\n        multiplicant = multiplicant &lt;&lt; 1;\n\n        ... // \u91cd\u590d 32 \u6b21\n\n        if(multiplier[0])begin\n            product = product + multiplicant;\n        end\n        multiplier = multiplier &gt;&gt; 1;\n        multiplicant = multiplicant &lt;&lt; 1;\n    end\n</code></pre>"},{"location":"lab3-3-appendix/#_11","title":"\u884c\u4e3a\u672a\u5b9a\u4e49","text":"<p>\u4e2d\u95f4\u53d8\u91cf\u88ab\u5916\u90e8\u8c03\u7528\u7684\u60c5\u51b5\u4e0d\u786e\u5b9a\u3002\u4f8b\u5982\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\u3002\u56e0\u4e3a b \u6240\u5728\u7684\u6570\u636e\u6210\u73af\u8def\uff0c\u6240\u4ee5 b \u4f1a\u6210\u4e3a\u4e00\u4e2a\u5bc4\u5b58\u5668\uff0c\u4f46\u662f\u5bc4\u5b58\u5668\u7684\u503c\u6709\u8f93\u51fa\u7684\u503c\u3001\u6709\u8f93\u5165\u7684\u503c\uff0c\u5b83\u4eec\u90fd\u53eb\u505a b\u3002\u90a3\u4e48\u5bf9\u4e8e a \u548c e \u800c\u8a00\u4ed6\u4eec\u8f93\u5165\u7684\u6570\u636e b \u662f\u5bc4\u5b58\u5668\u7684\u8f93\u51fa\u8fd8\u662f\u8f93\u5165\u5462\uff1f\u8fd9\u4e2a\u662f\u4e0d\u786e\u5b9a\u7684\uff0c\u6709\u7684\u6a21\u62df\u5668\u8ba4\u4e3a\u662f\u8f93\u5165\u3001\u6709\u7684\u8ba4\u4e3a\u662f\u8f93\u51fa\uff0c\u6240\u4ee5\u5728 always \u5757\u5916\u90e8\u4f7f\u7528\u4e2d\u95f4\u53d8\u91cf\u4f1a\u5bfc\u81f4\u5927\u91cf\u7684\u4e0d\u786e\u5b9a\u95ee\u9898\u3002 <pre><code>    assign a = b; \n    always@(posedge clk)begin\n        b = a + 1;\n        c = b + 1;\n    end\n    always@(posedge clk)begin\n        e = b;\n    end\n</code></pre></p>"},{"location":"lab3-3-appendix/#_12","title":"\u5982\u4f55\u6b63\u786e\u4f7f\u7528\u963b\u585e\u8d4b\u503c","text":""},{"location":"lab3-3-appendix/#_13","title":"\u6784\u9020\u7ec4\u5408\u7535\u8def","text":"<p>\u56e0\u4e3a\u963b\u585e\u8d4b\u503c\u4f1a\u5c06\u4e2d\u95f4\u53d8\u91cf\u6839\u636e\u60c5\u51b5\u5efa\u6a21\u4e3a wire \u548c reg\uff0c\u5bfc\u81f4\u5f88\u591a\u590d\u6742\u7684\u5206\u6790\u548c\u4e0d\u786e\u5b9a\u7684\u8003\u91cf\u3002\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u5728<code>always@(*)</code>\u7535\u8def\u5f53\u4e2d\u4f7f\u7528\u963b\u585e\u8d4b\u503c\uff0c\u56e0\u4e3a<code>always@(*)</code>\u672c\u8eab\u5c31\u662f\u7528\u6765\u751f\u6210\u7ec4\u5408\u7535\u8def\u7684\uff0c\u6240\u6709\u53d8\u91cf\u90fd\u662f wire\uff0c\u6240\u4ee5\u53ef\u4ee5\u89c4\u907f\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p>\u5e38\u89c1\u7684\u9009\u62e9\u662f<code>always@(*)</code>\u642d\u914d<code>=</code>\u6784\u5efa\u7ec4\u5408\u7535\u8def\uff0c<code>always@(posedge clk)</code>\u642d\u914d<code>&lt;=</code>\u6784\u5efa\u65f6\u5e8f\u7535\u8def\u3002</p> <p>\u56e0\u4e3a\u6211\u4eec\u5df2\u7ecf\u4ecb\u7ecd\u4e86 always_ff \u7684\u5199\u6cd5\uff0c\u6240\u4ee5\u53ef\u4ee5 always_ff \u642d\u914d = \u8fdb\u884c\u7f16\u7a0b\u3002</p>"},{"location":"lab3-3-appendix/#_14","title":"\u6784\u9020\u4eff\u771f\u6fc0\u52b1","text":"<p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u963b\u585e\u8d4b\u503c\u7684\u8bed\u6cd5\u662f\u6309\u7167\u6307\u4ee4\u987a\u5e8f\u4ece\u524d\u5f80\u540e\u8fdb\u884c\u8d4b\u503c\u7684\uff0c\u6211\u4eec\u5728<code>initial</code>\u5757\u5bf9\u4eff\u771f\u8f93\u5165\u505a\u6fc0\u52b1\u7684\u65f6\u5019\u5c31\u662f\u7528\u7684\u963b\u585e\u8d4b\u503c\u7684\u8bed\u6cd5\u3002\u5b9e\u9645\u4e0a<code>initial</code>\u4e5f\u53ef\u4ee5\u548c<code>always</code>\u4e00\u6837\u4f7f\u7528 for \u8bed\u53e5\u548c if \u8bed\u53e5\uff0c\u6765\u5b9e\u73b0\u590d\u6742\u7684\u6fc0\u52b1\u529f\u80fd\u3002</p>"},{"location":"lab3-3-appendix/#_15","title":"\u4e0d\u4f7f\u7528\u4e2d\u95f4\u53d8\u91cf","text":"<p>\u5bf9\u4e8e\u4e2d\u95f4\u53d8\u91cf\u5728\u88ab always \u5757\u5916\u90e8\u7a0b\u5e8f\u8c03\u7528\u7684\u65f6\u5019\u662f\u4f7f\u7528\u5bc4\u5b58\u5668\u5f97\u8f93\u5165\u3001\u8fd8\u662f\u5bc4\u5b58\u5668\u7684\u8f93\u51fa\u3001\u8fd8\u662f wire \u7684\u503c\u672c\u8eab\u662f\u96be\u4ee5\u754c\u5b9a\u7684\uff0c\u751a\u81f3\u672c\u8eab\u5c31\u662f undefine \u7684\uff0c\u6240\u4ee5\u5e94\u8be5\u89c4\u907f\u4e2d\u95f4\u53d8\u91cf\u7684\u4f7f\u7528\u3002\u6211\u4eec\u5728\u7535\u8def\u8bbe\u8ba1\u7684\u65f6\u5019\u5e94\u8be5\u4e8b\u5148\u786e\u5b9a\u6211\u4eec\u9700\u8981\u6784\u9020 always \u5757\u7684\u6240\u6709 reg\uff0c\u7136\u540e reg \u4e4b\u95f4\u7684\u8f93\u5165\u8f93\u51fa\u4f9d\u8d56\u53ea\u548c\u8fd9\u4e9b reg \u6709\u5173\uff0c\u7136\u540e\u5728\u5b9e\u73b0\u67d0\u4e2a reg \u7684 always \u5757\u7684\u65f6\u5019\u5904\u4e8e\u65b9\u4fbf\u8d77\u89c1\uff0c\u52a0\u5165\u4e00\u4e9b reg \u5b58\u50a8\u4e2d\u95f4\u7ed3\u679c\uff0c\u800c\u51b3\u4e0d\u5728 always \u5757\u5916\u90e8\u4f7f\u7528\u3002</p>"},{"location":"lab3-3-appendix/#logic","title":"\u4f7f\u7528 logic","text":"<p>\u963b\u585e\u8d4b\u503c\u7684\u53d8\u91cf\u7c7b\u578b\u4e3a reg\uff0c\u4f46\u662f\u5efa\u6a21\u7684\u65f6\u5019\u65e2\u53ef\u80fd\u662f reg\u3001\u4e5f\u53ef\u80fd\u662f wire\uff0c\u4f1a\u9020\u6210\u6b67\u4e49\u3002\u8fd9\u4e2a\u65f6\u5019\u4e0d\u5982\u7528 logic \u53d8\u91cf\u6765\u6d88\u5f2d\u8fd9\u79cd\u8bed\u6cd5\u4e0a\u5e26\u6765\u7684\u6b67\u4e49\u3002</p>"},{"location":"lab3-3/","title":"\u5b9e\u9a8c3-3: \u4e58\u6cd5\u5668","text":""},{"location":"lab3-3/#_1","title":"\u5b9e\u9a8c\u76ee\u7684","text":"<ul> <li>\u7ee7\u7eed\u5b66\u4e60\u65f6\u5e8f\u7535\u8def\u8bbe\u8ba1\u7684\u65b9\u6cd5</li> <li>\u8bbe\u8ba1\u5b9e\u73b0\u4e58\u6cd5\u5668</li> </ul>"},{"location":"lab3-3/#_2","title":"\u5b9e\u9a8c\u73af\u5883","text":"<ul> <li>\u64cd\u4f5c\u7cfb\u7edf\uff1aWindows 10+ 22H2\uff0cUbuntu 22.04+</li> <li>VHDL\uff1aVerilog\uff0cSystemVerilog</li> </ul>"},{"location":"lab3-3/#_3","title":"\u80cc\u666f\u77e5\u8bc6","text":""},{"location":"lab3-3/#multiplier","title":"\u4e58\u6cd5\u5668\uff08Multiplier\uff09","text":""},{"location":"lab3-3/#_4","title":"\u4e58\u6cd5\u5668\u7684\u57fa\u672c\u6982\u5ff5","text":"<p>\u88ab\u4e58\u6570 x \u4e3a 1000\uff0c\u4e58\u6570 y \u4e3a 1001\uff0c\u4e0b\u9762\u7684\u4e58\u6cd5\u8fc7\u7a0b\u662f\u624b\u5de5\u8fd0\u7b97\u7684\u4e00\u4e2a\u6b65\u9aa4\uff0c\u800c\u8ba1\u7b97\u673a\u5728\u505a\u4e58\u6cd5\u65f6\u5c31\u662f\u6a21\u62df\u624b\u5de5\u8fd0\u7b97\u7684\u6267\u884c\u8fc7\u7a0b\u3002 </p> <p></p>"},{"location":"lab3-3/#_5","title":"\u4e58\u6cd5\u5668\u7684\u786c\u4ef6\u5b9e\u73b0","text":"<p>\u56e0\u4e3a\u662f\u4e24\u4e2a 4 \u4f4d\u6570\u76f8\u4e58\uff0c\u6240\u4ee5\u7ed3\u679c\u5e94\u8be5\u662f\u56db\u4e2a\u6570\u52a0\u548c\u5f97\u5230\u7684\u3002</p> <ul> <li>\u5148\u5224\u65ad y \u7684\u6700\u4f4e\u4f4d\u662f 0 \u8fd8\u662f 1</li> <li>\u5982\u679c\u662f 1\uff0c\u5219\u9700\u8981\u628a x \u52a0\u5230\u90e8\u5206\u79ef\u4e0a\uff0c\u82e5\u4e3a 0\uff0c\u5219\u4fdd\u6301\u539f\u503c</li> <li>x \u5de6\u79fb\u4e00\u4f4d\uff0c\u4e4b\u540e\u518d\u8ba9 y \u53f3\u79fb\u4e00\u4f4d</li> <li>\u82e5 y \u4e3a 0\uff0c\u5219\u5faa\u73af\u7ed3\u675f\uff0c\u5426\u5219\u7ee7\u7eed\u6b64\u5faa\u73af\u8fc7\u7a0b\u3002</li> </ul> <p>\u7535\u8def\u56fe\u548c\u6d41\u7a0b\u56fe\u5982\u4e0b\u3002</p> <p></p> <p></p>"},{"location":"lab3-3/#_6","title":"\u4e58\u6cd5\u5668\u7684\u4f18\u5316\u5b9e\u73b0","text":"<p>\u4e3a\u4e86\u8282\u7701\u4e0d\u5fc5\u8981\u7684\u786c\u4ef6\u6d88\u8017\uff0c\u4e58\u6cd5\u5668\u53ef\u4ee5\u505a\u5982\u4e0b\u7684\u4f18\u5316</p> <p></p> <p>\u8fd9\u6837\u5b50\u8282\u7701\u4e86\u4e58\u6570\u5bc4\u5b58\u5668\u3001\u88ab\u4e58\u6570\u5bc4\u5b58\u5668\u7684\u4f4d\u5bbd\uff0c\u88ab\u4e58\u6570\u5bc4\u5b58\u5668\u4e5f\u4e0d\u9700\u8981\u8bbe\u8ba1\u4e3a\u79fb\u4f4d\u5bc4\u5b58\u5668</p> <p>\u5982\u679c\u662f 64 \u4f4d\u7684\u6d41\u7a0b\u56fe\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"lab3-3/#_7","title":"\u903b\u8f91\u8bbe\u8ba1\u5230\u7535\u8def\u8bbe\u8ba1\u8303\u5f0f","text":"<p>\u5728\u8bbe\u8ba1\u7535\u8def\u7684\u65f6\u5019\uff0c\u6211\u4eec\u9996\u5148\u83b7\u5f97\u7684\u662f\u4e00\u4e2a\u4efb\u52a1\uff0c\u7136\u540e\u6211\u4eec\u6839\u636e\u4efb\u52a1\u9700\u8981\u8bbe\u8ba1\u4e00\u4e2a\u7b97\u6cd5\uff0c\u90a3\u4e48\u6211\u4eec\u8981\u600e\u4e48\u5c06\u8fd9\u4e2a\u7b97\u6cd5\u8f6c\u6362\u4e3a\u6211\u4eec\u7684\u7535\u8def\uff0c\u6709\u4ec0\u4e48\u901a\u7528\u7684\u65b9\u6cd5\u5417\uff1f\u6211\u4eec\u53ef\u4ee5\u4ee5\u4e0a\u9762\u4e58\u6cd5\u5668\u7b97\u6cd5\u4e3a\u4f8b\u505a\u4e00\u4e2a\u7b80\u8981\u4ecb\u7ecd\uff1a</p>"},{"location":"lab3-3/#_8","title":"\u5f97\u5230\u903b\u8f91\u7b97\u6cd5\u8bbe\u8ba1","text":"<p>\u6211\u4eec\u4e5f\u53ef\u4ee5\u7528\u4e00\u4e9b\u4f2a\u4ee3\u7801\u6765\u63cf\u8ff0\u4e0a\u9762\u7684\u4e58\u6cd5\u7b97\u6cd5\uff1a</p> <pre><code>    high_product = 0;\n    low_product = multiplier;\n    // \u521d\u59cb\u5316\u9636\u6bb5\uff0cproduct \u7684\u9ad8 64 \u4f4d\u8f7d\u5165 0\n    // product \u7684\u4f4e 64 \u4f4d\u8f7d\u5165\u4e58\u6570\n\n    for(i=0;i&lt;64;i++){\n        // \u8ba1\u7b97\u9636\u6bb5\uff0c\u9700\u8981\u7ecf\u5386 64 \u6b21\u8fed\u4ee3\n        if(low_product &amp; 1){\n            high_product_tmp = high_product + multiplicand;\n        }else{\n            high_product_tmp = high_product;\n        }\n        // \u53c2\u8003\u5217\u7ad6\u5f0f\u7684\u8ba1\u7b97\u65b9\u5f0f\uff0c\u6bcf\u6b21\u8fed\u4ee3\u90fd\u505a\u4e00\u6b21\u52a0\u6cd5\uff0c\u4e0d\u8981\u5fd8\u8bb0\u52a0\u6cd5\u7684\u8fdb\u4f4d\n        {high_product, low_product} = {high_product_tmp, low_product} &gt;&gt; 1;\n        // \u52a0\u6cd5\u7684\u7ed3\u679c\u53f3\u79fb\uff0c\u7b49\u4ef7\u4e8e\u88ab\u4e58\u6570\u5de6\u79fb\uff0c\u8d77\u5230\u8fdb\u4f4d\u7684\u4f5c\u7528\n        // \u4e58\u6570\u7684\u53f3\u79fb\u65e2\u662f\u4e3a\u4e86\u7ed9\u52a0\u6cd5\u7684\u53f3\u79fb\u63d0\u4f9b\u7a7a\u95f4\n        // \u7a7a\u4f59\u591a\u5f97\u5230\u7684 1 bit \u53ef\u4ee5\u5b58\u653e\u52a0\u6cd5\u7684\u8fdb\u4f4d\n        // \u4e0b\u6b21\u8fed\u4ee3\u8981\u53c2\u8003\u7684\u4e58\u6570\u7684 0/1 bit \u53ef\u4ee5\u5728 low_product \u7684\u6700\u4f4e\u4f4d\n    }\n\n    return {high_product, low_product};\n    // \u7ed3\u675f\u9636\u6bb5\uff0c\u8fd4\u56de\u6700\u7ec8\u7ed3\u679c\n</code></pre>"},{"location":"lab3-3/#_9","title":"\u72b6\u6001\u673a\u8bbe\u8ba1","text":"<p>\u5728\u7b97\u6cd5\u4e2d\u6211\u4eec\u53ef\u4ee5\u603b\u7ed3\u51fa\u82e5\u5e72\u4e2a\u72b6\u6001\uff0c\u8fd9\u91cc\u662f\u4e09\u4e2a\u72b6\u6001\uff1a\u521d\u59cb\u5316\u3001\u8fed\u4ee3\u3001\u7ed3\u675f\u3002</p> <p>\u6240\u4ee5\uff0c\u6211\u4eec\u7684\u4e58\u6cd5\u5668\u7684\u6709\u9650\u72b6\u6001\u673a\u4e5f\u53ef\u4ee5\u7531\u4e09\u4e2a\u72b6\u6001\u8fdb\u884c\u63a7\u5236\uff1a</p> <ul> <li> <p>\u521d\u59cb\u72b6\u6001\uff1a\u5f53\u6a21\u5757\u88ab\u4f7f\u80fd\u65f6\uff08\u56e0\u6b64\u9700\u8981\u989d\u5916\u7684 start \u4fe1\u53f7\u4f5c\u4e3a request\uff09\uff0c\u5c06\u88ab\u4e58\u6570\u3001\u4e58\u6570\u8f7d\u5165\u5bf9\u5e94\u7684\u5bc4\u5b58\u5668\uff0c\u8fdb\u5165\u5de5\u4f5c\u72b6\u6001\u5f00\u59cb\u6267\u884c\u8fed\u4ee3</p> </li> <li> <p>\u5de5\u4f5c\u72b6\u6001\uff1a\u6267\u884c\u52a0\u6cd5\u3001\u6839\u636e\u4e58\u6570\u7684 bit \u503c\u9009\u62e9\u662f\u7528\u52a0\u6cd5\u7ed3\u679c\u8fd8\u662f\u8f7d\u5165\u539f\u503c\u3001\u8ba1\u7b97\u7ed3\u679c\u79fb\u4f4d\u540e\u8f7d\u5165\u5bc4\u5b58\u5668\u3001\u8ba1\u6570\u5668\u8fed\u4ee3\uff0c\u8fed\u4ee3\u5230\u6b21\u6570\u4e86\u8fdb\u5165\u7ed3\u675f\u72b6\u6001</p> </li> <li> <p>\u7ed3\u675f\u72b6\u6001\uff1a\u8f93\u51fa\u6700\u7ec8\u7ed3\u679c\uff0c\u5e76\u901a\u77e5\u8c03\u7528\u65b9\u63a5\u6536\u7ed3\u679c\uff08\u56e0\u6b64\u9700\u8981\u989d\u5916\u7684 finish \u4fe1\u53f7\u4f5c\u4e3a reply\uff09</p> </li> </ul> <p>\u6211\u4eec\u53ef\u4ee5\u8bbe\u8ba1\u5982\u4e0b\u7684\u6709\u9650\u72b6\u6001\u673a\uff1a</p> <p></p>"},{"location":"lab3-3/#_10","title":"\u5404\u9636\u6bb5\u7535\u8def\u8bbe\u8ba1","text":"<p>\u73b0\u5728\u6211\u4eec\u4e3a\u6bcf\u4e2a\u5bc4\u5b58\u5668\u7684\u6bcf\u4e2a\u9636\u6bb5\u8bbe\u8ba1\u5bf9\u5e94\u7684\u7535\u8def</p> \u521d\u59cb\u5316\u9636\u6bb5\u5de5\u4f5c\u9636\u6bb5\u7ed3\u675f\u9636\u6bb5 <p>\u4e4b\u540e\u6211\u4eec\u6765\u770b\u521d\u59cb\u5316\u6bcf\u4e2a\u5bc4\u5b58\u5668\u9700\u8981\u7684\u8ba1\u7b97\u7535\u8def\uff1a</p> <ul> <li>multiplicand \u5bc4\u5b58\u5668\u8f7d\u5165\u8f93\u5165\u7684\u88ab\u4e58\u6570</li> <li>product \u5bc4\u5b58\u5668\u8f7d\u5165 multiplier \u548c 0</li> </ul> <p></p> <ul> <li>multiplicand \u4fdd\u6301\u4e0d\u53d8</li> <li>product \u8f7d\u5165\u52a0\u6cd5\u8fd0\u7b97\u3001\u9009\u62e9\u8fd0\u7b97\u3001\u79fb\u4f4d\u8fd0\u7b97\u7684\u7ed3\u679c</li> </ul> <p></p> <ul> <li>multiplicand \u4fdd\u6301\u4e0d\u53d8</li> <li>product \u4fdd\u6301\u4e0d\u53d8</li> </ul>"},{"location":"lab3-3/#_11","title":"\u72b6\u6001\u673a\u63a7\u5236\u5bc4\u5b58\u5668","text":"<p>\u53ef\u4ee5\u770b\u5230\u6bcf\u4e2a\u72b6\u6001\u4e0b\uff0c\u6bcf\u4e2a\u5bc4\u5b58\u5668\u9700\u8981\u7684\u8ba1\u7b97\u7535\u8def\u548c\u8f7d\u5165\u7684\u7ed3\u679c\u90fd\u7565\u6709\u4e0d\u540c\uff0c\u6240\u4ee5\u8fd9\u91cc\u7684\u6bcf\u4e00\u5957\u8ba1\u7b97\u7535\u8def\u6211\u4eec\u90fd\u662f\u9700\u8981\u5b9e\u73b0\u7684\uff0c\u7136\u540e\u6839\u636e\u72b6\u6001\u673a\u7684\u72b6\u6001\u5c06\u5bf9\u5e94\u7684\u8ba1\u7b97\u7535\u8def\u7684\u8ba1\u7b97\u7ed3\u679c\u7528\u9009\u62e9\u5668\u9009\u62e9\u51fa\u6765\uff0c\u8f7d\u5165\u7ed9\u5bf9\u5e94\u7684\u5bc4\u5b58\u5668\u3002</p> <p>\u6240\u4ee5\u5bc4\u5b58\u5668\u548c\u72b6\u6001\u673a\u7684\u534f\u540c\u7535\u8def\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"lab3-3/#_12","title":"\u603b\u7ed3","text":"<p>\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u603b\u7ed3\u8fd9\u4e2a\u5f62\u5f0f\u5316\u8bbe\u8ba1\u7684\u8fc7\u7a0b\uff1a</p> <ol> <li>\u5c06\u4efb\u52a1\u8f6c\u6362\u4e3a\u7b97\u6cd5\uff0c\u5199\u51fa\u5bf9\u5e94\u7684\u4f2a\u4ee3\u7801</li> <li>\u6839\u636e\u4f2a\u4ee3\u7801\u603b\u7ed3\u51fa\u591a\u4e2a\u6267\u884c\u9636\u6bb5\u548c\u53d8\u91cf\u53c2\u6570\uff08\u4e00\u4e9b\u63a7\u5236\u6d41\u548c\u6570\u636e\u6d41\u5206\u6790\u7684\u65b9\u6cd5\uff09</li> <li>\u6839\u636e\u6267\u884c\u9636\u6bb5\u7684\u6d41\u7a0b\u56fe\u603b\u7ed3\u51fa\u6709\u9650\u72b6\u6001\u673a\u7684\u72b6\u6001\u548c\u72b6\u6001\u8f6c\u79fb</li> <li>\u6839\u636e\u6570\u636e\u6d41\u603b\u7ed3\u51fa\u9700\u8981\u7684\u5bc4\u5b58\u5668</li> <li>\u4e3a\u6bcf\u4e2a\u5bc4\u5b58\u5668\u8bbe\u8ba1\u6bcf\u4e2a\u9636\u6bb5\u4e0b\u7684\u7b97\u672f\u8fd0\u7b97\u3001\u9009\u62e9\u8fd0\u7b97\u5bf9\u5e94\u7684\u7ec4\u5408\u7535\u8def</li> <li>\u6709\u9650\u72b6\u6001\u673a\u7684\u72b6\u6001\u901a\u8fc7\u8bd1\u7801\uff0c\u4e3a\u6bcf\u4e2a\u5bc4\u5b58\u5668\u591a\u4e2a\u72b6\u6001\u4e0b\u7684\u4e0d\u540c\u7ec4\u5408\u7535\u8def\u7684\u7ed3\u679c\u8f93\u5165\u63d0\u4f9b\u9009\u62e9\u5b50\u3001\u4e3a\u6bcf\u4e2a\u5bc4\u5b58\u5668\u63d0\u4f9b\u4f7f\u80fd\u4fe1\u53f7</li> </ol>"},{"location":"lab3-3/#start-finish","title":"start-finish \u63e1\u624b\u4fe1\u53f7","text":"<p>\u8003\u8651\u4ee5\u4e0b\u573a\u666f\uff0c\u6211\u4eec\u7684\u5904\u7406\u5668\u6709\u65f6\u9700\u8981\u4f7f\u7528\u4e58\u6cd5\u5668\u8fdb\u884c\u4e58\u6cd5\u64cd\u4f5c\u3002\u56e0\u6b64\u5904\u7406\u5668\u9700\u8981\u4fe1\u53f7\u901a\u77e5\u4e58\u6cd5\u5668\u5355\u5143\u63a5\u6536\u8fd0\u7b97\u5185\u5bb9\u3001\u5f00\u59cb\u4e58\u6cd5\u8fd0\u7b97\uff0c\u5f53\u4e58\u6cd5\u5668\u5355\u5143\u6267\u884c\u7ed3\u675f\u4e4b\u540e\uff0c\u4e58\u6cd5\u5668\u9700\u8981\u4fe1\u53f7\u901a\u77e5\u5904\u7406\u5668\u8ba1\u7b97\u5b8c\u6bd5\u3001\u63a5\u6536\u8fd0\u7b97\u7ed3\u679c\u3002\u6240\u4ee5\u53ef\u4ee5\u5b9a\u4e49\u7b80\u5355\u7684 start-finish \u63e1\u624b\u534f\u8bae\uff1a</p> <ul> <li> <p>\u8c03\u7528\u6a21\u5757\uff08caller\uff09\u5411\u88ab\u8c03\u7528\u6a21\u5757\uff08callee\uff09\u53d1\u9001\u53ea\u8981\u88ab\u6267\u884c\u7684\u6570\u636e\u548c\u81f3\u5c11\u6301\u7eed\u4e00\u4e2a\u5468\u671f\u7684 start \u4fe1\u53f7\uff0c\u5f53 start = 1 \u7684\u65f6\u5019\u53d1\u9001\u7684\u6570\u636e\u6709\u6548\uff1bcallee \u53d1\u73b0 start = 1 \u5fc5\u987b\u7acb\u523b\u63a5\u53d7 caller \u7684\u6570\u636e\uff0c\u56e0\u4e3a start \u590d\u4f4d\u540e\u6570\u636e\u6709\u6548\u6027\u4e0d\u80fd\u4fdd\u8bc1 </p> </li> <li> <p>callee \u6267\u884c\u7ed3\u675f\u540e\u5411 caller \u53d1\u9001\u6267\u884c\u7ed3\u679c\u548c\u81f3\u5c11\u6301\u7eed\u4e00\u4e2a\u5468\u671f\u7684 finish \u4fe1\u53f7\uff0c\u5f53 finish = 1 \u7684\u65f6\u5019\u53d1\u9001\u7684\u6570\u636e\u6709\u6548\uff1b\u88ab caller \u53d1\u73b0 finish = 1 \u5fc5\u987b\u7acb\u523b\u63a5\u53d7 callee \u7684\u6570\u636e\uff0c\u56e0\u4e3a finish \u590d\u4f4d\u540e\u6570\u636e\u6709\u6548\u6027\u4e0d\u80fd\u4fdd\u8bc1 </p> </li> <li> <p>\u5f53\u4e00\u4e2a start \u8bf7\u6c42\u88ab\u53d1\u9001\u800c finish \u8bf7\u6c42\u6ca1\u6709\u53cd\u9988\u4e4b\u524d\uff0c\u4e0d\u80fd\u53d1\u9001\u4e0b\u4e00\u4e2a start \u8bf7\u6c42\uff0ccallee \u4e0d\u4fdd\u8bc1\u662f\u5426\u54cd\u5e94\uff1bcaller \u53ea\u6709\u6536\u5230 callee \u7684 finish \u4fe1\u53f7\u4e4b\u540e\uff0c\u624d\u53ef\u4ee5\u53d1\u9001\u4e0b\u4e00\u4e2a start \u4fe1\u53f7 </p> </li> <li> <p>\u5f53\u4e00\u4e2a start \u8bf7\u6c42\u6ca1\u88ab\u53d1\u9001\uff0ccaller \u4e0d\u80fd\u53d1\u9001 finish</p> </li> </ul> <p>\u5176\u4e2d caller \u53d1\u9001\u7ed9 callee \u7684\u6570\u636e\u548c start \u4fe1\u53f7\u4f5c\u4e3a caller \u53d1\u9001\u7ed9 callee \u7684\u8bf7\u6c42\u4fe1\u53f7\uff08request\uff09\uff1bcallee \u53d1\u9001\u7ed9 caller \u7684 finish \u4fe1\u53f7\u4f5c\u4e3a callee \u54cd\u5e94 caller \u7684\u56de\u5e94\u4fe1\u53f7\uff08resp\uff09</p> <p></p> <p>multiplier \u4e58\u6cd5\u5668\u7684\u8c03\u7528\u9075\u5faa\u8be5\u534f\u8bae\u3002</p>"},{"location":"lab3-3/#_13","title":"\u5b9e\u9a8c\u6b65\u9aa4","text":""},{"location":"lab3-3/#_14","title":"\u5b9e\u9a8c\u524d\u51c6\u5907","text":"<p>\u4e0e\u4e4b\u524d\u7684 lab \u76f8\u540c\uff0c\u542f\u52a8\u5b89\u88c5\u5728\u4f60\u7535\u8111\u4e2d\u7684 Ubuntu 22.04 \u73af\u5883\uff08WSL \u6216\u865a\u62df\u673a\uff09</p> <p>cd \u5230 sys1-sp24 \u6587\u4ef6\u5939</p> <p>\u6267\u884c</p> <pre><code>git pull origin master\ncd repo/sys-project\ngit pull origin other\n</code></pre>"},{"location":"lab3-3/#_15","title":"\u8bbe\u8ba1\u53c2\u6570\u914d\u7f6e\u7684\u65e0\u7b26\u53f7\u4e58\u6cd5\u5668","text":"<p>\u4ed4\u7ec6\u9605\u8bfb\u6307\u5bfc\uff0c\u7f16\u5199<code>src/lab3-3/submit/multiplier</code>\u6587\u4ef6\u5939\u4e0b\u7684\u6587\u4ef6\uff0c\u6309\u71673.2.3\u4f18\u5316\u4e58\u6cd5\u5668\u5b9e\u73b0\u7684\u65b9\u6cd5\u8bbe\u8ba1\u65e0\u7b26\u53f7\u4e58\u6cd5\u5668\u3002</p> <p>\u6ce8\u610f</p> <p>\u5982\u679c\u60f3\u8981\u83b7\u5f97 LEN \u4f4d\u7684 0 \u6216\u8005 1\uff0c\u4e0d\u80fd\u4f7f\u7528<code>LEN'b0</code>\u6216\u8005<code>LEN'b1</code>\uff0c\u800c\u8981\u4f7f\u7528<code>{LEN{1'b0}}</code>\u548c<code>{LEN{1'b1}}</code>\u3002</p> <pre><code>module Multiplier #(\n    parameter LEN = 32\n    // \u4e58\u6570\u3001\u88ab\u4e58\u6570\u7684\u957f\u5ea6\u53c2\u6570\n) (\n    input clk,\n    input rst,\n    // \u4f7f\u7528 rst\uff0crst = 1 \u590d\u4f4d\n    input [LEN-1:0] multiplicand,\n    input [LEN-1:0] multiplier,\n    input start,\n\n    output [LEN*2-1:0] product,\n    output finish\n);\n\n    localparam PRODUCT_LEN = LEN*2;\n    // \u8868\u793a\u4e58\u79ef\u7684\u4f4d\u5bbd\n    logic [LEN-1:0] multiplicand_reg;\n    logic [PRODUCT_LEN-1:0] product_reg;\n\n    localparam CNT_LEN = $clog2(LEN);\n    // \u8868\u793a\u8fed\u4ee3\u8ba1\u6570\u5668\u7684\u4f4d\u5bbd\n    localparam CNT_NUM = LEN - 1;\n    // \u8fed\u4ee3\u9700\u8981\u7684\u7acb\u5373\u6570\uff0c\u5927\u5bb6\u6309\u9700\u4f7f\u7528\n    logic [CNT_LEN-1:0] work_cnt;\n\n    typedef enum [1:0] {IDLE, WORK, FINAL} fsm_state;\n    // \u6709\u9650\u72b6\u6001\u673a\n    fsm_state fsm_state_reg;\n\n\n    // fill the code\n\nendmodule\n</code></pre>"},{"location":"lab3-3/#_16","title":"\u4eff\u771f","text":""},{"location":"lab3-3/#_17","title":"\u4eff\u771f\u6837\u4f8b\u751f\u6210","text":"<p>\u5728<code>sim/testbench.v</code>\u7684\u4eff\u771f\u6fc0\u52b1\u4e2d\u751f\u6210\u4e0d\u5c11\u4e8e 16 \u7ec4\u968f\u673a\u6837\u4f8b\uff0c\u5e76\u4e14 start \u4fe1\u53f7\u7684\u6fc0\u52b1\u8981\u6ee1\u8db3 start-finish \u534f\u8bae</p> <pre><code>    integer i;\n    initial begin\n        clk=0;\n        rst=1;\n        #20;\n        rst=0;\n        // fill the code\n        $display(\"success!!!\");\n        $finish;\n    end\n</code></pre>"},{"location":"lab3-3/#dpi-c","title":"DPI-C \u5b9e\u8df5","text":"<p>\u672c\u6b21\u4e58\u6cd5\u5668\u7684\u4ece\u5dee\u5206\u6d4b\u8bd5\u7ee7\u7eed\u4f7f\u7528 DPI-C \u51fd\u6570\u63a5\u53e3\u63d0\u4f9b\u9a8c\u8bc1\u529f\u80fd\u3002\u8bf7\u5728<code>sim/judge.v</code>\u4e2d\u8865\u5168 mul_judge \u51fd\u6570\u7684 DPI-C \u63a5\u53e3\u58f0\u660e\uff0c\u5728<code>sim/judge.cpp</code> \u4e2d\u5b9e\u73b0\u4e58\u6cd5\u5224\u65ad\u529f\u80fd\u3002</p> <pre><code>// fill the declaration\n\nmodule Judge (\n    input clk,\n    input rstn,\n    input [31:0] multiplicand,\n    input [31:0] multiplier,\n    input start,\n    input [63:0] product,\n    input finish,\n    output reg error\n);\n</code></pre> <pre><code>extern \"C\" unsigned int mul_judge (\n    unsigned int multiplicand, \n    unsigned int multiplier,\n    unsigned long long int product\n){\n\n    // fill the code\n\n    if(!right){ // right \u662f\u4eff\u771f\u7ed3\u679c\u548c\u6267\u884c\u7ed3\u679c\u662f\u5426\u4e00\u81f4\n        printf(\"*********error***********\\n\");\n        printf(\"simulation multiplicand = %08x, multiplier = %08x, product = %016llx\\n\", multiplicand, multiplier, simulate_result);// simulate_result \u662f\u4eff\u771f\u5f97\u5230\u7684 product \u7ed3\u679c\n        printf(\"hardware   multiplicand = %08x, multiplier = %08x, product = %016llx\\n\", multiplicand, multiplier, product);\n    }else{\n        printf(\"simulation multiplicand = %08x, multiplier = %08x, product = %016llx\\n\", multiplicand, multiplier, simulate_result);\n    }\n\n    return right; // \u5982\u679c\u4e00\u81f4\u8fd4\u56de 1\uff0c\u53cd\u4e4b\u8fd4\u56de 0\n}\n</code></pre> <p>\u6700\u540e\u6267\u884c<code>make verilate</code>\uff0c\u5982\u679c\u4eff\u771f\u901a\u8fc7\u6700\u540e\u4f1a\u8f93\u51fa<code>success!!!</code>\uff0c\u53cd\u4e4b\u5c31\u662f<code>fail!!!</code>\u548c\u62a5\u9519\u4fe1\u606f</p>"},{"location":"lab3-3/#_18","title":"\u7efc\u5408\u4e0b\u677f","text":"<p>\u6211\u4eec\u7684\u6d4b\u8bd5\u6570\u636e\u7531<code>sys-project/lab3-3/syn/DataGenerator.v</code>\u7684 DataGenerator \u6a21\u5757\u63d0\u4f9b\u3002\u6d4b\u8bd5\u6570\u636e\u5b58\u50a8\u5728<code>sys-project/lab3-3/syn/initial.hex</code>\uff0c\u6211\u4eec\u5728<code>lab3-3/include/initial_file.vh</code>\u6587\u4ef6\u4e2d\u5c06 FILE_PATH \u53d8\u91cf\u8bbe\u7f6e\u4e3a initial.hex \u7684\u7edd\u5bf9\u8def\u5f84\uff0c\u7136\u540e DataGenerator \u5c31\u4f1a\u7528\u5176\u4e2d\u7684\u503c\u521d\u59cb\u5316 data \u5bc4\u5b58\u5668\u7ec4\u3002\u5176\u4e2d initial_file \u4e00\u5171\u5b58\u50a8\u4e86\u56db\u7ec4\u6d4b\u8bd5\u6570\u636e\uff0c\u4e5f\u5373\u56db\u7ec4 multiplicant \u548c multiplier\u3002</p> <p>\u5f53 next_state = 1 \u7684\u65f6\u5019\uff0c\u8f93\u51fa\u4e0b\u4e00\u7ec4\u6d4b\u8bd5\u6837\u4f8b\u7684 multiplicant\u3001multiplier\uff0c\u5e76\u4e14\u5c06 start \u62c9\u9ad8\u4e00\u4e2a\u5468\u671f\uff0c\u4e4b\u540e\u4e58\u6cd5\u5668\u4f1a\u6839\u636e DataGenerator \u7684\u8f93\u51fa\u8fdb\u884c\u4e58\u6cd5\u8ba1\u7b97\u3002</p> <pre><code>module DataGenerator(\n    input clk,\n    input rstn,\n    input next_test,\n    output reg start,\n    output [31:0] multiplicand,\n    output [31:0] multiplier\n);\n    `include\"initial_file.vh\"\n    reg [31:0] data [7:0];\n    initial begin\n        $readmemh(FILE_PATH, data);\n    end\n\n    reg [1:0] index;\n    always@(posedge clk or negedge rstn)begin\n        if(~rstn) index &lt;= 2'b11;\n        else if(next_test) index &lt;= index+2'b01;\n    end\n\n    always@(posedge clk or negedge rstn)begin\n        if(~rstn) start &lt;= 1'b0;\n        else if(next_test) start &lt;= 1'b1;\n        else start &lt;= 1'b0;\n    end\n\n    assign multiplicand = data[{index,1'b0}];\n    assign multiplier = data[{index,1'b1}];\n\nendmodule\n</code></pre> <p>\u9876\u5c42\u6a21\u5757\u5982\u4e0b\uff1a</p> <p></p> <p>\u901a\u8fc7\u6309\u6309\u94ae btn[0] \u8ba9 datatgenerator \u8f93\u51fa\u4e0b\u4e00\u7ec4\u6d4b\u8bd5\u6837\u4f8b\uff0c\u7136\u540e\u4e58\u6cd5\u5668\u8ba1\u7b97\u5f97\u5230\u7ed3\u679c product\uff0c\u4e4b\u540e\u6839\u636e\u5f00\u5173 sw[1:0] \u9009\u62e9 multiplicant\u3001multiplier \u548c product \u7684\u503c\u53d1\u9001\u7ed9\u4e03\u6bb5\u6570\u7801\u7ba1\u663e\u793a\u3002</p> <p>\u5176\u4e2d sw \u5bf9\u8f93\u51fa\u6570\u636e\u7684\u9009\u62e9\u5173\u7cfb\u5982\u4e0b\uff1a</p> <p> sw\u503c \u9009\u62e9\u7684\u8f93\u51fa 00 multiplicant 01 multiplier 10 product[31:0] 11 product[63:32] <p></p> <p>\u6267\u884c<code>make bitstream</code>\u4e0b\u677f\u9a8c\u8bc1\u5373\u53ef</p>"},{"location":"lab3-3/#40","title":"\u5b9e\u9a8c\u62a5\u544a 40%","text":"<ol> <li>\u8bf7\u5728\u5b9e\u9a8c\u62a5\u544a\u4e2d\u8be6\u7ec6\u63cf\u8ff0\u6bcf\u4e00\u6b65\u7684\u8fc7\u7a0b\u5e76\u914d\u6709\u9002\u5f53\u7684\u622a\u56fe\u548c\u89e3\u91ca\uff0c\u5bf9\u4e8e\u4eff\u771f\u8bbe\u8ba1\u548c\u4e0a\u677f\u9a8c\u8bc1\u7684\u7ed3\u679c\u4e5f\u5e94\u5f53\u6709\u9002\u5f53\u7684\u89e3\u91ca\u548c\u7167\u7247 Total: 20%</li> </ol> <p>\u7ec6\u5206\uff1a</p> <ul> <li>\u4eff\u771f\u901a\u8fc7\uff0c\u8f93\u51fa<code>success!!!</code> 10%</li> <li>\u7efc\u5408\u5b9e\u73b0\u4e58\u6cd5\u5668 10%</li> </ul> <ol> <li> <p>\u89e3\u91ca\u4eff\u771f\u6d4b\u8bd5\u6837\u4f8b\u548c\u4e0b\u677f\u7684\u9876\u5c42\u7ed3\u6784\u4e3a\u4ec0\u4e48\u6ee1\u8db3 start-finish \u63e1\u624b\u534f\u8bae\u3002\u5c1d\u8bd5\u7ed9\u51fa start-finish \u63e1\u624b\u534f\u8bae\u5b58\u5728\u7684\u7f3a\u70b9\u548c\u6539\u8fdb\u7684\u65b9\u6cd5\u3002 10%</p> </li> <li> <p>\u8bf7\u4eff\u7167\u4e58\u6cd5\u5668\u7684\u8bbe\u8ba1\u65b9\u6cd5\u548c\u6211\u4eec\u624b\u52a8\u8ba1\u7b97\u9664\u6cd5\u7684\u65b9\u5f0f\uff0c\u8bbe\u8ba132bit\u65e0\u7b26\u53f7\u6574\u6570\u9664\u6cd5\u5668\uff0c\u4f60\u53ea\u9700\u8981\u7ed9\u51fa\u8bbe\u8ba1\u601d\u8def\u5373\u53ef\u3002\u6d41\u7a0b\u56fe\u548c\u4f2a\u4ee3\u7801\u662f\u63a8\u8350\u7684\u63cf\u8ff0\u5f62\u5f0f\u3002 10%</p> </li> </ol> <p>\u4f5c\u4e3a\u53c2\u8003\u7684\u63a5\u53e3\u5b9a\u4e49\u5982\u4e0b\uff1a</p> <pre><code>module Divider_32(\n        input    clk,\n        input    rst,\n\n        input    start,\n        input    [31:0] dividend, \n        input    [31:0] divisor,\n\n        output    finish,\n        output    [31:0] quotient,\n        output    [31:0] remainder\n        ); \n\n\nendmodule\n</code></pre> <ol> <li>(bonus) \u5c1d\u8bd5\u6539\u8fdb\u76ee\u524d\u7684\u6709\u9650\u72b6\u6001\u673a\uff0c\u4f7f\u5f97\u4e00\u6b21\u4e58\u6cd5\u64cd\u4f5c\u6216\u8005\u8fde\u7eed\u4e58\u6cd5\u64cd\u4f5c\u6d88\u8017\u7684\u65f6\u949f\u5468\u671f\u6570\u53ef\u4ee5\u51cf\u5c11\u3002  +15%</li> </ol>"},{"location":"lab3-3/#_19","title":"\u4ee3\u7801\u63d0\u4ea4","text":""},{"location":"lab3-3/#40_1","title":"\u9a8c\u6536\u68c0\u67e5\u70b9 40%","text":"<ul> <li>\u4eff\u771f\u6ce2\u5f62\u5c55\u793a 10%</li> <li>\u4ee3\u7801\u89e3\u91ca\u6216\u8bbe\u8ba1\u601d\u8def 15%</li> <li>\u4e0b\u677f\u9a8c\u8bc1 15%</li> </ul>"},{"location":"lab3-3/#_20","title":"\u63d0\u4ea4\u6587\u4ef6","text":"<p><code>src/lab3-3/</code> \u4e2d\u7f16\u5199\u7684 submit\u3001sim \u548c include \u7684\u4ee3\u7801</p>"},{"location":"lab4-1-appendix/","title":"SystemVerilog \u9ad8\u7ea7\u8bed\u6cd5","text":"<p>\u4e3a\u4e86\u5bf9 lab4 \u8fdb\u884c\u5feb\u901f\u5f00\u53d1\uff0c\u6211\u4eec\u4f1a\u4ecb\u7ecd\u4e00\u4e9b SystemVerilog \u7279\u6709\u7684\u8bed\u6cd5\uff0c\u4ee5\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\u3002\u5176\u4e2d <code>typedef</code>, <code>struct</code>, <code>package</code>, <code>queue</code> \u4f1a\u5728 lab4-1 \u4e2d\u7528\u5230\uff0c<code>interface</code> \u8bed\u6cd5\u4f1a\u5728 lab4-2(bonus) \u4e2d\u7528\u5230\uff0c\u540c\u5b66\u4eec\u53ef\u4ee5\u6309\u9700\u9605\u8bfb\u3002</p>"},{"location":"lab4-1-appendix/#typedef","title":"typedef","text":"<p>\u5728 ConvOperator \u4e2d\u88ab\u8ba1\u7b97\u7684\u6570\u636e\u662f WIDTH \u4f4d\u7684\uff0c\u8ba1\u7b97\u5f97\u5230\u7684\u6570\u636e\u662f WIDTH*2 \u4f4d\u7684\uff0c\u56e0\u6b64\u6bcf\u5f53\u6211\u4eec\u4e3a\u88ab\u8ba1\u7b97\u6570\u636e\u63d0\u4f9b\u53d8\u91cf\u662f\u5c31\u8981\u7528\u6570\u636e\u7c7b\u578b<code>logic [WIDTH-1:0]</code>\uff0c\u5bf9\u8ba1\u7b97\u7ed3\u679c\u8bbe\u7f6e\u53d8\u91cf\u7684\u65f6\u5019\u5c31\u8981\u4f7f\u7528\u6570\u636e\u7c7b\u578b<code>logic [2*WIDTH-1:0]</code>\u3002\u8fd9\u4f1a\u4ea7\u751f\u4e09\u4e2a\u95ee\u9898\uff1a</p> <ul> <li>\u6570\u636e\u7c7b\u578b\u7684\u58f0\u660e\u662f\u6bd4\u8f83\u7e41\u7410\u548c\u8017\u65f6\u7684</li> <li>\u56e0\u4e3a\u5b83\u53ea\u662f\u4e00\u4e2a\u65e0\u5176\u4ed6\u8bed\u4e49\u4fe1\u606f\u7684\u7ebf\u5bbd\u7c7b\u578b\uff0c\u5bb9\u6613\u56e0\u4e3a\u7ebf\u5bbd\u5199\u9519\u800c\u5f15\u5165\u9519\u8bef</li> <li>\u5982\u679c\u6211\u4eec\u9700\u8981\u4fee\u6539\u88ab\u8ba1\u7b97\u6570\u636e\u548c\u8ba1\u7b97\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\uff08\u4f8b\u5982\u9700\u8981\u4fee\u6539\u7ebf\u5bbd\uff0c\u6bd4\u5982\u7ed3\u679c\u7684\u5bbd\u5ea6\u4e0d\u662f\u6570\u636e\u7684\u4e24\u500d\uff0c\u6bd4\u5982\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u590d\u6742\u5230\u4e0d\u662f\u5355\u4e2a\u53d8\u91cf\u53ef\u4ee5\u8868\u793a\u7684\uff09\uff0c\u5c31\u8981\u624b\u52a8\u6ce8\u610f\u4fee\u6539\u6709\u51b2\u7a81\u7684\u6570\u636e\u7c7b\u578b</li> </ul> <p>\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u7528 typedef \u5173\u952e\u5b57\u5c06\u65e0\u8bed\u4e49\u4fe1\u606f\u7684\u6570\u636e\u7c7b\u578b\u7b49\u8f6c\u6362\u4e3a\u6709\u8bed\u4e49\u4fe1\u606f\u7684\u6570\u636e\u7c7b\u578b\uff0c\u6bd4\u5982\u5c06\u8ba1\u7b97\u6570\u636e\u4f7f\u7528\u7684\u6570\u636e\u7c7b\u578b<code>logic [WIDTH-1:0]</code>\u5b9a\u4e49\u4e3a\u7c7b\u578b data_t\uff0c\u8ba1\u7b97\u7ed3\u679c\u4f7f\u7528\u7684\u6570\u636e\u7c7b\u578b<code>logic [2*WIDTH-1:0]</code>\u5b9a\u4e49\u4e3a result_t\uff1a</p> <ul> <li>data_t \u548c result_t \u6bd4<code>logic [WIDTH-1:0]</code>\u3001<code>logic [2*WIDTH-1:0]</code>\u66f4\u7b80\u77ed</li> <li>data_t \u548c result_t \u6709\u4e30\u5bcc\u7684\u8bed\u4e49\u4fe1\u606f\uff0c\u8ba1\u7b97\u6570\u636e\u53d8\u91cf\u4f7f\u7528 data_t \u7c7b\u578b\uff0c\u8ba1\u7b97\u7ed3\u679c\u53d8\u91cf\u4f7f\u7528 result_t \u7c7b\u578b</li> <li>\u5982\u679c\u53d8\u91cf\u7c7b\u578b\u9700\u8981\u4fee\u6539\uff0c\u53ea\u8981\u4fee\u6539 typedef \u540e\u9762\u7684\u53d8\u91cf\u7c7b\u578b\u5373\u53ef\uff0c\u5916\u90e8\u7c7b\u578b\u5c31\u4e0d\u9700\u8981\u624b\u52a8\u4fee\u6539\u4e86</li> </ul> <pre><code>    parameter WIDTH = 64;\n    parameter LEN   = 4;\n\n    typedef logic [WIDTH-1:0] data_t;\n    typedef logic [WIDTH*2-1:0] result_t;\n</code></pre> <p>typedef \u91cd\u5b9a\u4e49\u7c7b\u578b\u90fd\u662f logic \u7c7b\u578b\u7684\uff0c\u800c\u4e0d\u662f wire \u6216\u8005 reg\u3002logic \u7c7b\u578b\u4f1a\u6839\u636e\u81ea\u5df1\u88ab\u4f7f\u7528\u7684\u73af\u5883\u9009\u62e9\u88ab\u8f6c\u6362\u4e3a wire \u5b9e\u73b0\u8fd8\u662f reg \u5b9e\u73b0\uff0c\u56e0\u6b64 logic \u672c\u8eab\u65e2\u53ef\u4ee5\u4f5c\u4e3a wire \u4f7f\u7528\u4e5f\u53ef\u4ee5\u4f5c\u4e3a reg \u4f7f\u7528\u3002</p>"},{"location":"lab4-1-appendix/#struct","title":"struct","text":"<p>\u6211\u4eec\u53c2\u8003\u4e0b\u9762\u8fd9\u6bb5\u4ee3\u7801\u3002\u6211\u4eec\u7684 ConvOperator \u6a21\u5757\u5c06 4 \u4e2a 64 \u4f4d\u7684 kernel \u6570\u636e\u548c 4 \u4e2a 64 \u4f4d\u7684 data \u6570\u636e\u505a\u5377\u79ef\u8fd0\u7b97\u3002\u56e0\u4e3a\u6a21\u5757\u7684\u8f93\u5165\u7aef\u53e3\u4e0d\u652f\u6301\u4e8c\u7ef4\u6570\u636e\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5728 ConvOperator \u7684\u8f93\u5165\u8f93\u51fa\u4e2d\u63d0\u4f9b 8 \u4e2a\u6570\u636e\u7684\u8f93\u5165\u3002\u4e3a ConvOperator \u63d0\u4f9b\u8f93\u5165\u7684\u6a21\u5757\u4e5f\u8981\u5bf9\u5e94\u7684\u63d0\u4f9b 8 \u4e2a\u6570\u636e\u8f93\u51fa\uff0c\u4e3a\u4e86\u4f20\u9012\u8fd9\u4e00\u5927\u7ec4\u6570\u636e\u65e2\u662f\u7e41\u7410\u7684\uff0c\u53c8\u5bb9\u6613\u56e0\u4e3a\u5199\u6f0f\u5199\u9519\u800c\u53d1\u751f error\u3002\u5982\u679c\u6211\u4eec\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u6570\u636e\u6253\u5305\u6210\u4e00\u4e2a\u6574\u4f53\u8fdb\u884c\u4f20\u8f93\uff0c\u5c31\u53ef\u4ee5\u5f88\u597d\u7684\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\u3002</p> <pre><code>module ConvOperator(\n    input clk,\n    input rst,\n    input [63:0] kernel_0,\n    input [63:0] kernel_1,\n    input [63:0] kernel_2,\n    input [63:0] kernel_3,\n    input [63:0] data_0,\n    input [63:0] data_1,\n    input [63:0] data_2,\n    input [63:0] data_3,\n    input in_valid,\n    output reg in_ready,\n\n    ...\n</code></pre> <p>SystemVerilog \u501f\u9274 C \u8bed\u8a00\u7684 struct \u8bed\u6cd5\u63d0\u4f9b\u4e86\u81ea\u5df1\u7684 struct \u8bed\u6cd5\uff0c\u4f8b\u5982\u6211\u4eec\u53ef\u4ee5\u5c06\u5377\u79ef\u6838\u548c\u6570\u636e\u6253\u5305\u4e3a data_vector \u7ed3\u6784\u3002\u8fd9\u91cc\u6211\u4eec\u5b9a\u4e49\u4e86\u7ed3\u6784\u7684\u5185\u5bb9\u662f<code>data_t data [LEN-1:0]</code>\uff0c\u662f\u4e00\u4e2a data_t \u6570\u7ec4\u3002</p> <pre><code>    parameter WIDTH = 64;\n    parameter LEN   = 4;\n\n    typedef logic [WIDTH-1:0] data_t;\n    typedef logic [WIDTH*2-1:0] result_t;\n\n    typedef struct{\n        data_t data [LEN-1:0];\n    } data_vector;\n</code></pre> <p>\u4e8e\u662f\u5f53\u6211\u4eec\u5728 ConvOperator \u8f93\u5165\u8f93\u51fa kernel \u548c data \u7684\u65f6\u5019\u5c31\u53ef\u4ee5\u5c06 kernel \u548c data \u6253\u5305\u4e3a data_vector \u6570\u636e\u7c7b\u578b\uff0c\u4e8e\u662f\u5176\u8f93\u5165\u8f93\u51fa\u53ef\u4ee5\u4fee\u6539\u4e3a\u5982\u4e0b\u5f62\u5f0f\uff0c\u7aef\u53e3\u7684\u8bed\u6cd5\u662f<code>input/output struct\u7c7b\u578b \u7aef\u53e3\u540d</code>\u3002</p> <ul> <li>\u4f7f\u7528\u7ed3\u6784\u53ef\u4ee5\u5728\u6570\u636e\u4f20\u8f93\u7684\u65f6\u5019\u51cf\u5c11\u7aef\u53e3\u58f0\u660e\u548c\u7aef\u53e3\u8d4b\u503c\u7684\u4ee3\u7801\u91cf\uff0c\u8fd8\u53ef\u4ee5\u9632\u6b62\u8fde\u7ebf\u9519\u8bef</li> <li>\u901a\u8fc7\u4fee\u6539 LEN \u53d8\u91cf\u7684\u5927\u5c0f\u5c31\u53ef\u4ee5\u4fee\u6539\u4f20\u5165\u6a21\u5757\u7684\u5411\u91cf\u53d8\u91cf\u4e2a\u6570\uff0c\u800c\u65e0\u9700\u624b\u52a8\u4fee\u6539\u7aef\u53e3</li> <li>\u4fee\u6539 struct \u7684\u5b9a\u4e49\u5c31\u53ef\u4ee5\u4fee\u6539\u8f93\u5165\u8f93\u51fa\u7684\u5b50\u6210\u5458\u5185\u5bb9\uff0c\u800c\u4e0d\u9700\u8981\u4fee\u6539\u63a5\u53e3\u548c\u63a5\u53e3\u8fde\u63a5</li> </ul> <pre><code>module ConvOperator(\n    input clk,\n    input rst,\n    input data_vector kernel,\n    input data_vector data,\n    input in_valid,\n    output reg in_ready,\n\n    ...\n</code></pre> <p>\u4e4b\u540e\u6a21\u5757\u8f93\u5165\u8f93\u51fa\u7684\u7ed3\u6784\u7aef\u53e3\u53ef\u4ee5\u76f4\u63a5\u7528\u7ed3\u6784\u53d8\u91cf\u8fdb\u884c\u8fde\u63a5\uff0c\u6570\u636e\u53ef\u4ee5\u4e00\u6b65\u5230\u4f4d\uff0c\u800c\u4e0d\u9700\u8981\u5206\u522b\u8fde\u63a5\u5404\u4e2a\u5b50\u90e8\u4efd\u3002</p> <pre><code>module m0(\n    ...\n    output data_vector data // \u7ed3\u6784\u4f5c\u4e3a\u8f93\u51fa\n);\n\nmodule m1(\n    ...\n    input data_vector data  // \u7ed3\u6784\u4f5c\u4e3a\u8f93\u5165\n);\nmodule m3;\n    data_vector data;\n    m0 m0_0(\n        ...\n        .data(data)\n    );\n    m1 m1_0(\n        ...\n        .data(data)\n    );                      // \u6a21\u5757\u95f4\u7ed3\u6784\u4f20\u9012\nendmodule\n</code></pre> <p>\u7ed3\u6784\u7684\u6210\u5458\u53ef\u4ee5\u662f logic\uff0c\u53ef\u4ee5\u662f logic \u5411\u91cf\uff0c\u53ef\u4ee5\u662f logic \u9ad8\u7ef4\u6570\u7ec4\uff0c\u53ef\u4ee5\u662f\u5176\u4ed6\u7ed3\u6784\u3001\u679a\u4e3e\u3002\u6570\u636e\u7684\u7ec4\u5408\u975e\u5e38\u7684\u81ea\u7531\u3002\u53ef\u4ee5\u7528\u5982\u4e0b\u8bed\u6cd5\u5b9a\u4e49\u7ed3\u6784\u3001\u7ed3\u6784\u6570\u7ec4\u3001\u7ed3\u6784\u9ad8\u7ef4\u6570\u7ec4\u7b49\u3002</p> <pre><code>    typedef struct {\n        logic a;                // logic\n        logic [3:0] b;          // logic \u5411\u91cf\n        logic [3:0] c [3:0];    // logic \u9ad8\u7ef4\u6570\u7ec4\n        fsm_state state;        // \u679a\u4e3e\n        data_vector data;       // \u7ed3\u6784\n    } s0;\n\n    s0 s1;                      // \u7ed3\u6784\u53d8\u91cf\n    s0 s2 [3:0];                // \u7ed3\u6784\u6570\u7ec4\n    s0 s3 [3:0][3:0];           // \u7ed3\u6784\u9ad8\u7ef4\u6570\u7ec4\n</code></pre> <p>\u7ed3\u6784\u53d8\u91cf\u4e4b\u95f4\u53ef\u4ee5\u76f4\u63a5\u8d4b\u503c\uff0c\u53ef\u4ee5\u7528<code>.</code>\u8fd0\u7b97\u7b26\u8bbf\u95ee\u7ed3\u6784\u7684\u6210\u5458\u53d8\u91cf\uff0c\u7136\u540e\u5bf9\u6210\u5458\u53d8\u91cf\u8d4b\u503c\u6216\u8005\u7ed9\u5176\u4ed6\u6210\u5458\u8d4b\u503c\u3002</p> <p>\u4e5f\u53ef\u4ee5\u7528<code>'{key1:value1, ... ,keyN:valueN}</code>\u76f4\u63a5\u7ed9\u7ed3\u6784\u7684\u6240\u6709\u6210\u5458\u53d8\u91cf\u5bf9\u5e94\u8d4b\u503c\u3002</p> <p>\u7ed3\u6784\u53ef\u4ee5\u7528<code>?:</code>\u8fdb\u884c\u9009\u62e9</p> <pre><code>    typedef struct{\n        logic a;\n        logic [3:0] b;\n    } s0;\n    s0 s1,s2,s3,s4;\n    logic a1,a2;\n    logic [3:0] b1;\n\n    assign s1 = s2;     // \u7ed3\u6784\u76f4\u63a5\u8d4b\u503c\n    assign s2.a = a1;   // \u7ed3\u6784\u6210\u5458\u8d4b\u503c\n    assign s2.b = b1;\n    assign a2 = s1.a;   // \u7528\u7ed3\u6784\u6210\u5458\u7ed9\u5176\u4ed6\u53d8\u91cf\u8d4b\u503c\n    assign s3 = '{a:a1, b:b1};  // \u5bf9\u6240\u6709\u7ed3\u6784\u6210\u5458\u4f9d\u6b21\u8d4b\u503c\n\n    assign s4 = a1?s1:s2;   // \u7ed3\u6784\u7684\u9009\u62e9 \n</code></pre>"},{"location":"lab4-1-appendix/#package","title":"package","text":"<p>\u5982\u679c\u6211\u4eec\u9700\u8981\u4f7f\u7528 data_vector \u7ed3\u6784\uff0c\u5c31\u8981\u9996\u5148\u5b9a\u4e49 data_vector \u7ed3\u6784\u3002\u4f46\u662f\u5982\u679c struct \u53ea\u80fd\u5b9a\u4e49\u5728 module \u4e2d\uff0c\u6211\u4eec\u600e\u4e48\u624d\u80fd\u8ba9 module \u7684\u8f93\u5165\u8f93\u51fa\u7aef\u53e3\u4e5f\u4f7f\u7528 data_vector \u7ed3\u6784\uff1f\u600e\u4e48\u624d\u80fd\u8ba9\u4e0d\u540c\u6a21\u5757\u4f7f\u7528\u76f8\u540c\u7684 data_vector \u7ed3\u6784\u5462\uff1f</p> <p>SystemVerilog \u63d0\u4f9b\u4e86 package\uff0c\u6211\u4eec\u53ef\u4ee5\u5728 package \u4e2d\u5b9a\u4e49\u5404\u79cd\u9700\u8981\u7684\u53c2\u6570 parameter\u3001\u7c7b\u578b type\u3001\u7ed3\u6784 struct\u3001\u679a\u4e3e enum\u3001\u51fd\u6570 function \u7b49\u3002\u4f8b\u5982\u6211\u4eec\u5728<code>sys-project/lab4-1/include/conv_struct.vh</code>\u7528<code>package \u5305\u540d; ... endpackage</code>\u5b9a\u4e49\u4e86 Conv \u5305\uff0c\u7136\u540e\u5728\u5305\u4e2d\u5b9a\u4e49\u4e86\u53c2\u6570 WIDTH\u3001LEN\uff0c\u7c7b\u578b data_t\u3001result_t\uff0c\u7ed3\u6784 data_vector\u3002</p> <pre><code>package Conv;\n    parameter WIDTH = 64;\n    parameter LEN   = 4;\n\n    typedef logic [WIDTH-1:0] data_t;\n    typedef logic [WIDTH*2-1:0] result_t;\n\n    typedef struct{\n        data_t data [LEN-1:0];\n    } data_vector;\n\nendpackage\n</code></pre> <p>\u6211\u4eec\u5728\u5176\u4ed6\u6a21\u5757\u4e2d\u5c31\u53ef\u4ee5\u4f7f\u7528 Conv \u5b9a\u4e49\u7684\u53c2\u6570\u3001\u7c7b\u578b\u3001\u679a\u4e3e\u3001\u7ed3\u6784\u3001\u51fd\u6570\uff0c\u4f8b\u5982<code>Conv::data_t</code>\u5c31\u662f Conv \u4e2d\u5b9a\u4e49\u7684 data_t \u53d8\u91cf\uff0c<code>Conv::data_vector</code>\u5c31\u662f Conv \u4e2d\u5b9a\u4e49\u7684 data_vector \u7ed3\u6784\u3002</p> <pre><code>module ConvOperator(\n    input clk,\n    input rst,\n    input Conv::data_vector kernel,\n    input Conv::data_vector data,\n    input in_valid,\n    output reg in_ready,\n\n    output Conv::result_t result,\n    output reg out_valid,\n    input out_ready\n);\n</code></pre> <p>\u5728\u6a21\u5757\u5185\u90e8\u5982\u679c\u4e0d\u5e0c\u671b\u53cd\u590d\u4f7f\u7528<code>Conv::</code>\u6765\u6307\u793a Conv \u5305\u5185\u90e8\u7684\u53d8\u91cf\u540d\uff0c\u53ef\u4ee5\u4f7f\u7528\u8bed\u53e5<code>import Conv::result_t</code>\uff0c\u5c06\u547d\u540d result_t \u5f15\u5165\u8be5\u6a21\u5757\u7684\u547d\u540d\u7a7a\u95f4\uff0c\u5219\u4e4b\u540e\u5728\u6a21\u5757\u4e2d\u4f7f\u7528 result_t \u5c31\u662f\u5728\u4f7f\u7528 Conv \u7684 result_t\uff0c\u800c\u4e0d\u9700\u8981\u989d\u5916\u7684<code>Conv::</code>\u4fee\u9970\u4e86\u3002\u5982\u679c\u5e0c\u671b\u5f15\u5165 Conv \u5185\u90e8\u7684\u6240\u6709\u5b9a\u4e49\uff0c\u53ef\u4ee5\u4f7f\u7528<code>import Conv::*</code>\u6765\u5b9e\u73b0\u3002</p> <p>\u7406\u8bba\u4e0a\u53ea\u8981\u6211\u4eec\u5c06 Conv \u5305\u52a0\u5165\u5de5\u7a0b\u5c31\u53ef\u4ee5\u5f15\u7528 Conv \u5305\u5b9a\u4e49\u7684\u5185\u5bb9\uff0c\u4f46\u662f\u5728\u5b9e\u9645\u7efc\u5408\u6216\u8005\u4eff\u771f\u7684\u65f6\u5019\uff0c\u7f16\u8bd1\u5668\u5bf9\u6587\u4ef6\u662f\u9010\u4e2a\u89e3\u6790\u7684\uff0c\u5982\u679c\u5148\u89e3\u6790\u4f7f\u7528 Conv \u5185\u5bb9\u7684\u6a21\u5757\u6587\u4ef6\uff0c\u5728\u89e3\u6790 Conv \u5305\u6587\u4ef6\u5c31\u4f1a\u51fa\u73b0 Conv \u5185\u5bb9\u627e\u4e0d\u5230\u7684\u62a5\u9519\u3002\u5982\u679c\u8fd0\u6c14\u597d\uff0cConv \u5305\u88ab\u7387\u5148\u7f16\u8bd1\u5c31\u4e0d\u4f1a\u6709\u8fd9\u6837\u7684\u95ee\u9898\uff0c\u4f46\u4e0d\u662f\u6bcf\u6b21\u90fd\u80fd\u8fd9\u6837\u7684\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5c06 package \u505a\u5982\u4e0b\u7684\u4fdd\u62a4\uff0c\u7136\u540e\u8ba9\u9700\u8981\u4f7f\u7528\u8fd9\u4e2a\u5305\u7684\u6587\u4ef6 include \u8fd9\u4e2a\u5305\u3002\u8fd9\u6837\u5f53\u7b2c\u4e00\u4e2a\u4f7f\u7528 Conv \u5305\u7684\u6a21\u5757\u88ab\u89e3\u6790\u7684\u65f6\u5019\uff0cConv \u5305\u7684\u6570\u636e\u4f1a\u88ab\u63d2\u5165\u5230\u6587\u4ef6\u5f00\u5934\uff0c\u786e\u4fdd Conv \u5305\u88ab\u4e8b\u5148\u5b9a\u4e49\uff1b\u5f53\u4e4b\u540e\u4f7f\u7528 Conv \u5305\u7684\u6a21\u5757\u88ab\u89e3\u6790\u7684\u65f6\u5019\uff0c\u56e0\u4e3a<code>__CONV_STRUCT__</code>\u5df2\u7ecf\u88ab\u5b9a\u4e49\uff0c\u6240\u4ee5\u4e4b\u540e\u4e0d\u4f1a\u518d\u63d2\u5165 Conv \u5305\uff0c\u9632\u6b62\u91cd\u590d\u5b9a\u4e49\uff0c\u4ee5\u6b64\u89e3\u51b3\u4e0a\u8ff0\u7684\u95ee\u9898\u3002 <pre><code>`ifndef __CONV_STRUCT__\n`define __CONV_STRUCT__\npackage Conv;\n    ...\nendpackage\n`endif\n...\n\n`include\"conv_struct.vh\"\nmodule ConvOperator(\n    ...\n</code></pre></p> <p>\u6211\u4eec\u7684 lab4-1 \u6240\u7528\u7684\u6240\u6709\u53c2\u6570\u90fd\u5728 Conv \u5305\u4e2d\uff0c\u5176\u4ed6\u6a21\u5757\u53ea\u8981\u4f7f\u7528 Conv \u5305\u4e2d\u7684\u53c2\u6570\u5373\u53ef\u4fdd\u8bc1\u6240\u6709\u7684\u6a21\u5757\u4f7f\u7528\u7edf\u4e00\u7684\u53c2\u6570\uff0c\u800c\u4e0d\u662f\u548c\u539f\u6765\u4e00\u6837\u4ece\u9876\u5c42\u7edf\u4e00\u663e\u5f0f\u4f20\u9012\u53c2\u6570\u3002</p>"},{"location":"lab4-1-appendix/#queue","title":"queue","text":"<p>queue \u8bed\u6cd5\u4ec5\u7528\u4e8e\u4eff\u771f\uff0c\u8bf7\u4e0d\u8981\u7528\u5b83\u5b9e\u73b0\u7535\u8def\u3002\u6211\u4eec\u5728\u4eff\u771f\u7684\u65f6\u5019\u9700\u8981\u4e00\u4e9b\u5185\u7f6e\u7684\u57fa\u672c\u6570\u636e\u7ed3\u6784\u8f85\u52a9\uff0c\u4f8b\u5982\u53ef\u4ee5\u7528 queue \u5b9e\u73b0\u961f\u5217\uff0c\u6211\u4eec lab4-1 \u7684 Judge \u5bf9\u62cd\u5668\u5c31\u662f\u7528\u4e86 SystemVerilog \u81ea\u5e26\u7684 queue\u3002</p> <p>\u53ef\u4ee5\u7528<code>\u6570\u636e\u7c7b\u578b \u53d8\u91cf\u540d[$]</code>\u7684\u65b9\u5f0f\u58f0\u660e\u4e00\u4e2a\u961f\u5217\uff0c\u961f\u5217\u7684\u6bcf\u4e00\u9879\u6570\u636e\u7c7b\u578b\u4e8b\u5148\u5b9a\u4e49\u3002\u4f8b\u5982\u7b2c\u4e00\u884c\u5b9a\u4e49\u4e86\u6570\u636e\u7c7b\u578b\u662f 4 \u4f4d\u5411\u91cf\u7684\u7a7a\u961f\u5217 myQueue\uff0c\u7b2c\u4e8c\u884c\u5b9a\u4e49\u4e86\u6570\u636e\u7c7b\u578b\u662f data_t \u7684\u961f\u5217 dataQueue\uff0c\u4e14\u961f\u5217\u957f\u5ea6\u4e3a 4\uff0c\u5206\u522b\u662f 0\u3002 <pre><code>    logic [3:0] myQueue[$]; \n    Conv::data_t dataQueue[$] = {0,0,0,0};\n</code></pre></p> <p>\u53ef\u4ee5\u7528 push_front\u3001push_back\u3001pop_front\u3001pop_back \u65b9\u6cd5\u5206\u522b\u5bf9\u961f\u5217\u5728\u961f\u5217\u5f00\u5934\u63d2\u5165\u4e00\u4e2a\u503c\u3001\u5728\u961f\u5217\u7ed3\u5c3e\u63d2\u5165\u4e00\u4e2a\u503c\uff0c\u5728\u961f\u5217\u524d\u5934\u5f39\u51fa\u4e00\u4e2a\u503c\u3001\u5728\u961f\u5217\u672b\u5c3e\u5f39\u51fa\u4e00\u4e2a\u503c\u3002\u5982\u5982\u56fe\uff0c\u5f53\u65f6\u949f\u4e0a\u5347\u6cbf\u89e6\u53d1\uff0c\u7136\u540e\u8f93\u5165\u63e1\u624b\u6210\u7acb\uff0c\u5c31\u7528 push_back \u540e\u63d2\u5165\u4e00\u4e2a\u6570\u636e\uff0cpop_front \u524d\u5f39\u4e00\u4e2a\u6570\u636e\u3002\u6b64\u5916\u53ef\u4ee5\u7528<code>dataQueue[i]</code>\u7d22\u5f15\u961f\u5217\u7684\u7b2c i \u4e2a\u6570\u636e\u3002</p> <pre><code>    Conv::data_t dataQueue[$] = {0,0,0,0};\n    logic request;\n    always_ff@(posedge clk)begin\n        if(in_valid &amp; in_ready)begin\n            request &lt;= 1'b1;\n            dataQueue.push_back(in_data);\n            dataQueue.pop_front();\n        end else begin\n            request &lt;= 1'b0;\n        end\n    end\n</code></pre> <p>Judge \u7528\u961f\u5217\u6a21\u62df\u7b80\u5355\u7684\u79fb\u4f4d\u5bc4\u5b58\u5668\uff0c\u4f46\u662f\u5728\u786c\u4ef6\u8bbe\u8ba1\u7684\u65f6\u5019\u4ed6\u5e76\u4e0d\u80fd\u4ee3\u66ff\u771f\u5b9e\u7684\u961f\u5217\u3002</p>"},{"location":"lab4-1-appendix/#interface","title":"interface \u8bed\u6cd5","text":"<p>\u4e24\u4e2a\u6a21\u5757\u4e4b\u95f4\uff0c\u6709\u65f6\u4e0d\u53ef\u907f\u514d\u7684\u4f1a\u6709\u5927\u91cf\u7684\u4ea4\u4e92\u4fe1\u53f7\u3002\u6211\u4eec\u5728 lab4-1 \u4e2d\u4ecb\u7ecd\u4e86 <code>struct</code> \u8bed\u6cd5\u53ef\u4ee5\u5c06\u4e00\u7ec4\u4fe1\u53f7\u6253\u5305\u4e3a\u4e00\u4e2a <code>struct</code> \u4fe1\u53f7\uff0c\u4fbf\u4e8e\u7f16\u7a0b\u3002\u4f46\u662f\u4e00\u4e2a <code>struct</code> \u7ed3\u6784\u4e2d\u7684\u4fe1\u53f7\u53ea\u80fd\u540c\u65f6\u4f5c\u4e3a\u4e00\u4e2a\u6a21\u5757\u7684\u8f93\u5165\u548c\u8f93\u51fa\uff0c\u5982\u679c\u8fd9\u4e9b\u4fe1\u53f7\u65e2\u6709\u8f93\u5165\u3001\u53c8\u6709\u8f93\u51fa\uff0c\u5219 <code>struct</code> \u5c31\u4e0d\u592a\u9002\u7528\u4e86\uff0c\u4f8b\u5982\u4e0b\u56fe\u7684\u4fe1\u53f7\u3002</p> <p> </p> <p>\u8fd9\u4e2a\u65f6\u5019\u53ef\u4ee5\u8003\u8651\u5c06\u6240\u6709\u7684\u8f93\u5165\u6253\u5305\u4e3a <code>struct</code>\u3001\u6240\u6709\u7684\u8f93\u51fa\u6253\u5305\u4e3a <code>struct</code>\uff0c\u4f46\u662f\u8fd9\u6837\u4f1a\u9020\u6210\u4e24\u4e2a\u95ee\u9898:</p> <ul> <li>\u8f93\u5165\u548c\u8f93\u51fa\u4f9d\u7136\u6709\u591a\u4e2a <code>struct</code>\uff0c\u8fd9\u6837\u5728\u8fde\u63a5\u7684\u65f6\u5019\u8fd8\u662f\u6bd4\u8f83\u9ebb\u70e6</li> <li><code>struct</code> \u662f\u4e3a\u4e86\u5c06\u76f8\u5173\u7684\u6570\u636e\u6253\u5305\u4e3a\u4e00\u4e2a\u6574\u4f53\uff0c\u4e0d\u76f8\u5173\u7684\u6570\u636e\u6253\u5305\u5728\u4e00\u8d77\u53cd\u800c\u4f1a\u4f7f\u5f97 <code>struct</code> \u5185\u5bb9\u7684\u8bed\u4e49\u66f4\u6df7\u4e71</li> </ul> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0cSystemVerilog \u63d0\u51fa\u4e86 <code>interface</code> \u8bed\u6cd5\uff0c\u89e3\u51b3\u8f93\u5165\u548c\u8f93\u51fa\u7684\u95ee\u9898\u3002\u4f8b\u5982\u4e0b\u9762\u8fd9\u4e2a\u7684\u63e1\u624b\u4fe1\u53f7\u5c31\u53ef\u4ee5\u6253\u5305\u4e3a <code>interface</code>\uff1a</p> <pre><code>interface Decoupled_ift #(\n    parameter DATA_WIDTH = 64\n);\n\n    typedef logic [DATA_WIDTH-1:0] data_t;\n    typedef logic ctrl_t;\n    data_t data;\n    ctrl_t valid;\n    ctrl_t ready;\n\n    modport Master(\n        output data,\n        output valid,\n        input ready\n    );\n\n    modport Slave(\n        input data,\n        input valid,\n        output ready\n    );\n\nendinterface\n</code></pre> <p>\u4f7f\u7528 <code>interface \u63a5\u53e3\u540d ... endinterface</code>\u5b9a\u4e49\u4e00\u4e2a <code>interface</code> \u5757\uff0c<code>interface</code> \u548c <code>module</code> \u4e00\u6837\u53ef\u4ee5\u6709\u53c2\u6570\u63a5\u53e3\u7528\u4e8e\u53c2\u6570\u914d\u7f6e\uff0c\u751a\u81f3 <code>interface</code> \u53ef\u4ee5\u6709\u8f93\u5165\u8f93\u51fa\u63a5\u53e3\u8fdb\u884c\u8f93\u5165\u8f93\u51fa\u53c2\u6570\u7684\u4f7f\u7528\u3002</p> <pre><code>interface Decoupled_ift #(\n    parameter DATA_WIDTH = 64\n);\n    ...\nendinterface\n</code></pre> <p>\u5728 <code>interface</code> \u7c7b\u4f3c\u4e8e <code>module</code> \u5185\u90e8\u53ef\u4ee5\u5b9a\u4e49\u9700\u8981\u7684 <code>parameter</code>\u3001<code>typedef</code>\u3001<code>struct</code>\u3001<code>logic</code> \u53d8\u91cf\uff0c\u5e76\u4e14\u8fd9\u4e9b\u53d8\u91cf\u53ef\u4ee5\u505a\u5404\u79cd\u8fde\u63a5\u3001\u8fd0\u7b97\u3001\u5b9e\u4f8b\u5316\u6a21\u5757\u7b49\u7b49\u3002\u6240\u4ee5\u5230\u76ee\u524d\u4e3a\u6b62 <code>interface</code> \u548c\u4e00\u4e2a\u666e\u901a\u7684 <code>module</code> \u4e4b\u95f4\u4e0d\u5b58\u5728\u4ec0\u4e48\u672c\u8d28\u7684\u533a\u522b\u3002</p> <pre><code>    typedef logic [DATA_WIDTH-1:0] data_t;\n    typedef logic ctrl_t;\n    data_t data;\n    ctrl_t valid;\n    ctrl_t ready;\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u5b9e\u4f8b\u5316\u4e00\u4e2a <code>interface</code> \u5bf9\u8c61\uff0c\u53ef\u4ee5\u770b\u5230\u5f62\u5f0f\u548c <code>module</code> \u5982\u51fa\u4e00\u8f99\uff0c\u4e00\u6837\u53ef\u4ee5\u4f20\u9012\u53c2\u6570\u548c\u8bbe\u7f6e\u8f93\u5165\u8f93\u51fa\u63a5\u53e3\u3002\u4e0d\u540c\u7684\u5730\u65b9\u5728\u4e8e\uff0c<code>module</code> \u5185\u90e8\u7684\u6570\u636e\u662f\u6ca1\u6709\u529e\u6cd5\u8bbf\u95ee\u7684\uff0c\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u7528<code>.</code>\u7b26\u53f7\u4efb\u610f\u5730\u8bbf\u95ee <code>interface</code> \u5185\u90e8\u7684\u53c2\u6570\u3001\u53d8\u91cf\uff0c\u8fd9\u4e2a\u53d8\u91cf\u53ef\u4ee5\u7ed9\u4efb\u610f\u5916\u90e8\u53d8\u91cf\u8d4b\u503c\uff0c\u5982\u679c\u8fd9\u4e2a\u53d8\u91cf\u6ca1\u6709\u5728 <code>interface</code> \u5185\u90e8\u88ab\u590d\u5236\uff0c\u5c31\u53ef\u4ee5\u5728\u5916\u90e8\u88ab\u8d4b\u503c\u3002</p> <pre><code>    Decoupled_ift #(\n        .DATA_WIDTH(64)\n    ) data (\n\n    );\n\n    assign a = data.data;       // \u83b7\u5f97 interface \u5185\u90e8\u53d8\u91cf\u7684\u503c\n    assign data.valid = 1'b1;   // \u7ed9 interface \u5185\u90e8\u53d8\u91cf\u8d4b\u503c\n    assign c = data.DATA_WIDTH; // \u83b7\u5f97 interface \u5185\u90e8\u53c2\u6570\u7684\u503c\n</code></pre> <p>\u4f46\u6700\u91cd\u8981\u7684\u662f <code>interface</code> \u53ef\u4ee5\u63d0\u4f9b <code>modport</code> \u7ed3\u6784\uff0c\u5b83\u53ef\u4ee5\u5c06\u5185\u90e8\u6570\u636e\u7ec4\u5408\u4e3a\u4e00\u7ec4\u7279\u5b9a\u7684\u8f93\u5165\u8f93\u51fa\u7aef\u53e3\u3002\u4f8b\u5982 <code>Decoupled_ift</code> \u4e2d\u8bbe\u7f6e\u4e86 <code>Master</code> \u548c <code>Slave</code> \u4e24\u7ec4\u7aef\u53e3\uff0c\u5982\u679c\u4e00\u4e2a\u6a21\u5757\u7684\u8f93\u5165\u8f93\u51fa\u5e94\u7528\u4e86 <code>Master</code> \u7aef\u53e3\uff0c\u5b83\u5c31\u76f8\u5f53\u4e8e\u6709\u4e86 <code>output data</code>\u3001<code>output valid</code>\u3001<code>input ready</code> \u4e09\u4e2a\u7aef\u53e3\uff0c\u4f7f\u7528 <code>Slave</code> \u540c\u7406\u3002</p> <pre><code>    modport Master(\n        output data,\n        output valid,\n        input ready\n    );\n\n    modport Slave(\n        input data,\n        input valid,\n        output ready\n    );\n</code></pre> <p>\u8fd9\u6837\u4e00\u7ec4\u63e1\u624b\u4fe1\u606f\u7684 <code>module</code> \u8f93\u5165\u8f93\u51fa\u58f0\u660e\u5c31\u53ef\u4ee5\u4ece\u4e09\u4e2a\u79bb\u6563\u4fe1\u53f7\uff0c\u53d8\u6210\u4e00\u4e2a\u6253\u5305\u7684 <code>interface modport</code>\uff1a</p> <pre><code>module A #(\n    parameter DATA_WIDTH = 64   \n)(\n    input [DATA_WIDTH-1:0] data,\n    input valid,\n    output ready\n);\n\n...\n\nendmodule\n\n// \u4f7f\u7528 interface \u548c modport\n\nmodule A #(\n    parameter DATA_WIDTH = 64   \n)(\n    Decoupled_ift.Master data\n);\n</code></pre> <p>\u6a21\u5757\u7684 <code>modport</code> \u5f15\u811a\u4e5f\u53ef\u4ee5\u7528 <code>interface</code> \u7684 <code>modport</code> \u76f4\u63a5\u5bf9\u5e94\u8fde\u63a5\uff0c\u800c\u6ca1\u6709\u5fc5\u8981\u4e00\u4e2a\u4e00\u4e2a\u9010\u4e00\u8fde\u63a5\u3002</p> <pre><code>    A #(\n        .DATA_WIDTH(64)\n    ) a (\n        .data(data),\n        .valid(valid),\n        .ready(ready)\n    );\n\n    // \u4f7f\u7528 interface \u548c modport\n\n    A #(\n        .DATA_WIDTH(64)\n    ) a (\n        .data(data.Master)\n    );\n</code></pre>"},{"location":"lab4-1/","title":"\u5b9e\u9a8c4-1: \u5377\u79ef\u6a21\u5757","text":""},{"location":"lab4-1/#_1","title":"\u5b9e\u9a8c\u76ee\u7684","text":"<ul> <li>\u5b66\u4e60\u4f7f\u7528 SystemVerilog \u7684 struct\u3001package \u7b49\u9ad8\u7ea7\u8bed\u6cd5</li> <li>\u5b66\u4e60\u638c\u63e1\u5377\u79ef\u64cd\u4f5c\u7684\u8bbe\u8ba1\u548c\u5b9e\u73b0</li> <li>\u5b66\u4e60 valid-ready \u7684\u63e1\u624b\u534f\u8bae</li> </ul>"},{"location":"lab4-1/#_2","title":"\u5b9e\u9a8c\u73af\u5883","text":"<ul> <li>\u64cd\u4f5c\u7cfb\u7edf\uff1aWindows 10+ 22H2\uff0cUbuntu 22.04+</li> <li>VHDL\uff1aVerilog\uff0cSystemVerilog</li> </ul>"},{"location":"lab4-1/#_3","title":"\u80cc\u666f\u77e5\u8bc6","text":""},{"location":"lab4-1/#_4","title":"\u5377\u79ef\u64cd\u4f5c","text":""},{"location":"lab4-1/#_5","title":"\u57fa\u672c\u6982\u5ff5","text":"<p>\u5728\u6cdb\u51fd\u5206\u6790\u4e2d\uff0c\u5377\u79ef\u3001\u65cb\u79ef\u6216\u8936\u79ef\uff08\u82f1\u8bed\uff1aConvolution\uff09\u662f\u901a\u8fc7\u4e24\u4e2a\u51fd\u6570 f \u548c g \u751f\u6210\u7b2c\u4e09\u4e2a\u51fd\u6570\u7684\u4e00\u79cd\u6570\u5b66\u8fd0\u7b97\uff0c\u5176\u672c\u8d28\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u79ef\u5206\u53d8\u6362\uff0c\u8868\u5f81\u51fd\u6570 f \u4e0e g \u7ecf\u8fc7\u7ffb\u8f6c\u548c\u5e73\u79fb\u7684\u91cd\u53e0\u90e8\u5206\u51fd\u6570\u503c\u4e58\u79ef\u5bf9\u91cd\u53e0\u957f\u5ea6\u7684\u79ef\u5206\u3002</p> <p>\u6211\u4eec\u5df2\u7ecf\u5b9e\u73b0\u4e86\u52a0\u6cd5\u548c\u4e58\u6cd5\u7684\u8fd0\u7b97\uff0c\u4ed6\u4eec\u662f\u5377\u79ef\u8fd0\u7b97\u7684\u57fa\u7840\u3002</p> <p>\u9996\u5148\uff0c\u6211\u4eec\u5b66\u4e60\u4e00\u4e0b\u5377\u79ef\u76f8\u5173\u7684\u57fa\u672c\u6982\u5ff5\uff0c\u5b9a\u4e49\u4e00\u4e2a\u5377\u79ef\u5c42\u9700\u8981\u7684\u51e0\u4e2a\u53c2\u6570\u3002</p> <ul> <li>\u5377\u79ef\u6838\u5927\u5c0f\uff08Kernel Size\uff09\uff1a\u5377\u79ef\u6838\u5927\u5c0f\u5b9a\u4e49\u4e86\u5377\u79ef\u7684\u89c6\u91ce\u30022 \u7ef4\u4e2d\u7684\u5e38\u89c1\u9009\u62e9\u662f 3 - \u5373 3x3 \u50cf\u7d20\u77e9\u9635\u3002</li> <li>\u6b65\u957f\uff08Stride\uff09\uff1a\u6b65\u957f\u5b9a\u4e49\u904d\u5386\u56fe\u50cf\u65f6\u5377\u79ef\u6838\u7684\u79fb\u52a8\u7684\u6b65\u957f\u3002\u867d\u7136\u5b83\u7684\u9ed8\u8ba4\u503c\u901a\u5e38\u4e3a 1\uff0c\u4f46\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u503c\u4e3a 2 \u7684\u6b65\u957f\u6765\u5bf9\u7c7b\u4f3c\u4e8e MaxPooling \u7684\u56fe\u50cf\u8fdb\u884c\u4e0b\u91c7\u6837\u3002</li> <li>\u586b\u5145\uff08Padding\uff09\uff1a\u586b\u5145\u5b9a\u4e49\u5982\u4f55\u5904\u7406\u6837\u672c\u7684\u8fb9\u754c\u3002Padding \u7684\u76ee\u7684\u662f\u4fdd\u6301\u5377\u79ef\u64cd\u4f5c\u7684\u8f93\u51fa\u5c3a\u5bf8\u7b49\u4e8e\u8f93\u5165\u5c3a\u5bf8\uff0c\u56e0\u4e3a\u5982\u679c\u5377\u79ef\u6838\u5927\u4e8e 1\uff0c\u5219\u4e0d\u52a0 Padding \u4f1a\u5bfc\u81f4\u5377\u79ef\u64cd\u4f5c\u7684\u8f93\u51fa\u5c3a\u5bf8\u5c0f\u4e8e\u8f93\u5165\u5c3a\u5bf8\u3002</li> <li>\u8f93\u5165\u548c\u8f93\u51fa\u901a\u9053\uff08Channels\uff09\uff1a\u5377\u79ef\u5c42\u901a\u5e38\u9700\u8981\u4e00\u5b9a\u6570\u91cf\u7684\u8f93\u5165\u901a\u9053\uff08I\uff09\uff0c\u5e76\u8ba1\u7b97\u4e00\u5b9a\u6570\u91cf\u7684\u8f93\u51fa\u901a\u9053\uff08O\uff09\u3002\u53ef\u4ee5\u901a\u8fc7 I * O * K \u6765\u8ba1\u7b97\u6240\u9700\u7684\u53c2\u6570\uff0c\u5176\u4e2d K \u7b49\u4e8e\u5377\u79ef\u6838\u4e2d\u53c2\u6570\u7684\u6570\u91cf\uff0c\u5373\u5377\u79ef\u6838\u5927\u5c0f\u3002</li> </ul> <p>\u611f\u5174\u8da3\u7684\u540c\u5b66\u53ef\u4ee5\u81ea\u884c\u5b66\u4e60\u5377\u79ef\u7684\u7ec6\u8282\u3002</p>"},{"location":"lab4-1/#_6","title":"\u4e00\u7ef4\u5377\u79ef","text":"<p>\u5bf9\u4e8e\u4e00\u7ef4\u7684\u60c5\u51b5\uff0c\u5047\u8bbe\u5377\u79ef\u6838\u957f\u4e3a \\(k\\)\uff0c\u5bf9\u5e94\u7684\u6743\u91cd\u5206\u522b\u662f \\([a_0, a_1, a_2, \\ldots, a_{k-1}]\\)\u3002\u8fd9\u91cc\u8981\u5904\u7406\u7684\u6570\u636e\u957f\u4e3a \\(m\\)\uff0c\u5bf9\u5e94\u7684\u503c\u5206\u522b\u662f \\([b_0, b_1, b_2, \\ldots, b_{m-1}]\\). \u90a3\u4e48\u5f97\u5230\u7684\u7ed3\u679c\u957f\u4e3a \\(m-k+1\\)\uff0c\u5bf9\u5e94\u7684\u503c\u5206\u522b\u662f \\([c_0, c_1, c_2, \\ldots, c_{m-k}]\\)\uff0c\u5176\u4e2d \\(c_i = a_0b_i + a_1b_{i+1} + a_2b_{i+2} + \\ldots + a_{k-1}b_{i+k-1}\\).</p> <p>\u5728\u672c\u5b9e\u9a8c\u4e2d\uff0c\u5047\u8bbe \\(m=k=4\\)\uff0c\u5373\u53ea\u9700\u8981\u8ba1\u7b97 \\(c_0=a_0b_0 + a_1b_1 + a_2b_2 + a_3b_3\\) \u5373\u53ef\u3002</p> <p>\u6211\u4eec\u4ee5\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\u4e00\u7ef4\u5377\u79ef\u548c\u5b9e\u9645\u5e94\u7528\uff0c\u5bf9\u4e0a\u9762\u7684\u5b66\u672f\u5b9a\u4e49\u52a0\u4ee5\u9610\u8ff0\u3002</p> \u4e00\u7ef4\u5377\u79ef <p>\u4f8b\u5982\u6211\u4eec\u6709\u4e00\u7ec4\u7535\u8def\u4f1a\u5bf9\u67d0\u4e2a\u6a21\u62df\u4fe1\u9053\u7684\u8f93\u5165\u8fdb\u884c\u79bb\u6563\u6570\u5b57\u7535\u8def\u7684\u91c7\u6837\uff0c\u5728\u4fe1\u9053\u7a33\u5b9a\u7684\u60c5\u51b5\u4e0b\u53ef\u4ee5\u5f97\u5230\u6570\u636e\u4fe1\u53f7<code>100, 105, 103, 102, 107</code>\u3002\u4f46\u662f\u56e0\u4e3a\u4fe1\u9053\u53d1\u751f\u4e86\u6270\u52a8\uff0c\u6700\u540e\u91c7\u6837\u5f97\u5230\u7684\u4fe1\u606f\u662f<code>100, 105, 130, 102, 107</code>\uff0c\u5b58\u5728\u660e\u663e\u7684\u5f02\u5e38\u503c\uff0c\u56e0\u6b64\u91c7\u6837\u7535\u8def\u9700\u8981\u4e00\u4e9b\u7b56\u7565\u6765\u51cf\u5c11\u5f02\u5e38\u503c\u7684\u5f71\u54cd\u3002</p> <p>\u8fd9\u91cc\u63d0\u51fa\u7684\u7b56\u7565\u662f\uff0c\u5c06\u91c7\u6837\u7684\u503c\u548c\u76f8\u90bb\u7684\u4e24\u4e2a\u6570\u636e\u53d6\u5e73\u5747\u4f5c\u4e3a\u6700\u540e\u7684\u91c7\u6837\u7ed3\u679c\u3002\u4f46\u662f\u5bf9\u4e8e\u7b2c\u4e00\u4e2a\u6570\u548c\u6700\u540e\u4e00\u4e2a\u6570\u7f3a\u5c11\u76f8\u90bb\u7684\u503c\uff0c\u56e0\u6b64\u9700\u8981\u5728\u7b2c\u4e00\u4e2a\u6570\u636e\u524d\u9762\u8865\u5145\u4e00\u4e2a 0\uff0c\u6700\u540e\u4e00\u4e2a\u6570\u636e\u540e\u9762\u8865\u5145\u4e00\u4e2a 0\uff0c\u4ece\u800c\u786e\u4fdd\u8ba1\u7b97\u53ef\u4ee5\u6267\u884c\u3002\u7136\u540e\u6211\u4eec\u5c06\u9884\u5148\u586b\u5145\u7684 0\uff0c\u91c7\u6837\u5f97\u5230\u7684 100\u3001105 \u8f93\u5165\u4e00\u5957\u7535\u8def\uff0c\u8fd9\u4e2a\u7535\u8def\u4f1a\u5c06 0\u3001100\u3001105 \u53d6\u5e73\u5747\uff0c\u4e5f\u5c31\u662f\u548c 1/3 \u505a\u52a0\u6743\u6c42\u548c\uff0c\u7136\u540e\u5f97\u5230\u8f93\u51fa 68 \u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u91c7\u6837\u7684\u7ed3\u679c\u3002</p> <p> </p> <p>\u7136\u540e\u6211\u4eec\u7ee7\u7eed\u91c7\u6837\u4e0b\u4e00\u4e2a\u6570\u636e 130\uff0c\u7136\u540e\u5c06 100\u3001105\u3001130 \u8ba1\u7b97\u5f97\u5230\u7684\u7ed3\u679c\u3002</p> <p> </p> <p>\u6700\u540e\u5f97\u5230\u7ed3\u679c\uff1a</p> <p> </p> <p>\u53ef\u4ee5\u770b\u5230\u7ed3\u679c\u7684\u4e24\u7aef\u586b\u5145\u4e86 0\uff0c\u4e2d\u95f4\u90e8\u5206\u7684\u6570\u636e\u503c\u90fd\u53d8\u5f97\u5f88\u76f8\u8fd1\u4e86\u3002\u56e0\u4e3a\u91c7\u6837\u7684\u5e8f\u5217\u5f80\u5f80\u662f\u975e\u5e38\u957f\u7684\uff0c\u6240\u4ee5\u8fd9\u91cc\u53ef\u4ee5\u901a\u8fc7\u7535\u8def\u5e73\u6ed1\u91c7\u6837\u6570\u636e\uff0c\u6d88\u9664\u8fb9\u7f18\u5947\u5f02\u70b9\u7684\u5f71\u54cd\u3002</p> <p>\u8fd9\u91cc\u7684\u5e73\u6ed1\u64cd\u4f5c\u672c\u8d28\u5c31\u662f\u4e00\u4e2a\u5377\u79ef\u64cd\u4f5c\uff0c\u91c7\u6837\u6570\u636e\u5e8f\u5217\u5c31\u662f\u8981\u88ab\u5377\u79ef\u7684\u5bf9\u8c61\uff0c<code>(1/3\u30011/3\u30011/3)</code> \u7684\u52a0\u6743\u6c42\u548c\u7684\u6743\u91cd\u5c31\u662f\u5377\u79ef\u6838\uff0c\u52a0\u6743\u6c42\u548c\u7684\u8fc7\u7a0b\u5c31\u662f\u5377\u79ef\u8fd0\u7b97\u7684\u8fc7\u7a0b\uff0c\u8fb9\u7f18\u586b\u5145\u7684 0 \u5c31\u662f padding\uff0c\u5904\u7406\u540e\u5f97\u5230\u7684\u7ed3\u679c\u5c31\u662f\u5377\u79ef\u64cd\u4f5c\u7684\u7ed3\u679c\u3002\u5377\u79ef\u7684\u6b65\u957f\u4e3a 1\uff0c\u8f93\u5165\u901a\u9053\u4e3a 1\uff0c\u8f93\u51fa\u901a\u9053\u4e3a 1\u3002</p> <p>\u7528\u4e0d\u540c\u7684\u5377\u79ef\u6838\u53ef\u4ee5\u5f97\u5230\u4e0d\u540c\u7684\u6570\u636e\u540e\u5904\u7406\u6548\u679c\uff0c\u4f8b\u5982\u6a21\u7cca\u3001\u9510\u5316\u3001\u6c42\u5bfc\u7b49\u7b49\uff0c\u5728\u6570\u5b57\u4fe1\u53f7\u5904\u7406\u3001\u56fe\u50cf\u4fe1\u606f\u5904\u7406\u3001\u6570\u503c\u8ba1\u7b97\u9886\u57df\u6709\u53ca\u5176\u91cd\u8981\u7684\u5e94\u7528\u3002\u4e0b\u56fe\u8fd9\u4e2a\u4f8b\u5b50\u662f\u5bf9\u6570\u636e\u5e8f\u5217 <code>3, 4, 1, 5, 6</code> \u7528\u5377\u79ef\u6838<code>(-2, 2, 1)</code>\u8fdb\u884c\u8f93\u5165\u901a\u9053\u6570\u4e3a 1\u3001\u8f93\u51fa\u901a\u9053\u6570\u4e3a 1\u3001\u6b65\u957f\u4e3a 1\u3001\u4e24\u7aef\u65e0\u6570\u636e\u586b\u5145\u7684\u4e00\u7ef4\u5377\u79ef\u3002\u5927\u5bb6\u53ef\u4ee5\u81ea\u884c\u6f14\u7b97\u8fd9\u4e2a\u6837\u4f8b\uff0c\u52a0\u6df1\u5bf9\u5377\u79ef\u7684\u5370\u8c61\u3002</p> <p> </p>"},{"location":"lab4-1/#_7","title":"\u79fb\u4f4d\u5bc4\u5b58\u5668","text":"<p>\u79fb\u4f4d\u5bc4\u5b58\u5668\u5e8f\u5217\u4e2d\uff0c\u6bcf\u4e2a\u5bc4\u5b58\u5668\u7684\u8f93\u5165\u90fd\u662f\u4e0a\u4e00\u4e2a\u5bc4\u5b58\u5668\u7684\u8f93\u51fa\u3002\u6bcf\u4e2a\u5468\u671f\u4f7f\u80fd\u4fe1\u53f7\u542f\u7528\u4e4b\u540e\uff0c\u9664\u7b2c\u4e00\u4e2a\u5bc4\u5b58\u5668\u8f7d\u5165\u65b0\u7684\u503c\u4ee5\u5916\uff0c\u5176\u4f59\u5bc4\u5b58\u5668\u8f7d\u5165\u4e0a\u4e00\u4e2a\u5bc4\u5b58\u5668\u7684\u503c\u3002\u56e0\u6b64\uff0c\u4e00\u7ef4\u5377\u79ef\u64cd\u4f5c\u4e2d\u7684\u91c7\u6837\u6570\u636e\u7684\u5b58\u50a8\u5c31\u53ef\u4ee5\u7528\u7528\u79fb\u4f4d\u5bc4\u5b58\u5668\u7ec4\u6765\u5b9e\u73b0\uff0c\u5982\u4e0b\u56fe\u3002\u6bcf\u5f53\u65b0\u7684\u6570\u636e\u88ab\u91c7\u6837\u65f6\uff0c\u79fb\u4f4d\u5bc4\u5b58\u5668\u66f4\u65b0\u4e3a\u65b0\u7684 3 \u4e2a\u76f8\u90bb\u6570\u636e\uff0c\u7136\u540e\u9001\u4e3a\u5377\u79ef\u64cd\u4f5c\u6a21\u5757\u6267\u884c\u8ba1\u7b97\u3002</p> <p> </p> \u79fb\u4f4d\u5bc4\u5b58\u5668\u7684\u7528\u9014 <ul> <li> <p>\u79fb\u4f4d\u5bc4\u5b58\u5668\u53ef\u4ee5\u7528\u4e8e\u5b9e\u73b0\u7b97\u672f\u8fd0\u7b97\uff0c\u6bd4\u5982 C \u8bed\u8a00\u4e2d\u7684\u79fb\u4f4d\u8ba1\u7b97\u5c31\u53ef\u4ee5\u7528\u79fb\u4f4d\u5bc4\u5b58\u5668\u5b9e\u73b0\u3002\u5bf9\u4e8e <code>a &lt;&lt; N</code> \u64cd\u4f5c\u5c31\u53ef\u4ee5\u5148\u5c06\u6570\u636e a \u8f7d\u5165\u79fb\u4f4d\u5bc4\u5b58\u5668\u7ec4\uff0c\u7136\u540e\u8fdb\u884c N \u6b21\u79fb\u4f4d\u3002\u4f7f\u7528\u79fb\u4f4d\u5bc4\u5b58\u5668\u8fdb\u884c\u79fb\u4f4d\u8ba1\u7b97\u9700\u8981\u7684\u7535\u8def\u5f00\u9500\u975e\u5e38\u5c11\uff0c\u53ea\u9700\u8981\u82e5\u5e72\u5bc4\u5b58\u5668\u548c\u6781\u5c11\u6570\u7684\u95e8\u7535\u8def\u5373\u53ef\uff1b\u4ee3\u4ef7\u662f\u79fb\u4f4d N \u6b21\u9700\u8981 N \u4e2a\u5468\u671f\u3002</p> <p> </p> </li> <li> <p>\u79fb\u4f4d\u5bc4\u5b58\u5668\u53ef\u4ee5\u7528\u4e8e\u7ef4\u62a4\u6570\u636e\u961f\u5217\u3002\u6bcf\u6b21\u8f7d\u5165\u4e00\u4e2a\u6570\u636e\uff0c\u6324\u51fa\u4e00\u4e2a\u6570\u636e\uff0c\u5c31\u7c7b\u4f3c\u4e8e\u961f\u5217\u6267\u884c\u4e00\u6b21 <code>pop_front</code> \u548c <code>push_back</code>\u3002\u800c\u4e14\u7535\u8def\u5f00\u9500\u975e\u5e38\u5c11\u3002</p> </li> <li> <p>\u79fb\u4f4d\u5bc4\u5b58\u5668\u8fd8\u7528\u4e8e\u4e32\u884c\u4f20\u8f93\u3002\u6bd4\u5982\u6211\u4eec\u9700\u8981\u5c06 8 \u4e2a bit \u53d1\u9001\u7ed9\u4e00\u4e2a\u5916\u90e8\u8bbe\u5907\uff0c\u53ef\u4ee5\u9009\u62e9\u5e76\u884c\u8f93\u5165\u7684\u65b9\u5f0f\uff0c\u63d0\u4f9b 8 \u4e2a\u8f93\u51fa\u5f15\u811a\uff0c\u7136\u540e\u7528\u4e00\u4e2a\u5468\u671f\u53d1\u9001 8 \u4e2a bit\uff0c\u8fd9\u6837\u9700\u8981\u7684\u4f20\u8f93\u5468\u671f\u5f88\u5c11\uff0c\u4f46\u662f\u8f93\u5165\u8f93\u51fa\u7ebf\u8def\u5f00\u9500\u4f1a\u5f88\u5927\u3002\u53e6\u4e00\u79cd\u662f\u9009\u62e9\u4e32\u884c\u8f93\u5165\u7684\u65b9\u5f0f\uff0c\u5c06\u6570\u636e\u8f7d\u5165\u4e00\u4e2a 8 \u4f4d\u7684\u79fb\u4f4d\u5bc4\u5b58\u5668\u7ec4\uff0c\u7136\u540e\u53ea\u63d0\u4f9b\u4e00\u6839\u8f93\u51fa\u7ebf\u8def\uff0c\u7136\u540e\u7528 8 \u4e2a\u5468\u671f\u5c06\u6570\u636e\u4e00\u4f4d\u4e00\u4f4d\u53d1\u9001\u51fa\u53bb\uff0c\u867d\u7136\u9700\u8981\u82b1\u8d39\u66f4\u591a\u7684\u65f6\u949f\u5468\u671f\uff0c\u4f46\u662f\u7ebf\u8def\u5f00\u9500\u5f88\u5c0f\u3002JTAG\u3001USB\u3001UART\u3001PCIE \u7b49\u5e38\u7528\u8bbe\u5907\u90fd\u662f\u4e32\u884c\u4f20\u8f93\u7684\uff0c\u5b83\u4eec\u7684\u63a5\u53e3\u7535\u8def\u5f80\u5f80\u90fd\u5305\u542b\u4e86\u4e00\u7ec4\u79fb\u4f4d\u5bc4\u5b58\u5668\u7528\u4e8e\u4e32\u884c\u6536\u53d1\u3002</p> <p> </p> </li> </ul> <p>\u5bf9\u4e8e\u4f4d\u5bbd\u4e3a 1 \u7684\u79fb\u4f4d\u5bc4\u5b58\u5668\u7ec4\u53ef\u4ee5\u7528\u4ee5\u4e0b\u8bed\u6cd5\u5feb\u901f\u5b9e\u73b0\uff1a <pre><code>    wire in_data;\n    reg [3:0] left_shift_reg;\n    reg [3:0] right_shift_reg;\n    always@(posedge clk)begin\n        if(en)begin\n            left_shift_reg &lt;= {left_shift_reg[2:0], in_data};\n            right_shift_reg &lt;= {in_data, right_shift_reg[3:1]};\n        end\n    end\n</code></pre></p> <p>\u5982\u679c\u662f\u5411\u91cf\u5bc4\u5b58\u5668\u7684\u79fb\u4f4d\u5bc4\u5b58\u5668\u7ec4\uff0c\u5219\u8981\u7528 <code>for</code> \u5faa\u73af\u7b49\u8bed\u6cd5\u5b9e\u73b0\uff0c\u4f8b\u5982\uff1a <pre><code>    wire [3:0] in_data;\n    reg [3:0] left_shift_reg [3:0];\n    reg [3:0] right_shift_reg [3:0];\n\n    integer i;\n    always@(posedge clk)begin\n        if(en)begin\n            for(i=0;i&lt;3;i=i+1)begin\n                left_shift_reg[i+1] &lt;= left_shift_reg[i];\n            end\n            left_shift_reg[0] &lt;= in_data;\n        end\n    end\n    always@(posedge clk)begin\n        if(en)begin\n            for(i=0;i&lt;3;i=i+1)begin\n                right_shift_reg[i] &lt;= right_shift_reg[i+1];\n            end\n            right_shift_reg[3] &lt;= in_data;\n        end\n    end\n</code></pre></p>"},{"location":"lab4-1/#valid-ready","title":"valid-ready \u534f\u8bae","text":"<p>start-finish \u534f\u8bae\u867d\u7136\u4e3a\u8c03\u7528\u65b9\u548c\u88ab\u8c03\u7528\u65b9\u63d0\u4f9b\u4e86\u7b80\u5355\u7684\u4ea4\u4e92\u534f\u8bae\uff0c\u4f46\u662f\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u5b58\u5728\u4e00\u5b9a\u95ee\u9898\u3002</p> start-finish \u534f\u8bae\u7684\u7f3a\u70b9 <ul> <li>caller \u6a21\u5757\u65e0\u6cd5\u77e5\u9053 callee \u6a21\u5757\u662f\u5426\u5904\u4e8e\u7a7a\u95f2\u72b6\u6001\uff0c\u53ea\u80fd\u91c7\u7528\u4fdd\u5b88\u7684\u7b56\u7565\u2014\u2014\u2014\u2014\u5f53 <code>finish=1</code> \u4e4b\u540e\u518d\u6b21\u4f7f\u80fd <code>start</code> \u4fe1\u53f7\uff0c\u786e\u4fdd callee \u4e00\u5b9a\u5904\u4e8e\u7a7a\u95f2\u72b6\u6001\u3002\u8fd9\u4f7f\u5f97 caller \u5728 <code>start</code> \u53d1\u9001\u5230 <code>finish</code> \u8fd4\u56de\u7684\u65f6\u95f4\u533a\u95f4\u53ea\u80fd\u6267\u884c\u4e00\u6b21 callee \u8c03\u7528\uff0c\u4f46\u662f\u5f88\u591a\u65f6\u5019 callee \u4e5f\u8bb8\u53ef\u4ee5\u8fde\u7eed\u6267\u884c\u591a\u6b21 caller \u8c03\u7528\uff0c\u56e0\u6b64 caller \u671f\u671b callee \u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u4fe1\u53f7\u6765\u8868\u793a\u81ea\u5df1\u662f\u5426\u7a7a\u95f2\u3002</li> <li>callee \u6a21\u5757\u65e0\u6cd5\u77e5\u9053 caller \u6a21\u5757\u662f\u5426\u51c6\u5907\u63a5\u53d7\u6570\u636e\uff0c\u53ea\u80fd\u91c7\u7528\u5192\u9669\u7684\u7b56\u7565\u2014\u2014\u2014\u2014\u5f53 <code>finish=1</code> \u7684\u65f6\u5019\uff0c\u8fd4\u56de\u6570\u636e\u53ea\u4fdd\u8bc1\u4e00\u4e2a\u5468\u671f\u6709\u9650\uff0c\u9ed8\u8ba4 caller \u4f1a\u7acb\u523b\u63a5\u53d7\u8fd4\u56de\u7684\u8ba1\u7b97\u7ed3\u679c\u3002\u8fd9\u8981\u6c42 caller \u7684\u90e8\u5206\u7ec4\u4ef6\u65f6\u523b\u51c6\u5907\u7740\u63a5\u6536 callee \u7684\u7ed3\u679c\uff0c\u4e0d\u7136\u53ef\u80fd\u4f1a\u9519\u8fc7 callee \u8fd4\u56de\u7684\u7ed3\u679c\u3002\u56e0\u6b64 caller \u671f\u671b\u5411 callee \u63d0\u4f9b\u4e00\u4e2a\u4fe1\u53f7\u6765\u8868\u793a\u81ea\u5df1\u662f\u5426\u51c6\u5907\u5c31\u7eea\uff0c\u9632\u6b62 callee \u5728 caller \u63a5\u53d7\u4e4b\u524d\u65e0\u6548\u6389\u8fd4\u56de\u7ed3\u679c\u3002</li> </ul> <p>\u56e0\u6b64\u6211\u4eec\u63d0\u4f9b\u4e86 valid-ready \u63e1\u624b\u534f\u8bae\uff1a</p> <ul> <li>\u5bf9\u4e8e\u4efb\u4f55\u9700\u8981\u88ab\u53d1\u9001\u7684\u6570\u636e\u7ec4\u5408\uff0c\u53d1\u9001\u65b9\u63d0\u4f9b\u4e00\u4e2a <code>valid</code> \u4fe1\u53f7\uff0c\u63a5\u53d7\u65b9\u63d0\u4f9b\u4e00\u4e2a <code>ready</code> \u4fe1\u53f7\u3002</li> <li>\u53d1\u9001\u65b9\u5f53\u6570\u636e\u7ebf\u4e0a\u7684\u6570\u636e\u51c6\u5907\u5c31\u7eea\u7684\u65f6\u5019\u5c06 <code>valid</code> \u8bbe\u7f6e\u4e3a 1\uff0c\u8868\u793a\u53d1\u9001\u65b9\u6570\u636e\u51c6\u5907\u5c31\u7eea\uff0c\u7136\u540e\u6301\u7eed\u7b49\u5f85\u63a5\u6536\u65b9\u63a5\u6536\u6570\u636e\u3002</li> <li>\u63a5\u6536\u65b9\u51c6\u5907\u63a5\u53d7\u6570\u636e\u5c31\u7eea\u65f6\u5c06 <code>ready</code> \u8bbe\u7f6e\u4e3a 1\uff0c\u8868\u793a\u63a5\u6536\u65b9\u51c6\u5907\u5c31\u7eea\uff0c\u7136\u540e\u6301\u7eed\u7b49\u5f85\u63a5\u6536\u65b9\u63a5\u6536\u6570\u636e\u3002</li> <li> <p>\u5f53 <code>valid=1</code> \u4e14 <code>ready=1</code> \u65f6\uff0c\u672c\u6b21\u63e1\u624b\u6b63\u5f0f\u5b8c\u6210\uff0c\u5728\u4e0b\u4e2a\u65f6\u949f\u4e0a\u5347\u6cbf\u63a5\u6536\u65b9\u5c31\u4f1a\u8f7d\u5165\u53d1\u9001\u65b9\u653e\u7f6e\u5728\u6570\u636e\u7ebf\u4e0a\u7684\u6570\u636e\u3002<code>valid</code> \u4fe1\u53f7\u53ef\u4ee5\u5728 <code>ready</code> \u4fe1\u53f7\u4e4b\u524d\u3001\u4e4b\u540e\u6216\u8005\u540c\u65f6\u4f7f\u80fd\uff0c\u4e24\u8005\u4fdd\u6301\u72ec\u7acb\u3002</p> <ul> <li>\u63e1\u624b\u5b8c\u6210\u65f6\uff0c\u63a5\u6536\u65b9\u5fc5\u987b\u7acb\u523b\u63a5\u6536\u6570\u636e\u7ebf\u4e0a\u7684\u6570\u636e\uff0c\u5982\u679c\u65e0\u6cd5\u7ee7\u7eed\u63a5\u53d7\u6570\u636e\u5e94\u5c06 <code>ready</code> \u8bbe\u7f6e\u4e3a 0\uff0c\u5982\u679c\u4e0d\u60f3\u7ee7\u7eed\u63a5\u53d7\u6570\u636e\u53ef\u5c06 <code>ready</code> \u8bbe\u7f6e\u4e3a 0\uff0c\u5982\u679c\u8fd8\u80fd\u63a5\u6536\u6570\u636e\u4e14\u613f\u610f\u63a5\u53d7\u6570\u636e\u5219\u53ef\u4ee5\u5c06 <code>ready</code> \u7ee7\u7eed\u4fdd\u6301\u4e3a 1\u3002</li> <li>\u63e1\u624b\u5b8c\u6210\u65f6\uff0c\u53d1\u9001\u65b9\u672c\u6b21\u53d1\u9001\u7684\u6570\u636e\u5df2\u7ecf\u88ab\u63a5\u6536\uff0c\u6b64\u65f6\u5982\u679c\u4e0d\u6253\u7b97\u7ee7\u7eed\u53d1\u9001\u6570\u636e\u5219\u5c06 <code>valid</code> \u8bbe\u7f6e\u4e3a 0\uff1b\u5982\u679c\u60f3\u7ee7\u7eed\u53d1\u9001\u6570\u636e\u5219\u9700\u8981\u7acb\u523b\u64a4\u6362\u6570\u636e\u7ebf\u4e0a\u7684\u6570\u636e\uff0c\u5426\u5219\u63a5\u6536\u65b9\u4f1a\u518d\u6b21\u63a5\u53d7\u539f\u6765\u7684\u6570\u636e\u8bf7\u6c42\uff0c\u91cd\u590d\u5904\u7406\u3002</li> </ul> valid-ready \u63e1\u624b\u6210\u529f\u7684\u65f6\u5e8f\u56fe <p>\u4e0b\u9762\u5c55\u793a\u4e86\u63e1\u624b\u6210\u529f\u65f6\u7684\u65f6\u5e8f\u56fe\uff0c\u7ea2\u7ebf\u4ee3\u8868\u6b64\u65f6\u53d1\u9001\u65b9\u548c\u63a5\u9001\u65b9\u63e1\u624b\u6210\u529f\u3002  </p> <p>\u53ef\u4ee5\u770b\u5230\u4e0b\u56fe\u8fde\u7eed\u56db\u4e2a\u5468\u671f\uff0c\u63a5\u6536\u65b9\u548c\u53d1\u9001\u65b9\u5b8c\u6210\u4e86\u56db\u6b21\u6570\u636e\u63e1\u624b\u4f20\u8f93\u3002</p> <p> </p> </li> <li> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1a\u5982\u679c\u63e1\u624b\u4e4b\u540e\u6ca1\u6709\u53ca\u65f6\u66f4\u6362\u6570\u636e\u7ebf\u4e0a\u7684\u6570\u636e\uff0c\u5c31\u6bd4\u5982\u4e0b\u56fe\u7684\u4f8b\u5b50\uff0cdata1 \u7684\u6570\u636e\u5c31\u4f1a\u88ab\u4f20\u8f93\u4e24\u6b21\uff0c\u800c data2 \u5219\u6682\u65f6\u4e0d\u4f1a\u88ab\u63a5\u6536\u65b9\u63a5\u53d7\u3002\u5728\u63a5\u6536\u65b9\u89c6\u89d2\u91cc\uff0c\u53d1\u9001\u65b9\u53d1\u9001\u4e86\u4e24\u6b21\u6570\u636e\u4f20\u9012\uff0c\u53ea\u4e0d\u8fc7\u4e24\u6b21\u6570\u636e\u7684\u503c\u662f\u4e00\u6837\u800c\u5df2\u3002</p> <p> </p> </li> <li> <p>\u53d1\u9001\u65b9\u8bbe\u7f6e <code>valid</code> \u4fe1\u53f7\u548c\u63a5\u6536\u65b9\u8bbe\u7f6e <code>ready</code> \u672c\u8eab\u5e94\u8be5\u5c3d\u91cf\u4fdd\u6301\u72ec\u7acb\uff1b\u7279\u522b\u7684\uff0c\u5728\u4e00\u4e9b\u8bbe\u8ba1\u89c4\u5219\u4e2d\uff0c<code>ready</code> \u4fe1\u53f7\u7684\u8bbe\u7f6e\u53ef\u4ee5\u7b49\u5f85 <code>valid</code> \u4fe1\u53f7\u7684\u8bbe\u7f6e\uff0c\u4f46\u662f <code>valid</code> \u4fe1\u53f7\u7684\u8bbe\u7f6e\u4e0d\u5e94\u8be5\u7b49\u5f85 <code>ready</code> \u4fe1\u53f7\u7684\u8bbe\u7f6e\uff0c\u9632\u6b62\u6b7b\u9501\u3002</p> </li> </ul> <p>\u7efc\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06 caller \u548c callee \u4e4b\u95f4\u7684 request \u548c resp \u4ece\u539f\u6765\u7684 start-finish \u534f\u8bae\u8f6c\u6362\u4e3a\u5982\u4eca\u7684 valid-ready \u534f\u8bae\uff1a</p> <p> </p>"},{"location":"lab4-1/#_8","title":"\u5e76\u884c\u52a0\u6cd5\u6811","text":"<p>\u5377\u79ef\u64cd\u4f5c\u9700\u8981\u5c06 N \u4e2a\u4e58\u79ef\u7d2f\u52a0\u8d77\u6765\uff0c\u4f8b\u5982 <code>(((num0 + num1) + num2) + num3)</code>\u3002\u6211\u4eec\u53ef\u4ee5\u7528\u5982\u4e0b\u7535\u8def\u5b9e\u73b0\uff1a</p> <p> </p> <p>\u4f46\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u6700\u957f\u8def\u5f84\u7684\u65f6\u5ef6\u662f N-1 \u4e2a\u52a0\u6cd5\u5668\u7684\u65f6\u5ef6\u3002</p> <p>\u8003\u8651\u5230\u52a0\u6cd5\u5177\u6709\u7ed3\u5408\u5f8b\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5c06\u4e0a\u8ff0\u7b97\u5f0f\u8f6c\u6362\u4e3a <code>((num0 + num1) + (num2 + num3))</code>\uff0c\u8fdb\u800c\u7528\u5982\u4e0b\u7535\u8def\u52a0\u4ee5\u5b9e\u73b0\uff1a</p> <p> </p> <p>\u53ef\u4ee5\u770b\u5230\u8fd9\u662f\u4e00\u9897\u5b8c\u5168\u5e73\u8861\u6811\u7684\u7ed3\u6784\uff0c\u6700\u957f\u8def\u5f84\u662f \\(\\log(N)\\) \u4e2a\u52a0\u6cd5\u5668\u7684\u65f6\u5ef6\uff0c\u4e0e\u94fe\u5f0f\u76f8\u52a0\u76f8\u6bd4\uff0c\u4e0d\u5e26\u6765\u989d\u5916\u8d44\u6e90\u5f00\u9500\uff0c\u800c\u4e14\u53ef\u4ee5\u5f97\u5230\u66f4\u597d\u7684\u65f6\u5e8f\u6027\u80fd\u3002</p> <p>\u4e0b\u9762\u7ed9\u51fa\u5e76\u884c\u52a0\u6cd5\u6811\u7684\u5b9e\u73b0\u4ee3\u7801\uff0c\u4f9b\u5927\u5bb6\u53c2\u8003\uff1a</p> <pre><code>    Conv::result_t add_tmp [Conv::LEN-1:1] /* verilator split_var */;\n    // \u4e0b\u9762\u7684 add_tmp[i] = add_tmp[i*2] + add_tmp[i*2+1] \u5b58\u5728 add_tmp &lt;- add_tmp \u7684\u6570\u636e\u4f9d\u8d56\n    // verilator \u7684\u7f16\u8bd1\u5668\u4f1a\u8ba4\u4e3a\u5b58\u5728\u81ea\u4f9d\u8d56\u7684\u73af\u5f62\u7535\u8def\uff0c\u4ece\u800c\u62a5\u9519\n    // \u56e0\u6b64\u6211\u4eec\u9700\u8981\u7528/* verilator split_var */\u52a0\u4ee5\u4fee\u9970\uff0c\u8ba9 verilator \u4ee5 add_tmp \u7684\u6bcf\u4e2a element \u4e3a\u5355\u4f4d\u505a\u4f9d\u8d56\u5206\u6790\n\n    generate\n    // generate \u8bed\u53e5\u9664\u4e86\u53ef\u4ee5\u6709 for \u5faa\u73af\u8fd8\u53ef\u4ee5\u6709 if-else\uff0ccase-default\n    for(genvar i=1;i&lt;Conv::LEN;i=i+1)begin\n    // genvar \u53ef\u4ee5\u5728 for \u5faa\u73af\u5185\u90e8\u58f0\u660e\uff0c\u9632\u6b62\u547d\u540d\u7a7a\u95f4\u51b2\u7a81\n        if(i&lt;Conv::LEN/2)begin\n            assign add_tmp[i] = add_tmp[i*2] + add_tmp[i*2+1];\n            // \u52a0\u6cd5\u5668\u7684\u7ed3\u679c\u8f93\u51fa\u4f5c\u4e3a\u4e0b\u4e00\u7ea7\u52a0\u6cd5\u5668\u5f97\u8f93\u5165\n            // \u8fd9\u4e9b\u7b97\u6cd5\u53c2\u8003\u4e86\u6570\u636e\u7ed3\u6784\u7684 heap\uff0c\u5927\u5bb6\u53ef\u4ee5\u4e92\u4e3a\u53c2\u7167\n        end else begin\n            assign add_tmp[i] = stage1_data[(i-Conv::LEN/2)*2] + stage1_data[(i-Conv::LEN/2)*2+1]; \n            // \u4e58\u79ef\u8fd0\u7b97\u7ed3\u679c\u4e24\u4e24\u76f8\u52a0\n        end\n    end\n    endgenerate\n</code></pre>"},{"location":"lab4-1/#_9","title":"\u5b9e\u9a8c\u6b65\u9aa4","text":""},{"location":"lab4-1/#_10","title":"\u5b9e\u9a8c\u524d\u51c6\u5907","text":"<p>\u4e0e\u4e4b\u524d\u7684 lab \u76f8\u540c\uff0c\u542f\u52a8\u5b89\u88c5\u5728\u4f60\u7535\u8111\u4e2d\u7684 Ubuntu 22.04 \u73af\u5883\uff08 WSL \u6216\u865a\u62df\u673a\uff09\uff0c\u968f\u540e\u901a\u8fc7 <code>cd</code> \u79fb\u52a8\u5230 <code>sys1-sp24</code> \u76ee\u5f55\u4e0b\uff0c\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff1a <pre><code>git pull origin master\ncd repo/sys-project\ngit pull origin other\n</code></pre></p>"},{"location":"lab4-1/#_11","title":"\u6839\u636e\u5305\u914d\u7f6e\u7535\u8def\u53c2\u6570","text":"<p>\u6211\u4eec\u5c06\u5377\u79ef\u6a21\u5757\u76f8\u5173\u7684\u7ed3\u6784\u548c\u53c2\u6570\u5b9a\u4e49\u5728 <code>repo/sys-project/lab4-1/include/conv_struct.vh</code>\u7684 <code>Conv</code> \u5305\u4e2d\uff0c\u5177\u4f53\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>`ifndef __CONV_STRUCT__\n`define __CONV_STRUCT__\npackage Conv;\n    parameter WIDTH = 64;   // \u5355\u4e2a\u6570\u636e\u7684\u4f4d\u5bbd\n    parameter LEN   = 4;    // \u5377\u79ef\u6838\u7684\u5bbd\u5ea6\n\n    typedef logic [WIDTH-1:0] data_t;       // \u8ba1\u7b97\u6570\u636e\u7684\u6570\u636e\u7c7b\u578b\n    typedef logic [WIDTH*2-1:0] result_t;   // \u8ba1\u7b97\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\n\n    typedef struct{\n        data_t data [LEN-1:0];\n    } data_vector;  // \u53c2\u4e0e\u5377\u79ef\u8ba1\u7b97\u7684\u6570\u636e\u6570\u7ec4\u548c\u5377\u79ef\u6838\u5bf9\u5e94\u7684\u6570\u636e\u7ed3\u6784\n\nendpackage\n`endif\n</code></pre> <p>SystemVerilog \u7684\u8bed\u6cd5\u53c2\u89c1\u9644\u5f55\u90e8\u5206\u3002</p>"},{"location":"lab4-1/#_12","title":"\u5b9e\u73b0\u5377\u79ef\u5355\u5143","text":"<p>\u53c2\u8003\u4e4b\u524d\u5377\u79ef\u64cd\u4f5c\u7684\u5b9e\u9a8c\u539f\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u6309\u7167\u5982\u4e0b\u601d\u8def\u5b9e\u73b0\u4e00\u4e2a\u5377\u79ef\u5355\u5143\uff1a</p> <ul> <li>\u79fb\u4f4d\u5bc4\u5b58\u5668\u8d1f\u8d23\u5b58\u50a8\u6240\u6709\u9700\u8981\u8ba1\u7b97\u7684\u6570\u636e data\uff0ckernel \u8f93\u5165\u662f\u5377\u79ef\u8ba1\u7b97\u7684\u5377\u79ef\u6838\u7684\u6743\u91cd</li> <li>data \u548c kernel \u7684\u6570\u636e\u9001\u5165\u5377\u79ef\u5355\u5143\u6267\u884c\u52a0\u6743\u6c42\u548c\u5f97\u5230\u5377\u79ef\u7ed3\u679c</li> <li>\u5f53\u9700\u8981\u8ba1\u7b97\u4e0b\u4e00\u4e2a\u6570\u636e\u7684\u5377\u79ef\u7ed3\u679c\u7684\u65f6\u5019\uff0c\u53ea\u9700\u8981\u5c06\u88ab\u5377\u79ef\u7684\u6570\u636e\u5e8f\u5217\u7684\u4e0b\u4e00\u4e2a\u6570\u636e\u9001\u5165\u79fb\u4f4d\u5bc4\u5b58\u5668\uff0c\u9876\u6389\u6700\u65e9\u8fdb\u5165\u7684\u6570\u636e\u5373\u53ef</li> </ul> <p>\u4e0b\u56fe\u662f\u5927\u81f4\u7684\u7535\u8def\u56fe\u8bbe\u8ba1\uff0c\u5176\u4e2d\u79fb\u4f4d\u5bc4\u5b58\u5668\u7684\u90e8\u5206\u6211\u4eec\u5c01\u88c5\u4e3a <code>Shift</code> \u6a21\u5757\uff0c\u5377\u79ef\u8fd0\u7b97\u90e8\u5206\u6211\u4eec\u5c01\u88c5\u4e3a <code>ConvOperator</code> \u6a21\u5757\uff1a</p> <p> </p> <p><code>Shift</code>\u3001<code>ConvOperator</code> \u6a21\u5757\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u8f93\uff0c <code>ConvUnit</code> \u6a21\u5757\u548c caller \u4e4b\u95f4\u7684\u6570\u636e\u4f20\u8f93\u90fd\u91c7\u7528 valid-ready \u534f\u8bae\u3002</p> <p> </p> <p>\u8bf7\u6839\u636e\u4e0a\u9762\u7684\u539f\u7406\u56fe\u548c\u6a21\u5757\u95f4\u4ea4\u4e92\u5173\u7cfb\u5b9e\u73b0 <code>lab4-1/submit/ConvUnit.sv</code> \u6587\u4ef6\u4e2d\u7684 <code>ConvUnit</code> \u6a21\u5757\u3002</p> <pre><code>`include\"conv_struct.vh\"    // conv \u5305\u63d0\u4f9b\u53c2\u6570\u548c\u7ed3\u6784\u7684\u5b9a\u4e49\nmodule ConvUnit (\n    input clk,\n    input rst,\n    input Conv::data_vector kernel, // \u5377\u79ef\u64cd\u4f5c\u7684\u5377\u79ef\u6838\n    input Conv::data_t in_data,\n    input in_valid,\n    output in_ready,    // \u8f93\u5165\u6570\u636e in_data \u548c\u5b83\u7684\u63e1\u624b\u4fe1\u53f7 in_valid-in_ready\n\n    output Conv::result_t result,\n    output out_valid,\n    input out_ready     // \u8f93\u51fa\u7ed3\u679c result \u548c\u5b83\u7684\u63e1\u624b\u4fe1\u53f7 out_valid-out_ready\n);\n\n    // fill the code\n\nendmodule\n</code></pre>"},{"location":"lab4-1/#_13","title":"\u5b9e\u73b0\u79fb\u4f4d\u5668\u6a21\u5757","text":"<p>\u586b\u5199 <code>lab4-1/submit/Shift.sv</code> \u6587\u4ef6\uff0c\u5b9e\u73b0 <code>Shift</code> \u79fb\u4f4d\u5bc4\u5b58\u5668\u6a21\u5757\u3002<code>Shift</code> \u6a21\u5757\u8d1f\u8d23\u8f7d\u5165\u5916\u90e8\u7684\u91c7\u6837\u6570\u636e\u5e76\u6267\u884c\u79fb\u4f4d\u64cd\u4f5c\uff0c\u7136\u540e\u5c06\u65b0\u7684\u4e00\u7ec4\u6570\u636e\u53d1\u9001\u7ed9\u540e\u7aef\u7684 ConvOperator \u6267\u884c\u5377\u79ef\u8fd0\u7b97\uff0c\u5982\u6b64\u53cd\u590d\u8fdb\u884c\u3002\u6240\u4ee5 <code>Shift</code> \u636e\u6709\u4e24\u4e2a\u72b6\u6001\uff1a</p> <ul> <li> <p><code>RDATA</code>\uff08receive data\uff09\uff1a\u63a5\u6536\u6570\u636e\u72b6\u6001\uff0c<code>Shift</code> \u6a21\u5757\u548c\u5916\u90e8\u7684 caller \u63e1\u624b\u8f7d\u5165 <code>in_data</code> \u6570\u636e\uff0c\u6b64\u65f6\u4e0d\u5411\u540e\u7aef\u7684 ConvOperator \u53d1\u9001\u6570\u636e\u3002\u5f53\u63a5\u6536\u5230\u6570\u636e\u4e4b\u540e\u8fdb\u5165 <code>TDATA</code> \u72b6\u6001\u3002</p> </li> <li> <p><code>TDATA</code>\uff08transmit data\uff09\uff1a\u53d1\u9001\u6570\u636e\u72b6\u6001\uff0cShift \u6a21\u5757\u548c\u540e\u7aef\u7684 ConvOperator \u63e1\u624b\u53d1\u9001\u6570\u636e <code>data</code>\uff0c\u6b64\u65f6\u4e0d\u63a5\u6536\u6765\u81ea caller \u7684\u6570\u636e\u3002\u5f53\u53d1\u9001\u6570\u636e\u4e4b\u540e\u8fdb\u5165 <code>RDATA</code> \u72b6\u6001\u3002</p> </li> </ul> <p>\u56e0\u6b64\u53ef\u4ee5\u770b\u5230\u5728\u5377\u79ef\u5355\u5143\u8ba1\u7b97\u51fa\u6570\u636e\u7684\u7ed3\u679c\u4e4b\u524d\uff0c<code>Shift</code> \u6a21\u5757\u5c31\u5df2\u7ecf\u53ef\u4ee5\u751f\u6210\u4e0b\u4e00\u7ec4\u5f85\u8ba1\u7b97\u6570\u636e\u4e86\uff0c\u6548\u7387\u6bd4\u4e4b\u524d\u7684 start-finish \u63e1\u624b\u8981\u5feb\u4e00\u4e9b\u3002<code>Shift</code> \u6a21\u5757\u7684\u63a5\u53e3\u4ecb\u7ecd\u5982\u4e0b\uff1a</p> <pre><code>`include\"conv_struct.vh\"\nmodule Shift (\n    input clk,\n    input rst,\n    input Conv::data_t in_data,\n    input in_valid,\n    output reg in_ready,    // \u8f93\u5165\u6570\u636e in_data \u548c caller \u7684\u63e1\u624b\u4fe1\u53f7 in_valid-in_ready\n\n    output Conv::data_vector data,\n    output reg out_valid,\n    input out_ready         // \u8f93\u51fa\u6570\u636e data \u548c ConvOperator \u7684\u63e1\u624b\u4fe1\u53f7 out_valid-out_ready\n);\n\n    typedef enum logic {RDATA, TDATA} fsm_state;\n    fsm_state state_reg;\n    Conv::data_t data_reg [Conv::LEN-1:0];\n\n    // fill the code\n\nendmodule\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728\u6211\u4eec 4.3 \u7684\u7535\u8def\u56fe\u4e2d\uff0c<code>in_data</code> \u9996\u5148\u8fdb\u5165\u7684\u662f <code>data_reg[3]</code>\uff0c\u7136\u540e\u4f9d\u6b21\u5411\u524d\u79fb\u52a8\uff0c\u6700\u540e\u8fdb\u5165 <code>data_reg[0]</code>\u3002</p>"},{"location":"lab4-1/#_14","title":"\u5b9e\u73b0\u5377\u79ef\u8fd0\u7b97\u6a21\u5757","text":"<p>\u5377\u79ef\u8fd0\u7b97\u6a21\u5757\u4e2d\u7684\u4e58\u6cd5\u8fd0\u7b97\u5355\u5143\u8bf7\u4f7f\u7528 <code>lab3-3/submit/Multiplier.sv</code> \u6a21\u5757\u5b9e\u73b0\u3002\u5377\u79ef\u8fd0\u7b97\u6a21\u5757\u7684\u8fd0\u7b97\u7535\u8def\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u7684\u7535\u8def\u8bbe\u8ba1\uff1a</p> <ul> <li><code>ConvOperator</code> \u8f93\u5165\u7684 <code>data</code> \u548c <code>kernel</code> \u9001\u5165\u4e58\u6cd5\u5668\u6267\u884c\u4e58\u6cd5\u64cd\u4f5c\u3002</li> <li>\u5728\u4e58\u6cd5\u8ba1\u7b97\u7ed3\u675f\u540e\uff0c\u5c06\u4e58\u6cd5\u5668\u8f93\u51fa\u7684\u7ed3\u679c\u4fdd\u5b58\u5230 <code>vector_stage1</code> \u5bc4\u5b58\u5668\u7ec4\u4e2d\uff0c\u5bc4\u5b58\u5668\u7684 <code>valid</code> \u8bbe\u7f6e\u4e3a 1\uff0c\u8868\u793a\u6570\u636e\u6709\u6548\u3002</li> <li><code>vector_stage1</code> \u5bc4\u5b58\u5668\u4e2d\u7684\u7ed3\u679c\u901a\u8fc7\u5e76\u884c\u52a0\u6cd5\u6811\u7d2f\u52a0\u5f97\u5230\u6700\u7ec8\u7ed3\u679c\uff0c\u4fdd\u5b58\u5230 <code>vector_stage2</code> \u5bc4\u5b58\u5668\u4e2d\uff0c<code>valid</code> \u8bbe\u7f6e\u4e3a 1.</li> <li><code>vector_stage2</code> \u7684\u5185\u5bb9\u5c31\u662f\u6700\u540e\u7684 <code>result</code>\uff0c\u901a\u8fc7\u8fd9\u4e2a\u6a21\u5757\u7684\u8f93\u51fa\u7aef\u53e3\u8f93\u51fa\u7ed9 caller\u3002</li> </ul> <p>\u6bcf\u4e2a\u9636\u6bb5\u5f00\u59cb\u6267\u884c\u7684\u6761\u4ef6\u8bf7\u5927\u5bb6\u81ea\u884c\u601d\u8003\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002</p> <p> </p> <p>\u5377\u79ef\u8fd0\u7b97\u6a21\u5757\u7684\u6709\u9650\u72b6\u6001\u673a\u8bbe\u8ba1\u5982\u4e0b\uff1a</p> <ul> <li><code>RDATA</code>\uff08recieve data\uff09\uff1a\u521d\u59cb\u72b6\u6001\uff1b\u6570\u636e\u63a5\u6536\u72b6\u6001\uff0c\u548c <code>shift</code> \u63e1\u624b\u63a5\u6536\u6570\u636e\uff0c\u63a5\u6536\u5230\u6570\u636e\u540e\u8fdb\u5165 <code>WORK</code> \u72b6\u6001\uff0c\u5e76\u542f\u52a8\u4e58\u6cd5\u5668\uff0c\u6e05\u7a7a\u6240\u6709 <code>vector_stage</code> \u4e2d\u95f4\u5bc4\u5b58\u5668\u7684 <code>valid</code> \u503c\u3002</li> <li><code>WORK</code>\uff08work\uff09\uff1a\u5de5\u4f5c\u72b6\u6001\uff0c\u7b49\u5f85\u4e58\u6cd5\u5668\u3001\u5e76\u884c\u52a0\u6cd5\u5668\u4f9d\u6b21\u6267\u884c\u8ba1\u7b97\uff0c\u5e76\u628a\u6700\u540e\u7684\u8ba1\u7b97\u7ed3\u679c\u5b58\u5165 <code>vector_stage2</code> \u7535\u8def\u3002\u5728 <code>vector_stage2</code> \u5bc4\u5b58\u5668\u7684 <code>valid</code> \u4fe1\u53f7\u88ab\u8bbe\u7f6e\u4e3a 1 \u4e4b\u540e\u8fdb\u5165 <code>TDATA</code> \u72b6\u6001\u3002</li> <li><code>TDATA</code>\uff08tansmit data\uff09\uff1a\u6570\u636e\u53d1\u9001\u72b6\u6001\uff0c\u548c caller \u8fdb\u884c\u63e1\u624b\u53d1\u9001 <code>result</code>\uff0c\u53d1\u9001\u5b8c\u6bd5\u540e\u8fd4\u56de <code>RDATA</code> \u72b6\u6001\u3002</li> <li>\u4e0d\u8981\u5fd8\u8bb0 <code>default</code> \u72b6\u6001\u3002</li> </ul> <p>\u4ee5\u4e0a\u5b9e\u73b0\u4ec5\u4f9b\u53c2\u8003\uff0c\u5927\u5bb6\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\u968f\u610f\u4fee\u6539\u72b6\u6001\u673a\u548c\u5185\u90e8\u5b9e\u73b0\u3002\u4f46\u662f\u4e0d\u5141\u8bb8\u76f4\u63a5\u4f7f\u7528 <code>*</code> \u4e58\u6cd5\u7b97\u5b50\u5b9e\u73b0\u4e58\u6cd5\u3002</p> <p>\u6a21\u5757\u63a5\u53e3\u5982\u4e0b\uff1a</p> <pre><code>`include\"conv_struct.vh\"\nmodule ConvOperator(\n    input clk,\n    input rst,\n    input Conv::data_vector kernel, // \u5377\u79ef\u6838\u6743\u91cd\n    input Conv::data_vector data,   \n    input in_valid,\n    output reg in_ready,            // \u548c shift \u7684\u63e1\u624b\u4fe1\u53f7\u548c\u6765\u81ea shift \u7684 data \u6570\u636e\n\n    output Conv::result_t result,\n    output reg out_valid,\n    input out_ready                 // \u8ba1\u7b97\u7ed3\u679c result \u548c\u4e0e caller \u7684\u63e1\u624b\u4fe1\u53f7\n);\n\n    localparam VECTOR_WIDTH = 2*Conv::WIDTH;    // result \u7684\u4f4d\u5bbd\n    typedef struct {\n        Conv::result_t data;\n        logic valid;            // \u6570\u636e\u6709\u6548\n    } mid_vector;   // \u4e2d\u95f4\u5bc4\u5b58\u5668\u7684\u6570\u636e\u7ed3\u6784\n\n    mid_vector vector_stage1 [Conv::LEN-1:0];   // \u4e58\u6cd5\u5668\u7ed3\u679c\n    mid_vector vector_stage2;                   // \u5e76\u884c\u52a0\u6cd5\u6811\u7ed3\u679c\n\n    typedef enum logic [1:0] {RDATA, WORK, TDATA} fsm_state;\n    fsm_state state_reg;    // \u6709\u9650\u72b6\u6001\u673a\n\n    // fill the code\n\nendmodule\n</code></pre>"},{"location":"lab4-1/#_15","title":"\u4eff\u771f","text":""},{"location":"lab4-1/#_16","title":"\u4eff\u771f\u6837\u4f8b\u751f\u6210","text":"<p>\u5728<code>sim/testbench.v</code>\u7684\u4eff\u771f\u6fc0\u52b1\u4e2d\u751f\u6210\u4e0d\u5c11\u4e8e 16 \u7ec4\u968f\u673a\u6837\u4f8b\uff0c\u5e76\u4e14 <code>in_valid</code> \u4fe1\u53f7\u7684\u6fc0\u52b1\u8981\u6ee1\u8db3 valid_ready \u534f\u8bae\u3002</p> <pre><code>    integer i;\n    initial begin\n        // fill the testcase\n        $display(\"success!!!\");\n        $finish;\n    end\n</code></pre> <p>\u672c\u6b21\u7684 <code>Judge.v</code> \u8bed\u6cd5\u8fc7\u4e8e\u590d\u6742\uff0c\u611f\u5174\u8da3\u7684\u540c\u5b66\u53c2\u89c1\u9644\u5f55\u90e8\u5206\u3002</p> <p>\u6700\u540e\u6267\u884c <code>make verilate</code>\uff0c\u5982\u679c\u4eff\u771f\u901a\u8fc7\u6700\u540e\u4f1a\u8f93\u51fa <code>success!!!</code>\uff0c\u53cd\u4e4b\u5c31\u662f <code>fail!!!</code> \u548c\u62a5\u9519\u4fe1\u606f\u3002</p>"},{"location":"lab4-1/#_17","title":"\u7efc\u5408\u4e0b\u677f","text":"<p><code>top</code> \u6a21\u5757\u7535\u8def\u56fe\u5982\u4e0b\uff1a</p> <p> </p> <p><code>DataGenerator</code> \u6a21\u5757\u63d0\u4f9b\u6d4b\u8bd5\u6570\u636e\uff0c\u6bcf\u6309\u4e00\u4e0b\u6309\u94ae <code>N17</code>\uff0c<code>DataGenerator</code> \u6a21\u5757\u63d0\u4f9b\u4e0b\u4e00\u4e2a\u6570\u636e\u5e76\u8fdb\u884c\u63e1\u624b\u3002\u8fd0\u7b97\u7684\u7ed3\u679c\u901a\u8fc7\u4e03\u6bb5\u6570\u7801\u7ba1\u663e\u793a\uff0c\u53ef\u4ee5\u6839\u636e\u5f00\u5173 <code>sw</code> \u7684\u503c\u9009\u62e9 128 \u4f4d\u8f93\u51fa\u4e2d\u7684 32 \u4f4d\u67e5\u770b\u3002\u6d4b\u8bd5\u6570\u636e\u4fdd\u5b58\u5728 <code>initial_data.hex</code> \u4e2d\uff0c\u5c06 <code>include/initial_file.vh</code> \u7684 <code>DATA_FILE_PATH</code> \u4fee\u6539\u4e3a\u8be5\u6587\u4ef6\u7684\u8def\u5f84\u5373\u53ef\u3002</p> <p>\u5176\u4e2d <code>sw</code> \u5bf9\u8f93\u51fa\u6570\u636e\u7684\u9009\u62e9\u5173\u7cfb\u5982\u4e0b\uff1a</p> <p> sw\u503c \u9009\u62e9\u7684\u8f93\u51fa 00 result_reg[31:0] 01 result_reg[63:32] 10 result_reg[95:64] 11 result_reg[127:96] <p></p> <p>\u6267\u884c <code>make bitstream</code> \u4e0b\u677f\u9a8c\u8bc1\u5373\u53ef\u3002</p> <p>\u4e3a\u4e86\u4fbf\u4e8e\u5bf9 <code>DataGenerator</code> \u548c <code>ConvUnit</code> \u534f\u540c\u5de5\u4f5c\u8fdb\u884c\u4eff\u771f\uff0c\u8fd9\u91cc\u63d0\u4f9b\u4e86 <code>sim/top_sim.sv</code> \u6a21\u5757\uff0c\u53ef\u4ee5\u5bf9 <code>top</code> \u6a21\u5757\u8fdb\u884c\u4eff\u771f\uff0c\u5927\u5bb6\u53ef\u4ee5\u5728 Vivado \u4e2d\u81ea\u884c\u4f7f\u7528\u3002</p>"},{"location":"lab4-1/#100","title":"\u5b9e\u9a8c\u62a5\u544a 100%","text":"<ol> <li>\u8bf7\u5728\u5b9e\u9a8c\u62a5\u544a\u4e2d\u8be6\u7ec6\u63cf\u8ff0\u6bcf\u4e00\u6b65\u7684\u8fc7\u7a0b\u5e76\u914d\u6709\u9002\u5f53\u7684\u622a\u56fe\u548c\u89e3\u91ca\uff0c\u5bf9\u4e8e\u4eff\u771f\u8bbe\u8ba1\u548c\u4e0a\u677f\u9a8c\u8bc1\u7684\u7ed3\u679c\u4e5f\u5e94\u5f53\u6709\u9002\u5f53\u7684\u89e3\u91ca\u548c\u7167\u7247\u300280%</li> </ol> <p>\u7ec6\u5206\uff1a</p> <ul> <li>\u4eff\u771f\u901a\u8fc7\uff0c\u8f93\u51fa<code>success!!!</code> 40%</li> <li>\u7efc\u5408\u5b9e\u73b0\u5377\u79ef\u5355\u5143 40%</li> </ul> <ol> <li> <p>\u89e3\u91ca\u4eff\u771f\u6d4b\u8bd5\u6837\u4f8b\u548c\u4e0b\u677f\u7684\u9876\u5c42\u7ed3\u6784\u4e3a\u4ec0\u4e48\u6ee1\u8db3 valid-ready \u63e1\u624b\u534f\u8bae\u300220%</p> </li> <li> <p><code>ConvUnit</code> \u6a21\u5757\u88ab\u5212\u5206\u4e3a <code>Shift</code> \u6a21\u5757\u548c <code>ConvOperator</code> \u6a21\u5757\uff0c\u6a21\u5757\u95f4\u7528 valid-ready \u534f\u8bae\u4f20\u9012\u6570\u636e\u3002\u8bf7\u601d\u8003\u80fd\u5426\u5bf9 <code>ConvOperator</code> \u4f5c\u7c7b\u4f3c\u4e0a\u8ff0\u7684\u6a21\u5757\u5206\u5272\u548c\u6570\u636e\u4ea4\u6362\uff0c\u5e76\u7ed9\u51fa\u8fd9\u6837\u5206\u5272\u540e\u53ef\u80fd\u5e26\u6765\u7684\u6027\u80fd\u63d0\u5347\u3002\uff08bonus\uff095%</p> </li> </ol>"},{"location":"lab4-1/#_18","title":"\u4ee3\u7801\u63d0\u4ea4","text":""},{"location":"lab4-1/#100_1","title":"\u9a8c\u6536\u68c0\u67e5\u70b9 100%","text":"<ul> <li>\u4eff\u771f\u6ce2\u5f62\u5c55\u793a 30%</li> <li>\u4ee3\u7801\u89e3\u91ca\u6216\u8bbe\u8ba1\u601d\u8def 30%</li> <li>\u4e0b\u677f\u9a8c\u8bc1 40%</li> </ul>"},{"location":"lab4-1/#_19","title":"\u63d0\u4ea4\u6587\u4ef6","text":"<p><code>src/lab4-1/</code> \u4e2d\u7f16\u5199\u7684 submit\u3001sim \u548c include \u7684\u4ee3\u7801\u3002</p>"},{"location":"lab4-2/","title":"\u5b9e\u9a8c4-2: \u4e32\u53e3\u4f7f\u7528\uff08bonus\uff09","text":""},{"location":"lab4-2/#_1","title":"\u5b9e\u9a8c\u76ee\u7684","text":"<ul> <li>\u5b66\u4e60\u4f7f\u7528 SystemVerilog \u7684 interface \u7b49\u9ad8\u7ea7\u8bed\u6cd5</li> <li>\u5b66\u4e60\u4e32\u53e3\u7684\u539f\u7406\u548c\u4f7f\u7528</li> <li>\u5b66\u4e60 FIFO \u7684\u539f\u7406\u548c\u4f7f\u7528</li> </ul>"},{"location":"lab4-2/#_2","title":"\u5b9e\u9a8c\u73af\u5883","text":"<ul> <li>\u64cd\u4f5c\u7cfb\u7edf\uff1aWindows 10+ 22H2\uff0cUbuntu 22.04+</li> <li>VHDL\uff1aVerilog\uff0cSystemVerilog</li> </ul>"},{"location":"lab4-2/#_3","title":"\u80cc\u666f\u77e5\u8bc6","text":""},{"location":"lab4-2/#uart","title":"uart \u4e32\u53e3\u4f20\u8f93\u534f\u8bae","text":"<p>uart\uff08universal asynchronous receiver/transmitter\uff09\u901a\u7528\u5f02\u6b65\u6536\u53d1\u4e32\u53e3\u662f\u4e00\u79cd\u4f4e\u901f\u3001\u5168\u53cc\u5de5\u3001\u4e32\u884c\u3001\u5f02\u6b65\u6570\u636e\u4f20\u8f93\u8bbe\u5907\u3002\u6700\u7b80\u5355\u7684\u4e32\u53e3\u7531\u4e24\u4e2a\u5f15\u811a\u7ec4\u6210\uff1a</p> <ul> <li>txd\uff1a\u5411\u5916\u90e8\u8bbe\u5907\u53d1\u9001\u6570\u636e</li> <li>rxd\uff1a\u63a5\u53d7\u6536\u5916\u90e8\u8bbe\u5907\u53d1\u9001\u7684\u6570\u636e</li> </ul> <p>uart \u4e32\u53e3\u6570\u636e\u7ebf\u7531\u4e24\u6839\u7ebf\u7ec4\u6210\uff1a\u4e00\u6839\u8fde\u63a5 A \u8bbe\u5907\u7684 txd \u548c B \u8bbe\u5907\u7684 rxd\uff0c\u8d1f\u8d23\u5c06 A \u7684\u6570\u636e\u53d1\u9001\u7ed9 B\uff1b\u4e00\u6839\u8fde\u63a5 A \u8bbe\u5907\u7684 rxd \u548c B \u8bbe\u5907\u7684 txd\uff0c\u8d1f\u8d23\u5c06 B \u8bbe\u5907\u7684\u6570\u636e\u53d1\u9001\u7ed9 A\u3002\u4ece\u800c\u5b9e\u73b0\u8bbe\u5907 A \u548c\u8bbe\u5907 B \u4e4b\u95f4\u7684\u53cc\u5411\u4ea4\u4e92\u3002</p> <p> </p> <p>uart \u4ea4\u4e92\u7684\u53cc\u65b9\u5e76\u4e0d\u4f9d\u8d56\u65f6\u949f\u8fdb\u884c\u540c\u6b65\uff0c\u6240\u4ee5\u662f\u5f02\u6b65\u4f20\u8f93\u7684\uff0c\u5b83\u4eec\u5171\u540c\u9075\u5b88 uart \u5f02\u6b65\u4f20\u8f93\u534f\u8bae\u6765\u786e\u4fdd\u4f20\u8f93\u7684\u6b63\u786e\u6027\u3002\u6ce2\u7279\u7387\uff08Baud Rate\uff09\u7528\u4e8e\u63cf\u8ff0\u4e32\u53e3\u4f20\u8f93\u7684\u901f\u7387\uff0c\u4f8b\u5982\u6ce2\u7279\u7387\u662f 9600\uff0c\u5219\u6bcf\u79d2\u4f20\u8f93 9600 \u4e2a bit \u7684\u6570\u636e\uff0c\u6216\u8005\u8bf4\u6bcf\u4e2a\u88ab\u4f20\u8f93\u7684\u6570\u636e\u4f1a\u5728\u6570\u636e\u7ebf\u4e0a\u7ef4\u6301 1/9600 s\uff0c\u5e38\u89c1\u7684\u6ce2\u7279\u7387\u6709 9600\u3001115200 \u7b49\u3002</p> <p>uart \u6bcf\u6b21\u4f20\u8f93\u4e00\u4e2a\u5b57\u8282\u7684\u6570\u636e\uff0c\u4ed6\u4f1a\u6839\u636e\u534f\u8bae\u5c06\u6570\u636e\u6253\u5305\u4e3a\u4e00\u4e2a\u4f4d\u5e8f\u5217\uff0c\u7136\u540e\u901a\u8fc7\u6570\u636e\u7ebf\u53d1\u9001\u51fa\u53bb\uff0c\u6bcf\u4e2a\u4f4d\u4fdd\u6301 1/baud s\u3002\u6570\u636e\u7ebf\u5728\u4e0d\u53d1\u9001\u6570\u636e\u65f6\u4fdd\u6301\u9ad8\u7535\u5e73\uff0c\u5f53\u53d1\u9001\u7aef\u9700\u8981\u53d1\u9001\u6570\u636e\u65f6\uff0c\u9996\u5148\u53d1\u9001\u4e00\u4e2a\u5355\u4f4d\u65f6\u95f4\u7684\u4f4e\u7535\u5e73\uff0c\u8868\u793a\u53d1\u9001\u5f00\u59cb\uff1b\u7136\u540e\u5c06\u5f85\u53d1\u9001\u6570\u636e\u4ece\u4f4e\u5230\u9ad8\u4f9d\u6b21\u53d1\u9001\u5230\u6570\u636e\u7ebf\u4e0a\uff0c\u6bcf\u4e2a\u4f4d\u4fdd\u6301\u4e00\u4e2a\u5355\u4f4d\u65f6\u95f4\uff1b\u6700\u540e\u53d1\u9001\u4e00\u4e2a\u5355\u4f4d\u65f6\u95f4\u7684\u9ad8\u7535\u5e73\u8868\u793a\u53d1\u9001\u7ed3\u675f\u3002\u7136\u540e\u6570\u636e\u7ebf\u56de\u5f52\u9ad8\u7535\u5e73\uff0c\u76f4\u5230\u4e0b\u4e00\u6b21\u6570\u636e\u53d1\u9001\u3002</p> <p>\u63a5\u6536\u7aef\u6070\u6070\u76f8\u53cd\uff0c\u5b83\u65f6\u523b\u68c0\u67e5\u6570\u636e\u7ebf\u4e0a\u7684\u7535\u5e73\uff0c\u5f53\u9047\u5230\u4f4e\u7535\u5e73\u65f6\u53d1\u73b0\u6709\u6570\u636e\u4f20\u8f93\uff0c\u7136\u540e\u6bcf\u9694\u4e00\u4e2a\u5355\u4f4d\u65f6\u95f4\u505a\u4e00\u6b21\u91c7\u6837\uff0c\u4f9d\u6b21\u5c06 8 \u4e2a bit \u7684\u4f20\u8f93\u6570\u636e\u91c7\u6837\u62fc\u63a5\uff0c\u5f97\u5230\u5b8c\u6574\u7684\u4f20\u8f93\u6570\u636e\u3002</p> <p> </p> <p>uart \u6570\u636e\u4f20\u8f93\u683c\u5f0f\u5982\u4e0b\uff1a</p> <ul> <li>\u8d77\u59cb\u4f4d\uff1a1 bit</li> <li>\u6570\u636e\u4f4d\uff1a8 bit</li> <li>\u5947\u5076\u6821\u9a8c\u4f4d\uff1a0/1 bit\uff08\u53ef\u9009\uff09</li> <li>\u7ec8\u6b62\u4f4d\uff1a1/1.5/2 bit\uff08\u53ef\u9009\uff09</li> </ul>"},{"location":"lab4-2/#_4","title":"\u4e32\u53e3\u4f7f\u7528","text":"<p>\u5047\u8bbe\u6211\u4eec\u7684 FPGA \u677f\u5df2\u7ecf\u6709\u4e86\u4e32\u53e3\u5355\u5143\uff0c\u90a3\u4e48\u6211\u4eec\u8981\u600e\u4e48\u4f7f\u7528\u4e0a\u4f4d\u673a\u548c FPGA \u677f\u901a\u8fc7\u4e32\u53e3\u8fdb\u884c\u4ea4\u4e92\u5462\uff1f</p> <p>\u9996\u5148\u6211\u4eec\u9700\u8981\u8fdb\u884c\u7269\u7406\u8fde\u7ebf\u3002\u56e0\u4e3a nexys-a7 \u5f00\u53d1\u677f\u7684 uart \u53e3\u548c jtag \u53e3\u5171\u7528\u4e00\u4e2a\u7aef\u53e3\u3001uart \u4f20\u8f93\u7ebf\u548c jtag \u4f20\u8f93\u7ebf\u5171\u7528\u4e00\u6839\u6570\u636e\u7ebf\uff0c\u6240\u4ee5\u6211\u4eec\u5c06\u4e0b\u677f\u7528\u7684\u6570\u636e\u7ebf\u8fde\u63a5 FPGA \u548c\u4e0a\u4f4d\u673a\u7684\u540c\u65f6\uff0c\u5df2\u7ecf\u5b8c\u6210\u4e86 uart \u7684\u6570\u636e\u7ebf\u8fde\u63a5\u5b8c\u6bd5\u3002\u73b0\u5728\u6253\u5f00\u5f00\u53d1\u677f\u7535\u6e90\uff0c\u5c31\u53ef\u4ee5\u5728 windows \u64cd\u4f5c\u7cfb\u7edf\u7684\u8bbe\u5907\u7ba1\u7406\u5668\u770b\u5230\u8fd9\u4e2a<code>USB Serial Port</code>\u8bbe\u5907\u3002</p> <p> </p> <p>\u53cc\u51fb\u8fd9\u4e2a<code>USB Serial Port</code>\u53ef\u4ee5\u67e5\u770b\u4e32\u53e3\u7684\u914d\u7f6e\u5c5e\u6027\uff0c\u53ef\u4ee5\u770b\u5230\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e32\u53e3\u6ce2\u7279\u7387\u4e3a 9600\uff0c\u6570\u636e\u4f4d 8 \u4f4d\uff0c\u6ca1\u6709\u5947\u5076\u6821\u9a8c\u4f4d\uff0c\u505c\u6b62\u4f4d 1 \u4f4d\uff0c\u6ca1\u6709\u6d41\u63a7\u5236\u3002\u5982\u679c\u9700\u8981\u5176\u4ed6\u914d\u7f6e\u53ef\u4ee5\u5728\u8fd9\u91cc\u4fee\u6539\u3002</p> <p> </p> <p>\u4e4b\u540e\u6211\u4eec\u4e0b\u8f7d\u5b89\u88c5\u4e32\u53e3\u8c03\u8bd5\u8f6f\u4ef6 Mobaxterm\u3002\u53cc\u51fb\u6253\u5f00\u540e\uff0c\u8fdb\u884c\u4e32\u53e3\u4ea4\u4e92\u754c\u9762\u7684\u914d\u7f6e:</p> <ul> <li>\u70b9\u51fb session \u5efa\u7acb\u65b0\u7684\u4f1a\u8bdd</li> <li>\u70b9\u51fb Serial \u8bbe\u7f6e\u4e32\u53e3\u4f1a\u8bdd</li> <li>\u9009\u62e9 Serial Port \u4e3a\u5f00\u53d1\u677f\u7684\u7aef\u53e3</li> <li>\u8bbe\u7f6e Speed \u4e3a\u4e4b\u524d\u67e5\u5230\u7684\u9ed8\u8ba4\u503c 9600</li> <li>\u4fee\u6539 Serial \u5176\u4ed6\u914d\u7f6e\u548c\u67e5\u5230\u7684\u9ed8\u8ba4\u503c\u4fdd\u6301\u4e00\u81f4<ul> <li>Data Bit: 8</li> <li>Stop Bit: 1</li> <li>Pairty: None</li> <li>Flow Control: None</li> </ul> </li> <li>\u70b9\u51fb Ok \u521b\u5efa\u4f1a\u8bdd</li> </ul> <p></p> <p>\u4e4b\u540e\u5982\u679c\u4e32\u53e3\u53d1\u9001\u6570\u636e\uff0c\u5c31\u53ef\u4ee5\u5728\u8fd9\u4e2a\u754c\u9762\u770b\u5230\u5b57\u7b26\u8f93\u51fa\uff1b\u70b9\u51fb\u4f1a\u8bdd\u754c\u9762\u6572\u51fb\u952e\u76d8\uff0c\u5c31\u53ef\u4ee5\u5411 FPGA \u53d1\u9001\u6570\u636e\u3002\u5982\u679c\u4e0a\u4f4d\u673a\u53d1\u9001\u4e86\u6570\u636e\uff0c\u5f00\u53d1\u677f\u7684 TX \u706f\u4f1a\u95ea\u70c1\uff0c\u5982\u679c\u4e0a\u4f4d\u673a\u63a5\u6536\u5230 FPGA \u53d1\u9001\u7684\u6570\u636e\uff0c\u5f00\u53d1\u677f\u7684 RX \u706f\u4f1a\u95ea\u70c1\u3002</p> <p></p>"},{"location":"lab4-2/#_5","title":"\u5b9e\u9a8c\u6b65\u9aa4","text":""},{"location":"lab4-2/#_6","title":"\u5b9e\u9a8c\u524d\u51c6\u5907","text":"<p>\u4e0e\u4e4b\u524d\u7684 lab \u76f8\u540c\uff0c\u542f\u52a8\u5b89\u88c5\u5728\u4f60\u7535\u8111\u4e2d\u7684 Ubuntu 22.04 \u73af\u5883\uff08 WSL \u6216\u865a\u62df\u673a\uff09\uff0c\u968f\u540e\u901a\u8fc7 <code>cd</code> \u79fb\u52a8\u5230 <code>sys1-sp24</code> \u76ee\u5f55\u4e0b\uff0c\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff1a <pre><code>git pull origin master\ncd repo/sys-project\ngit pull origin other\n</code></pre></p>"},{"location":"lab4-2/#_7","title":"\u6a21\u5757\u63a5\u53e3\u7b80\u4ecb","text":"<p>\u4e32\u53e3\u76f8\u5173\u7684\u6a21\u5757\u5f88\u591a\uff0c\u6211\u4eec\u5bf9\u5185\u90e8\u7ec6\u8282\u4e0d\u4e00\u4e00\u4ecb\u7ecd\u4e86\uff0c\u53ea\u5bf9\u7aef\u53e3\u3001\u914d\u7f6e\u53c2\u6570\u548c\u4f7f\u7528\u505a\u4e00\u4e2a\u7b80\u5355\u4ecb\u7ecd\uff1a</p>"},{"location":"lab4-2/#uartpack","title":"UartPack","text":"<p><code>UartPack</code> \u5305\uff08<code>sys-project/lab4-2/include/uart_struct.vh</code>\uff09\u5b9a\u4e49\u4e86 uart \u76f8\u5173\u7684\u6570\u636e\u7c7b\u578b\u548c\u53c2\u6570\uff0c\u5176\u4e2d <code>uart_t</code> \u662f\u6536\u53d1\u6570\u636e\u7684\u6570\u636e\u7c7b\u578b\uff0c<code>UART_DATA_WIDTH</code> \u662f\u6536\u53d1\u6570\u636e\u7684\u5bbd\u5ea6\u3002</p> <pre><code>package UartPack;\n\n    parameter UART_DATA_WIDTH = 8;\n    typedef logic [UART_DATA_WIDTH-1:0] uart_t;\n    parameter UART_STRUCT_WIDTH = UART_DATA_WIDTH;\n\nendpackage\n</code></pre>"},{"location":"lab4-2/#async_transmitter-async_receiver","title":"async_transmitter \u548c async_receiver","text":"<p><code>async_transmitter</code> \u662f\u88f8\u9732\u7684\u4e32\u53e3\u53d1\u9001\u88c5\u7f6e\uff0c\u8d1f\u8d23\u5c06 8 \u4f4d\u7684\u8f93\u5165\u6570\u636e\u6839\u636e uart \u6570\u636e\u4f20\u8f93\u534f\u8bae\u548c\u6ce2\u7279\u7387\uff0c\u6253\u5305\u4ece\u4e32\u53e3\u7684 txd \u7aef\u53e3\u53d1\u9001\u7ed9\u63a5\u6536\u8bbe\u5907\u3002\u6570\u636e\u914d\u7f6e\uff1a8 \u4f4d\u6570\u636e\u4f4d\u30012 \u4f4d\u505c\u6b62\u4f4d\u3001\u6ca1\u6709\u5947\u5076\u6821\u9a8c\u4f4d\u3002</p> <pre><code>module async_transmitter#(\n    parameter ClkFrequency = 25000000,\n    // \u9a71\u52a8 transmitter \u662f\u65f6\u949f\u9891\u7387\uff0c\u5355\u4f4d Hz\n    // \u4f8b\u5982 100MHz\uff0c\u53c2\u6570\u5c31\u662f 100000000\n    parameter Baud = 115200\n    // \u4e32\u53e3\u7684\u6ce2\u7279\u7387\n)(\n    input wire clk,\n    // \u4e32\u53e3\u9a71\u52a8\u7684\u65f6\u949f\n    input wire TxD_start,\n    // \u5f53 TxD_start=1 \u7684\u65f6\u5019\u4e32\u53e3\u5c06\u5f00\u59cb\u53d1\u9001 TxD_Data \u7684\u503c\n    input wire [7:0] TxD_data,\n    // \u4e32\u53e3\u53d1\u9001\u5230\u6570\u636e\u7ebf\u4e0a\u7684\u6570\u636e\n    output wire TxD,\n    // \u8fde\u63a5\u5230\u5f00\u53d1\u677f\u7684 txd \u7aef\u53e3\n    output wire TxD_busy\n    // \u5f53 TxD_busy=1 \u7684\u65f6\u5019\uff0ctransmitter \u6b63\u5728\u4f20\u8f93\u6570\u636e\uff0c\u4e0d\u54cd\u5e94 TxD_start \u8bf7\u6c42\u3002\u56e0\u6b64\u5f53 TxD_busy=1 \u7684\u65f6\u5019\u6700\u597d\u4e0d\u8981\u5c06 TxD_start \u8bbe\u7f6e\u4e3a 1\u3002\n);\n</code></pre> <p><code>async_receiver</code> \u662f\u88f8\u9732\u7684\u4e32\u53e3\u63a5\u6536\u8bbe\u5907\uff0c\u6839\u636e uart \u6570\u636e\u4f20\u8f93\u534f\u8bae\uff0c\u63a5\u6536\u5bf9\u65b9\u53d1\u9001\u8bbe\u5907\u53d1\u9001\u5230 rxd \u7684 bit \u6d41\uff0c\u6574\u5408\u5f97\u5230 8 \u4f4d\u6570\u636e\u3002\u6570\u636e\u914d\u7f6e\uff1a8 \u4f4d\u6570\u636e\u4f4d\u30011 \u4f4d\u505c\u6b62\u4f4d\u3001\u6ca1\u6709\u5947\u5076\u6821\u9a8c\u4f4d\u3002</p> <pre><code>module async_receiver #(\n    parameter ClkFrequency = 25000000,\n    // \u9a71\u52a8 receiver \u662f\u65f6\u949f\u9891\u7387\n    parameter Baud = 115200\n    // \u4e32\u53e3\u7684\u6ce2\u7279\u7387\n)(\n    input wire clk,\n    input wire RxD,\n    // \u63a5\u53d7\u6765\u81ea\u4e32\u53e3 rxd \u7aef\u53e3\u7684\u8f93\u5165\n    output reg RxD_data_ready,\n    // RxD_data_ready = 1 \u7684\u65f6\u5019\u8bf4\u660e\u4e32\u53e3\u5185\u90e8\u63a5\u53d7\u5f97\u5230\u6570\u636e\uff0c\u8bf7\u6c42\u5916\u90e8\u8bbe\u5907\u8bfb\u53d6\u63a5\u6536\u5230\u7684\u6570\u636e\n    input wire RxD_clear,\n    // RxD_clear = 1 \u7684\u65f6\u5019\uff0c\u4e32\u53e3\u8ba4\u4e3a\u5916\u90e8\u8bbe\u5907\u5df2\u7ecf\u8bfb\u53d6\u4e86\u81ea\u5df1\u5185\u90e8\u7684\u6570\u636e\uff0c\u5c06\u6e05\u7a7a\u5185\u90e8\u7f13\u5b58\u7684\u6570\u636e\n    output reg [7:0] RxD_data\n    // \u4e32\u53e3\u63a5\u6536\u8bbe\u5907\u6574\u7406\u5f97\u5230\u7684 8 \u4f4d\u6570\u636e\uff0c\u5f53\u4e14\u4ec5\u5f53 RxD_data_ready = 1 \u7684\u65f6\u5019\uff0cRxD_data \u6709\u6548\uff0c\u4e14\u53ea\u4fdd\u8bc1\u6709\u6548\u4e00\u4e2a\u65f6\u949f\u5468\u671f\uff0c\u4ece\u4e0b\u4e2a\u5468\u671f\u5f00\u59cb\u53ef\u80fd\u88ab\u4f20\u53e3\u4fe1\u53d1\u9001\u7684\u6570\u636e\u8986\u76d6\n);\n</code></pre>"},{"location":"lab4-2/#uart_transmitter-uart_receiver","title":"uart_transmitter \u548c uart_receiver","text":"<p><code>uart_transmitter</code> \u5bf9 <code>async_transmitter</code> \u8fdb\u884c\u4e86\u5305\u88f9\uff0c\u5c06\u539f\u6765 <code>TxD_start</code> \u6570\u636e\u4f20\u8f93\u3001<code>TxD_busy</code> \u8bbe\u5907\u7e41\u5fd9\u6570\u636e\u4f20\u8f93\u63a7\u5236\u4fe1\u53f7\u8f6c\u6362\u4e3a valid-ready \u7684\u6570\u636e\u4f20\u8f93\u534f\u8bae\u5f62\u5f0f\u3002</p> <p><code>uart_receiver</code> \u5bf9 <code>async_receiver</code> \u8fdb\u884c\u4e86\u5305\u88f9\uff0c\u5c06\u539f\u6765 <code>RxD_data_ready</code> \u6570\u636e\u5c31\u7eea\u3001<code>RxD_clear</code> \u6570\u636e\u6e05\u7a7a\u6570\u636e\u4f20\u8f93\u63a7\u5236\u4fe1\u53f7\u8f6c\u6362\u4e3a valid-ready \u7684\u6570\u636e\u4f20\u8f93\u534f\u8bae\u5f62\u5f0f\u3002</p> <p>\u8fd9\u6837\u4fbf\u4e8e\u4e0a\u5c42\u6a21\u5757\u7528\u7edf\u4e00\u7684 valid-ready \u534f\u8bae\u8fdb\u884c\u6a21\u5757\u8c03\u7528\u3002 </p> <pre><code>module uart_transmitter#(\n    parameter ClkFrequency = 100000000,\n    // \u9a71\u52a8 receiver \u662f\u65f6\u949f\u9891\u7387\n    parameter Baud = 9600\n    // \u4e32\u53e3\u7684\u6ce2\u7279\u7387\n)(\n    input wire clk,\n    input wire rstn,\n    Decoupled_ift.Slave uart_data,\n    // valid-ready \u534f\u8bae\u8fdb\u884c\u5f85\u53d1\u9001\u7684 data \u7684\u4f20\u8f93\n    output wire txd,\n    // txd \u7aef\u53e3\u8f93\u51fa\u7684\u6570\u636e\n    input wire \n    // cts \u7528\u4e8e\u6d41\u63a7\u5236\uff0c\u8fd9\u91cc\u6682\u65f6\u6ca1\u6709\u4f7f\u7528\n);\n\nmodule uart_receiver#(\n    parameter ClkFrequency = 100000000,\n    parameter Baud = 9600\n)(\n    input wire clk,\n    input wire rstn,\n    Decoupled_ift.Master uart_data,\n    // valid-ready \u534f\u8bae\u8fdb\u884c\u63a5\u6536\u5230\u7684 data \u7684\u4f20\u8f93\n    input wire rxd,\n    // rxd \u7aef\u53e3\u8f93\u5165\u7684\u6570\u636e\n    output wire rts\n    // rts \u7528\u4e8e\u6d41\u63a7\u5236\uff0c\u8fd9\u91cc\u6682\u65f6\u6ca1\u6709\u4f7f\u7528\n);\n</code></pre> <p>\u8fd9\u91cc\u7684 <code>Decoupled_ift</code> \u662f\u6211\u4eec\u5b9a\u4e49\u7684\u63a5\u53e3 <code>interface</code>\uff0c\u7528\u4e8e\u89c4\u8303\u6a21\u5757\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u8f93\u3002SystemVerilog \u7684 <code>interface</code> \u8bed\u6cd5\u53c2\u89c1\u9644\u5f55\u90e8\u5206\u3002</p>"},{"location":"lab4-2/#syncfifo-asyncfifo","title":"SyncFifo \u548c AsyncFifo","text":"<p>\u56e0\u4e3a\u4e32\u53e3\u7684\u6570\u636e\u6536\u53d1\u548c FPGA \u5185\u90e8\u6570\u636e\u7684\u6536\u53d1\u901f\u5ea6\u6709\u4e00\u5b9a\u7684\u5dee\u5f02\uff0c\u56e0\u6b64\u9700\u8981\u6709\u4e00\u4e2a\u961f\u5217\uff08fifo\uff09\u8d77\u5230\u6570\u636e\u7f13\u51b2\u7684\u4f5c\u7528\u3002\u6bd4\u5982 FPGA \u4e00\u6b21\u6027\u53d1\u9001\u4e86 8 \u4e2a\u5b57\u8282\u7684\u6570\u636e\u8bf7\u6c42\uff0c\u800c\u4e32\u53e3\u53ea\u6765\u5f97\u53ca\u53d1\u9001\u4e00\u4e2a\uff0c\u90a3\u4e48\u5269\u4e0b\u7684 7 \u4e2a\u4f1a\u88ab\u6682\u5b58\u5230 fifo \u4e2d\uff0c\u7b49\u5f85\u4e32\u53e3\u7a7a\u95f2\u540e\u6162\u6162\u8bfb\u53d6\u3002</p> <p>SyncFifo \u540c\u6b65\u961f\u5217\u3002\u8d1f\u8d23\u6682\u5b58\u4e0a\u6e38\u6a21\u5757\u4ea7\u751f\u7684\u6570\u636e\uff0c\u5e76\u4e3a\u4e0b\u6e38\u6a21\u5757\u63d0\u4f9b\u5f85\u5904\u7406\u7684\u6570\u636e\u3002\u8fd9\u91cc\u4e0a\u6e38\u6a21\u5757\u548c\u4e0b\u6e38\u4f7f\u7528\u540c\u4e00\u4e2a\u65f6\u949f\uff0c\u6ca1\u6709\u8de8\u65f6\u949f\u57df\u3002</p> <pre><code>module SyncFifo # (\n    parameter DATA_WIDTH = 64,\n    // \u961f\u5217\u6bcf\u9879\u6570\u636e\u7684\u5bbd\u5ea6\n    parameter FIFO_DEPTH = 8\n    // \u961f\u5217\u6700\u5927\u5b58\u50a8\u7684\u6570\u636e\u7684\u4e2a\u6570\uff0c\u6216\u8005\u8bf4\u961f\u5217\u7684\u6df1\u5ea6\n) (\n    input logic clk,\n    // \u4e0a\u6e38\u3001\u4e0b\u6e38\u7684\u9a71\u52a8\u65f6\u949f\n    input logic rstn,\n\n    input logic ren,\n    // \u4e0b\u6e38\u7684\u8bfb\u8bf7\u6c42\n    output logic [DATA_WIDTH-1:0] out_data,\n    // \u53d1\u9001\u7ed9\u4e0b\u6e38\u7684\u6570\u636e\uff0c\u53ea\u8981 ren&amp;~empty \u76f4\u63a5\u83b7\u5f97\u6570\u636e\n    output logic empty,\n    // \u8868\u793a\u961f\u5217\u662f\u5426\u4e3a\u7a7a\uff0c\u5982\u679c\u4e3a\u7a7a\uff0c\u4e0b\u6e38\u65e0\u6cd5\u83b7\u5f97\u6570\u636e\n\n    input logic wen,\n    // \u4e0a\u6e38\u7684\u5199\u8bf7\u6c42\n    input logic [DATA_WIDTH-1:0] in_data,\n    // \u4e0a\u6e38\u5199\u5165\u7684\u6570\u636e\uff0c\u53ea\u8981 wen&amp;~full \u76f4\u63a5\u5199\u5165\u6570\u636e\n    output logic full\n    // \u8868\u793a\u961f\u5217\u662f\u5426\u6ee1\uff0c\u5982\u679c\u4e3a\u6ee1\uff0c\u4e0a\u6e38\u65e0\u6cd5\u5199\u5165\u6570\u636e\n);\n</code></pre> <p>AsyncFifo \u5f02\u6b65\u961f\u5217\u548c\u540c\u6b65\u961f\u5217\u7684\u533a\u522b\u5728\u4e8e\u4e0a\u6e38\u548c\u4e0b\u6e38\u4f7f\u7528\u4e0d\u540c\u7684\u65f6\u949f\uff0c\u4e14\u9700\u8981\u989d\u5916\u8fdb\u884c\u8de8\u65f6\u949f\u57df\u7684\u4fdd\u62a4\u3002</p> <pre><code>module AsyncFifo # (\n    parameter DATA_WIDTH = 64,\n    parameter FIFO_DEPTH = 8\n) (\n    input logic rstn,\n\n    input logic rclk,\n    // \u4e0b\u6e38\u9a71\u52a8\u65f6\u949f\n    input logic ren,\n    output logic [DATA_WIDTH-1:0] out_data,\n    output logic empty,\n\n    input logic wclk,\n    // \u4e0a\u6e38\u9a71\u52a8\u65f6\u949f\n    input logic wen,\n    input logic [DATA_WIDTH-1:0] in_data,\n    output logic full\n);\n</code></pre>"},{"location":"lab4-2/#fifo-decoupledfifo","title":"Fifo \u548c DecoupledFifo","text":"<p>Fifo \u5728 <code>SyncFifo</code> \u548c <code>AsyncFifo</code> \u7684\u57fa\u7840\u4e0a\u52a0\u5165\u4e86 <code>FIFO_KIND</code> \u53c2\u6570\uff0c\u5982\u679c\u53c2\u6570\u503c\u4e3a \u201c<code>sync</code>\u201d\uff0c\u5219\u5185\u90e8\u4f7f\u7528 <code>SyncFifo</code> \u6a21\u5757\u5b9e\u73b0\uff0c\u5982\u679c\u53c2\u6570\u503c\u662f \u201c<code>async</code>\u201d\uff0c\u5219\u5185\u90e8\u4f7f\u7528 <code>AsyncFifo</code> \u6a21\u5757\u5b9e\u73b0\u3002</p> <pre><code>module Fifo #(\n    parameter DATA_WIDTH = 64,\n    parameter FIFO_DEPTH = 8,\n    parameter FIFO_KIND  = \"sync\"\n    // \"sync\" \u4e3a\u540c\u6b65\u961f\u5217\uff0c\"async\" \u4e3a\u5f02\u6b65\u961f\u5217\n) (\n    input logic rstn,\n\n    input logic rclk,\n    // \u540c\u6b65\u961f\u5217\u7684 rclk \u548c wclk \u5e94\u4fdd\u6301\u4e00\u81f4\n    input logic ren,\n    output logic [DATA_WIDTH-1:0] out_data,\n    output logic empty,\n\n    input logic wclk,\n    input logic wen,\n    input logic [DATA_WIDTH-1:0] in_data,\n    output logic full\n);\n</code></pre> <p><code>DecoupledFifo</code> \u6a21\u5757\u5bf9 Fifo \u6a21\u5757\u7684\u63a5\u53e3\u8fdb\u884c\u5c01\u88c5\uff0c\u5c06 <code>in_data</code> \u548c <code>out_data</code> \u7684\u6570\u636e\u4f20\u8f93\u63a7\u5236\u578b\u53f7\u8f6c\u6362\u4e3a\u7edf\u4e00\u7684 valid-ready \u6a21\u5f0f\uff0c\u4fbf\u4e8e\u7edf\u4e00\u8c03\u7528\u3002</p> <pre><code>module DecoupledFifo #(\n    parameter FIFO_DEPTH = 8,\n    parameter FIFO_KIND  = \"sync\"\n)(\n    input logic rstn,\n\n    input logic out_clk,\n    // \u540c\u6b65\u961f\u5217\u7684 in_clk \u548c out_clk \u5e94\u4fdd\u6301\u4e00\u81f4\n    Decoupled_ift.Master out_data,\n    // \u4e0b\u6e38\u6a21\u5757\u548c fifo \u7684\u63e1\u624b\n\n    input logic in_clk,\n    Decoupled_ift.Slave in_data\n    // \u4e0a\u6e38\u6a21\u5757\u548c fifo \u7684\u63e1\u624b\n);\n</code></pre>"},{"location":"lab4-2/#uartunit","title":"UartUnit","text":"<p>\u6b63\u5f0f\u4f7f\u7528\u7684\u4e32\u53e3\u5355\u5143\uff0c\u5176\u5185\u90e8\u7684\u6a21\u5757\u6784\u9020\u5982\u4e0b\uff1a</p> <p> </p> <p>txd \u8f93\u5165\u7684\u6570\u636e\u88ab <code>uart_trasmitter</code> \u63a5\u6536\u540e\u5b58\u5165 fifo\uff0c\u7b49\u5f85\u88ab\u5176\u4ed6\u6a21\u5757\u8bfb\u53d6\uff1b\u6a21\u5757\u53d1\u9001\u7684\u6570\u636e\u5148\u5b58\u5165 fifo\uff0c\u7136\u540e\u53d1\u9001\u7ed9 <code>uart_receiver</code> \u6a21\u5757\u53d1\u9001\u5230 rxd \u7aef\u53e3\u3002fifo \u548c uart \u9a71\u52a8\u6a21\u5757\u4e4b\u95f4\u7528 valid-ready <code>\u534f\u8bae\u4f20\u8f93\u6570\u636e\uff0cuartunit</code> \u548c\u5916\u90e8\u6a21\u5757\u4e4b\u95f4\u4e5f\u7528 valid-ready \u534f\u8bae\u4f20\u8f93\u6570\u636e\u3002</p>"},{"location":"lab4-2/#_8","title":"\u56de\u73af\u6d4b\u8bd5","text":"<p>\u4e3a\u4e86\u68c0\u6d4b <code>UartUnit</code> \u6536\u53d1\u529f\u80fd\u662f\u5426\u90fd\u6b63\u786e\uff0c\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u662f\u4e0a\u4f4d\u673a\u5411 <code>UartUnit</code> \u53d1\u9001\u4e00\u4e2a\u6570\u636e\uff0c<code>UartUnit</code> \u63a5\u6536\u5230\u6570\u636e\u4e4b\u540e\u518d\u53d1\u9001\u7ed9\u4e0a\u4f4d\u673a\uff0c\u5982\u679c\u53d1\u9001\u7684\u6570\u636e\u548c\u63a5\u6536\u5230\u7684\u6570\u636e\u4e00\u81f4\uff0c\u5219\u8bf4\u660e\u6570\u636e\u6536\u53d1\u90fd\u6ca1\u6709\u95ee\u9898\u3002</p> <p>\u8bf7\u8865\u5168<code>src/lab4-2/submit/UartLoop.sv</code>\u6a21\u5757\uff0c\u8be5\u6a21\u5757\u8d1f\u8d23\u63a5\u6536 <code>UartUnit</code> \u7684\u6570\u636e\uff0c\u7136\u540e\u518d\u8ba9 <code>UartUnit</code> \u53d1\u9001\u8be5\u6570\u636e\uff0c\u4ece\u800c\u548c\u4e0a\u4f4d\u673a\u914d\u5408\u5b9e\u73b0\u5b8c\u6574\u7684\u56de\u73af\u6d4b\u8bd5\u3002<code>UartLoop</code> \u548c <code>UartUnit</code> \u914d\u5408\u5f97\u5230\u6700\u7ec8\u7684\u56de\u73af\u6d4b\u8bd5\u6a21\u5757 LoopTest\uff08<code>sys-project/lab4-2/general/LoopTest.sv</code>\uff09</p> <p> </p> <p><code>UartLoop</code> \u6a21\u5757\u7684\u63a5\u53e3\u5982\u4e0b\u3002<code>rdata</code> \u7528\u4e8e\u63a5\u6536\u6765\u81ea <code>uart_rdata</code> \u7684\u4e0a\u4f4d\u673a\u6570\u636e\uff0c\u7136\u540e <code>rdata</code> \u5c06\u6570\u636e\u53d1\u9001\u7ed9 <code>tdata</code>\uff0c<code>tdata</code> \u5c06\u6570\u636e\u53d1\u9001\u7ed9 <code>uart_tdata</code> \u5373\u53ef\u3002\u76f8\u4e92\u4e4b\u95f4\u4f7f\u7528 valid-ready \u534f\u8bae\u3002</p> <p>debug \u7684\u56db\u4e2a\u6570\u636e\u662f\u7528\u4e8e\u8c03\u8bd5\u7684\u53ef\u9009\u9879\u3002<code>debug_rdata</code>\u3001<code>debug_tdata</code> \u7528\u4e8e\u5c06 <code>tdata</code> \u548c <code>rdata</code> \u7684\u503c\u8f93\u9001\u5230\u4e03\u6bb5\u6570\u7801\u7ba1\u663e\u793a\uff0c\u5982\u679c\u56de\u73af\u6d4b\u8bd5\u7684\u65f6\u5019\u53d1\u73b0 <code>tdata</code>\u3001<code>rdata</code> \u7684\u503c\u548c\u4e0a\u4f4d\u673a\u53d1\u9001\u6216\u8005\u63a5\u6536\u7684\u6570\u636e\u4e0d\u4e00\u81f4\uff0c\u53ef\u4ee5\u8d77\u5230\u8c03\u8bd5\u7684\u4f5c\u7528\u3002<code>debug_data</code>\u3001<code>debug_send</code> \u5206\u522b\u8fde\u63a5\u5230\u5f00\u5173\u548c\u6309\u94ae\uff0c\u5f53\u6309\u94ae\u6309\u4e0b\u7684\u65f6\u5019\uff0c<code>debug_send = 1</code>\uff0c\u5219 <code>tdata</code> \u8f7d\u5165 <code>debug_data</code> \u7684\u503c\uff0c\u7136\u540e\u53d1\u9001\u7ed9 <code>uartunit</code>\u3002\u8fd9\u6837\u5373\u4f7f\u63a5\u6536\u88c5\u7f6e\u5b58\u5728\u95ee\u9898\uff0c\u53d1\u9001\u88c5\u7f6e\u4ecd\u7136\u53ef\u4ee5\u8fdb\u884c\u6d4b\u8bd5\u3002\u8fd9\u56db\u4e2a\u6570\u636e\u90fd\u662f\u5907\u9009\u9879\uff0c\u53ef\u4ee5\u4e0d\u5b9e\u73b0\uff08\u4f46\u662f\u5efa\u8bae\u5b9e\u73b0\uff0c\u53ef\u4ee5\u5e2e\u52a9\u786c\u4ef6\u8c03\u8bd5\uff09\u3002</p> <pre><code>`include\"uart_struct.vh\"\nmodule UartLoop(\n    input clk,\n    input rstn,\n    Decoupled_ift.Slave uart_rdata,\n    Decoupled_ift.Master uart_tdata,\n\n    input UartPack::uart_t debug_data,\n    input logic debug_send,\n    output UartPack::uart_t debug_rdata,\n    output UartPack::uart_t debug_tdata\n);\n    import UartPack::*;\n\n    uart_t rdata;\n    logic rdata_valid;\n\n    uart_t tdata;\n    logic tdata_valid;\n\n    // fill the code\n\n    assign debug_rdata = rdata;\n    assign debug_tdata = tdata;\n\nendmodule\n</code></pre>"},{"location":"lab4-2/#_9","title":"\u4eff\u771f\u6d4b\u8bd5","text":"<p><code>sys-project/lab4-2/sim/Judge.sv</code>\u5b9e\u73b0\u4e86\u4e00\u4e2a Verilog \u5b9e\u73b0\u7684\u4e0a\u4f4d\u673a\uff0c\u4f1a\u4ee5\u548c <code>UartUnit</code> \u76f8\u4e00\u81f4\u7684\u6ce2\u7279\u7387\u5c06\u5b57\u7b26\u53d1\u9001\u7ed9 <code>LoopTest</code>\uff0c\u7136\u540e\u63a5\u6536\u6765\u81ea <code>LoopTest</code> \u7684\u5b57\u7b26\u3002<code>Judge</code> \u6bcf\u53d1\u9001\u4e00\u4e2a\u5b57\u7b26\u4f1a\u8f93\u51fa<code>transmit data xx</code>\uff0c\u6bcf\u63a5\u6536\u4e00\u4e2a\u6570\u636e\u4f1a\u8f93\u51fa <code>receive data xx</code>\uff0c\u5982\u679c\u6bd4\u5bf9 transmit \u7684\u6570\u636e\u548c receive \u6570\u636e\u4e0d\u4e00\u81f4\u600e\u4f1a\u62a5\u9519\u8f93\u51fa<code>fail!!!</code>\uff0c\u5982\u679c\u5728\u89c4\u5b9a\u65f6\u95f4\u5185\u6ca1\u6709\u6bd4\u5bf9\u9519\u8bef\uff0c\u4f1a\u8f93\u51fa <code>success!!!</code>\u3002\u4e0d\u8fc7\u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u4f60\u7684 <code>UartLoop</code> \u5b58\u5728\u9519\u8bef\uff0c\u65e0\u6cd5\u6b63\u786e\u7684\u53d1\u9001\u6570\u636e\uff0cJudge \u56e0\u4e3a\u63a5\u53d7\u4e0d\u5230\u6570\u636e\u5e76\u4e0d\u4f1a\u62a5\u9519\uff0c\u8fd9\u4e2a\u65f6\u5019\u9700\u8981\u68c0\u67e5 log \u8f93\u51fa\uff0c\u67e5\u770b <code>Judge</code> \u8f93\u51fa\u548c\u63a5\u6536\u662f\u4e0d\u662f\u76f8\u4e00\u81f4\uff0c\u800c\u4e0d\u662f\u53ea\u6709\u8f93\u51fa\uff0c\u6ca1\u6709\u63a5\u6536\u3002</p> <p>\u8fd0\u884c <code>make verilate</code> \u5373\u53ef\u8fdb\u884c\u6d4b\u8bd5\uff0c\u5982\u679c\u6d4b\u8bd5\u6210\u529f\u5e94\u8be5\u4f1a\u6709\u7c7b\u4f3c\u5982\u4e0b\u7684\u8f93\u51fa\uff08\u6570\u636e\u7684\u503c\u4e0d\u4e00\u5b9a\u4e00\u81f4\uff09\uff1a <pre><code>receive data c4\nreceive data 9c\nreceive data 02\ntransmit data c4\nreceive data e4\ntransmit data 9c\nreceive data 78\ntransmit data 02\nreceive data bc\ntransmit data e4\nreceive data b6\ntransmit data 78\nreceive data e4\ntransmit data bc\nreceive data b7\ntransmit data b6\nreceive data 53\ntransmit data e4\nsuccess!!!\n</code></pre></p>"},{"location":"lab4-2/#_10","title":"\u7efc\u5408\u4e0b\u677f","text":"<p>\u8fd0\u884c <code>make bitstream</code> \u751f\u6210 bit \u6d41\uff0c\u7136\u540e\u4e0b\u677f\u9a8c\u8bc1\u3002\u7528 \u201c\u4e32\u53e3\u4f7f\u7528\u201d \u4e00\u8282\u7684\u63cf\u8ff0\u5c06\u5f00\u53d1\u677f\u548c\u4e0a\u4f4d\u673a\u8fde\u63a5\u3001\u6253\u5f00 mobaxterm\u3001\u8bbe\u7f6e\u4e32\u53e3\u4f1a\u8bdd\uff0c\u7136\u540e\u5728\u4e32\u53e3\u4f1a\u8bdd\u7a97\u53e3\u952e\u5165\u5b57\u7b26\uff0c\u7b49\u5f85\u5f00\u53d1\u73ed\u63a5\u6536\u548c\u91cd\u65b0\u53d1\u51fa\u5b57\u7b26\uff0c\u5982\u679c\u7a97\u53e3\u663e\u793a\u7684\u5b57\u7b26\u548c\u952e\u5165\u7684\u5b57\u7b26\u76f8\u4e00\u81f4\uff0c\u5219\u8bf4\u660e\u56de\u73af\u6d4b\u8bd5\u6b63\u786e\uff0c\u53cd\u4e4b\u5219\u6709\u9519\u8bef\u3002\u4f8b\u5982\u6211\u8fd9\u91cc\u8f93\u5165 <code>good morning, everyone</code>\uff0c\u4f1a\u8bdd\u5c31\u4f1a\u663e\u793a\u8fd9\u4e2a\u5b57\u7b26\u4e32\uff1a</p> <p></p> <p>\u5f00\u5173\u548c\u6309\u94ae\u7684\u4f5c\u7528\u5982\u4e0b\uff1a</p> <p> io function btn[0] debug_send sw[2:9] debug_data sw[0:1] display_sel <p></p> <p> sw[0:1] function 00 txd,rxd,rdata,tdata UartLoop \u5185\u90e8\u7684\u4fe1\u606f 01 rxd=0 \u7684\u5468\u671f\u6570\uff0c\u5bf9\u677f\u5b50\u63a5\u6536\u5230\u4e0a\u4f4d\u673a\u6570\u636e\u7684\u91cf\u5316 10 txd=0 \u7684\u5468\u671f\u6570\uff0c\u5bf9\u677f\u5b50\u53d1\u9001\u6570\u636e\u7684\u91cf\u5316 11 0 <p></p>"},{"location":"lab4-2/#100","title":"\u5b9e\u9a8c\u62a5\u544a 100","text":"<ol> <li>\u8bf7\u5728\u5b9e\u9a8c\u62a5\u544a\u4e2d\u8be6\u7ec6\u63cf\u8ff0\u6bcf\u4e00\u6b65\u7684\u8fc7\u7a0b\u5e76\u914d\u6709\u9002\u5f53\u7684\u622a\u56fe\u548c\u89e3\u91ca\uff0c\u5bf9\u4e8e\u4eff\u771f\u8bbe\u8ba1\u548c\u4e0a\u677f\u9a8c\u8bc1\u7684\u7ed3\u679c\u4e5f\u5e94\u5f53\u6709\u9002\u5f53\u7684\u89e3\u91ca\u548c\u7167\u7247 </li> </ol> <p>\u7ec6\u5206\uff1a</p> <ul> <li>\u4eff\u771f\u901a\u8fc7\uff0c\u8f93\u51fa<code>success!!!</code> 20</li> <li>\u4e0b\u677f\u6d4b\u8bd5\uff0c\u53ef\u4ee5\u901a\u8fc7\u56de\u73af\u6d4b\u8bd5\uff0c\u8981\u6c42\u4f1a\u8bdd\u7a97\u53e3\u8f93\u51fa\u81ea\u5df1\u7684\u5b66\u53f7 20</li> </ul> <ol> <li> <p>\u9605\u8bfb\u4ee3\u7801\u548c\u7406\u8bba\uff0c\u8bbe\u8ba1 async_transmitter \u7684\u6709\u9650\u72b6\u6001\u673a\uff0c\u5e76\u63cf\u8ff0 async_transmitter \u7684\u5927\u81f4\u5de5\u4f5c\u6d41\u7a0b 40</p> </li> <li> <p>uart \u6570\u636e\u7ebf\u4e0d\u53ef\u907f\u514d\u5b58\u5728\u6bdb\u523a\u548c\u7535\u5e73\u6270\u52a8\uff0c\u601d\u8003 async_receiver \u53ef\u4ee5\u7528\u4ec0\u4e48\u529e\u6cd5\u6765\u89c4\u907f\u63a5\u53d7\u6570\u636e\u7684\u6bdb\u523a 20</p> </li> </ol>"},{"location":"lab4-2/#_11","title":"\u4ee3\u7801\u63d0\u4ea4","text":""},{"location":"lab4-2/#_12","title":"\u9a8c\u6536\u68c0\u67e5\u70b9","text":"<ul> <li>\u4eff\u771f\u5c55\u793a </li> <li>\u4ee3\u7801\u89e3\u91ca\u6216\u8bbe\u8ba1\u601d\u8def </li> <li>\u4e0b\u677f\u9a8c\u8bc1 </li> <li>\u89e3\u91ca async_transmitter \u7684\u6709\u9650\u72b6\u6001\u673a </li> </ul>"},{"location":"lab4-2/#_13","title":"\u63d0\u4ea4\u6587\u4ef6","text":"<p><code>src/lab4-2/</code> \u4e2d\u7f16\u5199\u7684 submit \u548c include \u7684\u4ee3\u7801</p>"},{"location":"lab5-1/","title":"\u5b9e\u9a8c5-1: RISC-V\u6c47\u7f16\u7a0b\u5e8f\u8bbe\u8ba1","text":""},{"location":"lab5-1/#_1","title":"\u5b9e\u9a8c\u76ee\u7684","text":"<ul> <li>\u7406\u89e3 RISC-V \u6c47\u7f16\u7a0b\u5e8f</li> <li>\u80fd\u591f\u7528 RISC-V \u6c47\u7f16\u6307\u4ee4\u7f16\u5199\u7b80\u5355\u7684\u6c47\u7f16\u7a0b\u5e8f</li> </ul>"},{"location":"lab5-1/#_2","title":"\u5b9e\u9a8c\u73af\u5883","text":"<ul> <li>\u64cd\u4f5c\u7cfb\u7edf\uff1aWindows 10+ 22H2\uff0cUbuntu 22.04+</li> </ul>"},{"location":"lab5-1/#_3","title":"\u80cc\u666f\u77e5\u8bc6","text":""},{"location":"lab5-1/#risc-v","title":"RISC-V \u6c47\u7f16\u8bed\u8a00","text":"<p>RISC-V \u6c47\u7f16\u8bed\u8a00\u662f\u4e00\u79cd\u57fa\u4e8e RISC-V \u6307\u4ee4\u96c6\u67b6\u6784\u7684\u4f4e\u7ea7\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00\uff0c\u5b83\u88ab\u5e7f\u6cdb\u7528\u4e8e\u5d4c\u5165\u5f0f\u7cfb\u7edf\u3001\u64cd\u4f5c\u7cfb\u7edf\u548c\u7f16\u8bd1\u5668\u7684\u5f00\u53d1\u4e2d\u3002RSIC-V \u56e0\u4e3a\u7ed3\u6784\u89c4\u6574\u3001\u5185\u5bb9\u7cbe\u7b80\u800c\u88ab\u5e7f\u6cdb\u5e94\u7528\u4e8e\u8bfe\u7a0b\u6559\u5b66\u3002\u4f60\u4eec\u5728\u8bfe\u4e0a\u5b66\u4e60\u4e86\u57fa\u672c\u7684 RISC-V \u6307\u4ee4\uff0c\u4f46\u7531\u7f16\u8bd1\u5668\u751f\u6210\u7684\u6c47\u7f16\u6307\u4ee4\u4e2d\u53ef\u80fd\u542b\u6709\u4e00\u4e9b\u4f60\u4eec\u6ca1\u6709\u63a5\u89e6\u8fc7\u7684\u6307\u4ee4\u6216\u4f2a\u6307\u4ee4\u3002\u5f53\u9047\u5230\u8fd9\u4e9b\u6307\u4ee4\u65f6\uff0c\u8bf7\u5230RISC-V ISA Specifications\u67e5\u8be2\u76f8\u5173\u6587\u6863\uff08Volume 1, Unprivileged Specification\uff09\u3002</p>"},{"location":"lab5-1/#risc-v_1","title":"RISC-V \u8c03\u7528\u7ea6\u5b9a","text":"<p>RISC-V \u8c03\u7528\u7ea6\u5b9a\u662f\u6307\u5728\u51fd\u6570\u8c03\u7528\u65f6\uff0c\u8c03\u7528\u65b9\u548c\u88ab\u8c03\u7528\u65b9\u4e4b\u95f4\u6240\u8fbe\u6210\u7684\u4e00\u79cd\u89c4\u5b9a\uff0c\u7528\u4e8e\u786e\u4fdd\u51fd\u6570\u8c03\u7528\u548c\u8fd4\u56de\u7684\u6b63\u786e\u6027\u3002RISC-V \u8c03\u7528\u7ea6\u5b9a\u89c4\u5b9a\u4e86\u5728\u51fd\u6570\u8c03\u7528\u548c\u8fd4\u56de\u65f6\u9700\u8981\u4fdd\u5b58\u54ea\u4e9b\u5bc4\u5b58\u5668\u7684\u503c\u3001\u54ea\u4e9b\u5bc4\u5b58\u5668\u53ef\u4ee5\u88ab\u8c03\u7528\u8005\u4f7f\u7528\u7b49\u7b49\uff0c\u4ee5\u4fdd\u8bc1\u7a0b\u5e8f\u6b63\u786e\u5730\u6267\u884c\u3002</p> <p>\u4ee5\u4e0b\u662f RISC-V \u8c03\u7528\u7ea6\u5b9a\u7684\u4e00\u4e9b\u57fa\u672c\u7279\u70b9\uff1a</p> <ul> <li>\u53c2\u6570\u4f20\u9012\uff1a\u51fd\u6570\u53c2\u6570\u901a\u5e38\u901a\u8fc7\u5bc4\u5b58\u5668\u4f20\u9012\uff0c\u524d\u51e0\u4e2a\u53c2\u6570\u901a\u5e38\u5b58\u50a8\u5728 a0\u3001a1\u3001a2\u3001a3 \u7b49\u5bc4\u5b58\u5668\u4e2d\uff0c\u66f4\u591a\u7684\u53c2\u6570\u5219\u4f1a\u5b58\u50a8\u5728\u6808\u4e2d\u3002</li> <li>\u8fd4\u56de\u503c\uff1a\u51fd\u6570\u8fd4\u56de\u503c\u901a\u5e38\u5b58\u50a8\u5728 a0 \u5bc4\u5b58\u5668\u4e2d\uff0c\u5bf9\u4e8e\u8fd4\u56de\u503c\u6bd4\u8f83\u590d\u6742\u7684\u60c5\u51b5\uff0c\u4e5f\u53ef\u4ee5\u5c06\u8fd4\u56de\u503c\u5b58\u50a8\u5728\u6808\u4e2d\u3002</li> <li>\u5bc4\u5b58\u5668\u7684\u4f7f\u7528\uff1aRISC-V \u8c03\u7528\u7ea6\u5b9a\u89c4\u5b9a\u4e86\u54ea\u4e9b\u5bc4\u5b58\u5668\u9700\u8981\u88ab\u8c03\u7528\u65b9\u4fdd\u5b58\uff0c\u54ea\u4e9b\u5bc4\u5b58\u5668\u53ef\u4ee5\u88ab\u8c03\u7528\u8005\u4f7f\u7528\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u4fdd\u5b58 callee-saved \u5bc4\u5b58\u5668\u662f\u88ab\u8c03\u7528\u8005\u7684\u8d23\u4efb\uff0c\u800c\u8c03\u7528\u8005\u5219\u53ef\u4ee5\u4f7f\u7528 caller-saved \u5bc4\u5b58\u5668\uff0c\u4f46\u9700\u8981\u5728\u51fd\u6570\u8c03\u7528\u4e4b\u524d\u5c06\u8fd9\u4e9b\u5bc4\u5b58\u5668\u7684\u503c\u4fdd\u5b58\u4e0b\u6765\u3002</li> <li>\u6808\u7684\u4f7f\u7528\uff1aRISC-V \u8c03\u7528\u7ea6\u5b9a\u8fd8\u89c4\u5b9a\u4e86\u5728\u51fd\u6570\u8c03\u7528\u671f\u95f4\u5982\u4f55\u4f7f\u7528\u6808\u3002\u5728\u51fd\u6570\u8c03\u7528\u65f6\uff0c\u6808\u7528\u4e8e\u5b58\u50a8\u51fd\u6570\u7684\u53c2\u6570\u3001\u8fd4\u56de\u5730\u5740\u548c callee-saved \u5bc4\u5b58\u5668\u7684\u503c\u3002\u5728\u51fd\u6570\u8fd4\u56de\u65f6\uff0c\u6808\u5219\u88ab\u7528\u4e8e\u6062\u590d\u8c03\u7528\u8005\u4fdd\u5b58\u7684\u5bc4\u5b58\u5668\u548c\u8fd4\u56de\u5730\u5740\u3002</li> </ul> <p>RISC-V \u8c03\u7528\u7ea6\u5b9a\u7684\u5177\u4f53\u6587\u6863\u8bf7\u67e5\u9605Calling Convention\u3002</p>"},{"location":"lab5-1/#spike-riscv-pk","title":"SPIKE \u6a21\u62df\u5668\u548c RISCV PK","text":"<p>SPIKE \u662f\u4e00\u4e2a\u57fa\u4e8e RISC-V ISA \u6a21\u62df\u5668\uff0c\u5b83\u53ef\u4ee5\u8ba9\u4f60\u5728\u975e RISC-V \u67b6\u6784\u7684\u673a\u5668\u4e0a\u6a21\u62df\u6267\u884c RISC-V \u7a0b\u5e8f\u3002</p> <p>RISCV PK\uff08RISC-V Proxy Kernel\uff09\u662f\u4e00\u4e2a\u57fa\u4e8e RISC-V ISA \u7684\u8f7b\u91cf\u7ea7\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\uff0c\u5b83\u662f\u4e00\u4e2a\u5f00\u6e90\u9879\u76ee\uff0c\u7531 UC Berkeley \u5f00\u53d1\u5e76\u7ef4\u62a4\u3002RISCV PK \u65e8\u5728\u63d0\u4f9b\u4e00\u4e2a\u6700\u5c0f\u5316\u7684\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\uff0c\u4ee5\u4fbf\u5728\u4e0d\u540c\u7684 RISC-V \u5904\u7406\u5668\u4e0a\u8fd0\u884c\u5404\u79cd\u7528\u6237\u7a7a\u95f4\u5e94\u7528\u7a0b\u5e8f\u3002</p>"},{"location":"lab5-1/#_4","title":"\u8df3\u8f6c\u8868","text":"<p>\u8df3\u8f6c\u8868\u662f\u4e00\u79cd\u7528\u4e8e\u8df3\u8f6c\u5230\u4e0d\u540c\u4ee3\u7801\u5757\u7684\u6570\u636e\u7ed3\u6784\u3002\u8df3\u8f6c\u8868\u901a\u5e38\u7531\u4e00\u7ec4\u6307\u9488\u6216\u5730\u5740\u7ec4\u6210\uff0c\u8fd9\u4e9b\u6307\u9488\u6216\u5730\u5740\u6307\u5411\u4e0d\u540c\u7684\u4ee3\u7801\u5757\u3002\u8df3\u8f6c\u8868\u7684\u5b9e\u73b0\u65b9\u5f0f\u5f88\u7b80\u5355\uff0c\u901a\u5e38\u4f7f\u7528\u6570\u7ec4\u6216\u54c8\u5e0c\u8868\u6765\u5b9e\u73b0\u3002\u8df3\u8f6c\u8868\u901a\u5e38\u7528\u4e8e\u66ff\u4ee3\u5927\u91cf\u7684 if-else \u8bed\u53e5\u6216 switch \u8bed\u53e5\uff0c\u53ef\u4ee5\u63d0\u9ad8\u4ee3\u7801\u7684\u6267\u884c\u6548\u7387\u3002\u5f53\u9700\u8981\u6839\u636e\u4e00\u4e2a\u503c\u6765\u9009\u62e9\u4e0d\u540c\u7684\u4ee3\u7801\u8def\u5f84\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u8df3\u8f6c\u8868\u6765\u5b9e\u73b0\u3002\u5728\u8df3\u8f6c\u8868\u4e2d\uff0c\u6bcf\u4e2a\u503c\u90fd\u5bf9\u5e94\u7740\u4e00\u4e2a\u6307\u9488\u6216\u5730\u5740\uff0c\u8fd9\u4e2a\u6307\u9488\u6216\u5730\u5740\u6307\u5411\u5bf9\u5e94\u7684\u4ee3\u7801\u5757\u3002</p> <p>\u8df3\u8f6c\u8868\u5728\u7f16\u7a0b\u8bed\u8a00\u4e2d\u5e7f\u6cdb\u5e94\u7528\uff0c\u7279\u522b\u662f\u5728\u4e00\u4e9b\u4f4e\u7ea7\u8bed\u8a00\u4e2d\uff0c\u5982\u6c47\u7f16\u8bed\u8a00\u548c C \u8bed\u8a00\u3002\u5728 RISC-V \u6c47\u7f16\u4e2d\uff0c\u8df3\u8f6c\u8868\u901a\u5e38\u4f7f\u7528 la\uff08load address\uff09\u6307\u4ee4\u6765\u52a0\u8f7d\u5730\u5740\uff0c\u7136\u540e\u4f7f\u7528 jr\uff08jump register\uff09\u6216 jalr\uff08jump and link register\uff09\u6307\u4ee4\u6765\u8fdb\u884c\u8df3\u8f6c\u3002</p> <p>\u5173\u4e8e\u8df3\u8f6c\u8868\u7684\u5177\u4f53\u4ecb\u7ecd\uff0c\u8bf7\u53c2\u8003 CSAPP\uff08\u6df1\u5165\u4e86\u89e3\u8ba1\u7b97\u673a\u7cfb\u7edf\uff09\u7b2c\u4e09\u7ae0\u5173\u4e8e switch \u8bed\u53e5\u7684\u4ecb\u7ecd\u3002</p>"},{"location":"lab5-1/#_5","title":"\u5192\u6ce1\u6392\u5e8f","text":"<p>\u5192\u6ce1\u6392\u5e8f\u662f\u4e00\u79cd\u7b80\u5355\u7684\u6392\u5e8f\u7b97\u6cd5\uff0c\u5b83\u91cd\u590d\u5730\u904d\u5386\u9700\u8981\u6392\u5e8f\u7684\u6570\u7ec4\uff0c\u6bcf\u6b21\u6bd4\u8f83\u76f8\u90bb\u7684\u4e24\u4e2a\u5143\u7d20\uff0c\u5982\u679c\u5b83\u4eec\u7684\u987a\u5e8f\u9519\u8bef\u5c31\u4ea4\u6362\u5b83\u4eec\u3002\u901a\u8fc7\u4e0d\u65ad\u5730\u4ea4\u6362\u76f8\u90bb\u5143\u7d20\u7684\u4f4d\u7f6e\uff0c\u628a\u5927\u7684\u5143\u7d20\u4ea4\u6362\u5230\u6570\u7ec4\u7684\u672b\u5c3e\uff0c\u6700\u7ec8\u5b9e\u73b0\u6574\u4e2a\u6570\u7ec4\u7684\u6392\u5e8f\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c\u5192\u6ce1\u6392\u5e8f\u7684\u8fc7\u7a0b\u5982\u4e0b\uff1a</p> <ol> <li>\u4ece\u6570\u7ec4\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u5f00\u59cb\uff0c\u4f9d\u6b21\u6bd4\u8f83\u76f8\u90bb\u7684\u4e24\u4e2a\u5143\u7d20\uff0c\u5982\u679c\u5b83\u4eec\u7684\u987a\u5e8f\u9519\u8bef\u5c31\u4ea4\u6362\u5b83\u4eec\u7684\u4f4d\u7f6e\uff0c\u628a\u5927\u7684\u5143\u7d20\u4ea4\u6362\u5230\u6570\u7ec4\u7684\u672b\u5c3e\u3002</li> <li>\u7ee7\u7eed\u904d\u5386\u6570\u7ec4\uff0c\u4f9d\u6b21\u6bd4\u8f83\u76f8\u90bb\u7684\u4e24\u4e2a\u5143\u7d20\uff0c\u91cd\u590d\u4e0a\u8ff0\u6b65\u9aa4\uff0c\u76f4\u5230\u6574\u4e2a\u6570\u7ec4\u6392\u5e8f\u5b8c\u6210\u3002</li> </ol> <p>\u53ef\u4ee5\u53c2\u8003\u8be5\u52a8\u753b\u7f51\u9875\u6765\u7406\u89e3\u5192\u6ce1\u6392\u5e8f\u7684\u8fc7\u7a0b\u3002</p>"},{"location":"lab5-1/#_6","title":"\u5b9e\u9a8c\u6b65\u9aa4","text":""},{"location":"lab5-1/#_7","title":"\u5b9e\u9a8c\u73af\u5883\u914d\u7f6e","text":"<ol> <li> <p>\u5b89\u88c5 RISC-V \u5de5\u5177\u94fe:</p> <pre><code>sudo apt install gcc-riscv64-linux-gnu binutils-riscv64-linux-gnu\n</code></pre> <p>\u7136\u540e\u8fd0\u884c<code>riscv64-linux-gnu-gcc --version</code>\u547d\u4ee4\u5224\u65ad\u5b89\u88c5\u662f\u5426\u6210\u529f\u3002</p> </li> <li> <p>\u9009\u62e9\u5408\u9002\u7684\u4f4d\u7f6e\u5b89\u88c5SPIKE\u6a21\u62df\u5668    <pre><code>sudo apt install device-tree-compiler\ngit clone http://git.zju.edu.cn/zju-sys/sys1/riscv-isa-sim.git\ncd riscv-isa-sim\nmkdir build &amp;&amp; cd build\n../configure\nmake -j$(nproc)\n</code></pre></p> </li> </ol> <p>\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u6211\u4eec\u7684\u63d0\u4f9b\u7684\u5b89\u88c5\u811a\u672c\uff08\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650\uff09\uff1a    <pre><code>sudo apt install device-tree-compiler\ngit submodule update --init repo/riscv-isa-cosim\ncd repo\nmake spike\n</code></pre></p> <ol> <li>\u9009\u62e9\u5408\u9002\u7684\u4f4d\u7f6e\uff08\u5728 Linux \u4e0b\uff0c\u4e0d\u8981\u5728 Windows\u4e0b\u5b89\u88c5\uff09\u5b89\u88c5 RISC-V Proxy Kernel    <pre><code>git clone https://git.zju.edu.cn/zju-sys/sys1/riscv-pk.git\ncd riscv-pk\nmkdir build &amp;&amp; cd build\n../configure --host=riscv64-linux-gnu\nmake -j$(nproc)\n</code></pre></li> </ol> <p>\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u6211\u4eec\u7684\u63d0\u4f9b\u7684\u5b89\u88c5\u811a\u672c\uff08\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650\uff09\uff1a    <pre><code>git submodule update --init repo/riscv-pk\ncd repo\nmake pk\n</code></pre></p> <ol> <li> <p>\u8fdb\u5165\u5230<code>sys1-sp24</code>\u6587\u4ef6\u5939\u62c9\u53d6\u4e0a\u6e38\u4fee\u6539:    <pre><code>git pull\n</code></pre></p> </li> <li> <p>\u8865\u5168<code>src/lab5-1/simulate.sh</code>\u811a\u672c\u4e2d\u7684<code>SPIKE_PATH</code>\u548c<code>PK_PATH</code>\u53d8\u91cf\u4e3a\u7b2c\u4e8c\u6b65\u4e2dspike\u7684\u8def\u5f84\u548c\u7b2c\u4e09\u6b65\u4e2dpk\u7684\u8def\u5f84\uff08\u8bf7\u786e\u4fddshell\u811a\u672c\u4e2d\u7b49\u53f7\u5de6\u53f3\u6ca1\u6709\u7a7a\u683c\uff09\u3002\u7136\u540e\u5728<code>src/lab5-1</code>\u76ee\u5f55\u4e0b\u6267\u884c<code>chmod +x simulate.sh</code>\u547d\u4ee4\u4e3a<code>simulate.sh</code>\u811a\u672c\u8d4b\u4e88\u6267\u884c\u6743\u9650\u3002</p> <p>\u8bf7\u4e0d\u8981\u590d\u5236Windows\u4e0b\u7684\u76ee\u5f55\uff0c\u5f97\u5230\u76ee\u5f55\u7684\u6700\u76f4\u63a5\u65b9\u5f0f\u662f\u5728\u5bf9\u5e94\u76ee\u5f55\u4e0b\u6267\u884cpwd\uff0c\u7136\u540e\u590d\u5236\u8f93\u51fa\u3002</p> </li> <li> <p>\u5728<code>src/lab5-1/</code>\u4e0b\u6709\u4e00\u4e2aHello World\u7a0b\u5e8f\uff0c\u6587\u4ef6\u540d\u4e3a<code>hello.c</code>\uff0c\u8bf7\u5728\u8be5\u6587\u4ef6\u5939\u4e0b\u7528\u4ee5\u4e0b\u547d\u4ee4\u7f16\u8bd1\uff0c\u5e76\u6d4b\u8bd5\u662f\u5426\u80fd\u6267\u884c\uff1a    <pre><code>riscv64-linux-gnu-gcc hello.c -o hello -static\n./simulate.sh hello\n</code></pre>    \u9884\u671f\u8f93\u51fa\uff1a</p> <p>hello, world!</p> </li> </ol>"},{"location":"lab5-1/#risc-v10","title":"\u7406\u89e3\u7b80\u5355RISC-V\u7a0b\u5e8f10%","text":"<p>\u5728<code>src/lab5-1/acc.c</code>\u4e2d\uff0c\u5b9e\u73b0\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u7d2f\u52a0\u51fd\u6570</p> <pre><code>long long acc(long long a, long long b) {\n        long long res = 0;\n        for (long long i = a; i &lt;= b; ++i) {\n                res += i;\n        }\n        return res;\n}\n</code></pre> <p><code>src/lab5-1/acc_plain.s</code>\u662f<code>src/lab5-1/acc.c</code>\u5bf9\u5e94\u7684\u4e00\u79cd\u6c47\u7f16\u7a0b\u5e8f\uff0c\u7531\u4ee5\u4e0b\u547d\u4ee4\u751f\u6210:</p> <pre><code>riscv64-linux-gnu-gcc -S acc.c -O0 -o acc_plain.s\n</code></pre> <p>\u8bf7\u9605\u8bfb<code>src/lab5-1/acc_plain.s</code>\u56de\u7b54\u4ee5\u4e0b\u95ee\u9898:</p> <ol> <li><code>acc</code>\u662f\u5982\u4f55\u83b7\u5f97\u51fd\u6570\u53c2\u6570\u7684\uff0c\u53c8\u662f\u5982\u4f55\u8fd4\u56de\u51fd\u6570\u8fd4\u56de\u503c\u7684\uff1f2%</li> <li><code>acc</code>\u51fd\u6570\u4e2d<code>s0</code>\u5bc4\u5b58\u5668\u7684\u4f5c\u7528\u662f\u4ec0\u4e48\uff0c\u4e3a\u4ec0\u4e48\u5728\u51fd\u6570\u5165\u53e3\u5904\u9700\u8981\u6267\u884c<code>sd s0, 40(sp)</code>\u8fd9\u6761\u6307\u4ee4\uff0c\u800c\u5728\u8fd9\u6761\u6307\u4ee4\u4e4b\u540e\u7684<code>addi s0, sp, 48</code>\u8fd9\u6761\u6307\u4ee4\u7684\u76ee\u7684\u662f\u4ec0\u4e48\uff1f2%</li> <li><code>acc</code>\u51fd\u6570\u7684\u6808\u5e27(stack frame)\u7684\u5927\u5c0f\u662f\u591a\u5c11\uff1f1%</li> <li><code>acc</code>\u51fd\u6570\u6808\u5e27\u4e2d\u5b58\u50a8\u7684\u503c\u6709\u54ea\u4e9b\uff0c\u5b83\u4eec\u5206\u522b\u5b58\u50a8\u5728\u54ea\uff08\u76f8\u5bf9\u4e8e<code>sp</code>\u6216<code>s0</code>\u6765\u8bf4\uff09\uff1f2%</li> <li>\u8bf7\u7b80\u8981\u89e3\u91ca<code>acc</code>\u51fd\u6570\u4e2d\u7684for\u5faa\u73af\u662f\u5982\u4f55\u5728\u6c47\u7f16\u4ee3\u7801\u4e2d\u5b9e\u73b0\u7684\u30021%</li> </ol> <p>Hint: <code>src/lab5-1/acc_plain.s</code>\u4e2d\u51fa\u73b0\u7684<code>j .L2</code>\u6307\u4ee4\u662f<code>jal x0, .L2</code>\u7684\u4f2a\u6307\u4ee4\uff0c\u8bf7\u53c2\u8003The RISC-V Instruction Set Manual Volume I: User-Level ISA\u7b2c110\u9875\u7684Table 20.2\u3002</p> <p><code>src/lab5-1/acc_opt.s</code>\u4e5f\u662f<code>src/lab5-1/acc.c</code>\u5bf9\u5e94\u7684\u4e00\u79cd\u6c47\u7f16\u7a0b\u5e8f\uff0c\u5b83\u7531\u53e6\u4e00\u79cd\u547d\u4ee4\u751f\u6210\uff1a</p> <pre><code>riscv64-linux-gnu-gcc -S acc.c -O2 -o acc_opt.s\n</code></pre> <p>\u8bf7\u9605\u8bfb<code>src/lab5-1/acc_opt.s</code>\u56de\u7b54\u4ee5\u4e0b\u95ee\u9898\uff1a</p> <ol> <li>\u8bf7\u67e5\u9605\u8d44\u6599\u7b80\u8981\u63cf\u8ff0\u7f16\u8bd1\u9009\u9879<code>-O0</code>\u548c<code>-O2</code>\u7684\u533a\u522b\u30021%</li> <li>\u8bf7\u7b80\u8981\u8ba8\u8bba<code>src/lab5-1/acc_opt.s</code>\u4e0e<code>src/lab5-1/acc_plain.s</code>\u7684\u4f18\u52a3\u30021%</li> </ol>"},{"location":"lab5-1/#15","title":"\u7406\u89e3\u9012\u5f52\u6c47\u7f16\u7a0b\u5e8f15%","text":"<p>\u5728<code>src/lab5-1/factor.c</code>\u4e2d\uff0c\u5b9e\u73b0\u4e86\u4e00\u4e2a\u901a\u8fc7\u9012\u5f52\u6c42\u89e3\u9636\u4e58\u7684\u51fd\u6570<code>factor</code>\uff1a</p> <pre><code>long long factor(long long n) {\n        if (n == 0) {\n                return 1;\n        }\n        return n * factor(n - 1);\n}\n</code></pre> <p><code>src/lab5-1/factor_plain.s</code>\u662f<code>src/lab5-1/factor.c</code>\u5bf9\u5e94\u7684\u4e00\u79cd\u6c47\u7f16\u7a0b\u5e8f\uff0c\u7531\u4ee5\u4e0b\u547d\u4ee4\u751f\u6210:</p> <pre><code>riscv64-linux-gnu-gcc -S factor.c -O0 -o factor_plain.s\n</code></pre> <p>\u8bf7\u9605\u8bfb<code>src/lab5-1/factor_plain.s</code>\u56de\u7b54\u4ee5\u4e0b\u95ee\u9898:</p> <ol> <li>\u4e3a\u4ec0\u4e48<code>src/lab5-1/factor_plain.s</code>\u4e2d<code>factor</code>\u51fd\u6570\u7684\u5165\u53e3\u5904\u9700\u8981\u6267\u884c<code>sd ra, 24(sp)</code>\u6307\u4ee4\uff0c\u800c<code>src/lab5-1/acc_plain.s</code>\u4e2d\u7684<code>acc</code>\u51fd\u6570\u5e76\u6ca1\u6709\u6267\u884c\u8be5\u6307\u4ee4\uff1f2%</li> <li>\u8bf7\u89e3\u91ca\u5728<code>call factor</code>\u524d\u7684<code>mv a0, a5</code>\u8fd9\u6761\u6c47\u7f16\u6307\u4ee4\u7684\u76ee\u7684\u30022%</li> <li>\u8bf7\u7b80\u8981\u63cf\u8ff0\u8c03\u7528<code>factor(10)</code>\u65f6\u6808\u7684\u53d8\u5316\u60c5\u51b5\uff1b\u5e76\u56de\u7b54\u6808\u6700\u5927\u5185\u5b58\u5360\u7528\u662f\u591a\u5c11\uff0c\u53d1\u751f\u5728\u4ec0\u4e48\u65f6\u5019\u30023%</li> <li>\u5047\u8bbe\u6808\u7684\u5927\u5c0f\u4e3a4KB\uff0c\u8bf7\u95ee<code>factor(n)</code>\u7684\u53c2\u6570<code>n</code>\u6700\u5927\u662f\u591a\u5c11\uff1f2%</li> </ol> <p>Hint: <code>mul a5, a4, a5</code>\u7684\u542b\u4e49\u662f\u5c06a4\u5bc4\u5b58\u5668\u548ca5\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\u76f8\u4e58\uff0c\u5e76\u5c06\u7ed3\u679c\u653e\u5728a5\u5bc4\u5b58\u5668\u4e2d\u3002call\u6307\u4ee4\u662f\u4e00\u6761\u4f2a\u6307\u4ee4\uff0c\u53c2\u8003The RISC-V Instruction Set Manual Volume I: User-Level ISA\u7b2c110\u9875\u7684Table 20.2\u3002</p> <p><code>src/lab5-1/factor_opt.s</code>\u4e5f\u662f<code>src/lab5-1/factor.c</code>\u5bf9\u5e94\u7684\u4e00\u79cd\u6c47\u7f16\u7a0b\u5e8f\uff0c\u5b83\u7531\u53e6\u4e00\u79cd\u547d\u4ee4\u751f\u6210\uff1a</p> <pre><code>riscv64-linux-gnu-gcc -S factor.c -O2 -o factor_opt.s\n</code></pre> <p>\u8bf7\u9605\u8bfb<code>src/lab5-1/factor_opt.s</code>\u56de\u7b54\u4ee5\u4e0b\u95ee\u9898:</p> <ol> <li>\u8bf7\u7b80\u8981\u63cf\u8ff0<code>src/lab5-1/factor_opt.s</code>\u548c<code>src/lab5-1/factor_plain.s</code>\u7684\u533a\u522b\u30022%</li> <li>\u8bf7\u4ece\u6808\u5185\u5b58\u5360\u7528\u7684\u89d2\u5ea6\u6bd4\u8f83<code>src/lab5-1/factor_opt.s</code>\u548c<code>src/lab5-1/factor_plain.s</code>\u7684\u4f18\u52a3\u30022%</li> <li>\u8bf7\u67e5\u9605\u5c3e\u9012\u5f52\u4f18\u5316\u7684\u76f8\u5173\u8d44\u6599\uff0c\u89e3\u91ca\u7f16\u8bd1\u5668\u5728\u751f\u6210<code>src/lab5-1/factor_opt.s</code>\u65f6\u505a\u4e86\u4ec0\u4e48\u4f18\u5316\uff0c\u8be5\u4f18\u5316\u7684\u539f\u7406\uff0c\u4ee5\u53ca\u4ec0\u4e48\u65f6\u5019\u80fd\u8fdb\u884c\u8be5\u4f18\u5316\u30022%</li> </ol>"},{"location":"lab5-1/#switch-5","title":"\u7406\u89e3 switch \u8bed\u53e5\u4ea7\u751f\u7684\u8df3\u8f6c\u88685%","text":"<p>\u5728<code>src/lab5-1/switch.c</code>\u4e2d\u5b9e\u73b0\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u57fa\u4e8e switch \u8bed\u53e5\u7684\u51fd\u6570<code>switch_eq</code>:</p> <pre><code>int switch_eg(long long x, long long y) {\n    long long result = y;\n    switch (x) {\n    case 20:\n        result = result - 5;\n    case 21:\n        result = result + 19;\n        break;\n    case 22:\n        result += 11;\n        break;\n    case 24:\n    case 26:\n        result -= 20;\n        break;\n    default:\n        result = 0;\n    }\n    return result;\n}\n</code></pre> <p><code>src/lab5-1/switch.s</code>\u4e3a\u8be5\u51fd\u6570\u7684\u6c47\u7f16\u7248\u672c\uff0c\u7531\u4ee5\u4e0b\u547d\u4ee4\u751f\u6210\uff1a</p> <pre><code>riscv64-linux-gnu-gcc -S switch.c -O2 -o switch.s\n</code></pre> <p>\u8bf7\u9605\u8bfb\u8fd9\u4e24\u4e2a\u6587\u4ef6\u5e76\u56de\u7b54\u4ee5\u4e0b\u95ee\u9898:</p> <ol> <li>\u8bf7\u7b80\u8ff0\u5728<code>src/lab5-1/switch.s</code>\u4e2d\u662f\u5982\u4f55\u5b9e\u73b0 switch \u8bed\u53e5\u7684\u30022%</li> <li>\u8bf7\u7b80\u8ff0\u7528\u8df3\u8f6c\u8868\u5b9e\u73b0 switch \u548c\u7528 if-else \u5b9e\u73b0 switch \u7684\u4f18\u52a3\uff0c\u5728\u4ec0\u4e48\u65f6\u5019\u5e94\u8be5\u91c7\u7528\u8df3\u8f6c\u8868\uff0c\u5728\u4ec0\u4e48\u65f6\u5019\u5e94\u8be5\u91c7\u7528 if-else\u30023%</li> </ol> <p>Hint: (1) <code>lla a4,.L4</code>\u7684\u610f\u601d\u662f\u5c06 .L4 \u8fd9\u4e2a label \u7684\u5730\u5740\u52a0\u8f7d\u5230<code>a4</code>\u5bc4\u5b58\u5668\u4e2d; (2) \u8df3\u8f6c\u8868\u90e8\u5206\u53ef\u4ee5\u53c2\u8003 CSAPP\uff08\u6df1\u5165\u7406\u89e3\u8ba1\u7b97\u673a\u7cfb\u7edf\uff09\u7b2c\u4e09\u7ae0\u4e2d\u5173\u4e8e switch \u8bed\u53e5\u7684\u4ecb\u7ecd\uff0c\u867d\u7136 CSAPP \u4e2d\u7684\u4ecb\u7ecd\u662f\u57fa\u4e8e x64 \u7684\uff0c\u4f46\u662f\u539f\u7406\u4e0e RISC-V \u4e0a\u662f\u4e00\u81f4\u7684\u3002</p>"},{"location":"lab5-1/#20","title":"\u8bbe\u8ba1\u5192\u6ce1\u6392\u5e8f\u7684\u6c47\u7f16\u4ee3\u780120%","text":"<p>\u8bf7\u5728<code>src/lab5-1/bubble_sort.s</code>\u4e2d\u5b9e\u73b0\u5192\u6ce1\u6392\u5e8f\u51fd\u6570<code>bubble_sort</code>\uff0c\u5176\u51fd\u6570\u7b7e\u540d\u4e3a<code>void bubble_sort(long long *arr, long long len)</code>\uff0c\u8be5\u51fd\u6570\u5c06\u957f\u5ea6\u4e3a<code>len</code>\u7684\u6570\u7ec4<code>arr</code>\u5728\u539f\u5730\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u3002</p> <p>\u6211\u4eec\u63d0\u4f9b\u4e86<code>src/lab5-1/bubble_sort_test.c</code>\u6587\u4ef6\u7528\u4e8e\u6d4b\u8bd5\u4f60\u7684\u5b9e\u73b0\u662f\u5426\u6b63\u786e\uff0c\u5f53\u4f60\u5b8c\u6210<code>bubble_sort.s</code>\u7684\u7f16\u5199\u540e\uff0c\u5728<code>src/lab5-1/</code>\u6587\u4ef6\u5939\u4e0b\u7528\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u7f16\u8bd1\u548c\u6d4b\u8bd5\uff1a</p> <pre><code>riscv64-linux-gnu-gcc bubble_sort_test.c bubble_sort.s -o bubble_sort_test -static\n./simulate.sh bubble_sort_test\n</code></pre> <p>\u5982\u679c\u6d4b\u8bd5\u901a\u8fc7\uff0c\u4f1a\u5728\u7ec8\u7aef\u663e\u793a<code>Sort Successfully</code>\u7684\u63d0\u793a\u4fe1\u606f\uff0c\u5426\u5219\u4f1a\u8f93\u51fa\u9519\u8bef\u63d0\u793a\u3002</p> <p>\u8be5\u5b9e\u9a8c\u8981\u6c42\u6c47\u7f16\u4ee3\u7801\u8981\u5c3d\u53ef\u80fd\u6ce8\u91ca\uff08\u6700\u597d\u6bcf\u4e00\u884c\u90fd\u8981\u6709\u6ce8\u91ca\uff09\u3002\u540c\u65f6\u8bf7\u4e0d\u8981\u5148\u7f16\u5199C\u8bed\u8a00\u7a0b\u5e8f\u518d\u7528\u7f16\u8bd1\u5668\u751f\u6210\u6c47\u7f16\u4ee3\u7801\uff0c\u6211\u4eec\u4f1a\u6bd4\u5bf9\u4f60\u7684\u4ee3\u7801\u4e0e\u7f16\u8bd1\u5668\u751f\u6210\u7684\u4ee3\u7801\uff1b\u5e76\u4e14\u8003\u8651\u5230\u8003\u8bd5\u4e2d\u53ef\u80fd\u51fa\u73b0\u624b\u5199\u6c47\u7f16\u7684\u9898\u76ee\uff0c\u8bf7\u628a\u8fd9\u6b21\u5b9e\u9a8c\u7684\u6c47\u7f16\u4ee3\u7801\u7f16\u5199\u5f53\u4f5c\u4e00\u6b21\u7ec3\u4e60\u3002</p>"},{"location":"lab5-1/#20_1","title":"\u8bbe\u8ba1\u6590\u6ce2\u90a3\u5951\u6570\u5217\u7684\u6c47\u7f16\u4ee3\u780120%","text":"<p>\u8bf7\u5728<code>src/lab5-1/fibonacci.s</code>\u4e2d\u5b9e\u73b0\u6c42\u6590\u6ce2\u90a3\u5951\u6570\u5217\u7b2c\\(n\\)\u9879\u7684\u51fd\u6570\uff0c\u5176\u51fd\u6570\u7b7e\u540d\u4e3a<code>long long fibonacci(long long n)</code>\u3002\u5176\u4e2d<code>fibonacci(0) = fibonacci(1) = 1</code>; <code>fibonacci(n) = fibonacci(n-1) + fibonacci(n-2), n &gt;= 2</code>\u3002\u8981\u6c42\u8be5\u51fd\u6570\u7528\u9012\u5f52\u5b9e\u73b0\uff0c\u5373\u4f7f\u4f60\u77e5\u9053\u53ef\u4ee5\u7528\u52a8\u6001\u89c4\u5212\u5b9e\u73b0\uff0c\u4e5f\u8bf7\u7528\u6700\u7b80\u5355\u7684\u9012\u5f52\u5b9e\u73b0\u3002</p> <p>\u6211\u4eec\u4e5f\u63d0\u4f9b\u4e86<code>src/lab5-1/fibonacci_test.c</code>\u6587\u4ef6\u7528\u4e8e\u6d4b\u8bd5\u4f60\u7684\u5b9e\u73b0\u662f\u5426\u6b63\u786e\uff0c\u5f53\u4f60\u5b8c\u6210<code>fibonacci.s</code>\u7684\u7f16\u5199\u540e\uff0c\u5728<code>src/lab5-1/</code>\u6587\u4ef6\u5939\u4e0b\u7528\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u7f16\u8bd1\u548c\u6d4b\u8bd5\uff1a</p> <pre><code>riscv64-linux-gnu-gcc fibonacci_test.c fibonacci.s -o fibonacci_test -static\n./simulate.sh fibonacci_test\n</code></pre> <p>\u540c\u6837\u7684\uff0c\u8be5\u5b9e\u9a8c\u4e5f\u8981\u6c42\u6c47\u7f16\u4ee3\u7801\u8981\u5c3d\u53ef\u80fd\u6ce8\u91ca\uff0c\u5e76\u4e14\u7981\u6b62\u63d0\u4ea4\u7531C\u8bed\u8a00\u7a0b\u5e8f\u7f16\u8bd1\u751f\u6210\u7684\u6c47\u7f16\u4ee3\u7801\u3002</p>"},{"location":"lab5-1/#70","title":"\u5b9e\u9a8c\u62a5\u544a70%","text":"<p>lab5\u6c47\u7f16\u5b9e\u9a8c\u65e0\u9700\u9a8c\u6536\uff0c\u6545\u5206\u6570\u5b8c\u5168\u7531\u62a5\u544a\u7ec4\u6210\uff0c\u5176\u4e2dlab5-1\uff08\u672c\u6b21\uff09\u5360\u5b9e\u9a8c\u5206\u6570\u768470%\uff0clab5-2\u536030%\u3002 \u8bf7\u540c\u5b66\u4eec\u6309\u8981\u6c42\u63d0\u4ea4\u5b9e\u9a8c\u62a5\u544a\u548c\u6e90\u4ee3\u7801\u6587\u4ef6\uff1a</p> <ol> <li>\u5b9e\u9a8c\u62a5\u544a\u4e2d\u9700\u5305\u62ec\u4f60\u5bf9 4.1 \u5230 4.3 \u8282\u4e2d\u95ee\u9898\u7684\u56de\u7b54\uff0c\u4ee5\u53ca\u89e3\u91ca 4.4 \u8282\u4e0e 4.5 \u8282\u4f60\u7f16\u5199\u7684\u6c47\u7f16\u4ee3\u7801\u3002</li> <li>\u6e90\u4ee3\u7801\u6587\u4ef6\u9700\u8981\u5305\u542b<code>bubble_sort.s</code>\u548c<code>fibonacci.s</code>\u4e24\u4e2a\u6587\u4ef6\u3002</li> </ol>"},{"location":"lab5-2/","title":"\u5b9e\u9a8c5-2: RISC-V \u6c47\u7f16\u7a0b\u5e8f\u8c03\u8bd5","text":""},{"location":"lab5-2/#_1","title":"\u5b9e\u9a8c\u76ee\u7684","text":"<ul> <li>\u638c\u63e1 gdb \u8c03\u8bd5\u5de5\u5177\u7684\u57fa\u672c\u547d\u4ee4\u548c\u4f7f\u7528\u65b9\u6cd5</li> <li>\u638c\u63e1 qemu\u3001spike \u6a21\u62df\u5668\u7684\u8c03\u8bd5\u65b9\u6cd5</li> <li>\u5b66\u4e60 openocd \u7b49\u5176\u4ed6\u8f6f\u4ef6</li> </ul>"},{"location":"lab5-2/#_2","title":"\u5b9e\u9a8c\u73af\u5883","text":"<ul> <li>\u64cd\u4f5c\u7cfb\u7edf\uff1aWindows 10+ 22H2\uff0cUbuntu 22.04+</li> </ul>"},{"location":"lab5-2/#_3","title":"\u80cc\u666f\u77e5\u8bc6","text":""},{"location":"lab5-2/#qemu","title":"QEMU","text":"<p>QEMU (Quick EMUlator) \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u7cfb\u7edf\u6a21\u62df\u5668\u548c\u865a\u62df\u673a\u7ba1\u7406\u5668\u3002\u5b83\u80fd\u591f\u5728\u4e0d\u540c\u7684\u4e3b\u673a\u67b6\u6784\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\uff0c\u4f8b\u5982\u5c06 RISC-V \u7684\u5e94\u7528\u7a0b\u5e8f\u8fd0\u884c\u5728 x86 \u5e73\u53f0\u4e0a\u3002QEMU \u8fd8\u652f\u6301\u8fd0\u884c\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5982 Linux\uff0cWindows \u548c Mac OS X \u7b49\u3002\u9664\u6b64\u4e4b\u5916\uff0cQEMU \u8fd8\u652f\u6301\u7f51\u7edc\u534f\u8bae\u4eff\u771f\uff0c\u4f7f\u7528\u6237\u80fd\u591f\u5728\u865a\u62df\u7f51\u7edc\u4e2d\u8fd0\u884c\u548c\u6d4b\u8bd5\u7f51\u7edc\u5e94\u7528\u7a0b\u5e8f\u3002QEMU \u7684\u53ef\u79fb\u690d\u6027\u548c\u7075\u6d3b\u6027\u4f7f\u5176\u6210\u4e3a\u5f00\u53d1\u4eba\u5458\u3001\u6d4b\u8bd5\u4eba\u5458\u548c\u7cfb\u7edf\u7ba1\u7406\u5458\u7684\u91cd\u8981\u5de5\u5177\u3002</p> <p>QEMU \u7684\u57fa\u672c\u53c2\u6570\u5982\u4e0b\uff1a</p> <ul> <li><code>-nographic</code>: \u4e0d\u4f7f\u7528\u56fe\u5f62\u7a97\u53e3\uff0c\u4f7f\u7528\u547d\u4ee4\u884c</li> <li><code>-machine</code>: \u6307\u5b9a\u8981 emulate \u7684\u673a\u5668\uff0c\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4<code>qemu-system-riscv64 -machine help</code>\u67e5\u770b\u53ef\u9009\u62e9\u7684\u673a\u5668\u9009\u9879</li> <li><code>-kernel</code>: \u6307\u5b9a\u5185\u6838 image</li> <li><code>-append cmdline</code>: \u4f7f\u7528 cmdline \u4f5c\u4e3a\u5185\u6838\u7684\u547d\u4ee4\u884c</li> <li><code>-device</code>: \u6307\u5b9a\u8981\u6a21\u62df\u7684\u8bbe\u5907\uff0c\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4<code>qemu-system-riscv64 -device help</code>\u67e5\u770b\u53ef\u9009\u62e9\u7684\u8bbe\u5907\uff0c\u901a\u8fc7\u547d\u4ee4<code>qemu-system-riscv64 -device &lt;device_name&gt;,help</code>\u67e5\u770b\u67d0\u4e2a\u8bbe\u5907\u7684\u547d\u4ee4\u9009\u9879</li> <li><code>-drive, file=&lt;file_name&gt;</code>: \u4f7f\u7528 file_name \u4f5c\u4e3a\u6587\u4ef6\u7cfb\u7edf</li> <li><code>-S</code>: \u542f\u52a8\u65f6\u6682\u505c CPU \u6267\u884c</li> <li><code>-s</code>: <code>-gdb tcp::1234</code> \u7684\u7b80\u5199</li> <li><code>-bios default</code>: \u4f7f\u7528\u9ed8\u8ba4\u7684 OpenSBI firmware \u4f5c\u4e3a bootloader</li> </ul>"},{"location":"lab5-2/#gdb","title":"GDB","text":"<p>GNU \u8c03\u8bd5\u5668\uff08GNU Debugger\uff0c\u7f29\u5199 gdb\uff09\u662f\u4e00\u4e2a\u7531 GNU \u5f00\u6e90\u7ec4\u7ec7\u53d1\u5e03\u7684\u3001UNIX/LINUX \u64cd\u4f5c\u7cfb\u7edf\u4e0b\u7684\u3001\u57fa\u4e8e\u547d\u4ee4\u884c\u7684\u3001\u529f\u80fd\u5f3a\u5927\u7684\u7a0b\u5e8f\u8c03\u8bd5\u5de5\u5177\u3002\u501f\u52a9\u8c03\u8bd5\u5668\uff0c\u6211\u4eec\u80fd\u591f\u67e5\u770b\u53e6\u4e00\u4e2a\u7a0b\u5e8f\u5728\u6267\u884c\u65f6\u5b9e\u9645\u5728\u505a\u4ec0\u4e48\uff08\u6bd4\u5982\u8bbf\u95ee\u54ea\u4e9b\u5185\u5b58\u3001\u5bc4\u5b58\u5668\uff09\uff0c\u5728\u5176\u4ed6\u7a0b\u5e8f\u5d29\u6e83\u7684\u65f6\u5019\u53ef\u4ee5\u6bd4\u8f83\u5feb\u901f\u5730\u4e86\u89e3\u5bfc\u81f4\u7a0b\u5e8f\u5d29\u6e83\u7684\u539f\u56e0\u3002 \u88ab\u8c03\u8bd5\u7684\u7a0b\u5e8f\u53ef\u4ee5\u662f\u548cgdb\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e0d\u540c\u673a\u5668\u4e0a\u3002</p> <p>\u603b\u7684\u6765\u8bf4\uff0cgdb \u53ef\u4ee5\u6709\u4ee5\u4e0b 4 \u4e2a\u529f\u80fd\uff1a</p> <ul> <li>\u542f\u52a8\u7a0b\u5e8f\uff0c\u5e76\u6307\u5b9a\u53ef\u80fd\u5f71\u54cd\u5176\u884c\u4e3a\u7684\u6240\u6709\u5185\u5bb9</li> <li>\u4f7f\u7a0b\u5e8f\u5728\u6307\u5b9a\u6761\u4ef6\u4e0b\u505c\u6b62</li> <li>\u68c0\u67e5\u7a0b\u5e8f\u505c\u6b62\u65f6\u53d1\u751f\u4e86\u4ec0\u4e48</li> <li>\u66f4\u6539\u7a0b\u5e8f\u4e2d\u7684\u5185\u5bb9\uff0c\u4ee5\u4fbf\u7ea0\u6b63\u4e00\u4e2abug\u7684\u5f71\u54cd</li> </ul> <p>GDB \u7684\u57fa\u672c\u547d\u4ee4\u5982\u4e0b\uff1a</p> <ul> <li>(gdb) layout asm: \u663e\u793a\u6c47\u7f16\u4ee3\u7801</li> <li>(gdb) start: \u5355\u6b65\u6267\u884c\uff0c\u8fd0\u884c\u7a0b\u5e8f\uff0c\u505c\u5728\u7b2c\u4e00\u6267\u884c\u8bed\u53e5</li> <li>(gdb) continue: \u4ece\u65ad\u70b9\u540e\u7ee7\u7eed\u6267\u884c\uff0c\u7b80\u5199<code>c</code></li> <li>(gdb) next: \u5355\u6b65\u8c03\u8bd5\uff08\u9010\u8fc7\u7a0b\uff0c\u51fd\u6570\u76f4\u63a5\u6267\u884c\uff09\uff0c\u7b80\u5199<code>n</code></li> <li>(gdb) step instruction: \u6267\u884c\u5355\u6761\u6307\u4ee4\uff0c\u7b80\u5199<code>si</code></li> <li>(gdb) run: \u91cd\u65b0\u5f00\u59cb\u8fd0\u884c\u6587\u4ef6\uff08run-text\uff1a\u52a0\u8f7d\u6587\u672c\u6587\u4ef6\uff0crun-bin\uff1a\u52a0\u8f7d\u4e8c\u8fdb\u5236\u6587\u4ef6\uff09\uff0c\u7b80\u5199<code>r</code></li> <li>(gdb) backtrace\uff1a\u67e5\u770b\u51fd\u6570\u7684\u8c03\u7528\u7684\u6808\u5e27\u548c\u5c42\u7ea7\u5173\u7cfb\uff0c\u7b80\u5199<code>bt</code></li> <li>(gdb) break \u8bbe\u7f6e\u65ad\u70b9\uff0c\u7b80\u5199<code>b</code><ul> <li>\u65ad\u5728 foo \u51fd\u6570:<code>b foo</code></li> <li>\u65ad\u5728\u67d0\u5730\u5740: <code>b * 0x80200000</code></li> </ul> </li> <li>(gdb) finish: \u7ed3\u675f\u5f53\u524d\u51fd\u6570\uff0c\u8fd4\u56de\u5230\u51fd\u6570\u8c03\u7528\u70b9</li> <li>(gdb) frame: \u5207\u6362\u51fd\u6570\u7684\u6808\u5e27\uff0c\u7b80\u5199<code>f</code></li> <li>(gdb) print: \u6253\u5370\u503c\u53ca\u5730\u5740\uff0c\u7b80\u5199<code>p</code></li> <li>(gdb) info\uff1a\u67e5\u770b\u51fd\u6570\u5185\u90e8\u5c40\u90e8\u53d8\u91cf\u7684\u6570\u503c\uff0c\u7b80\u5199<code>i</code><ul> <li>\u67e5\u770b\u5bc4\u5b58\u5668 ra \u7684\u503c:<code>i r ra</code></li> </ul> </li> <li>(gdb) display\uff1a\u8ffd\u8e2a\u67e5\u770b\u5177\u4f53\u53d8\u91cf\u503c</li> </ul> <p>\u66f4\u591a\u547d\u4ee4\u53ef\u4ee5\u53c2\u8003100\u4e2agdb\u5c0f\u6280\u5de7</p>"},{"location":"lab5-2/#spike","title":"Spike","text":"<p>Spike \u662f\u4e00\u4e2a\u548c Qemu \u7c7b\u4f3c\u7684\u6307\u4ee4\u6a21\u62df\u5668\u3002\u867d\u7136\u5b83\u4e0d\u50cf Qemu \u90a3\u6837\u652f\u6301\u5404\u79cd\u6307\u4ee4\u96c6\u67b6\u6784\uff0c\u53ef\u4ee5\u6a21\u62df\u590d\u6742\u7684\u5916\u8bbe\uff0c\u4f46\u662f\u5728 RISCV \u7684\u6a21\u62df\u548c\u652f\u6301\u4e0a\uff0cspike \u4e25\u683c\u6309\u7167 RISCV \u7684\u6307\u4ee4\u96c6\u624b\u518c\u9010\u6761\u6267\u884c\uff0c\u5bf9\u4e8e RISCV \u7a0b\u5e8f\u7684\u68c0\u67e5\u66f4\u4e3a\u4e25\u8c28\u3002\u5e76\u4e14 Spike \u56e0\u5176\u7b80\u6d01\u6613\u4fee\u6539\uff0c\u800c\u88ab\u5e7f\u6cdb\u7528\u4e8e\u79d1\u7814\u9886\u57df\u3002\u5982\u679c\u8bfb\u8005\u60f3\u8981\u4e86\u89e3\u5176 RISCV \u673a\u5236\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u53ef\u4ee5\u9605\u8bfb spike \u7684\u6e90\u7801\u3002</p> <p>Spike \u7684\u57fa\u672c\u53c2\u6570\u5982\u4e0b\uff1a</p> <ul> <li><code>-p&lt;n&gt;</code>: \u6a21\u62df\u7684 core \u4e2a\u6570</li> <li><code>m&lt;a:m,b:n,...&gt;</code>: \u6a21\u62df\u7684\u5185\u5b58\u5757\u548c\u5bf9\u5e94\u7684\u5185\u5b58\u8303\u56f4</li> <li><code>-d</code>: \u4ea4\u4e92\u8c03\u8bd5\u6a21\u5f0f</li> <li><code>--log=&lt;name&gt;</code>: \u5c06\u6267\u884c\u7684\u4e2d\u95f4 log \u4fdd\u5b58\u5728\u6587\u4ef6\u4e2d</li> <li><code>-H</code>: \u5728\u7b49\u5f85\u8c03\u8bd5\u5668\u8fde\u63a5\u65f6\u4e0d\u6267\u884c\u7a0b\u5e8f</li> <li><code>--rbb-port=&lt;port&gt;</code>: \u5f00\u653e\u7ed9\u8c03\u8bd5\u5668\u8fde\u63a5\u7684\u8c03\u8bd5\u7aef\u53e3</li> </ul> <p>\u6267\u884c<code>Spike -d &lt;\u53ef\u6267\u884c\u7a0b\u5e8f\u540d&gt;</code>\u5c31\u53ef\u4ee5\u5728 Spike \u4e0a\u76f4\u63a5\u6267\u884c riscv \u7a0b\u5e8f\uff0c\u4e14\u53ef\u4ee5\u8fdb\u884c\u6c47\u7f16\u7ea7\u522b\u7684\u8c03\u8bd5\uff0c\u8c03\u8bd5\u7684\u57fa\u672c\u547d\u4ee4\u5982\u4e0b\uff1a</p> <ul> <li>(spike) \u56de\u8f66: \u5355\u6b65\u6267\u884c\u4e00\u6761\u6c47\u7f16\u7a0b\u5e8f</li> <li>(spike) <code>help/h</code>: \u67e5\u770b\u8c03\u8bd5\u547d\u4ee4\u4ecb\u7ecd</li> <li>(spike) <code>reg &lt;core&gt; &lt;reg&gt;</code>: \u67e5\u770b\u6307\u5b9a core \u7684\u901a\u7528\u5bc4\u5b58\u5668\u7684\u503c\uff0ccore \u4ece 0 \u5f00\u59cb\u7f16\u53f7</li> <li>(spike) <code>freg &lt;core&gt; &lt;reg&gt;</code>: \u67e5\u770b\u6307\u5b9a core \u7684\u6d6e\u70b9\u5bc4\u5b58\u5668\u7684\u503c</li> <li>(spike) <code>pc &lt;core&gt;</code>: \u67e5\u770b\u6307\u5b9a core \u7684\u5f53\u524d pc</li> <li>(spike) <code>mem [core] &lt;hex addr&gt;</code>: \u67e5\u770b\u6307\u5b9a core \u5bf9\u5e94\u5730\u5740\u7684\u5185\u5b58</li> <li>(spike) <code>until pc &lt;core&gt; val</code>: \u6267\u884c\u7a0b\u5e8f\u76f4\u5230\u6307\u5b9a core \u7684 pc \u503c\u4e3a val\uff0c\u7c7b\u4f3c\u4e8e gdb \u6253\u65ad\u70b9</li> <li>(spike) <code>quit/q</code>: \u9000\u51fa Spike</li> </ul>"},{"location":"lab5-2/#openocd","title":"Openocd","text":"<p>\u5728 RISCV core \u8c03\u8bd5\u7684\u573a\u666f\u4e0b\uff0cRISCV \u82af\u7247\u4e3a\u4e86\u65b9\u4fbf\u786c\u4ef6\u8c03\u8bd5\u5185\u90e8\u7684\u4fe1\u606f\u4f1a\u5728\u5185\u90e8\u96c6\u6210\u4e00\u4e2a debug module\uff0c\u5e76\u5bf9\u5916\u66b4\u9732\u4e00\u4e2a JTAG \u63a5\u53e3\u3002\u8c03\u8bd5\u8005\u53ef\u4ee5\u7528 JTAG \u7ebf\u7684\u8f93\u5165\u7ebf\u5411 debug module \u8f93\u5165\u547d\u4ee4\uff0c\u5e76\u7528\u8f93\u51fa\u7ebf\u5f97\u5230\u9700\u8981\u8bfb\u53d6\u7684\u7ed3\u679c\u3002Spike \u7528\u4e8e\u8c03\u8bd5\u7684 rbb-port \u5c31\u662f\u4e00\u4e2a\u6a21\u62df\u7684 JTAG \u63a5\u53e3\uff0c\u4f46\u662f\u6211\u4eec\u65e0\u6cd5\u76f4\u63a5\u7528 gdb \u5bf9\u4e00\u4e2a JTAG \u63a5\u53e3\u8fdb\u884c\u8c03\u8bd5\uff0copenocd \u8d77\u5230\u4e00\u4e2a\u4e2d\u95f4\u6865\u6881\u7684\u4f5c\u7528\uff0c\u5b83\u53ef\u4ee5\u5c06 jtag \u7684\u6570\u636e\u534f\u8bae\u548c gdb \u7684\u6570\u636e\u534f\u8bae\u8fdb\u884c\u8f6c\u6362\uff0c\u4ece\u800c\u5b9e\u73b0 gdb \u8c03\u8bd5 riscv core \u7684\u76ee\u7684\u3002</p> <p>openocd \u7684\u57fa\u672c\u53c2\u6570\u5982\u4e0b\uff1a</p> <ul> <li><code>-f &lt;path_to_config_file&gt;</code>: \u9009\u62e9 OpenOCD \u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\u3002\u914d\u7f6e\u6587\u4ef6\u63cf\u8ff0\u4e86\u76ee\u6807\u677f\u3001\u8c03\u8bd5\u63a5\u53e3\u548c\u5176\u4ed6\u8c03\u8bd5\u9009\u9879\u7684\u8bbe\u7f6e\uff0c\u5982\u63d0\u4f9b\u7684 spike.cfg</li> <li><code>-c \"&lt;command&gt;\"}</code>: \u6307\u5b9a\u8981\u5728 OpenOCD \u542f\u52a8\u65f6\u6267\u884c\u7684\u547d\u4ee4\uff0c\u53ef\u4ee5\u591a\u6b21\u4f7f\u7528\u8be5\u53c2\u6570\u4ee5\u6307\u5b9a\u591a\u4e2a\u547d\u4ee4\u3002</li> <li><code>-s &lt;path_to_scripts&gt;</code>:\u6307\u5b9a\u811a\u672c\u6587\u4ef6\u8def\u5f84\uff0c\u5305\u542b\u4e86\u4e00\u4e9b\u5e38\u7528\u7684\u8c03\u8bd5\u547d\u4ee4\u548c\u914d\u7f6e\u9009\u9879\u3002</li> <li><code>-d &lt;debug_level&gt;</code>:\u8c03\u8bd5\u8f93\u51fa\u7684\u7ea7\u522b\uff0c0\uff08\u7981\u7528\u8c03\u8bd5\u8f93\u51fa\uff09\u52309\uff08\u6700\u8be6\u7ec6\u7684\u8c03\u8bd5\u8f93\u51fa\uff09\u4e4b\u95f4\u7684\u503c\u3002</li> </ul>"},{"location":"lab5-2/#_4","title":"\u5b9e\u9a8c\u6b65\u9aa4","text":""},{"location":"lab5-2/#qemu_1","title":"qemu \u7a0b\u5e8f\u8c03\u8bd5","text":""},{"location":"lab5-2/#_5","title":"\u5b9e\u9a8c\u73af\u5883\u914d\u7f6e","text":"<ol> <li> <p>\u5b89\u88c5 QEMU    <pre><code>sudo apt install qemu-user\n</code></pre>    \u8fd0\u884c<code>qemu-riscv64 --version</code>\u68c0\u6d4b\u5b89\u88c5\u662f\u5426\u6210\u529f\u3002</p> </li> <li> <p>\u5b89\u88c5 GDB    <pre><code>sudo apt install gdb-multiarch\n</code></pre>    \u8fd0\u884c<code>gdb-multiarch --version</code>\u68c0\u6d4b\u5b89\u88c5\u662f\u5426\u6210\u529f\u3002</p> </li> </ol>"},{"location":"lab5-2/#30","title":"\u5c1d\u8bd5\u901a\u8fc7\u8c03\u8bd5\u7834\u89e3\u6570\u636e30%","text":"<p>\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a C \u6587\u4ef6<code>src/lab5-2/challenge.c</code>\u3002\u8fd0\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u7f16\u8bd1\u5f97\u5230\u53ef\u6267\u884c\u6587\u4ef6 challenge\uff0c\u8be5\u547d\u4ee4\u53ef\u4ee5\u8ba9\u53ef\u6267\u884c\u7a0b\u5e8f\u4e0d\u8fdb\u884c\u4f18\u5316\u3001\u4e14\u5305\u542b\u8c03\u8bd5\u4fe1\u606f\uff0c\u4fbf\u4e8e\u4e4b\u540e\u7684\u8c03\u8bd5\u548c\u9006\u5411\u3002</p> <pre><code>   riscv64-linux-gnu-gcc -g -O0 challenge.c -o challenge\n</code></pre> <p>\u7136\u540e\u6267\u884c\u8be5\u7a0b\u5e8f\uff1a</p> <pre><code>qemu-riscv64 challenge\n</code></pre> <p>\u5982\u679c\u51fa\u73b0<code>qemu-riscv64: Could not open '/lib/ld-linux-riscv64-lp64d.so.1': No such file or directory</code>\u5c1d\u8bd5\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5c06/usr\u4e0b\u7684\u5e93\u642c\u5230\u641c\u7d22\u4f4d\u7f6e\uff1a</p> <pre><code>   sudo cp /usr/riscv64-linux-gnu/lib/* /lib/\n</code></pre> <p>\u8fd0\u884c\u540e\u4f1a\u63d0\u793a\u4f60\u8f93\u5165\u4f60\u7684\u5b66\u53f7\uff0c\u8f93\u5165\u5b8c\u6210\u540e\u6309\u4e0b\u56de\u8f66\u952e\u3002\u968f\u540e\uff0c\u8be5\u7a0b\u5e8f\u4f1a\u6839\u636e\u4f60\u7684\u5b66\u53f7\u8ba1\u7b97\u4e09\u7ec4\u4e0d\u53ef\u89c1\u7684\u673a\u5bc6\u6570\u636e\uff0c\u7136\u540e\u4f9d\u6b21\u8f93\u51fa\u63d0\u793a\u8bed\u53e5\uff0c\u8981\u6c42\u4f60\u4f9d\u6b21\u8f93\u5165\u6ee1\u8db3\u8fd9\u4e09\u7ec4\u673a\u5bc6\u6570\u636e\u7684\u5b57\u7b26\u4e32\uff0c\u5b57\u7b26\u4e32\u6709\u4e14\u4ec5\u6709 0-f \u8fd9 16 \u4e2a\u5b57\u7b26\u7ec4\u6210\u3002\u5982\u679c\u8f93\u5165\u6ee1\u8db3\u6761\u4ef6\uff0c\u5219\u4f1a\u63d0\u793a\u901a\u8fc7\u3002\uff08xxx \u8868\u793a\u9700\u8981\u8f93\u5165\u7684\u6570\u636e\uff0c\u5176\u5185\u5bb9\u56e0\u5404\u4f4d\u540c\u5b66\u7684\u5b66\u53f7\u800c\u5f02\uff09</p> <pre><code>qemu-riscv64 challenge\nplease input your student ID:xxxxxxxxxx\nWelcome to my fiendish little bomb. You have 3 phases with\nxxxxx\nPhase 1 defused. How about the next one?\nxxxxx\nPhase 2 defused. How about the next one?\nxxxxx\nPhase 3 defused.\n</code></pre> <p>\u5982\u679c\u4e2d\u95f4\u6709\u6570\u636e\u8f93\u5165\u5931\u8d25\uff0c\u5219\u4f1a\u770b\u5230\u5982\u4e0b\u7684\u62a5\u9519\uff1a</p> <pre><code>qemu-riscv64 challenge\nplease input your student ID:xxxxxxxxxx\nWelcome to my fiendish little bomb. You have 3 phases with\nxxxxx\nPhase 1 defused. How about the next one?\nxxxxx\nBomb! You fail to defuse the second bomb!\n</code></pre> <p>\u4e09\u4e2a\u5b57\u7b26\u4e32\u7684\u5185\u5bb9\u3001\u957f\u5ea6\u90fd\u662f\u672a\u77e5\uff0c\u9700\u8981\u5927\u5bb6\u9605\u8bfb C \u4ee3\u7801\u3001\u901a\u8fc7 gdb \u8c03\u8bd5\u9006\u5411\u51fa\u6ee1\u8db3\u8981\u6c42\u7684\u5b57\u7b26\u4e32\u3002\u8fd9\u91cc\u4e0d\u5141\u8bb8\u4fee\u6539 C \u6e90\u4ee3\u7801\uff0c\u6216\u8005\u81f3\u5c11\u8981\u6709\u4e00\u4e2a\u4e0d\u4fee\u6539\u6e90\u4ee3\u7801\u8c03\u8bd5\u5f97\u5230\u5b57\u7b26\u4e32\u5185\u5bb9\u7684\u8fc7\u7a0b\u3002</p> <p>\u63d0\u793a:</p> <ol> <li> <p>\u7528<code>riscv64-linux-gnu-objdump</code>\u53ef\u4ee5\u6253\u5370\u8be5\u7a0b\u5e8f\u7684\u6c47\u7f16\u4ee3\u7801\uff1a    <pre><code>riscv64-linux-gnu-objdump -d challenge &gt; challenge.asm\n</code></pre>    \u5728\u6ca1\u6709 C \u4ee3\u7801\u7684\u60c5\u51b5\u4e0b\uff0c\u901a\u8fc7\u9605\u8bfb\u6c47\u7f16\u4ee3\u7801\u53ef\u4ee5\u77e5\u9053\u7a0b\u5e8f\u7684\u5185\u90e8\u7ec6\u8282</p> </li> <li> <p>\u5229\u7528 GDB \u8c03\u8bd5\u8be5\u7a0b\u5e8f\uff0c\u8fd9\u4e00\u6b65\u9700\u8981\u5f00\u542f\u4e24\u4e2a Terminal\uff08\u7ec8\u7aef\uff09\uff0c\u4e00\u4e2a Terminal \u7528QEMU\u8fd0\u884c\u7a0b\u5e8f\uff0c\u53e6\u4e00\u4e2a Terminal \u4f7f\u7528 GDB \u4e0e QEMU \u8fdb\u884c\u8fdc\u7a0b\u901a\u4fe1\u8c03\u8bd5\uff1a    <pre><code># Terminal 1\nqemu-riscv64 -g 1234 challenge # 1234 \u4e3a qemu \u5f00\u653e\u7ed9 gdb \u8fdc\u7a0b\u8fde\u63a5\u7684\u7aef\u53e3\n\n# Terminal 2\ngdb-multiarch challenge\n(gdb) target remote localhost:1234 # \u8fde\u63a5\u4e0a\u53e6\u4e00\u4e2aterminal\u7684 QEMU\n(gdb) b main      # \u5728 main \u51fd\u6570\u4e0a\u8bbe\u7f6e\u65ad\u70b9\n(gdb) c           # \u7ee7\u7eed\u8fd0\u884c\uff0cGDB \u4f1a\u8ba9\u7a0b\u5e8f\u8fd0\u884c\u76f4\u5230\u9047\u5230\u4e00\u4e2a\u65ad\u70b9\uff08\u5728\u8fd9\u91cc\u5373 main \u51fd\u6570\uff09\n(gdb) b phase_1   # \u5728 phase_1 \u51fd\u6570\u4e0a\u8bbe\u7f6e\u65ad\u70b9\n(gdb) c           # \u7ee7\u7eed\u8fd0\u884c\uff0c\u6b64\u65f6\u53ef\u4ee5\u5728 QEMU \u7684 Terminal \u5904\u8f93\u5165\u5b66\u53f7\u548c\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u7136\u540eGDB\u5c31\u4f1a\u8ba9\u7a0b\u5e8f\u5728 phase_1 \u51fd\u6570\u5904\u505c\u6b62\n...\n(gdb) q        # \u9000\u51fagdb\n</code></pre></p> </li> <li> <p>\u7834\u8bd1\u5b57\u7b26\u4e32\u7684\u5185\u5bb9\u4e0d\u9700\u8981\u5b8c\u5168\u7406\u89e3 phase_x \u51fd\u6570\u5185\u5bb9\u3002\u8be5\u5b9e\u9a8c\u7ec3\u4e60\u7684\u662f\u5feb\u901f\u7406\u89e3\u6c47\u7f16\u4ee3\u7801\u4e2d\u5173\u952e\u6b65\u9aa4\u4ee5\u53ca\u57fa\u672c\u7684 GDB \u8c03\u8bd5\u7a0b\u5e8f\u7684\u80fd\u529b\uff0c\u6240\u4ee5\u6700\u5feb\u901f\u7684\u65b9\u6cd5\u662f\u627e\u5230 phase_x \u51fd\u6570\u7684\u5173\u952e\u70b9\uff0c\u7136\u540e\u5229\u7528 GDB \u4e0b\u65ad\u70b9\uff0c\u5e76\u67e5\u770b\u65ad\u70b9\u9644\u8fd1\u5355\u6b65\u8ddf\u8e2a\u548c\u68c0\u67e5\u5bc4\u5b58\u5668\u3001\u53d8\u91cf\u72b6\u6001\uff0c\u5373\u53ef\u83b7\u53d6\u5feb\u901f\u7684\u5230\u5bc4\u5b58\u5668\u7684\u7ed3\u679c\u3002</p> </li> <li> <p>3 \u4e2a phase_x \u51fd\u6570\u8003\u5bdf\u7684\u8c03\u8bd5\u80fd\u529b\u5404\u6709\u4fa7\u91cd\uff1a</p> </li> </ol> <ul> <li> <p>phase_1 \u8003\u5bdf C \u6e90\u7801\u7a0b\u5e8f\u7684\u8c03\u8bd5\uff0c\u91cd\u70b9\u5728\u4e8e\u65ad\u70b9\u8bbe\u7f6e\u548c\u53d8\u91cf\u67e5\u770b10%</p> </li> <li> <p>phase_2 \u662f phase_1 \u7684\u5347\u7ea7\u7248\u672c\uff0c\u9664\u4e86\u65ad\u70b9\u8bbe\u7f6e\u548c\u53d8\u91cf\u67e5\u770b\uff0c\u8fd8\u8981\u9002\u5f53\u8fdb\u884c\u63a8\u65ad\u548c\u8ba1\u7b9710%</p> </li> <li> <p>phase_3 \u8003\u5bdf\u6c47\u7f16\u7a0b\u5e8f\u7684\u8c03\u8bd5\uff0c\u91cd\u70b9\u5728\u4e8e\u6c47\u7f16\u5bc4\u5b58\u5668\u7684\u8bed\u4e49\u5206\u6790\u548c\u5355\u6b65\u8ddf\u8e2a10%</p> </li> </ul> <p>\u6bcf\u901a\u8fc7\u4e00\u4e2aphase\u83b7\u5f9710%\u7684\u5206\u6570\u3002</p>"},{"location":"lab5-2/#spike_1","title":"spike \u7a0b\u5e8f\u8c03\u8bd5","text":""},{"location":"lab5-2/#_6","title":"\u5b9e\u9a8c\u73af\u5883\u914d\u7f6e","text":"<ol> <li> <p>\u5b89\u88c5 spike    <pre><code>git submodule update --init repo/riscv-isa-cosim\ncd repo\nmake spike\n</code></pre>    \u8fd0\u884c<code>spike</code>\u68c0\u6d4b\u5b89\u88c5\u662f\u5426\u6210\u529f\u3002</p> </li> <li> <p>\u5b89\u88c5 openocd    <pre><code>git submodule update --init repo/riscv-openocd\ncd repo\nmake openocd\n</code></pre>    \u8fd0\u884c<code>openocd --version</code>\u68c0\u6d4b\u5b89\u88c5\u662f\u5426\u6210\u529f\u3002</p> </li> </ol> <p>\u5982\u679c<code>make openocd</code>\u65f6\u51fa\u73b0\u7c7b\u4f3c\u4e8e<code>configure.ac:32: error: Macro PKG_PROG_PKG_CONFIG is not available. It is usually defined in file pkg.m4 provided by package pkg-config.</code>\u7684\u9519\u8bef\u8bf4\u660e\u627e\u4e0d\u5230PKG_PROG_PKG_CONFIG\u7684\u5b8f\u5b9a\u4e49\uff0c\u9700\u8981\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5pkg-config\u6765\u89e3\u51b3\uff1a <pre><code>   sudo apt install pkg-config\n</code></pre></p>"},{"location":"lab5-2/#_7","title":"\u8c03\u8bd5\u4e32\u53e3\u5de5\u4f5c\u51fd\u6570","text":"<p>\u5f53\u6211\u4eec\u7528<code>spike pk challenge</code>\u6267\u884c\u6211\u4eec\u7684\u7a0b\u5e8f\u7684\u65f6\u5019\uff0cspike \u6a21\u62df\u4e86 riscv \u7684\u5904\u7406\u5668\uff0cpk \u6a21\u62df\u4e86 sbi \u548c\u64cd\u4f5c\u7cfb\u7edf\uff0cchallenge \u6267\u884c\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u7684\u7a0b\u5e8f\u3002\u5f53 challenge \u8c03\u7528 scanf \u548c printf \u51fd\u6570\u8bfb\u53d6\u548c\u8f93\u51fa\u5b57\u7b26\u4e32\u7684\u65f6\u5019\uff0c\u5176\u5b9e\u662f\u4f7f\u7528 spike \u6a21\u62df\u7684\u4e32\u53e3\uff08\u56de\u5fc6 lab4-2\uff09\u6765\u8fdb\u884c\u6570\u636e\u6536\u53d1\u7684\u3002</p> <p>bbl \u662f riscv-pk \u7ec4\u4ef6\u7684\u4e00\u90e8\u5206\uff0c\u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u7684 sbi\uff0cuart \u7684\u6570\u636e\u6536\u53d1\u6700\u7ec8\u4e5f\u662f\u88ab bbl \u8c03\u7528\u7684\uff0c\u6240\u4ee5\u8bf7\u5c1d\u8bd5\u9605\u8bfb riscv-pk \u4e2d\u7684 bbl \u6e90\u7801\u548c\u8c03\u8bd5 bbl\uff0c\u5b9a\u4f4d printf \u51fd\u6570\u6700\u7ec8\u6267\u884c\u5b57\u7b26\u53d1\u9001\u7684\u6307\u4ee4\u3002\u5982\u679c\u4e4b\u524d\u5728\u672c\u5730\u7f16\u8bd1\u4e86 riscv-pk\uff0c\u5219 bbl \u5728 repo/build/riscv-pk/ \u6587\u4ef6\u5939\u4e2d\u3002</p> <p>\u9996\u5148\u6267\u884c<code>spike -H --rbb-port=9824 &lt;bbl\u7684\u8def\u5f84&gt;</code>\uff0c\u8be5\u7a0b\u5e8f\u4f1a\u5728 spike \u4e0a\u6267\u884c bbl\uff0c\u5e76\u5f00\u653e 9824 \u7aef\u53e3\u7ed9\u8c03\u8bd5\u8c03\u8bd5\u5668\u94fe\u63a5\u3002-H \u786e\u4fdd\u5728\u8c03\u8bd5\u5668\u8fde\u63a5\u4e4b\u524d spike \u4e0d\u5f00\u59cb\u6a21\u62df\u3002\u5982\u679c\u4f60\u7684riscv-pk\u4e0d\u662f\u91c7\u7528\u5728repo\u4e2d<code>make pk</code>\u81ea\u52a8\u5b89\u88c5\u7684\uff0c\u8bf7\u6539\u4e3a\u81ea\u5df1\u5b89\u88c5\u7684riscv-pk\u4e0b\u7684bbl\u8def\u5f84\u3002</p> <pre><code>sys1-sp24/src/lab5-2# spike -H --rbb-port=9824 ../../repo/build/riscv-pk/bbl\nListening for remote bitbang connection on port 9824.\n</code></pre> <p>\u5728\u65b0\u7684 terminal \u6267\u884c<code>openocd -f spike.cfg</code>\uff0cspike.cfg \u4e2d\u5b58\u50a8\u4e86 spike \u8fde\u63a5\u7684\u914d\u7f6e\u53c2\u6570\uff0c\u4e4b\u540e openocd \u4f1a\u81ea\u52a8\u8fde\u63a5 spike \u7684\u8c03\u8bd5\u7aef\u53e3\uff0c\u5e76\u4e14\u5f00\u653e 3333 \u7aef\u53e3\u7ed9 gdb \u8fdb\u884c\u8c03\u8bd5\u8fde\u63a5\uff0c\u6700\u7ec8\u8d77\u5230 spike \u548c gdb \u7684\u6865\u6881\u4f5c\u7528\u3002</p> <pre><code>sys1-sp24/src/lab5-2# openocd -f spike.cfg \nOpen On-Chip Debugger 0.12.0+dev-02917-g58b6a5eab (2023-10-02-16:02)\nLicensed under GNU GPL v2\nFor bug reports, read\n        http://openocd.org/doc/doxygen/bugs.html\nDEPRECATED! use 'adapter driver' not 'interface'\nInfo : only one transport option; autoselect 'jtag'\n   ...\nInfo : [riscv.cpu] datacount=2 progbufsize=2\nInfo : [riscv.cpu] Examined RISC-V core; found 1 harts\nInfo : [riscv.cpu]  XLEN=64, misa=0x800000000014112d\n[riscv.cpu] Target successfully examined.\nInfo : starting gdb server for riscv.cpu on 3333\nInfo : Listening on port 3333 for gdb connections\nInfo : Listening on port 6666 for tcl connections\nInfo : Listening on port 4444 for telnet connections\n</code></pre> <p>\u6700\u540e\u4f7f\u7528 gdb \u8fde\u63a5 3333 \u7aef\u53e3\u8c03\u8bd5\u5373\u53ef\uff0c\u6267\u884c<code>gdb-multiarch ../../repo/build/riscv-pk/bbl</code>\u542f\u52a8gdb\u5e76\u52a0\u8f7d\u76ee\u6807\u7a0b\u5e8f\u3002 <pre><code>Reading symbols from ../../repo/build/riscv-pk/bbl...\n(No debugging symbols found in ../../repo/build/riscv-pk/bbl)\n(gdb) target remote : 3333\nRemote debugging using : 3333\n0x0000000000001000 in ?? ()\n(gdb) b printm\nBreakpoint 1 at 0x80001c82\n(gdb) c\nContinuing.\n\nBreakpoint 1, 0x0000000080001c82 in printm ()\n(gdb) \n</code></pre></p> <p>\u63d0\u793a\uff1a</p> <p>bbl \u4f1a\u8c03\u7528 printm \u51fd\u6570\u8f93\u51fa\u5b57\u7b26\u4e32\uff0c\u6240\u4ee5\u5927\u5bb6\u53ef\u4ee5\u6cbf\u7740 printm \u51fd\u6570\u8fdb\u884c\u8c03\u8bd5\u627e\u5230\u5bf9\u5e94\u7684\u4e32\u53e3\u8c03\u7528\u51fd\u6570\uff0c\u8fdb\u800c\u627e\u5230\u6267\u884c\u4e32\u53e3\u8f93\u51fa\u7684\u5173\u952e\u8bed\u53e5\u3002\u5f53\u8fd9\u6761\u5173\u952e\u6307\u4ee4\u88ab\u6267\u884c\u540e\uff0c\u53ef\u4ee5\u770b\u5230 spike \u754c\u9762\u51fa\u73b0\u4e86\u4e00\u4e2a\u5b57\u7b26\u4e32\u7684\u8f93\u51fa\u3002</p> <pre><code>/sys1-sp24/src/lab5-2# spike -H --rbb-port=9824 ../../repo/build/riscv-pk/bbl\nListening for remote bitbang connection on port 9824.\nh\n</code></pre>"},{"location":"lab5-2/#5-30","title":"5 \u5b9e\u9a8c\u62a5\u544a30%","text":"<p>\u5b9e\u9a8c\u62a5\u544a\u8981\u6c42\uff1a</p> <ol> <li> <p>qemu \u8c03\u8bd5\u90e8\u5206\u7ed9\u51fa\u8c03\u8bd5\u8fc7\u7a0b\u7684\u5173\u952e\u622a\u56fe\uff0c\u5e76\u4e14\u7ed9\u51fa\u81ea\u5df1\u63a8\u65ad\u5f97\u5230\u5b57\u7b26\u4e32\u7684\u8c03\u8bd5\u8fc7\u7a0b\u548c\u63a8\u65ad\u4f9d\u636e\u3002\uff08\u8fd9\u6b21\u8c03\u8bd5\u8fc7\u7a0b\u4e2d\u4e0d\u5141\u8bb8\u4fee\u6539 C \u6e90\u4ee3\u7801\uff0c\u66f4\u4e0d\u5141\u8bb8\u4f7f\u7528 printf \u5927\u6cd5\uff0930%</p> </li> <li> <p>spike \u8c03\u8bd5\u90e8\u5206\u7ed9\u51fa\u8c03\u8bd5\u8fc7\u7a0b\u7684\u5173\u952e\u622a\u56fe\uff0c\u5e76\u4e14\u7ed9\u51fa printm \u5230\u7b2c\u4e00\u4e2a\u5b57\u7b26\u8f93\u51fa\u7684\u51fd\u6570\u8c03\u7528\u94fe\u3001\u8f93\u51fa\u5b57\u7b26\u7684\u5173\u952e\u51fd\u6570\u3001\u8f93\u51fa\u5b57\u7b26\u90a3\u4e00\u53e5\u6c47\u7f16\u3002 \uff08bonus\uff09</p> </li> <li> <p>\u8c03\u8bd5\u5b9a\u4f4d\u4e86\u4e32\u53e3\u5b57\u7b26\u8f93\u51fa\u7684\u51fd\u6570\u4e4b\u540e\uff0c\u9605\u8bfb riscv-pk \u5bf9\u5e94\u7684\u8be5\u51fd\u6570\u7684\u6e90\u7801\uff0c\u5c1d\u8bd5\u7406\u89e3\u4e32\u53e3\u5b57\u7b26\u8f93\u51fa\u7684\u5177\u4f53\u7ec6\u8282\u3002\uff08bonus\uff09</p> </li> </ol>"},{"location":"project-1/","title":"project: \u5355\u5468\u671f CPU \u6570\u636e\u901a\u8def\u8bbe\u8ba1","text":""},{"location":"project-1/#_1","title":"\u5b9e\u9a8c\u76ee\u7684","text":"<ul> <li>\u4e86\u89e3 CPU \u8bbe\u8ba1\u7684\u57fa\u672c\u539f\u7406</li> <li>\u8bbe\u8ba1 CPU \u6570\u636e\u901a\u8def</li> <li>\u4e3a\u4e4b\u540e\u642d\u8d77\u5355\u5468\u671f CPU \u6253\u4e0b\u57fa\u7840</li> </ul>"},{"location":"project-1/#_2","title":"\u5b9e\u9a8c\u73af\u5883","text":"<ul> <li>\u64cd\u4f5c\u7cfb\u7edf\uff1aWindows 10+ 22H2\uff0cUbuntu 22.04+</li> <li>VHDL\uff1aVerilog\uff0cSystemVerilog</li> </ul>"},{"location":"project-1/#_3","title":"\u80cc\u666f\u77e5\u8bc6","text":""},{"location":"project-1/#cpu","title":"\u5355\u5468\u671f CPU","text":"<p>\u5355\u5468\u671f CPU \u4e3b\u8981\u7279\u5f81\u662f\u5728\u4e00\u4e2a\u5468\u671f\u5185\u5b8c\u6210\u4e00\u6761\u6307\u4ee4\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u5176 CPI (cycle per instruction) \u662f 1\u3002 \u8003\u8651\u5230\u4e0d\u540c\u7684\u6307\u4ee4\u90fd\u9700\u8981\u5728\u4e00\u4e2a\u5468\u671f\u5185\u5b8c\u6210\uff0c\u56e0\u800c\u5355\u5468\u671f CPU \u65f6\u949f\u9891\u7387\u662f\u4ee5\u6267\u884c\u6700\u6162\u7684\u90a3\u6761\u6307\u4ee4\u4f5c\u4e3a\u57fa\u51c6\uff0c\u8fd9\u4e5f\u662f\u5355\u5468\u671f CPU \u6700\u5927\u7684\u7f3a\u9677\u4e4b\u4e00\u3002 \u6211\u4eec\u53ef\u4ee5\u628a\u5355\u5468\u671f CPU \u5206\u6210\u6570\u636e\u901a\u8def\u548c\u63a7\u5236\u5355\u5143\u4e24\u4e2a\u6a21\u5757\uff0c\u672c\u6b21\u5b9e\u9a8c\u5c06\u5b8c\u6210\u6570\u636e\u901a\u8def\u6a21\u5757\u3002</p>"},{"location":"project-1/#_4","title":"\u6570\u636e\u901a\u8def\u8bbe\u8ba1","text":"<p>\u4e3a\u4e86\u4e4b\u540e\u80fd\u548c\u6d41\u6c34\u7ebf CPU \u8fdb\u884c\u8854\u63a5\uff0c\u6211\u4eec\u628a\u5355\u5468\u671f CPU \u6570\u636e\u901a\u8def\u5212\u5206\u6210 5 \u4e2a\u9636\u6bb5\uff08stage\uff09:</p> <ul> <li>Instruction Fetch (IF)</li> <li>Instruction Decode (ID)</li> <li>EXecution (EX)</li> <li>MEMory access (MEM)</li> <li>register Write Back (WB)</li> </ul> <p>\u8fd9 5 \u4e2a stage \u6240\u505a\u7684\u64cd\u4f5c\u89e3\u91ca\uff1a</p> <ul> <li>\u83b7\u53d6\u6307\u4ee4\u9636\u6bb5 (IF)</li> <li>\u4ece Instruction Memory \u4e2d\u83b7\u53d6 32 \u4f4d\u6307\u4ee4</li> <li>\u4ee4\u5f53\u524d\u7684 PC (Program Counter) \u589e\u52a0 4\uff08PC = PC + 4\uff0c\u4f7f\u5f53\u524d PC \u6307\u5411\u4e0b\u4e00\u6761 32 \u4f4d\u7684\u6307\u4ee4\uff0cInstruction Memory \u662f byte-addressing\uff0c\u6240\u4ee5\u662f+4 \u800c\u4e0d\u662f+32\uff09</li> <li>\u6307\u4ee4\u8bd1\u7801\u9636\u6bb5 (ID)</li> <li>\u62ff\u5230\u6307\u4ee4\u4e4b\u540e\uff0c\u6211\u4eec\u9700\u8981\u77e5\u9053\u6307\u4ee4\u80fd\u63d0\u4f9b\u5404\u79cd\u4fe1\u606f\u5305\u62ec Opcode, Rs1, Rs2, Rd, Imm \u7b49\u7b49\uff0c\u6240\u4ee5\u9700\u8981\u5bf9\u6307\u4ee4\u8fdb\u884c\u8bd1\u7801\uff0c\u63d0\u53d6\u4fe1\u606f\u3002</li> <li>\u8bd1\u7801\u5b8c\u6210\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u62ff\u5230\u7684 Rs1, Rs2 \u8bfb\u53d6\u76f8\u5e94\u7684\u5bc4\u5b58\u5668\u503c</li> <li>\u6267\u884c\u9636\u6bb5 (EX)</li> <li>\u6267\u884c\u4e00\u4e9b\u8fd0\u7b97\u64cd\u4f5c\uff0c\u5305\u62ec+\uff0c-\uff0c*\uff0c/\uff0c\u903b\u8f91\u8fd0\u7b97\u6216\u5de6\u79fb\u3001\u53f3\u79fb\u7b49\u7b49</li> <li>\u8df3\u8f6c\u5730\u5740\u7684\u8ba1\u7b97\u4e5f\u53ef\u4ee5\u5728\u8fd9\u4e2a\u9636\u6bb5\u6267\u884c</li> <li>\u8bbf\u5b58\u9636\u6bb5 (MEM)</li> <li>\u4ece Data Memory \u4e2d\u62ff\u5230\u6570\u636e</li> <li>\u5199\u56de\u9636\u6bb5 (WB)</li> <li>\u628a\u8ba1\u7b97\u540e\u83b7\u5f97\u7684\u6570\u636e\u6216\u8005\u4ece Data Memory \u8bfb\u7684\u6570\u636e\u5199\u56de\u5230\u5bc4\u5b58\u5668\u4e2d</li> </ul>"},{"location":"project-1/#_5","title":"\u6570\u636e\u901a\u8def\u56fe","text":""},{"location":"project-1/#_6","title":"\u6a21\u5757\u8bbe\u8ba1\u8981\u70b9","text":"<ul> <li>\u793a\u610f\u56fe\u4e2d\u7684\u5904\u7406\u5668\u4e3a\u54c8\u4f5b\u67b6\u6784\uff0c\u5185\u5b58\u5206\u4e3a Instruction Memory \u548c Data Memory\u3002\u4e3a\u4e86\u517c\u5bb9\u8f93\u5165\u6837\u4f8b\uff0c\u6211\u4eec\u9700\u8981\u5b9e\u73b0\u51af\u8bfa\u4f9d\u66fc\u67b6\u6784\u3002\u7b80\u4fbf\u8d77\u89c1\uff0c\u6211\u4eec\u5c06\u4e24\u5757\u5185\u5b58\u5408\u5e76\u4e3a\u4e00\u4e2a\u53cc\u53e3\u5185\u5b58\uff0c\u5176\u4e2d 0 \u53f7\u7aef\u53e3\u4e3a\u63d0\u4f9b\u7ed9 IF \u53d6\u6307\u9636\u6bb5\u7684\u53ea\u8bfb\u7aef\u53e3\uff0c1 \u53f7\u7aef\u53e3\u4e3a\u63d0\u4f9b\u7ed9 MEM \u9636\u6bb5\u7684\u8bfb\u5199\u7aef\u53e3\uff0c\u5e76\u4e14\u652f\u6301\u5b57\u8282\u63a9\u7801</li> <li>Add \u6a21\u5757\u5c31\u662f\u7b80\u5355\u7684\u52a0\u6cd5\uff0c\u6ce8\u610f\u5176\u548c ALU \u7684\u533a\u522b</li> <li>Registers \u662f 32 \u4e2a 64 \u4f4d\u5bc4\u5b58\u5668</li> <li>\u56e0\u4e3a RISC-V \u7684 Imm \u5728\u6307\u4ee4\u4e2d\u7684\u4f4d\u7f6e\u4e0d\u662f\u56fa\u5b9a\u7684\uff0c\u6240\u4ee5\u9700\u8981\u9488\u5bf9\u4e0d\u540c\u6307\u4ee4\u751f\u6210\u76f8\u5e94\u7684 Imm\uff0c\u5f53\u7136 Imm Gen \u6a21\u5757\u4e5f\u53ef\u4ee5\u653e\u5230\u4e4b\u540e\u8981\u5b9e\u73b0\u7684\u63a7\u5236\u5355\u5143\u6a21\u5757\u4e2d\u6216\u8005\u8bf4\u6307\u4ee4\u89e3\u7801\u5668\u4e2d</li> <li>ALU \u6a21\u5757\u6839\u636e\u8981\u5b9e\u73b0\u7684\u6307\u4ee4\u5b9e\u73b0\u5177\u4f53\u7684\u64cd\u4f5c\uff0c\u6ce8\u610f\u8981\u5145\u5206\u5229\u7528 Verilog \u63d0\u4f9b\u7684\u64cd\u4f5c\u7b26\uff0c\u4f8b\u5982+, -, &lt;&lt;, &gt;&gt;&gt;\u7b49</li> </ul>"},{"location":"project-1/#_7","title":"\u6570\u5b57\u7535\u8def\u8bbe\u8ba1\u8981\u70b9","text":"<p>\u6570\u5b57\u7535\u8def\u6839\u636e\u5176\u7279\u70b9\u5927\u6982\u53ef\u4ee5\u5206\u6210\u7ec4\u5408\u7535\u8def\u548c\u65f6\u5e8f\u7535\u8def\u4e24\u5927\u7c7b\uff0c\u5176\u6982\u5ff5\u548c\u7279\u6027\u5df2\u7ecf\u5728\u8bfe\u4e0a\u8bb2\u8ff0\uff0c\u5728\u8fd9\u91cc\u4e0d\u591a\u9610\u8ff0\u3002\u5728\u5355\u5468\u671f CPU \u8bbe\u8ba1\u4e2d\uff0c\u8fd9\u4e24\u79cd\u7535\u8def\u8bbe\u8ba1\u5f52\u7eb3\u5982\u4e0b\uff1a</p> <ul> <li>\u5728\u5b9e\u9a8c\u4e2d\uff0c Instruction Memory \u662f\u7ec4\u5408\u7535\u8def\uff0cData Memory \u662f\u65f6\u5e8f\u7535\u8def\uff08\u4ec5\u9650\u4e8e\u672c\u5b9e\u9a8c\uff0c\u5b9e\u9645\u4e2d\u5e76\u975e\u5982\u6b64\uff09</li> <li>Registers\u3001PC \u6a21\u5757\u4f7f\u7528\u65f6\u5e8f\u7535\u8def</li> <li>ALU\u3001Add \u6a21\u5757\u4f7f\u7528\u7ec4\u5408\u7535\u8def</li> <li>Imm Gen\u3001Mux \u6a21\u5757\u4f7f\u7528\u7ec4\u5408\u7535\u8def</li> </ul>"},{"location":"project-1/#_8","title":"\u5b9e\u9a8c\u6b65\u9aa4","text":""},{"location":"project-1/#_9","title":"\u5b9e\u9a8c\u524d\u51c6\u5907","text":"<p>\u542f\u52a8\u5b89\u88c5\u5728\u4f60\u7535\u8111\u4e2d\u7684 Ubuntu 22.04 \u73af\u5883\uff08 WSL \u6216\u865a\u62df\u673a\uff09\uff0c\u968f\u540e\u901a\u8fc7 <code>cd</code> \u79fb\u52a8\u5230 <code>sys1-sp24</code> \u76ee\u5f55\u4e0b\uff0c\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff1a <pre><code>git pull origin master\ncd repo/sys-project\ngit checkout main\n</code></pre> \u8be5\u5b9e\u9a8c\u7684 sys-project \u4ee3\u7801\u5728 main \u5206\u652f\u4e0b\u3002</p>"},{"location":"project-1/#memory","title":"Memory \u8bbe\u8ba1","text":"<p>\u5728\u672c\u5b9e\u9a8c\u4e2d\uff0c<code>sys-project/general/DRAM.v</code>\u5b9e\u73b0\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u5185\u5b58\u6a21\u578b:</p> <pre><code>module DRAM #(\n    parameter FILE_PATH = \"\",   // \u521d\u59cb\u5316\u5185\u5b58\u7684\u6587\u4ef6\u8def\u5f84\n    parameter DATA_WIDTH = 64,  // \u6570\u636e\u7684\u5bbd\u5ea6\n    parameter CAPACITY = 4096   // \u5185\u5b58\u5b58\u50a8\u7684\u6570\u636e\u91cf\n) (\n    input  clk,\n    input  wen,   // \u5199\u4f7f\u80fd\uff0c\u5f53 wen=1 \u65f6\u5199\u5185\u5b58\n    input  [$clog2(CAPACITY/(DATA_WIDTH/8))-1:0] waddr, //  \u5199\u64cd\u4f5c\u7684\u5185\u5b58\u5730\u5740\n    input  [DATA_WIDTH-1:0] wdata,                      //  \u5199\u64cd\u4f5c\u5199\u5165\u7684\u6570\u636e\n    input  [DATA_WIDTH/8-1:0] wmask,                    //  \u5199\u64cd\u4f5c\u7684\u5b57\u8282\u63a9\u7801\n    // MEM \u9636\u6bb5\u5199\u64cd\u4f5c\n\n    input  [$clog2(CAPACITY/(DATA_WIDTH/8))-1:0] raddr0,//  \u7b2c\u4e00\u4e2a\u8bfb\u53e3\u7684\u8bfb\u64cd\u4f5c\u5185\u5b58\u5730\u5740\n    output [DATA_WIDTH-1:0] rdata0,                     //  \u7b2c\u4e00\u4e2a\u8bfb\u53e3\u8fd4\u56de\u7684\u6570\u636e\n    // IF \u9636\u6bb5\u8bfb\u64cd\u4f5c\n\n    input  [$clog2(CAPACITY/(DATA_WIDTH/8))-1:0] raddr1,//  \u7b2c\u4e8c\u4e2a\u8bfb\u53e3\u7684\u8bfb\u64cd\u4f5c\u5185\u5b58\u5730\u5740\n    output [DATA_WIDTH-1:0] rdata1                      //  \u7b2c\u4e8c\u4e2a\u8bfb\u53e3\u8fd4\u56de\u7684\u6570\u636e\n    // MEM \u9636\u6bb5\u8bfb\u64cd\u4f5c\n);\n\n    localparam BYTE_NUM = DATA_WIDTH / 8;\n    localparam DEPTH = CAPACITY / BYTE_NUM;\n    integer i;\n    reg [DATA_WIDTH-1:0] mem [0:DEPTH-1];   \n    // distribute memory\uff0c\u7528\u5bc4\u5b58\u5668\u6a21\u62df\u7684\u5185\u5b58\u533a\u57df\n    // \u8bfb\u5199\u6548\u7387\u9ad8\uff0c\u4f46\u662f\u8d44\u6e90\u5f00\u9500\u5927\n\n    initial begin\n        $readmemh(FILE_PATH, mem);\n        //  \u7528 hex \u6587\u4ef6\u521d\u59cb\u5316\u5185\u5b58\u503c\n    end\n\n    always @(posedge clk) begin\n        if (wen) begin  // \u5199\u64cd\u4f5c\n            for(i = 0; i &lt; BYTE_NUM; i = i+1) begin\n                if(wmask[i]) begin  \n                // \u5199\u63a9\u7801\u6309\u4f4d\u4f7f\u80fd\uff0c64 \u4f4d\u7684\u6570\u636e\u6709 8 \u4f4d\u63a9\u7801\uff0c\u63a9\u7801\u4e3a 1\uff0c\u5bf9\u5e94\u7684\u5b57\u8282\u5199\u5165\n                    mem[waddr][i*8 +: 8] &lt;= wdata[i*8 +: 8];\n                end\n            end\n        end\n    end\n\n    assign rdata0 = mem[raddr0];\n    assign rdata1 = mem[raddr1];\n    // \u8bfb\u64cd\u4f5c\nendmodule\n</code></pre> <p>DRAM \u6839\u636e FILE_PATH \u53c2\u6570\u7684\u6587\u4ef6\u5730\u5740\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u6211\u4eec\u5728<code>sys-project/testcode/testcase</code>\u4e0b\u63d0\u4f9b\u4e86\u4e00\u4e9b\u6d4b\u8bd5\u6587\u4ef6\uff0c\u7528\u4e8e\u52a0\u8f7d\u5230 RAM \u4e2d\uff0c\u6d4b\u8bd5\u4f60\u7684 CPU \u662f\u5426\u80fd\u5408\u7406\u5f97\u6267\u884c\u6307\u4ee4\u3002\u5176\u4e2d<code>.hex</code>\u540e\u7f00\u7684\u4e3a\u5b9e\u9645\u52a0\u8f7d\u5230 RAM \u4e2d\u7684\u6587\u4ef6\uff0c\u4f60\u9700\u8981\u5728\u4fee\u6539<code>project/include/initial_mem.vh</code>\u5934\u6587\u4ef6\u7684<code>FILE_PATH</code>\u53c2\u6570\u4e3a\u4f60\u672c\u5730\u7684\u7edd\u5bf9\u8def\u5f84\u3002</p> <p><code>.elf</code>\u540e\u7f00\u7684\u6587\u4ef6\u4e3a\u6d4b\u8bd5\u8f93\u5165\u7684\u539f\u59cbELF\u6587\u4ef6\uff0c\u534f\u540c\u6d4b\u8bd5\u6846\u67b6\u4f1a\u4f7f\u7528\u8be5\u6587\u4ef6\u3002</p> <p><code>.S</code>\u540e\u7f00\u7684\u6587\u4ef6\u4e3a\u6d4b\u8bd5\u6837\u4f8b\u5bf9\u5e94\u7684\u6c47\u7f16\u4ee3\u7801\uff0c\u5176\u4e2d\u6d4b\u8bd5\u4e86\u90e8\u5206\u6307\u4ee4\uff08lw, sw, addi, bne\uff09\u3002</p> <p>\u6211\u4eec\u4f1a\u5728\u8865\u5145\u66f4\u591a\u6d4b\u8bd5\u6837\u4f8b\uff0c\u5e76\u4e14\u6211\u4eec\u6b22\u8fce\u540c\u5b66\u4eec\u63d0\u4ea4\u81ea\u5df1\u7684\u6d4b\u8bd5\u6837\u4f8b\u3002</p>"},{"location":"project-1/#memory_1","title":"Memory \u63a5\u53e3","text":"<p>\u672c\u5b9e\u9a8c\u4f7f\u7528\u7684\u5185\u5b58\u6a21\u578b\u5f88\u7b80\u5355\uff0c\u8fd9\u6837\u5bfc\u81f4 CPU \u548c Memory \u7684\u4ea4\u4e92\u64cd\u4f5c\u975e\u5e38\u7b80\u5355\uff0c\u4e14\u53ef\u4ee5\u5728\u4e00\u4e2a\u5468\u671f\u6267\u884c\u591a\u6b21\u5185\u5b58\u64cd\u4f5c\u3002\u4f46\u662f\u5b9e\u9645\u4e0a\u7684\u5185\u5b58\u64cd\u4f5c\u662f\u5f88\u590d\u6742\u7684\uff0c\u9700\u8981\u590d\u6742\u7684\u65f6\u5e8f\u63a7\u5236\u548c\u591a\u5468\u671f\u7684\u6267\u884c\u65f6\u95f4\uff0c\u56e0\u6b64\u6211\u4eec\u5728\u672c\u6b21\u5b9e\u9a8c\u4e2d\u63d0\u4f9b\u4e86\u4e00\u4e2a\u76f8\u5bf9\u8f83\u4e3a\u590d\u6742\u4e14\u5b8c\u5907\u7684 Memory \u63a5\u53e3\uff0c\u867d\u7136\u5728\u672c\u5b9e\u9a8c\u4e2d\u65e0\u6cd5\u4f53\u73b0\u5b83\u7684\u6548\u679c\uff0c\u4f46\u662f\u5728\u4e4b\u540e\u7cfb\u7edf II\u3001\u7cfb\u7edf III \u7684\u5b9e\u9a8c\u4e2d\uff0c\u5927\u5bb6\u4f1a\u6162\u6162\u611f\u53d7\u5230\u5b83\u7684\u4f18\u79c0\u4e4b\u5904\uff0c\u8fd9\u91cc\u505a\u4e00\u4e2a\u7b80\u8981\u4ecb\u7ecd\u3002</p> <p>Memory \u63a5\u53e3\u7531\u56db\u4e2a\u6570\u636e\u901a\u9053\u7ec4\u6210\uff1a</p> <ul> <li>\u8bfb\u8bf7\u6c42\u901a\u9053\uff1a\u8be5\u901a\u9053\u7ebf\u8def\u76f8\u4e92\u914d\u5408\uff0c\u5c06 Core \u7684\u8bfb\u8bf7\u6c42\u53d1\u9001\u7ed9 Memory</li> <li>r_request_bits\uff1a\u7c7b\u578b RrequestBit\uff0c\u4e3a\u8bfb\u8bf7\u6c42\u7684\u6570\u636e\u5305<ul> <li>raddr\uff1a\u7c7b\u578b addr_t\uff0c\u4e3a\u9700\u8981\u8bfb\u7684\u5185\u5b58\u5730\u5740</li> </ul> </li> <li>r_request_valid\uff1a\u7c7b\u578b ctrl_t\uff0cCore \u548c Memory \u5173\u4e8e r_request_bits \u7684\u63e1\u624b\u4fe1\u53f7</li> <li>r_request_ready\uff1a\u7c7b\u578b ctrl_t\uff0cCore \u548c Memory \u5173\u4e8e r_request_bits \u7684\u63e1\u624b\u4fe1\u53f7</li> <li>\u8bfb\u54cd\u5e94\u901a\u9053\uff1a\u8be5\u901a\u9053\u7ebf\u8def\u76f8\u4e92\u914d\u5408\uff0c\u5c06 Memory \u8bfb\u5230\u7684\u7ed3\u679c\u8fd4\u8fd8\u7ed9 Memory</li> <li>r_reply_bits\uff1a\u7c7b\u578b RreplyBit\uff0c\u4e3a\u8bfb\u54cd\u5e94\u7684\u6570\u636e\u5305<ul> <li>rdata\uff1a\u7c7b\u578b data_t\uff0c\u4e3a\u8bfb\u5230\u7684\u5185\u5b58\u6570\u636e</li> <li>rresp\uff1a\u7c7b\u578b\u4e3a resp_t\uff0c\u4e3a\u5185\u5b58\u8bbf\u95ee\u8fc7\u7a0b\u4e2d\u7684\u62a5\u9519\u4fe1\u606f</li> </ul> </li> <li>r_reply_valid\uff1a\u7c7b\u578b ctrl_t\uff0cCore \u548c Memory \u5173\u4e8e r_reply_bits \u7684\u63e1\u624b\u4fe1\u53f7</li> <li>r_reply_ready\uff1a\u7c7b\u578b ctrl_t\uff0cCore \u548c Memory \u5173\u4e8e r_reply_bits \u7684\u63e1\u624b\u4fe1\u53f7</li> <li>\u5199\u8bf7\u6c42\u901a\u9053\uff1a\u8be5\u901a\u9053\u7ebf\u8def\u76f8\u4e92\u914d\u5408\uff0c\u5c06 Core \u7684\u5199\u8bf7\u6c42\u53d1\u9001\u7ed9 Memory</li> <li>w_request_bits\uff1a\u7c7b\u578b WrequestBit\uff0c\u4e3a\u5199\u8bf7\u6c42\u7684\u6570\u636e\u5305<ul> <li>waddr\uff1a\u7c7b\u578b addr_t\uff0c\u4e3a\u9700\u8981\u5199\u7684\u5185\u5b58\u5730\u5740</li> <li>wmask\uff1a\u7c7b\u578b\u4e3a mask_t\uff0c\u4e3a\u5199\u64cd\u4f5c\u7684\u5b57\u8282\u63a9\u7801</li> <li>wdata\uff1a\u7c7b\u578b\u4e3a data_t\uff0c\u4e3a\u5199\u5165\u7684\u6570\u636e</li> </ul> </li> <li>w_request_valid\uff1a\u7c7b\u578b ctrl_t\uff0cCore \u548c Memory \u5173\u4e8e w_request_bits \u7684\u63e1\u624b\u4fe1\u53f7</li> <li>w_request_ready\uff1a\u7c7b\u578b ctrl_t\uff0cCore \u548c Memory \u5173\u4e8e w_request_bits \u7684\u63e1\u624b\u4fe1\u53f7</li> <li>\u5199\u54cd\u5e94\u901a\u9053\uff1a\u8be5\u901a\u9053\u7ebf\u8def\u76f8\u4e92\u914d\u5408\uff0c\u5c06 Memory \u5199\u7684\u7ed3\u679c\u8fd4\u8fd8\u7ed9 Memory</li> <li>w_reply_bits\uff1a\u7c7b\u578b WreplyBit\uff0c\u4e3a\u5199\u54cd\u5e94\u7684\u6570\u636e\u5305<ul> <li>bresp\uff1a\u7c7b\u578b\u4e3a resp_t\uff0c\u4e3a\u5185\u5b58\u8bbf\u95ee\u8fc7\u7a0b\u4e2d\u7684\u62a5\u9519\u4fe1\u606f</li> </ul> </li> <li>w_reply_valid\uff1a\u7c7b\u578b ctrl_t\uff0cCore \u548c Memory \u5173\u4e8e w_reply_bits \u7684\u63e1\u624b\u4fe1\u53f7</li> <li>w_reply_ready\uff1a\u7c7b\u578b ctrl_t\uff0cCore \u548c Memory \u5173\u4e8e w_reply_bits \u7684\u63e1\u624b\u4fe1\u53f7</li> </ul> <p>\u5f53\u8fdb\u884c\u8bfb\u64cd\u4f5c\u7684\u65f6\u5019\uff0c\u9996\u5148\u901a\u8fc7\u8bfb\u901a\u9053\u7684\u63e1\u624b\uff0cMaster \u5c06\u8bfb\u8bf7\u6c42\u7684\u5185\u5bb9\u53d1\u9001\u7ed9 Slave\uff0c\u7136\u540e\u7b49\u5f85 Slave \u901a\u8fc7\u8bfb\u54cd\u5e94\u901a\u9053\u7684\u63e1\u624b\uff0c\u5c06\u8bfb\u64cd\u4f5c\u7684\u7ed3\u679c\u53cd\u9988\u7ed9 Master\uff1b\u5199\u64cd\u4f5c\u540c\u7406\uff0cMaster \u901a\u8fc7\u5199\u8bf7\u6c42\u901a\u9053\u63e1\u624b\u53d1\u9001\u8bf7\u6c42\u5185\u5bb9\uff0c\u7136\u540e\u7b49\u5f85\u5199\u54cd\u5e94\u63e1\u624b\u5f97\u5230 Slave \u5199\u7684\u7ed3\u679c\u3002</p> <p>\u4e0d\u8fc7\u672c\u6b21\u5b9e\u9a8c\u56e0\u4e3a\u662f\u5355\u5468\u671f CPU\uff0c\u4e00\u4e2a\u5468\u671f\u5185\u4e00\u5b9a\u53ef\u4ee5\u5f97\u5230\u8bfb\u5199\u7ed3\u679c\uff0c\u6240\u4ee5 valid-ready \u63e1\u624b\u4e00\u76f4\u6210\u7acb\uff0c\u5927\u5bb6\u53ea\u8981\u5c06\u9700\u8981\u8bfb\u5199\u7684\u901a\u9053\u5e38\u5f00\u5373\u53ef\u3002\u5bf9\u4e8e\u590d\u6742\u7684\u5185\u5b58\u8bbf\u95ee\u64cd\u4f5c\u4f1a\u9047\u5230\u5404\u79cd\u5f85\u5904\u7406\u7684\u5185\u5b58\u9519\u8bef\uff0c\u6240\u4ee5\u63a5\u53e3\u4f1a\u8fd4\u56de rresp\u3001bresp\uff0c\u8fd9\u4e9b\u5728\u4e4b\u540e\u7684\u7cfb\u7edf II \u548c\u7cfb\u7edf III \u4e2d\u5927\u5bb6\u4e5f\u4f1a\u6162\u6162\u9047\u5230\uff0c\u8fd9\u91cc\u53ef\u4ee5\u5148\u4e0d\u8003\u8651\u3002\u672c\u6b21\u5b9e\u9a8c\u53ea\u8981\u6c42\u5927\u5bb6\u5b66\u4e60\u4f7f\u7528 interface \u7684\u57fa\u672c\u8bed\u6cd5\u5373\u53ef\u3002</p> <p>\u6211\u4eec\u7684 Core \u548c DRAM \u4e4b\u95f4\u7528 mem_ift \u76f8\u8fde\u63a5\u3002\u4e3a\u6b64\u6211\u4eec\u5c06 DRAM \u7684\u8f93\u5165\u8f93\u51fa\u63a5\u53e3\u5305\u88c5\u4e3a mem_ift \u7684\u63a5\u53e3\u6a21\u5f0f\uff0c\u5f97\u5230 Mem_ift_DRAM \u6a21\u5757\u3002</p>"},{"location":"project-1/#_10","title":"\u6570\u636e\u901a\u8def\u8bbe\u8ba1","text":"<p>\u6839\u636e 3.3 \u4e2d\u7ed9\u51fa\u7684\u53c2\u8003\u6570\u636e\u901a\u8def\u56fe\uff0c\u5b9e\u73b0\u6570\u636e\u901a\u8def\uff08\u5f53\u7136\u4e5f\u9f13\u52b1\u81ea\u5df1\u8bbe\u8ba1\u6570\u636e\u901a\u8def\uff09\u3002</p> <p>\u6211\u4eec\u7ed9\u51fa\u90e8\u5206\u6a21\u5757\u7684\u4ee3\u7801\u6846\u67b6\u4f9b\u540c\u5b66\u4eec\u53c2\u8003\uff08\u4e5f\u53ef\u4ee5\u81ea\u7531\u53d1\u6325\uff09\uff1a</p>"},{"location":"project-1/#register-file","title":"Register File","text":"<pre><code>`include \"core_struct.vh\"\nmodule RegFile (\n  input clk,\n  input rst,\n  input we,\n  input CorePack::reg_ind_t  read_addr_1,\n  input CorePack::reg_ind_t  read_addr_2,\n  input CorePack::reg_ind_t  write_addr,\n  input  CorePack::data_t write_data,\n  output CorePack::data_t read_data_1,\n  output CorePack::data_t read_data_2\n);\n  import CorePack::*;\n\n  integer i;\n  data_t register [1:31]; // x1 - x31, x0 keeps zero\n\n  // fill your code\n\nendmodule\n</code></pre> <p>\u53ef\u4ee5\u53c2\u8003\u5982\u4e0b\u7535\u8def\u56fe\uff1a</p> <p></p> <p>\u5927\u5bb6\u4e5f\u53ef\u4ee5\u53c2\u8003 DRAM \u7684\u5199\u6cd5\u6765\u7f16\u5199 Regfile\uff0c\u987a\u4fbf\u601d\u8003 regfile \u548c dram \u6709\u4ec0\u4e48\u5185\u5728\u8054\u7cfb\u3002\u8bf7\u6ce8\u610f zero \u5bc4\u5b58\u5668\u6052\u7b49\u4e8e 0\u3002</p>"},{"location":"project-1/#alu","title":"ALU","text":"<pre><code>`include \"core_struct.vh\"\nmodule ALU (\n  input  CorePack::data_t a,\n  input  CorePack::data_t b,\n  input  CorePack::alu_op_enum  alu_op,\n  output CorePack::data_t res\n);\n\n  import CorePack::*;\n\n  // fill your code\n\nendmodule\n</code></pre> <p>\u5927\u5bb6\u53ef\u4ee5\u53c2\u8003\u5982\u4e0b\u7535\u8def\u56fe\uff1a</p> <p></p>"},{"location":"project-1/#cmp","title":"Cmp","text":"<pre><code>`include\"core_struct.vh\"\nmodule Cmp (\n    input CorePack::data_t a,\n    input CorePack::data_t b,\n    input CorePack::cmp_op_enum cmp_op,\n    output cmp_res\n);\n\n    import CorePack::*;\n\n    // fill your code\n\nendmodule\n</code></pre> <p>\u5927\u5bb6\u53ef\u4ee5\u53c2\u8003\u5982\u4e0b\u7535\u8def\u56fe\uff1a</p> <p></p> <p>\u591a\u8def\u9009\u62e9\u5668\u7684\u7535\u8def\u5f00\u9500\u603b\u662f\u6700\u5927\u7684\uff0c\u5927\u5bb6\u53ef\u4ee5\u601d\u8003\u5982\u4f55\u5bf9\u7535\u8def\u8fdb\u884c\u4f18\u5316\uff0c\u7528\u66f4\u5c11\u7684\u7535\u5668\u5143\u4ef6\u5f97\u5230\u540c\u6837\u7684\u7535\u8def</p>"},{"location":"project-1/#instruction-selection","title":"Instruction Selection","text":"<p>\u7531\u4e8e\u5185\u5b58\u8bbf\u5b58\u8bfb\u56de\u7684\u6570\u636e\u4e3a\u662f64\u4f4d\uff0c\u56e0\u6b64\u9700\u8981\u6839\u636ePC\u6765\u8fdb\u4e00\u6b65\u5224\u65ad\u9700\u8981\u6267\u884c\u7684\u662f\u9ad832\u4f4d\u4ee4\u8fd8\u662f\u4f4e32\u4f4d\uff0c\u9009\u62e9\u7ed3\u679c\u4f20\u7ed9\u8bd1\u7801\u6a21\u5757\u3002</p>"},{"location":"project-1/#data-package","title":"Data Package","text":"<p>\u6839\u636e\u4f20\u5165\u7684\u5bc4\u5b58\u5668\u4e2d\u6570\u636e\u4ee5\u53ca\u8bbf\u5b58\u5730\u5740\u6765\u8fdb\u884c\u5bf9\u5e94\u7684\u79fb\u4f4d\u64cd\u4f5c\uff0c\u4f7f\u5199\u5165\u5185\u5b58\u7684\u6570\u636e\u7684\u5730\u5740\u5bf9\u5e94\u5230\u6240\u9700\u7684\u5730\u5740\u5904\uff0c\u6253\u5305\u540e\u7684\u6570\u636e\u8f93\u5165\u7ed9\u5185\u5b58\u6a21\u5757\u3002</p>"},{"location":"project-1/#data-mask-generation","title":"Data Mask Generation","text":"<p>\u6839\u636e\u8981\u5199\u5165\u6570\u636e\u7684\u5bbd\u5ea6\u4ee5\u53ca\u8bbf\u5b58\u5730\u5740\u6765\u51b3\u5b9a\u8981\u6253\u5305\u540e\u7684\u6570\u636e\u4e2d\u7684\u6709\u6548\u4f4d\u3002</p>"},{"location":"project-1/#data-truncation","title":"Data Truncation","text":"<p>\u6839\u636e\u8981\u8bfb\u53d6\u6570\u636e\u7684\u5bbd\u5ea6\u5bf9\u8bbf\u5b58\u5f97\u5230\u768464\u4f4d\u6570\u636e\u8fdb\u884c\u8c03\u6574\u3002</p>"},{"location":"project-1/#coredatapath","title":"Core\uff08DataPath\uff09","text":"<p>\u5728\u4f60\u7684\u63a7\u5236\u901a\u8def\u4e2d\u96c6\u6210\u4e0a\u9762\u5b9e\u73b0\u7684\u8fd9\u4e9b\u6a21\u5757\uff0c\u58f0\u660e\u4e3a Core \u6a21\u5757\u3002Core \u6a21\u5757\u6709\u4e24\u4e2a mem_ift \u7684\u5185\u5b58\u63a5\u53e3\u548c DRAM \u8fde\u63a5\uff0c\u5176\u4e2d imem_ift \u4ec5\u4f7f\u7528\u8bfb\u8bf7\u6c42\u548c\u8bfb\u54cd\u5e94\u901a\u9053\uff0c\u5411 DRAM \u8bf7\u6c42\u6307\u4ee4\uff1bdmem_ift \u4f7f\u7528\u56db\u4e2a\u901a\u9053\u5206\u522b\u8fdb\u884c DRAM \u7684\u8bfb\u5199\u64cd\u4f5c\u3002</p> <p>\u8be5\u6a21\u5757\u7684\u9876\u5c42\u5f15\u811a\u5982\u4e0b\uff0ccosim_core_info \u7ed3\u6784\u590d\u6742\u8fde\u63a5 core \u5185\u90e8\u7684\u6570\u636e\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u4f1a\u88ab\u7528\u4e8e\u5dee\u5206\u6d4b\u8bd5\u548c\u786c\u4ef6\u8c03\u8bd5\uff0c\u8bf7\u52a1\u5fc5\u4ed4\u7ec6\u8fde\u63a5\u3002</p> <pre><code>`include \"core_struct.vh\"\nmodule Core (\n    input clk,\n    input rst,\n\n    Mem_ift.Master imem_ift,\n    Mem_ift.Master dmem_ift,\n\n    output CorePack::CoreInfo cosim_core_info\n);\n    import CorePack::*;\n\n    // fill your code\n\n    assign cosim_core_info.pc        = pc;\n    assign cosim_core_info.inst      = {32'b0,inst};   \n    assign cosim_core_info.rs1_id    = {59'b0, rs1};\n    assign cosim_core_info.rs1_data  = read_data_1;\n    assign cosim_core_info.rs2_id    = {59'b0, rs2};\n    assign cosim_core_info.rs2_data  = read_data_2;\n    assign cosim_core_info.alu       = alu_res;\n    assign cosim_core_info.mem_addr  = dmem_ift.r_request_bits.raddr;\n    assign cosim_core_info.mem_we    = {63'b0, dmem_ift.w_request_valid};\n    assign cosim_core_info.mem_wdata = dmem_ift.w_request_bits.wdata;\n    assign cosim_core_info.mem_rdata = dmem_ift.r_reply_bits.rdata;\n    assign cosim_core_info.rd_we     = {63'b0, we_reg};\n    assign cosim_core_info.rd_id     = {59'b0, rd}; \n    assign cosim_core_info.rd_data   = wb_val;\n    assign cosim_core_info.br_taken  = {63'b0, br_taken};\n    assign cosim_core_info.npc       = next_pc;\n\nendmodule\n</code></pre> <p>\u6ce8\u610f\u4e0a\u8ff0<code>cosim_core_info</code>\u4fe1\u53f7\u4e2d\u8981\u6c42\u5fc5\u987b\u8981\u5f15\u51fa\u7684\u6709\uff1apc\u3001inst\u3001rd_we\u3001rd_id\u3001rd_data\u3002</p>"},{"location":"project-1/#_11","title":"\u6587\u4ef6\u7ed3\u6784","text":"<p>\u672c\u5b9e\u9a8c\u7684\u6587\u4ef6\u6570\u76ee\u8f83\u591a\uff0c\u4e3a\u4e86\u65b9\u4fbf\u540c\u5b66\u4eec\u8fdb\u884c\u6587\u4ef6\u7ba1\u7406\uff0c\u6211\u4eec\u8bbe\u7f6e\u4e86\u5982\u4e0b\u7684\u6587\u4ef6\u7ed3\u6784\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 repo\n\u2502   \u2514\u2500\u2500 sys-project\n\u2502       \u251c\u2500\u2500 general\n\u2502       \u251c\u2500\u2500 include\n\u2502       \u251c\u2500\u2500 ip\n\u2502       \u251c\u2500\u2500 sim\n\u2502       \u251c\u2500\u2500 syn\n\u2502       \u251c\u2500\u2500 tcl\n\u2502       \u2514\u2500\u2500 testcode\n\u2502           \u2514\u2500\u2500 testcase\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 project\n        \u251c\u2500\u2500 include\n        \u251c\u2500\u2500 Makefile\n        \u2514\u2500\u2500 submit\n</code></pre>"},{"location":"project-1/#_12","title":"\u786c\u4ef6\u90e8\u5206","text":"<ul> <li>general\uff1a\u63d0\u4f9b\u7ed9\u540c\u5b66\u4eec\u7684\u65e2\u7528\u4e8e\u4eff\u771f\u3001\u4e5f\u7528\u4e8e\u7efc\u5408\u7684\u4ee3\u7801</li> <li>include\uff1a\u63d0\u4f9b\u7684\u4e00\u4e9b\u5934\u6587\u4ef6</li> <li>ip\uff1a\u7528\u4e8e\u5dee\u5206\u6d4b\u8bd5\u7684 spike \u9759\u6001\u94fe\u63a5\u5e93\u548c\u5934\u6587\u4ef6\uff0c\u548c sim \u6587\u4ef6\u914d\u5408\u8fdb\u884c\u5dee\u5206\u6d4b\u8bd5<ul> <li>\u5f53\u524d ip \u6587\u4ef6\u5939\u63d0\u4f9b\u7684\u9759\u6001\u94fe\u63a5\u5e93\u662f x86 \u67b6\u6784\u7684\uff0c\u5982\u679c\u90e8\u5206\u540c\u5b66\u4e0d\u662f x86 \u7684\u673a\u5668\uff0c\u8bf7\u5728 repo \u6587\u4ef6\u5939\u8fd0\u884c <code>make ip_gen</code> \u81ea\u884c\u7f16\u8bd1\u9759\u6001\u94fe\u63a5\u5e93</li> </ul> </li> <li>sim\uff1a\u4ec5\u7528\u4e8e\u4eff\u771f\u7684 v\u3001sv\u3001cpp \u4ee3\u7801</li> <li>syn\uff1a\u4ec5\u7528\u4e8e\u7efc\u5408\u7684 v\u3001xcd\u3001sv \u4ee3\u7801</li> <li>tcl\uff1avivado \u7528\u4e8e\u7efc\u5408\u7684\u811a\u672c</li> </ul>"},{"location":"project-1/#_13","title":"\u8f6f\u4ef6\u90e8\u5206","text":"<p>testcode \u6587\u4ef6\u5939\u4e0b\uff1a</p> <ul> <li>testcase: \u521d\u59cb\u5316 0-0x1000 \u7684\u5185\u5b58\uff0c\u8fdb\u884c\u7b80\u5355\u7684\u529f\u80fd\u6d4b\u8bd5</li> <li>sample\uff1a\u7b80\u5355\u6d4b\u8bd5\u6837\u4f8b\uff0c\u7528\u4e8e\u719f\u6089\u5b9e\u9a8c\u7ed3\u6784</li> <li>rtype\uff1a\u6d4b\u8bd5 R \u578b\u6307\u4ee4</li> <li>itype\uff1a\u6d4b\u8bd5 I \u578b\u6307\u4ee4</li> <li>stype\uff1a\u6d4b\u8bd5 S \u578b\u6307\u4ee4</li> <li>btype\uff1a\u6d4b\u8bd5 B \u578b\u6307\u4ee4</li> <li>utype\uff1a\u6d4b\u8bd5 U \u578b\u6307\u4ee4</li> <li>jyupe\uff1a\u6d4b\u8bd5 J \u578b\u6307\u4ee4</li> <li>remain\uff1a\u6d4b\u8bd5\u5176\u4ed6\u7c7b\u578b\u7684\u6307\u4ee4</li> <li>full\uff1a\u6d4b\u8bd5\u6240\u6709\u7c7b\u578b\u7684\u6307\u4ee4</li> </ul> <p>\u7f16\u8bd1\u65b9\u5f0f\u5982\u4e0b\uff0c\u4e0d\u8fc7\u591a\u6570\u65f6\u5019\u4e0d\u9700\u8981\u624b\u52a8\u6267\u884c Makefile \u8fdb\u884c\u7f16\u8bd1\uff1a</p> <ul> <li>\u8fd0\u884c <code>make -C testcase TESTCASE=xxx</code>\uff0c\u7f16\u8bd1\u5176\u4e2d\u6307\u5b9a\u7684\u6d4b\u8bd5\u6837\u4f8b<ul> <li>\u4f8b\u5982 <code>TESTCASE=sample</code>\uff0c\u7f16\u8bd1 sample \u6587\u4ef6\u5939\u7684\u6d4b\u8bd5\u6837\u4f8b\uff0c\u5f97\u5230 sample.hex</li> <li>\u5982\u679c\u9700\u8981\u5f97\u5230\u7efc\u5408\u4e0b\u677f\u7684\u6d4b\u8bd5\u6837\u4f8b\uff0c\u5219\u8fd0\u884c <code>make -C testcase board TESTCASE=xxx</code>\uff0c\u8fd9\u6837\u6267\u884c\u5b8c\u6bd5\u53ef\u4ee5\u987a\u5229\u6b7b\u5faa\u73af\u5728 pass \u6307\u4ee4\u5904</li> </ul> </li> </ul>"},{"location":"project-1/#_14","title":"\u5de5\u4f5c\u533a\u7ba1\u7406","text":"<ul> <li>src/project \u662f\u7528\u4e8e\u7f16\u8bd1\u7efc\u5408\u7684\u5de5\u4f5c\u533a\uff0cproject \u7684\u5404\u4e2a\u5b50\u6587\u4ef6\u5939\u4f5c\u7528\u5982\u4e0b\uff1a<ul> <li>include: \u7528\u4e8e\u5b58\u653e\u7528\u6237\u81ea\u5df1\u7f16\u5199\u7684\u5934\u6587\u4ef6</li> <li>submit: \u7528\u4e8e\u5b9e\u73b0\u7528\u6237\u81ea\u5df1\u7684\u786c\u4ef6\u90e8\u5206\u4ee3\u7801\uff0c\u5305\u62ec\u7f16\u5199\u81ea\u5b9a\u4e49\u6a21\u5757\u548c\u8865\u5168\u6211\u4eec\u63d0\u4f9b\u7684\u6a21\u5757</li> <li>Makefile: \u7f16\u8bd1\u7efc\u5408\u7684\u811a\u672c</li> </ul> </li> </ul> <p>Tip</p> <p>\u5373 src/project \u662f\u5b9e\u9645\u9700\u8981\u7f16\u5199\u4f60\u81ea\u5df1\u7684\u4ee3\u7801\u3001\u7f16\u8bd1\u8fd0\u884c\u3001\u63d0\u4ea4\u7684\u5de5\u4f5c\u533a\u3002\u800c repo/sys-project \u662f\u5b9e\u9a8c\u6846\u67b6\uff0c\u4e0d\u9700\u8981\u4e5f\u4e0d\u53ef\u4ee5\u4fee\u6539\u3002</p>"},{"location":"project-1/#makefile","title":"Makefile \u811a\u672c\u529f\u80fd","text":"<ul> <li>make verilate\uff1a\u8fdb\u884c\u4e0d\u4e0b\u677f\u4eff\u771f\uff0c\u8fd0\u884c\u5728 repo/sys-project/testcode \u4e2d\u6267\u884c <code>make sim</code> \u540e\u5f97\u5230\u7684\u6d4b\u8bd5\u4ee3\u7801</li> <li>make board_sim\uff1a\u8fdb\u884c\u4e0b\u677f\u4eff\u771f\uff0c\u8fd0\u884c\u5728 .../testcode \u4e2d\u6267\u884c <code>make board</code> \u540e\u5f97\u5230\u7684\u6d4b\u8bd5\u4ee3\u7801</li> <li>make wave\uff1agtkwave \u67e5\u770b\u6ce2\u5f62</li> <li>make bitstream\uff1a\u751f\u6210 bit \u6d41</li> <li>make vivado\uff1a\u6253\u5f00 vivado</li> </ul> <p>\u5e0c\u671b\u8fd9\u4e9b\u811a\u672c\u7684\u6539\u52a8\u53ef\u4ee5\u65b9\u4fbf\u5927\u5bb6\u7f16\u8bd1\u5b89\u88c5\u5de5\u5177\u3001\u8fdb\u884c\u4eff\u771f\u6d4b\u8bd5\u3001\u8fdb\u884c\u7efc\u5408\u4e0b\u677f\uff0c\u4e0d\u8fc7\u66f4\u5e0c\u671b\u5927\u5bb6\u53ef\u4ee5\u4ed4\u7ec6\u9605\u8bfb\u8fd9\u4e9b\u811a\u672c\uff0c\u4ece\u4e2d\u5b66\u4e60\u5230\u66f4\u591a\u7684\u77e5\u8bc6\u3002\u5982\u679c\u5927\u5bb6\u6709\u66f4\u597d\u7684\u7ba1\u7406\u65b9\u6cd5\u6765\u63d0\u9ad8\u811a\u672c\u7684\u8d28\u91cf\uff0c\u4e5f\u6b22\u8fce\u548c\u52a9\u6559\u4eec\u8054\u7cfb\u3002</p>"},{"location":"project-1/#_15","title":"\u672a\u5b8c\u5f85\u7eed","text":"<p>\u6b32\u77e5\u540e\u4e8b\u5982\u4f55\uff0c\u8bf7\u770b\u4e0b\u4e2a\u5b9e\u9a8c\u6587\u6863</p>"},{"location":"project-2-appendix/","title":"\u5904\u7406\u5668\u5dee\u5206\u6d4b\u8bd5","text":""},{"location":"project-2-appendix/#_2","title":"\u5904\u7406\u5668\u6b63\u786e\u6027\u9a8c\u8bc1","text":"<p>\u5904\u7406\u5668\uff0c\u672c\u8d28\u4e0a\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u6709\u9650\u72b6\u6001\u673a\u3002\u5904\u7406\u5668\u5728\u67b6\u6784\u5c42\u9762\u7684\u72b6\u6001 S \u5305\u62ec PC \u5bc4\u5b58\u5668\u7684\u72b6\u6001 \\(S_{pc}\\)\u3001\u5bc4\u5b58\u5668\u6587\u4ef6\u7684\u72b6\u6001 \\(S_{reg}\\)\u3001\u5185\u5b58\u7684\u72b6\u6001 \\(S_{mem}\\) \uff0c\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u7684\u8ba4\u4e3a \\(S={S_{pc}, S_{reg}, S_{mem}}\\) \u3002\u53ea\u8981 \\(S\\) \u786e\u5b9a\uff0c\u4e0b\u4e2a\u5468\u671f\u5f97\u5230\u7684 \\(S'\\) \u7684\u72b6\u6001\u4e5f\u662f\u786e\u5b9a\u7684\uff0c\u8fdb\u800c\u6574\u4e2a\u72b6\u6001\u5e8f\u5217\u90fd\u662f\u786e\u5b9a\u7684\u3002\u56e0\u6b64\u6211\u4eec\u68c0\u67e5\u4e00\u4e2a\u5904\u7406\u5668\u662f\u5426\u6267\u884c\u6b63\u786e\u53ea\u8981\u68c0\u67e5\u6240\u6709\u7684\u72b6\u6001\u503c\u5bc4\u5b58\u5668\u7684\u503c\u662f\u5426\u6b63\u786e\u5373\u53ef\u3002</p> <p>\u7b2c\u4e00\u79cd\u65b9\u6cd5\u662f\uff0c\u6bcf\u6267\u884c\u4e00\u6761\u6307\u4ee4\uff08\u6216\u8005\u6bcf\u6267\u884c\u4e00\u4e2a\u5468\u671f\uff0c\u5728\u8fd9\u91cc\u662f\u7b49\u4ef7\u7684\uff09\uff0c\u5904\u7406\u5668\u72b6\u6001\u8f6c\u6362\u53d8\u4e3a \\(S'\\) \uff0c\u6211\u4eec\u5c06\u6240\u6709 PC\u3001RegFile\u3001Mem \u7684\u5185\u90e8\u72b6\u6001 dump \u51fa\u6765\uff0c\u7136\u540e\u548c\u6b63\u786e\u6267\u884c\u7684\u7ed3\u679c \\(S_1'\\) \u8fdb\u884c\u6bd4\u5bf9\uff0c\u5982\u679c\u6bcf\u4e2a\u5468\u671f\u6267\u884c\u4e4b\u540e\u90fd\u4fdd\u6301\u4e00\u81f4\uff0c\u5219\u53ef\u4ee5\u8ba4\u4e3a\u5904\u7406\u5668\u662f\u6b63\u786e\u7684\u3002\u4e0d\u8fc7\u56e0\u4e3a RegFile \u548c Mem \u7684\u72b6\u6001\u975e\u5e38\u5e9e\u5927\uff0c\u5c24\u5176\u662f Mem\uff0c\u6240\u4ee5\u5728\u72b6\u6001\u6bd4\u5bf9\u7684\u65f6\u5019\u76f4\u63a5\u6bd4\u5bf9 \\(S'\\) \u548c \\(S_1'\\) \u4e0d\u592a\u73b0\u5b9e\uff0c\u56e0\u6b64\u53ef\u4ee5\u5bf9\u6bd4\u5904\u7406\u5668\u7684\u72b6\u6001\u8f6c\u6362 \\(S \\rightarrow S'\\) \u548c\u6b63\u786e\u7ed3\u679c\u7684\u72b6\u6001\u8f6c\u6362 \\(S_1 \\rightarrow S_1'\\) \u662f\u5426\u4e00\u81f4\u3002</p> <ul> <li>\u5728\u7b2c\u4e00\u4e2a\u5468\u671f\uff0c\u56e0\u4e3a\u521d\u59cb\u5316\u7684\u5b58\u5728\uff0c \\(S\\) \u548c \\(S_1\\) \u90fd\u662f\u521d\u59cb\u5316\u7684\u5168 0 \u503c\uff08\u521d\u59cb\u5316\u7684\u91cd\u8981\u6027\uff09</li> <li>\u5df2\u77e5 \\(S = S_1\\) \u4e14 \\(S \\rightarrow S' = S_1 \\rightarrow S_1'\\) \uff0c\u6240\u4ee5\u7b49\u4ef7\u4e8e \\(S' = S_1'\\)</li> <li>\u6240\u4ee5\u53ea\u8981\u5904\u7406\u5668\u6267\u884c\u6b63\u786e\uff0c \\(S' = S_1'\\) \u6052\u6210\u7acb</li> </ul> <p>\\(S \\rightarrow S'\\) \u5305\u62ec\u8be5\u6761\u6307\u4ee4\u4e4b\u540e PC \u7684\u8df3\u8f6c\u60c5\u51b5\u3001\u5bc4\u5b58\u5668\u7684\u5199\u5165\u60c5\u51b5\u548c\u5185\u5b58\u7684\u5199\u5165\u60c5\u51b5\uff0c\u4f8b\u5982\uff1a</p> <ul> <li> <p><code>add x2, x1, x3</code> \u7684 \\(S \\rightarrow S'\\) \uff1a</p> <ul> <li>PC \\(\\rightarrow\\) PC + 4</li> <li>Reg[2] \\(\\rightarrow\\) Reg[1] + Reg[3]</li> <li>Mem \u72b6\u6001\u4e0d\u53d8</li> </ul> </li> <li> <p><code>sd x1, 0(x2)</code> \u7684 \\(S \\rightarrow S'\\)\uff1a</p> <ul> <li>PC \\(\\rightarrow\\) PC + 4</li> <li>Reg \u72b6\u6001\u4e0d\u53d8</li> <li>Mem[Reg[2]] \\(\\rightarrow\\) Reg[1]</li> </ul> </li> <li> <p><code>jalr x2, 4(x3)</code> \u7684 \\(S \\rightarrow S'\\) \uff1a</p> <ul> <li>PC \\(\\rightarrow\\) Reg[3] + 4</li> <li>Reg[2] \\(\\rightarrow\\) PC + 4</li> <li>Mem \u72b6\u6001\u4e0d\u53d8</li> </ul> </li> </ul> <p>\u4f46\u662f\u8fd9\u6837\u5b58\u5728\u4e00\u4e9b\u7f3a\u70b9\uff1a</p> <ul> <li>\u5904\u7406\u5668\u6b63\u786e\u6267\u884c\u7684\u7ed3\u679c\u9700\u8981\u4eba\u5de5\u63a8\u6f14\uff0c\u662f\u8017\u65f6\u5374\u5bb9\u6613\u51fa\u9519\u7684</li> <li>\u5904\u7406\u5668\u7684\u72b6\u6001\u8f6c\u6362\u548c\u6b63\u786e\u6267\u884c\u7684\u72b6\u6001\u8f6c\u6362\u9700\u8981\u4ece\u72b6\u6001\u7a7a\u95f4\u4e2d\u4eba\u5de5\u63d0\u53d6</li> <li>\u5904\u7406\u5668\u7684\u72b6\u6001\u8f6c\u6362\u548c\u6b63\u786e\u6267\u884c\u7684\u72b6\u6001\u8f6c\u6362\u9700\u8981\u4eba\u5de5\u6bd4\u5bf9</li> </ul> <p>\u6211\u4eec\u53ef\u4ee5\u7528\u81ea\u52a8\u5316\u7684\u65b9\u6cd5\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u5417\uff1f</p>"},{"location":"project-2-appendix/#co-simulation","title":"co-simulation \u5dee\u5206\u6d4b\u8bd5","text":"<p>\u5904\u7406\u5668\u6b63\u786e\u6267\u884c\u7ed3\u679c\u7684\u81ea\u52a8\u63a8\u5bfc\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 ISA \u6a21\u62df\u5668\u6765\u89e3\u51b3\uff0c\u6211\u4eec\u8fd9\u91cc\u4f7f\u7528\u7684\u662f spike \u6a21\u62df\u5668\u3002\u6211\u4eec\u4ee5 TESTCASE=sample \u4e3a\u4f8b\u6765\u8bb2\u89e3\u5b83\u7684\u57fa\u672c\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <ul> <li>\u8f6f\u4ef6\u751f\u6210\u90e8\u5206\uff1a</li> </ul> <ol> <li>\u4f7f\u7528 riscv \u5de5\u5177\u94fe\u7684 gcc \u5de5\u5177\u5c06 sample.S \u7684\u6c47\u7f16\u6587\u4ef6\u8f6c\u6362\u4e3a .o \u6587\u4ef6 sample.o</li> <li>\u4f7f\u7528 riscv \u5de5\u5177\u94fe\u7684 ld \u5de5\u5177\u5c06 sample.o \u6839\u636e\u94fe\u63a5\u811a\u672c link.ld \u7684\u5730\u5740\u7a7a\u95f4\u8bbe\u7f6e\u751f\u6210\u53ef\u6267\u884c\u7a0b\u5e8f testcase.elf\uff08\u786e\u4fdd\u53ef\u6267\u884c\u7a0b\u5e8f\u7684\u5730\u5740\u7a7a\u95f4\u5e03\u5c40\u548c\u6211\u4eec\u5904\u7406\u5668\u7684\u5185\u5b58\u5730\u5740\u5e03\u5c40\u76f8\u4e00\u81f4\uff09</li> <li>\u4f7f\u7528 riscv \u5de5\u5177\u94fe\u7684 objcopy \u5de5\u5177\u5f97\u5230 sample.elf \u5bf9\u5e94\u7684 16 \u8fdb\u5236\u5185\u5bb9 sample.hex</li> </ol> <ul> <li>\u6d4b\u8bd5\u6267\u884c\u90e8\u5206\uff1a</li> </ul> <ol> <li>\u5c06 testcase.elf \u8f7d\u5165\u6211\u4eec\u7684\u6a21\u62df\u5668 spike\uff0c\u7b49\u5f85\u88ab\u8c03\u7528\uff1b\u5c06 testcase.hex \u7684\u5185\u5bb9\u8f7d\u5165\u5230\u5904\u7406\u5668 Verilog \u7684 mem \u5185\u5b58\u4e2d</li> <li>\u6a21\u62df\u6267\u884c Verilog \u63cf\u8ff0\u7684\u5904\u7406\u5668\uff0c\u6bcf\u6267\u884c\u4e00\u4e2a\u65f6\u949f\u5468\u671f\uff08\u6216\u8005\u8bf4\u6267\u884c\u4e00\u6761\u6307\u4ee4\uff09\u53ef\u5c06\u5904\u7406\u5668\u7684\u72b6\u6001\u53d8\u5316\u53d1\u9001\u7ed9\u5dee\u5206\u6d4b\u8bd5\u6a21\u5757 cj_comsimulation \u8fdb\u884c\u5dee\u5206\u6d4b\u8bd5</li> <li>cj_comsimluation \u6a21\u5757\u901a\u8fc7 DPI \u63a5\u53e3\u8c03\u7528 spike \u7684\u63a5\u53e3\uff0c\u7136\u540e spike \u4f1a\u6a21\u62df\u6267\u884c\u4e00\u6761\u6307\u4ee4\uff0c\u5e76\u5c06\u6267\u884c\u7ed3\u679c\u548c cj_comsimulation \u63d0\u4f9b\u7684\u5904\u7406\u5668\u6267\u884c\u7ed3\u679c\u76f8\u6bd4\u5bf9\u3002\u5982\u679c\u6267\u884c\u7ed3\u679c\u4e0d\u4e00\u81f4\u5219\u4f1a\u62a5\u9519\uff0c\u4ece\u800c\u53d1\u73b0 error</li> </ol> <ul> <li>\u6d4b\u8bd5\u73af\u5883\u7f16\u8bd1\u90e8\u5206\uff1a</li> </ul> <ol> <li>\u5728 spike \u7684\u57fa\u7840\u4e0a\u6269\u5c55\u4e3a\u4e86 co-sim \u5de5\u5177\uff0c\u7136\u540e\u7f16\u8bd1\u4e3a\u9759\u6001\u94fe\u63a5\u5e93\uff0c\u4fdd\u5b58\u5728 ip \u6587\u4ef6\u5939\u4e0b</li> <li>cj_comsimulation \u548c\u5904\u7406\u5668\u4f7f\u7528 Verilog \u7f16\u5199\uff0c\u7136\u540e\u901a\u8fc7 DPI \u63a5\u53e3\u8c03\u7528 co-sim \u7684\u5dee\u5206\u6d4b\u8bd5\u529f\u80fd\uff0c\u4f7f\u7528 Verilator \u5de5\u5177\u5c06 Verilog \u7f16\u8bd1\u4e3a cpp \u6587\u4ef6</li> <li>\u7f16\u8bd1\u8fde\u63a5\u8fd9\u4e9b cpp \u548c a \u6587\u4ef6\u5f97\u5230\u6700\u540e\u7684\u6d4b\u8bd5\u7a0b\u5e8f Testbench\uff0c\u7136\u540e\u6267\u884c\u5dee\u5206\u6d4b\u8bd5\u5373\u53ef</li> </ol> <p></p>"},{"location":"project-2-appendix/#cj_comsimulation","title":"cj_comsimulation \u6d4b\u8bd5\u7ec6\u8282","text":"<p>\u4e3a\u4e86\u6d4b\u8bd5 PC \u72b6\u6001\u7684\u53d8\u5316\uff0c\u5904\u7406\u5668\u7684 cosim_core_info \u63d0\u4f9b\u5f53\u524d\u6a21\u62df\u6307\u4ee4\u7684 pc \u548c inst\uff0c\u7136\u540e\u8c03\u7528 cosim_commit \u51fd\u6570\u6bd4\u8f83 spike \u6a21\u62df\u5f97\u5230\u7684\u6307\u4ee4\u7684 pc \u548c inst \u662f\u5426\u4e00\u81f4\uff0c\u5982\u679c\u4fdd\u6301\u4e00\u81f4\u5219 PC \u5bc4\u5b58\u5668\u7684\u72b6\u6001\u53d8\u5316\u6b63\u786e\u3002</p> <p>\u4e3a\u4e86\u6d4b\u8bd5 reg \u5bc4\u5b58\u5668\u72b6\u6001\u7684\u53d8\u5316\uff0c\u5904\u7406\u5668\u7684 cosim_core_info \u63d0\u4f9b\u5f53\u524d\u6a21\u62df\u6307\u4ee4\u7684 we\u3001rd\u3001wdata\uff0c\u5373\u662f\u5426\u4fee\u6539\u5bc4\u5b58\u5668\u3001\u5199\u56de\u5bc4\u5b58\u5668\u5730\u5740\u3001\u5199\u56de\u5bc4\u5b58\u5668\u7684\u503c\uff0c\u7136\u540e\u8c03\u7528 cosim_judge \u51fd\u6570\u6bd4\u8f83 spike \u6a21\u62df\u5f97\u5230\u7684\u5bc4\u5b58\u5668\u4fee\u6539\u60c5\u51b5\u662f\u5426\u4e00\u81f4\uff0c\u5982\u679c\u4e00\u81f4\u5219 reg \u5bc4\u5b58\u5668\u72b6\u6001\u53d8\u5316\u6b63\u786e\u3002</p> <p>\u5185\u5b58\u72b6\u6001\u53d8\u5316\u56e0\u4e3a\u5916\u56f4\u7684\u5185\u5b58\u64cd\u4f5c\u8fc7\u4e8e\u590d\u6742\uff0c\u6240\u4ee5\u6ca1\u6709\u505a\u68c0\u67e5\uff0c\u9ed8\u8ba4\u5185\u5b58\u53d8\u5316\u90fd\u662f\u6b63\u786e\u7684\u3002sd \u6307\u4ee4\u7684\u64cd\u4f5c\u5f80\u5f80\u4ee5\u6765\u4e4b\u540e ld \u6307\u4ee4\u8bbf\u95ee\u540c\u4e00\u4e2a\u5185\u5b58\u7684\u65f6\u5019\uff0c\u68c0\u67e5\u5199\u56de\u5bc4\u5b58\u5668\u7684\u7ed3\u679c\u6765\u8fdb\u884c\u5224\u65ad\u3002</p> <pre><code>reg error1=1'b0;\n  reg error2=1'b0;\n  always@(posedge clk) begin\n    if (rstn != `BSV_RESET_VALUE) begin\n        if(cosim_valid)begin\n          if (cosim_commit(0, cosim_pc, cosim_inst) != 0) begin\n            $display(\"[CJ] %d Commit Failed\", 0);\n            error1=1'b1;\n          end\n          if (cosim_we) begin\n              if (cosim_judge(0, \"int\", {27'b0,cosim_rd}, cosim_wdate) != 0) begin\n                $display(\"[CJ] %d int register write Judge Failed\", 0);\n                error2=1'b1;\n              end\n          end\n        end else begin\n          // $display(\"[CJ] nop instruction\");\n        end\n      end\n  end\n</code></pre> <p>\u66f4\u591a\u7ec6\u8282\u8bf7\u9605\u8bfb\u4ee3\u7801\u4ed3\u5e93 https://github.com/sycuricon/riscv-isa-cosim.git \u548c\u8bba\u6587 MorFuzz: Fuzzing Processor via Runtime Instruction Morphing enhanced Synchronizable Co-simulation</p>"},{"location":"project-2/","title":"project: \u5355\u5468\u671f CPU \u8bbe\u8ba1","text":""},{"location":"project-2/#_1","title":"\u5b9e\u9a8c\u76ee\u7684","text":"<ul> <li>\u4e86\u89e3 CPU \u8bbe\u8ba1\u7684\u57fa\u672c\u539f\u7406</li> <li>\u8bbe\u8ba1 CPU \u63a7\u5236\u5355\u5143\u6a21\u5757</li> <li>\u7ed3\u5408\u4e0a\u6b21\u5b9e\u9a8c\u4e2d\u7684\u6570\u636e\u901a\u8def\u6a21\u5757\uff0c\u642d\u5efa\u5355\u5468\u671f CPU</li> </ul>"},{"location":"project-2/#_2","title":"\u5b9e\u9a8c\u73af\u5883","text":"<ul> <li>\u64cd\u4f5c\u7cfb\u7edf\uff1aWindows 10+ 22H2\uff0cUbuntu 22.04+</li> <li>VHDL\uff1aVerilog\uff0cSystemVerilog</li> </ul>"},{"location":"project-2/#_3","title":"\u80cc\u666f\u77e5\u8bc6","text":""},{"location":"project-2/#_4","title":"\u6982\u8ff0","text":"<p>\u5355\u5468\u671f CPU \u8bbe\u8ba1\u53ef\u4ee5\u5206\u6210\u6570\u636e\u901a\u8def\u548c\u63a7\u5236\u5355\u5143\u4e24\u4e2a\u6a21\u5757\u3002\u6211\u4eec\u8bb2\u89e3\u63a7\u5236\u5355\u5143\u6a21\u5757\u7684\u7f16\u5199\u3002</p>"},{"location":"project-2/#_5","title":"\u63a7\u5236\u5355\u5143","text":"<p>\u63a7\u5236\u5355\u5143\uff0c\u4e5f\u79f0\u8bd1\u7801\u5668\uff0c\u5b83\u7684\u4f5c\u7528\u662f\u89e3\u7801\u6307\u4ee4\uff0c\u53d1\u51fa\u4fe1\u53f7\uff0c\u544a\u8bc9 Datapath \u5e94\u8be5\u6267\u884c\u4ec0\u4e48\u64cd\u4f5c\u3002</p> <p>RV64I \u6307\u4ee4\u96c6\u5305\u62ec R\u3001I\u3001S\u3001B\u3001U\u3001J 6 \u4e2a\u7c7b\u578b\u7684\u6307\u4ee4\u683c\u5f0f\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u6307\u4ee4\u7684\u7c7b\u578b\u57fa\u672c\u662f\u7531 Opcode\uff0cFunct7(\u5982\u679c\u5b58\u5728\u7684\u8bdd)\u548c Funct3(\u5982\u679c\u5b58\u5728\u7684\u8bdd)\u51b3\u5b9a\u7684\u3002 \u901a\u8fc7\u8fd9 3 \u4e2a\u5b57\u6bb5\u5224\u65ad\u5f97\u5230\u4e86\u6307\u4ee4\u7684\u7c7b\u578b\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u4e3a\u63a7\u5236\u4fe1\u53f7\u8d4b\u503c\uff0c\u63a7\u5236 Datapath \u4e2d\u7684\u6570\u636e\u6d41\u3002 \u4f8b\u5982\uff0cOpcode = 6'0000011\uff0c\u4e14 Funct3 = 3'b010\uff0c\u8bf4\u660e\u662f LW \u6307\u4ee4\uff0cpc_src \u4fe1\u53f7\u7ebf\u5e94\u8be5\u8ba9 PC+4 \u7684\u6570\u636e\u6d41\u6d41\u5165 PC\uff0calu_src_b \u4fe1\u53f7\u7ebf\u5e94\u8be5\u63a7\u5236 Imm \u4f5c\u4e3a ALU B \u53e3\u7684\u8f93\u5165\uff0calu_op \u5e94\u8be5\u4e3a\u52a0\u6cd5\u4fe1\u53f7 (\u505a\u5730\u5740\u7684\u52a0\u6cd5)\uff0cmem_to_reg \u5e94\u8be5\u63a7\u5236\u628a\u4ece Data Memory \u8bfb\u7684\u6570\u636e\u5199\u56de Registers \u4e2d\uff0creg_write \u4fe1\u53f7\u7ebf\u5e94\u8be5\u5141\u8bb8\u6570\u636e\u5199\u56de Registers\u3002</p> <p></p> <p>\u63a7\u5236\u4fe1\u53f7\u662f\u7528\u6765\u63a7\u5236\u6570\u636e\u6d41\u5728 Datapath \u7684\u6d41\u52a8\uff0c\u4e0b\u8ff0\u8868\u683c\u5217\u51fa\u4e86\u53c2\u8003\u7684\u63a7\u5236\u5355\u5143\u4fe1\u53f7\u8bbe\u8ba1\uff0c\u5927\u5bb6\u4e5f\u53ef\u4ee5\u81ea\u884c\u8bbe\u8ba1\u63a7\u5236\u4fe1\u53f7\u3002</p> <p>\u63a7\u5236\u901a\u8def\u6a21\u5757\u7684\u8f93\u51fa\u662f\u4e00\u4e2a 22 \u4f4d\u7684\u5411\u91cf\uff0c\u4ece\u6700\u9ad8\u4f4d\u5230\u6700\u4f4e\u4e3a\u4f9d\u6b21\u5b9a\u4e49\u5982\u4e0b\uff1a</p> \u7c7b\u578b \u540d\u79f0 \u5bbd\u5ea6 \u542b\u4e49 logic we_reg 1 \u5bc4\u5b58\u5668\u5199\u4f7f\u80fd logic we_mem 1 \u5185\u5b58\u5199\u4f7f\u80fd logic re_mem 1 \u5185\u5b58\u8bfb\u4f7f\u80fd logic npc_sel 1 NEXT PC \u9009\u62e9 imm_op_enum immgen_op 3 \u7acb\u5373\u6570\u9009\u62e9 alu_op_enum alu_op 4 \u8fd0\u7b97\u64cd\u4f5c\u7801 cmp_op_enum cmp_op 3 \u5206\u652f\u8ba1\u7b97\u64cd\u4f5c\u7801 alu_asel_op_enum alu_asel 2 ALU A \u7aef\u53e3\u9009\u62e9 alu_bsel_op_enum alu_bsel 2 ALU B \u7aef\u53e3\u9009\u62e9 wb_sel_op_enum wb_sel 2 \u5199\u56de\u6570\u636e\u9009\u62e9 mem_op_enum mem_op 3 \u8bbf\u5b58\u64cd\u4f5c\u7801 <p>\u5404\u4e2a\u57df\u7684\u8be6\u7ec6\u5b9a\u4e49\u5982\u4e0b\uff1a</p>"},{"location":"project-2/#we_regwe_memre_memnpc_sel","title":"we_reg\u3001we_mem\u3001re_mem\u3001npc_sel","text":"\u53d6\u503c \u542b\u4e49 1'b0 \u65e0\u6548 1'b1 \u6709\u6548"},{"location":"project-2/#immgen_op20","title":"immgen_op[2:0]","text":"<p>\u4e3a\u4e86\u4fbf\u4e8e\u7f16\u7a0b\uff0c\u8fd9\u4e9b\u63a7\u5236\u4fe1\u53f7\u5728 core_struct.vh \u7684 CorePack \u5305\u4e2d\u5b9a\u4e49\u4e86\u5bf9\u5e94\u7684\u679a\u4e3e\u7c7b\u578b\u548c\u679a\u4e3e\u5e38\u91cf\u3002\u5176\u4e2d CorePack \u4e3a immgen_op \u5b9a\u4e49\u4e3a imm_op_enum \u679a\u4e3e\u7c7b\u578b</p> \u53d6\u503c \u542b\u4e49 IMM0 \u751f\u6210 0 I_IMM \u751f\u6210 I TYPE \u7acb\u5373\u6570 S_IMM \u751f\u6210 S TYPE \u7acb\u5373\u6570 B_IMM \u751f\u6210 B TYPE \u7acb\u5373\u6570 U_IMM \u751f\u6210 U TYPE \u7acb\u5373\u6570 UJ_IMM \u751f\u6210 J TYPE \u7acb\u5373\u6570"},{"location":"project-2/#alu_op30","title":"alu_op[3:0]","text":"<p>CorePack \u4e2d\u5b9a\u4e49\u4e3a alu_op_enum</p> \u53d6\u503c \u542b\u4e49 \u53d6\u503c \u542b\u4e49 ALU_ADD ADD ALU_SRL SRL ALU_SUB SUB ALU_SRA SRA ALU_AND AND ALU_ADDW ADDW ALU_OR OR ALU_SUBW SUBW ALU_XOR XOR ALU_SLLW SLLW ALU_SLT SLT ALU_SRLW SRLW ALU_SLTU SLTU ALU_SRAW SRAW ALU_SLL SLL"},{"location":"project-2/#cmp_op20","title":"cmp_op[2:0]","text":"<p>\u5728 CorePack \u5b9a\u4e49\u4e3a cmp_op_enum</p> \u53d6\u503c \u542b\u4e49 CMP_NO \u4e0d\u662f Branch \u64cd\u4f5c CMP_EQ EQ CMP_NE NE CMP_LT LT CMP_GE GE CMP_LTU LTU CMP_GEU GEU"},{"location":"project-2/#alu_asel10","title":"alu_asel[1:0]","text":"<p>CorePack \u4e2d\u5b9a\u4e49\u4e3a alu_asel_op_enum</p> \u53d6\u503c \u542b\u4e49 ASEL0 \u9009\u62e9 0 \u8f93\u5165 ASEL_REG \u9009\u62e9 RS1 ASEL_PC \u9009\u62e9 PC"},{"location":"project-2/#alu_bsel10","title":"alu_bsel[1:0]","text":"<p>CorePack \u4e2d\u5b9a\u4e49\u4e3a alu_bsel_op_enum</p> \u53d6\u503c \u542b\u4e49 BSEL0 \u62e9 0 \u8f93\u5165 BSEL_REG \u62e9 RS2 BSEL_IMM \u62e9 imm"},{"location":"project-2/#wb_sel10","title":"wb_sel[1:0]","text":"<p>CorePack \u4e2d\u5b9a\u4e49\u4e3a wb_sel_op_enum</p> \u53d6\u503c \u542b\u4e49 WB_SEL0 \u9009\u62e9\u5199\u56de 0 WB_SEL_ALU \u9009\u62e9\u5199\u56de ALU \u8ba1\u7b97\u7ed3\u679c WB_SEL_MEM \u9009\u62e9\u5199\u56de\u5185\u5b58\u8bfb\u56de\u5185\u5bb9 WB_SEL_PC \u9009\u62e9\u5199\u56de pc+4"},{"location":"project-2/#mem_op20","title":"mem_op[2:0]","text":"<p>CorePack \u4e2d\u5b9a\u4e49\u4e3a mem_op_enum</p> \u53d6\u503c \u542b\u4e49 MEM_NO \u4e0d\u8bbf\u5b58 MEM_D Double Word MEM_W Word MEM_H Half Word MEM_B Byte MEM_UW Unsigned Word MEM_UH Unsigned Half Word MEM_UB Unsigned Byte <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u65b9\u4fbf\u540c\u5b66\u4eec\u8c03\u8bd5\uff0c\u4e0a\u9762\u7684\u4fe1\u53f7\u8bbe\u8ba1\u4e86\u5f88\u591a\u4e3a 0 \u65f6\u65e0\u610f\u4e49\u7684\u72b6\u6001\uff0c\u5728\u6700\u7ec8\u7684\u5904\u7406\u5668\u4e2d\u540c\u5b66\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u628a\u7a7a\u7684\u72b6\u6001\u4f18\u5316\u6389\u3002</p>"},{"location":"project-2/#_6","title":"\u5176\u4ed6","text":"<p>CorePack \u8fd8\u8bbe\u7f6e\u4e86\u5404\u7c7b parameter\u3001type \u4f9b\u5927\u5bb6\u4f7f\u7528\uff0c\u8bf7\u5927\u5bb6\u59a5\u5584\u5229\u7528\u3002</p>"},{"location":"project-2/#_7","title":"\u5b9e\u9a8c\u6b65\u9aa4","text":""},{"location":"project-2/#_8","title":"\u5b9e\u9a8c\u8981\u6c42","text":"<ul> <li>\u5b8c\u6210 64 \u4f4d\u5355\u5468\u671f CPU \u63a7\u5236\u6a21\u5757\u8bbe\u8ba1\uff0c\u7ed3\u5408 project-1 \u4e2d\u8bbe\u8ba1\u7684\u6570\u636e\u901a\u8def\uff0c\u642d\u8d77 64 \u4f4d\u5355\u5468\u671f CPU</li> <li>\u5b9e\u73b0\u4ee5\u4e0b\u6307\u4ee4\uff1a</li> </ul> <ol> <li>\u5b9e\u73b0 R Type \u7684\u57fa\u672c\u6570\u636e\u901a\u8def\uff08\u901a\u8fc7\u6d4b\u8bd5 rtype.hex\uff0c\u7d2f\u8ba1\u53ef\u83b7\u5f97\u5b9e\u9a8c\u90e8\u5206 10% \u7684\u5206\u6570\uff09<ul> <li>add, sub, sll, slt, sltu, xor, srl, sra, or, and</li> </ul> </li> <li>\u5b9e\u73b0 I Type \u7684\u57fa\u672c\u6570\u636e\u901a\u8def\uff08\u901a\u8fc7\u6d4b\u8bd5 itype.hex\uff0c\u7d2f\u8ba1\u53ef\u83b7\u5f97\u5b9e\u9a8c\u90e8\u5206 20% \u7684\u5206\u6570\uff09<ul> <li>addi, slti, sltiu, xori, ori, andi, slli, srli, srai</li> <li>ld</li> </ul> </li> <li>\u5b9e\u73b0 S Type \u7684\u57fa\u672c\u6570\u636e\u901a\u8def\uff08\u901a\u8fc7\u6d4b\u8bd5 stype.hex\uff0c\u7d2f\u8ba1\u53ef\u83b7\u5f97\u5b9e\u9a8c\u90e8\u5206 30% \u7684\u5206\u6570\uff09<ul> <li>sd</li> </ul> </li> <li>\u5b9e\u73b0 B Type \u7684\u5b8c\u6574\u6570\u636e\u901a\u8def\uff08\u901a\u8fc7\u6d4b\u8bd5 btype.hex\uff0c\u7d2f\u8ba1\u53ef\u83b7\u5f97\u5b9e\u9a8c\u90e8\u5206 40% \u7684\u5206\u6570\uff09<ul> <li>beq, bne, blt, bge, bltu, bgeu</li> </ul> </li> <li>\u5b9e\u73b0 U Type \u7684\u5b8c\u6574\u6570\u636e\u901a\u8def\uff08\u901a\u8fc7\u6d4b\u8bd5 utype.hex\uff0c\u7d2f\u8ba1\u53ef\u83b7\u5f97\u5b9e\u9a8c\u90e8\u5206 50% \u7684\u5206\u6570\uff09<ul> <li>lui, auipc</li> </ul> </li> <li>\u5b9e\u73b0 J Type \u7684\u5b8c\u6574\u6570\u636e\u901a\u8def\uff08\u901a\u8fc7\u6d4b\u8bd5 jtype.hex\uff0c\u7d2f\u8ba1\u53ef\u83b7\u5f97\u5b9e\u9a8c\u90e8\u5206 60% \u7684\u5206\u6570\uff09<ul> <li>jal</li> </ul> </li> <li>\u5b9e\u73b0\u5269\u4f59\u6307\u4ee4\u7684\u5b8c\u6574\u6570\u636e\u901a\u8def\uff08\u901a\u8fc7\u6d4b\u8bd5 remain.hex\uff0c\u7d2f\u8ba1\u53ef\u83b7\u5f97\u5b9e\u9a8c\u90e8\u5206 70% \u7684\u5206\u6570\uff09<ul> <li>jalr, lb, lh, lw, lbu, lhu, lwu</li> <li>sb, sh, sw</li> <li>addiw, slliw, srliw, sraiw</li> <li>addw, subw, sllw, srlw, sraw</li> </ul> </li> <li>\u5b9e\u73b0\u6240\u6709\u6307\u4ee4\u7684\u5b8c\u6574\u6570\u636e\u901a\u8def\uff08\u901a\u8fc7\u6d4b\u8bd5 full.hex\uff0c\u7d2f\u8ba1\u53ef\u83b7\u5f97\u5b9e\u9a8c\u90e8\u5206 80% \u7684\u5206\u6570\uff09</li> <li>\u4e0b\u677f\u9a8c\u8bc1\uff0c\u7d2f\u8ba1\u53ef\u83b7\u5f97\u5b9e\u9a8c\u90e8\u5206 100% \u7684\u5206\u6570</li> </ol> <p>\u6ce8\u610f\uff1a\u6307\u4ee4\u683c\u5f0f\u8bf7\u67e5\u8be2RISC-V \u975e\u7279\u6743\u6307\u4ee4\u96c6\u624b\u518c\u3002\u672c\u5b9e\u9a8c\u8981\u6c42\u5b9e\u73b0 64 \u4f4d CPU\uff08\u5373\u652f\u6301\u90e8\u5206 RV64I \u6307\u4ee4\uff09\u3002RV64I \u7684\u6307\u4ee4\u5927\u591a\u4e0e RV32I \u4e00\u81f4\uff0c\u53ef\u4ee5\u53c2\u8003\u6307\u4ee4\u96c6\u624b\u518c\u7684 Chapter 2\uff1b\u4f46\u90e8\u5206\u6307\u4ee4\uff0c\u5982 SLLI\uff0cSRLI\uff0cLUI\uff0cAUIPC\uff0cSLL\uff0cSRL\uff0cLW\uff0cSW \u8bed\u610f\u548c RV32I \u6709\u4e9b\u8bb8\u533a\u522b\uff0c\u8bf7\u53c2\u8003 Chapter 4\u3002</p>"},{"location":"project-2/#_9","title":"\u63a7\u5236\u5355\u5143\u8bbe\u8ba1","text":"<p>\u4e0b\u9762\u7ed9\u51fa Control \u6a21\u5757\u7684\u4ee3\u7801\u63a5\u53e3:</p> <pre><code>`include \"core_struct.vh\"\nmodule controller (\n    input CorePack::inst_t inst,\n    output we_reg,\n    output we_mem,\n    output re_mem,\n    output is_b,\n    output is_j,\n    output CorePack::imm_op_enum immgen_op,\n    output CorePack::alu_op_enum alu_op,\n    output CorePack::cmp_op_enum cmp_op,\n    output CorePack::alu_asel_op_enum alu_asel,\n    output CorePack::alu_bsel_op_enum alu_bsel,\n    output CorePack::wb_sel_op_enum wb_sel,\n    output CorePack::mem_op_enum mem_op\n);\n\n    import CorePack::*;\n\n    // fill your code\n\nendmodule\n</code></pre> <p>\u8fd9\u91cc\u7684\u8bd1\u7801\u8fc7\u7a0b\u975e\u5e38\u7e41\u7410\uff0c\u6240\u4ee5\u6211\u4eec\u63a8\u8350\u4f7f\u7528\u4e8c\u6bb5\u8bd1\u7801\u7684\u65b9\u5f0f\u8fdb\u884c\u8bd1\u7801\u3002</p>"},{"location":"project-2/#_10","title":"\u4e8c\u6bb5\u8bd1\u7801","text":"<p>\u5bf9\u4e8e controller \u8fd9\u4e2a\u8bd1\u7801\u5355\u5143\uff0c\u6211\u4eec\u6709\u5982\u4e0b\u7684\u8f93\u5165\u8f93\u51fa\u5173\u7cfb\uff08\u7b80\u5355\u8d77\u89c1\u53ea\u6709 reg_wen\u3001mem_wen\u3001mem_ren\u3001is_imm \u56db\u4e2a\u4fe1\u53f7\u8f93\u51fa\uff09\uff1a</p> opcode reg_wen mem_wen mem_ren is_imm 0000011(load) 0 0 1 1 0110011(R) 1 0 0 0 0010011(I) 1 0 0 1 0100011(store) 0 1 0 1 .... .. .. .. .. <p>\u6839\u636e\u8bd1\u7801\u5668\u7684\u7f16\u7a0b\u8303\u5f0f\uff0c\u6211\u4eec\u53ef\u4ee5\u505a\u5982\u4e0b\u7684\u7f16\u7a0b\uff1a <pre><code>    always_comb begin\n        case(opcode)\n            7'b0000011:\n            begin\n                reg_wen=1'b0;\n                mem_wen=1'b0;\n                mem_ren=1'b1;\n                is_imm=1'b1;\n            end\n            7'b0110011:\n            begin\n                reg_wen=1'b1;\n                mem_wen=1'b0;\n                mem_ren=1'b0;\n                is_imm=1'b0;\n            end\n            7'b0010011:\n            begin\n                reg_wen=1'b1;\n                mem_wen=1'b0;\n                mem_ren=1'b0;\n                is_imm=1'b1;\n            end\n            7'b0100011:\n            begin\n                reg_wen=1'b0;\n                mem_wen=1'b1;\n                mem_ren=1'b0;\n                is_imm=1'b1;\n            end\n            default:\n            begin\n                reg_wen=1'b0;\n                mem_wen=1'b0;\n                mem_ren=1'b0;\n                is_imm=1'b0;\n            end\n        endcase\n    end\n</code></pre> \u8fd9\u6837\u5199\u975e\u5e38\u7b26\u5408\u8bbe\u8ba1\u76f4\u89c9\uff0c\u4f46\u662f\u5b83\u5b58\u5728\u5927\u91cf\u7684\u95ee\u9898\uff1a</p> <ol> <li> <p>\u8fd9\u6837\u9700\u8981\u5bf9\u6bcf\u4e00\u7c7b\u6307\u4ee4\u7684\u6bcf\u4e00\u4e2a\u8f93\u51fa\u90fd\u505a\u4e00\u6b21\u8d4b\u503c\uff0c\u5bf9\u4e8e M \u79cd\u6307\u4ee4\u3001N\u4e2a\u8f93\u51fa\u7684\u60c5\u51b5\u9700\u8981\u8d4b\u503c M x N \u6b21\u3002\u7f16\u7a0b\u7684\u4ee3\u7801\u8d8a\u591a\u8d8a\u5bb9\u6613\u51fa\u73b0\u4ee3\u7801\u8d4b\u503c\u7684\u7acb\u5373\u6570\u5199\u9519\u7b49\u95ee\u9898\uff0c\u68c0\u67e5\u6821\u9a8c\u8d77\u6765\u6548\u7387\u4f1a\u5f88\u4f4e\u3002</p> </li> <li> <p>\u5728 always_comb \u8bed\u6cd5\u4e2d\u8fd9\u4e2a\u95ee\u9898\u4e0d\u5b58\u5728\uff0c\u4f46\u662f\u5728 always@(*) \u8bed\u6cd5\u4e2d\uff0c\u5bb9\u6613\u51fa\u73b0\u8f93\u51fa\u5bc4\u5b58\u5668\u6f0f\u8d4b\u503c\u3001default \u5206\u652f\u6f0f\u5199\u7b49\u95ee\u9898\uff0c\u9020\u6210\u51fa\u73b0 latch \u7684\u65f6\u5e8f\u9519\u8bef\u3002</p> </li> <li> <p>\u6bcf\u5f53\u9700\u8981\u589e\u52a0\u4e00\u6761\u65b0\u7684\u6307\u4ee4\u5c31\u8981\u5199 N \u884c\u7684\u4ee3\u7801\uff0c\u6bcf\u5f53\u65b0\u589e\u4e00\u4e2a\u8f93\u51fa\u5c31\u8981\u65b0\u589e M \u884c\u4ee3\u7801\u3002\u5199\u9519\u3001\u6f0f\u5199\u7684\u98ce\u9669\u90fd\u4f1a\u5f88\u9ad8\u3002</p> </li> </ol> <p>\u56e0\u6b64\u6211\u4eec\u63d0\u51fa\u4e86\u5982\u4e0b\u7684\u5199\u6cd5\uff1a <pre><code>    wire inst_load=opcode==7'b0000011;\n    wire inst_reg=opcode==7'b0110011;\n    wire inst_imm=opcode==7'b0010011;\n    wire inst_store=opcode==7'b0100011;\n\n    wire reg_wen=inst_load|inst_reg|inst_imm;\n    wire mem_wen=inst_store;\n    wire mem_ren=inst_load;\n    wire is_imm=inst_load|inst_store|inst_imm;\n</code></pre> \u7b2c\u4e00\u90e8\u5206\u6839\u636e opcode \u5f97\u5230\u6307\u4ee4\u7684\u79cd\u7c7b\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u7b2c\u4e00\u6b21\u8bd1\u7801\uff0c\u590d\u6742\u5ea6\u662f M\u3002 \u7b2c\u4e8c\u90e8\u5206\u6839\u636e opcode \u548c\u8bd1\u7801\u8868\u4e2d\u8f93\u51fa\u4e3a 1 \u7684\u6761\u76ee\uff0c\u5c06\u8f93\u51fa\u4e3a 1 \u7684\u6307\u4ee4\u79cd\u7c7b\u6216\u8d77\u6765\u5373\u53ef\uff0c\u590d\u6742\u5ea6\u4e0e\u8868\u683c\u4e2d 1 \u7684\u6570\u91cf\u4e00\u6837\uff0c\u4e0d\u59a8\u8bb0\u4e3a K\u3002\u9274\u4e8e\u8bd1\u7801\u8868\u4e2d 1 \u7684\u6761\u76ee\u662f\u975e\u5e38\u7a00\u758f\u7684\uff0c\u7279\u522b\u662f\u5f53\u5f88\u591a\u7684\u8f93\u51fa\u4fe1\u53f7\u662f\u9488\u5bf9\u67d0\u4e9b\u6307\u4ee4\u4e13\u95e8\u8bbe\u7acb\u7684\uff0c\u6240\u6709 K &lt;&lt; M x N\u3002</p> <p>\u6240\u4ee5\u8fd9\u79cd\u5199\u6cd5\u76f8\u5bf9\u4e8e\u7b2c\u4e00\u79cd\u6709\u5982\u4e0b\u7684\u597d\u5904\uff1a</p> <ol> <li> <p>\u7f16\u7a0b\u7684\u590d\u6742\u5ea6 M + K\uff0c\u8fdc\u8fdc\u5c0f\u4e8e M x N</p> </li> <li> <p>\u4e0d\u4f1a\u51fa\u73b0 always@(*) \u751f\u6210 latch \u7684\u95ee\u9898</p> </li> <li> <p>\u591a\u52a0\u4e00\u6761\u6307\u4ee4\u9700\u8981\u4fee\u6539\u7684\u884c\u6570\u548c\u8f93\u51fa\u4e2d\u7684 1 \u4e2a\u6570\u4e00\u81f4\uff0c\u4e00\u822c\u8fdc\u5c0f\u4e8e N\uff1b\u591a\u52a0\u4e00\u4e2a\u8f93\u51fa\u9700\u8981\u4fee\u6539\u7684\u884c\u6570\u548c\u8be5\u8f93\u51fa\u4e3a 1 \u7684\u6307\u4ee4\u7684\u4e2a\u6570\u4e00\u81f4\uff0c\u4e00\u822c\u8fdc\u5c0f\u4e8e M</p> </li> </ol> <p>\u7531\u6b64\u53ef\u89c1\uff0c\u5bf9\u4e8e\u7a00\u758f\u7684\u8bd1\u7801\u51fd\u6570\uff0c\u4f7f\u7528\u4e8c\u6bb5\u8bd1\u7801\u6bd4\u76f4\u63a5\u4f7f\u7528\u4e00\u6bb5\u8bd1\u7801\u53ef\u4ee5\u6709\u66f4\u5c11\u7684\u7f16\u7a0b\u96be\u5ea6\u548c\u7ef4\u62a4\u96be\u5ea6\u3002</p>"},{"location":"project-2/#_11","title":"\u4eff\u771f\u6d4b\u8bd5","text":"<p>\u672c\u6b21\u5b9e\u9a8c\u4e3a\u5927\u5bb6\u63d0\u4f9b\u4e86\u4eff\u771f\u6d4b\u8bd5\u7684\u4ee3\u7801\uff0c\u5373<code>sys-project/testcode/testcase</code>\u6587\u4ef6\u5939\u4e0b\u3002 \u5728\u9876\u5c42\u76ee\u5f55<code>src/project</code>\u6267\u884c<code>make TESTCASE=XXX</code>\uff0c\u5176\u4e2d<code>XXX</code>\u4e3a\u6d4b\u8bd5\u6837\u4f8b\u540d\uff08rtype, itype, btype, utype, jtype, stype, remain, sample\uff09\u3002</p> <p>\u6ce8\u610f\uff1a\u672c\u5b9e\u9a8c\u8981\u6c42Verilator\u7248\u672c\u4e3av5.002\uff0c\u6d4b\u8bd5\u64cd\u4f5c\u7cfb\u7edf\u4e3aUbuntu22.04\uff0c\u5176gcc\u7248\u672c\u4e3aUbuntu 11.3.0-1ubuntu1~22.04\uff0clibc\u7248\u672c\u4e3aGLIBC 2.35-0ubuntu3.1\u3002</p> <p>\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u4f60\u770b\u5230\u7684\u76f4\u63a5\u7ed3\u679c\u5982\u4e0b\uff1a</p> <pre><code>./Testbench\nwarning: tohost symbols not in ELF; can't communicate with target\n[*] `Commit &amp; Judge' General Co-simulation Framework\n                powered by Spike 1.1.1-dev\n- core 1, isa: rv64i MSU vlen:128,elen:64\n- memory configuration: 0x0@0x1000\n- elf file list: testcase.elf\n- tohost address: 0x0\n- fuzz information: [Handler] 0 page (0x0 0x0)\n                    [Payload] 0 page (0x0 0x0)\n\ncore   0: 0x0000000000000000 (0x07b00093) li      ra, 123\ncore   0: 3 0x0000000000000000 (0x07b00093) x1  0x000000000000007b\ncore   0: 0x0000000000000004 (0x06f08113) addi    sp, ra, 111\ncore   0: 3 0x0000000000000004 (0x06f08113) x2  0x00000000000000ea\ncore   0: 0x0000000000000008 (0x06f10193) addi    gp, sp, 111\ncore   0: 3 0x0000000000000008 (0x06f10193) x3  0x0000000000000159\n...\ncore   0: 0x000000000000009c (0xff4a9ee3) bne     s5, s4, pc - 4\ncore   0: 3 0x000000000000009c (0xff4a9ee3)\ncore   0: 0x00000000000000a0 (0x00000000) c.unimp\ncore   0: exception trap_illegal_instruction, epc 0x00000000000000a0\ncore   0:           tval 0x0000000000000000\ncore   0: 0x0000000000000000 (0x0000007b) unknown\n...\n[CJ]           0 Commit Failed\n[0] %Error: cosim.v:56: Assertion failed in TOP.Testbench.difftest\n%Error: /mnt/c/Users/Phantom/Downloads/release/chipblock-stu/sim/cosim.v:56: Verilog $stop\nAborting...\nAborted\nmake: *** [Makefile:19: verilator] Error 134\n</code></pre> <p>\u4f60\u4f1a\u770b\u5230Spike\u6253\u5370\u7684\u6267\u884c\u8fc7\u7a0b\uff0c\u5f53\u6267\u884c\u5230\u6700\u540e\u4e00\u6761\u6307\u4ee4\uff080x9c\uff09\u4e4b\u540e\uff0c\u4e0b\u4e00\u6b21\u53d6\u6307\u4ee4\u5f97\u5230\u4e860x00000000\uff0c\u8fd9\u5728RISC-V\u4e2d\u662f\u4e00\u6761\u975e\u6cd5\u6307\u4ee4\uff0c\u56e0\u6b64\u4f1aSpike\u62a5\u9519illegal_instruction\u3002 \u4f46\u662f\u4f60\u7684\u5904\u7406\u5668\u4e0d\u652f\u6301\u5f02\u5e38\u5904\u7406\u4f1a\u7ee7\u7eed\u5f53\u6210\u6b63\u5e38\u6307\u4ee4\u6267\u884c\u4e0b\u53bb\uff0c\u6240\u4ee5\u68c0\u6d4b\u5230\u4e86\u4e00\u4e2a\u4e0d\u4e00\u81f4\u7684\u884c\u4e3a\u3002</p> <p>\u6211\u4eec\u7684\u6d4b\u8bd5\u6846\u67b6\u4f1a\u4f7f\u7528\u7684\u4e0a\u9762\u7684<code>cosim_*</code>\u4fe1\u53f7\uff0c\u5728\u6bcf\u6761\u6307\u4ee4\u6267\u884c\u7ed3\u675f\u540e\u5c06\u4f60\u7684\u5904\u7406\u5668\u7684\u72b6\u6001\u4e0eSpike\u4e2d\u7684\u72b6\u6001\u8fdb\u884c\u6bd4\u8f83\uff0c\u56e0\u6b64\u80fd\u591f\u5e2e\u52a9\u4f60\u66f4\u53ca\u65f6\u7684\u5b9a\u4f4d\u5230\u9519\u8bef\u3002 \u6709\u5173\u6d4b\u8bd5\u6846\u67b6\u7684\u8be6\u7ec6\u4ecb\u7ecd\u8bf7\u53c2\u8003\u94fe\u63a5\u3002</p>"},{"location":"project-2/#_12","title":"\u4e0a\u677f\u9a8c\u8bc1","text":"<p>\u9996\u5148\u6267\u884c<code>make board_sim TESTCASE=full</code>\uff0c\u53ef\u4ee5\u5c06 full.S \u7684\u6d4b\u8bd5\u7a0b\u5e8f\u7f16\u8bd1\u4e3a\u7528\u4e8e\u4e0b\u677f\u7684 testcase.hex\uff0c\u5373 build/verilate/testcase.hex\uff0c\u8be5\u7a0b\u5e8f\u6267\u884c\u6b63\u786e\u4f1a\u6b7b\u5faa\u73af\u5728 9a8 \u5730\u5740\uff0c\u5982\u679c\u6267\u884c\u9519\u8bef\u4f1a\u6b7b\u5faa\u73af\u5728 9a4 \u5730\u5740\u3002</p> <p>\u4fee\u6539<code>project/include/initial_mem.hex</code>\u7684 FILE_PATH \u4e3a testcase.hex \u7684\u7edd\u5bf9\u8def\u5f84\uff0c\u7136\u540e\u6267\u884c<code>make bitstream</code>\u5373\u53ef\u5f97\u5230\u6700\u7ec8\u7684 bitstream\u3002</p> <p>\u786c\u4ef6\u8c03\u8bd5\u65b9\u6cd5\uff1a</p> <ol> <li>\u4f60\u53ef\u4ee5\u4f7f\u7528\u6570\u7801\u7ba1\u6765\u76d1\u63a7\u6570\u636e\u901a\u8def\u4e2d\u7684\u6570\u503c\u3002</li> </ol> <p>switch[3:0] \u7528\u6765\u63a7\u5236\u6570\u7801\u7ba1\u663e\u793a\u7684\u8c03\u8bd5\u4fe1\u606f\uff0cswitch[4] \u9009\u62e9\u67e5\u770b 64 \u4e3a\u6570\u636e\u7684\u9ad8\u4f4d\u8fd8\u662f\u4f4e\u4f4d\uff0c\u8fd9\u4e9b\u4fe1\u606f\u5c31\u662f SCPU \u6a21\u5757\u5f15\u51fa\u7684<code>cosim_core_info</code>\u4fe1\u53f7\uff1a</p> \u5f00\u5173 \u76d1\u89c6\u6570\u636e \u5f00\u5173 \u76d1\u89c6\u6570\u636e 4'b0000 pc 4'b1000 mem_we 4'b0001 inst 4'b1001 mem_wdata 4'b0010 rs1_id 4'b1010 mem_rdata 4'b0011 rs1 4'b1011 rd_we 4'b0100 rs2_id 4'b1100 rd_id 4'b0101 rs2 4'b1101 rd 4'b0110 alu 4'b1110 br_taken 4'b0111 mem_addr 4'b1111 npc <ol> <li>\u5f53 switch[15] \u62e8\u4e0a\u65f6\uff0cCPU \u8fdb\u5165\u8c03\u8bd5\u6a21\u5f0f\uff0c\u6b64\u65f6\u53ef\u4ee5\u901a\u8fc7\u6309\u4e2d\u592e\u6309\u94ae\uff08button[0]\uff09\u6765\u5355\u6b65\u6267\u884c\u6307\u4ee4\uff08\u5efa\u8bae\u5728\u4e0b\u677f\u4e4b\u524d\u5c31\u63d0\u524d\u8bbe\u7f6e\u597d\u5f00\u5173\uff0cProgram Device \u540e\u518d\u8bbe\u7f6e\u6765\u4e0d\u53ca\uff09\u3002\u6309\u4e0b reset \u6309\u94ae\u53ef\u4ee5\u91cd\u65b0\u521d\u59cb\u5316\u6267\u884c\u7a0b\u5e8f\uff0c\u4f46\u662f\u56e0\u4e3a\u5185\u5b58\u662f\u65e0\u6cd5\u88ab reset \u7684\uff0c\u8fd9\u5bfc\u81f4 reset \u4e4b\u540e\u5185\u5b58\u7684\u6570\u636e\u53d1\u751f\u53d8\u5316\uff0c\u4e4b\u540e\u7684\u6267\u884c\u4f1a\u51fa\u9519\uff0c\u8fdb\u800c\u6b7b\u5faa\u73af\u5728 9a4\uff0c\u8fd9\u662f\u6b63\u5e38\u60c5\u51b5\uff1b\u6b64\u65f6\u53ea\u80fd\u91cd\u65b0\u4e0b\u8f7d\u7a0b\u5e8f\u518d\u6b21\u6d4b\u8bd5\u3002</li> </ol>"},{"location":"project-2/#100","title":"\u5b9e\u9a8c\u62a5\u544a 100%","text":"<ol> <li> <p>\u8bf7\u5728\u5b9e\u9a8c\u62a5\u544a\u4e2d\u8be6\u7ec6\u63cf\u8ff0\u6bcf\u4e00\u6b65\u7684\u8fc7\u7a0b\u5e76\u914d\u6709\u9002\u5f53\u7684\u622a\u56fe\u548c\u89e3\u91ca\uff0c\u5bf9\u4e8e\u4eff\u771f\u8bbe\u8ba1\u548c\u4e0a\u677f\u9a8c\u8bc1\u7684\u7ed3\u679c\u4e5f\u5e94\u5f53\u6709\u9002\u5f53\u7684\u89e3\u91ca\u548c\u7167\u7247 </p> </li> <li> <p>\u53ef\u4ee5\u4e3a\u7cfb\u7edf I \u7684\u5b9e\u9a8c\u5b89\u6392\u3001\u5b9e\u9a8c\u5185\u5bb9\u3001\u5b9e\u9a8c\u6307\u5bfc\u7559\u4e0b\u4efb\u4f55\u5b9d\u8d35\u7684\u5fc3\u5f97\u4f53\u4f1a\u548c\u5efa\u8bae\u5417\uff1f\uff08\u4e0d\u8bb0\u5f55\u5206\u6570\uff0c\u7eaf\u5c5e\u7528\u4e8e\u5410\u69fd\uff0c\u611f\u8c22\u5927\u5bb6\u4e3a\u6211\u4eec\u7684\u8bfe\u6539\u8d21\u732e\u4e00\u4efd\u529b\u91cf\uff09</p> </li> </ol>"},{"location":"project-2/#_13","title":"\u4ee3\u7801\u63d0\u4ea4","text":""},{"location":"project-2/#100_1","title":"\u9a8c\u6536\u68c0\u67e5\u70b9 100%","text":"<ol> <li>\u5b9e\u73b0 R Type \u7684\u57fa\u672c\u6570\u636e\u901a\u8def\uff08\u901a\u8fc7\u6d4b\u8bd5 rtype.hex\uff0c\u7d2f\u8ba1\u53ef\u83b7\u5f97\u5b9e\u9a8c\u90e8\u520610%\u7684\u5206\u6570\uff09<ul> <li>add, sub, sll, slt, sltu, xor, srl, sra, or, and</li> </ul> </li> <li>\u5b9e\u73b0 I Type \u7684\u57fa\u672c\u6570\u636e\u901a\u8def\uff08\u901a\u8fc7\u6d4b\u8bd5 itype.hex\uff0c\u7d2f\u8ba1\u53ef\u83b7\u5f97\u5b9e\u9a8c\u90e8\u520620%\u7684\u5206\u6570\uff09<ul> <li>addi, slti, sltiu, xori, ori, andi, slli, srli, srai</li> <li>ld</li> </ul> </li> <li>\u5b9e\u73b0 S Type \u7684\u57fa\u672c\u6570\u636e\u901a\u8def\uff08\u901a\u8fc7\u6d4b\u8bd5 stype.hex\uff0c\u7d2f\u8ba1\u53ef\u83b7\u5f97\u5b9e\u9a8c\u90e8\u520630%\u7684\u5206\u6570\uff09<ul> <li>sd</li> </ul> </li> <li>\u5b9e\u73b0 B Type \u7684\u5b8c\u6574\u6570\u636e\u901a\u8def\uff08\u901a\u8fc7\u6d4b\u8bd5 btype.hex\uff0c\u7d2f\u8ba1\u53ef\u83b7\u5f97\u5b9e\u9a8c\u90e8\u520640%\u7684\u5206\u6570\uff09<ul> <li>beq, bne, blt, bge, bltu, bgeu</li> </ul> </li> <li>\u5b9e\u73b0 U Type \u7684\u5b8c\u6574\u6570\u636e\u901a\u8def\uff08\u901a\u8fc7\u6d4b\u8bd5 utype.hex\uff0c\u7d2f\u8ba1\u53ef\u83b7\u5f97\u5b9e\u9a8c\u90e8\u520650%\u7684\u5206\u6570\uff09<ul> <li>lui, auipc</li> </ul> </li> <li>\u5b9e\u73b0 J Type \u7684\u5b8c\u6574\u6570\u636e\u901a\u8def\uff08\u901a\u8fc7\u6d4b\u8bd5 jtype.hex\uff0c\u7d2f\u8ba1\u53ef\u83b7\u5f97\u5b9e\u9a8c\u90e8\u520660%\u7684\u5206\u6570\uff09<ul> <li>jal</li> </ul> </li> <li>\u5b9e\u73b0\u5269\u4f59\u6307\u4ee4\u7684\u5b8c\u6574\u6570\u636e\u901a\u8def\uff08\u901a\u8fc7\u6d4b\u8bd5 remain.hex\uff0c\u7d2f\u8ba1\u53ef\u83b7\u5f97\u5b9e\u9a8c\u90e8\u520670%\u7684\u5206\u6570\uff09<ul> <li>jalr, lb, lh, lw, lbu, lhu, lwu</li> <li>sb, sh, sw</li> <li>addiw, slliw, srliw, sraiw</li> <li>addw, subw, sllw, srlw, sraw</li> </ul> </li> <li>\u5b9e\u73b0\u6240\u6709\u6307\u4ee4\u7684\u5b8c\u6574\u6570\u636e\u901a\u8def\uff08\u901a\u8fc7\u6d4b\u8bd5 full.hex\uff0c\u7d2f\u8ba1\u53ef\u83b7\u5f97\u5b9e\u9a8c\u90e8\u520680%\u7684\u5206\u6570\uff09</li> <li>\u4e0b\u677f\u9a8c\u8bc1\uff0c\u7d2f\u8ba1\u53ef\u83b7\u5f97\u5b9e\u9a8c\u90e8\u5206100%\u7684\u5206\u6570</li> </ol>"},{"location":"project-2/#_14","title":"\u63d0\u4ea4\u6587\u4ef6","text":"<p><code>src/project/</code> \u4e2d\u7f16\u5199\u7684 submit \u548c include \u7684\u4ee3\u7801</p>"},{"location":"project-bonus/","title":"project\uff1a\u591a\u5468\u671f\u5904\u7406\u5668\uff08bonus\uff09","text":""},{"location":"project-bonus/#_1","title":"\u5b9e\u9a8c\u76ee\u7684","text":"<ul> <li>\u5c1d\u8bd5\u5b9e\u8df5\u5185\u5b58\u603b\u7ebf\u63e1\u624b\u534f\u8bae</li> <li>\u5b66\u4e60\u5b9e\u8df5\u591a\u5468\u671f\u5904\u7406\u5668\u7684\u63a7\u5236\u72b6\u6001\u673a\u8bbe\u8ba1\u65b9\u6cd5</li> <li>\u5b66\u4e60\u5b9e\u8df5 mmio \u7684\u5916\u8bbe\u7ba1\u7406\u65b9\u6cd5\u548c\u4e32\u53e3\u9a71\u52a8</li> </ul>"},{"location":"project-bonus/#_2","title":"\u5b9e\u9a8c\u73af\u5883","text":"<ul> <li>\u64cd\u4f5c\u7cfb\u7edf\uff1aWindows 10+ 22H2\uff0cUbuntu 22.04+</li> <li>VHDL\uff1aVerilog\uff0cSystemVerilog</li> </ul>"},{"location":"project-bonus/#_3","title":"\u80cc\u666f\u77e5\u8bc6","text":""},{"location":"project-bonus/#_4","title":"\u5185\u5b58\u603b\u7ebf\u63e1\u624b\u534f\u8bae","text":"<p>\u5728 project-1 \u4e2d\u6211\u4eec\u4ecb\u7ecd\u4e86\u81ea\u884c\u8bbe\u8ba1\u7684\u5185\u5b58\u603b\u7ebf mem_ift\uff0c\u672c\u5b9e\u9a8c\u6211\u4eec\u4f1a\u4ecb\u7ecd\u8be5\u603b\u7ebf\u7684\u5177\u4f53\u7528\u6cd5\u3002</p> <p>\u5728\u771f\u5b9e\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e2d\uff0c\u6211\u4eec\u4f1a\u6709\u5404\u79cd\u7684\u4e3b\u8bbe\u5907\u548c\u4ece\u8bbe\u5907\uff0c\u4e3b\u8bbe\u5907\u5411\u4ece\u8bbe\u5907\u53d1\u51fa\u8bfb\u5199\u8bf7\u6c42\uff0c\u7136\u540e\u83b7\u5f97\u8bfb\u5199\u7ed3\u679c\u3002\u4e3b\u8bbe\u5907\u548c\u4ece\u8bbe\u5907\u7684\u79cd\u7c7b\u6570\u591a\u79cd\u591a\u6837\u7684\uff0c\u5e38\u89c1\u7684\u4e3b\u8bbe\u5907\u6709\u5904\u7406\u5668\u6838\u5fc3\uff0c\u5e38\u89c1\u7684\u4ece\u8bbe\u5907\u6709\u5185\u5b58\u3001\u4e32\u53e3\u7b49\uff0c\u751a\u81f3\u6709\u4e9b\u8bbe\u5907\u65e2\u53ef\u4ee5\u4f5c\u4e3a\u4e3b\u8bbe\u5907\u3001\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u4ece\u8bbe\u5907\uff0c\u6bd4\u5982\u663e\u5361\u3001\u7f51\u5361\u3001\u603b\u7ebf\u4e92\u8054\u7b49\u3002\u5404\u7c7b\u8bbe\u5907\u7684\u5de5\u4f5c\u6a21\u5f0f\u3001\u786c\u4ef6\u5b9e\u73b0\u3001\u5185\u90e8\u534f\u8bae\u90fd\u662f\u4e92\u4e0d\u76f8\u540c\u751a\u81f3\u5927\u76f8\u5f84\u5ead\u7684\uff0c\u5982\u679c\u6211\u4eec\u4e3a\u4efb\u4f55\u4e00\u4e2a\u4e3b\u4ece\u8bbe\u5907\u90fd\u5b9a\u5236\u4e13\u95e8\u7684\u8fde\u63a5\uff0c\u8fd9\u4e2a\u8bbe\u8ba1\u5f00\u9500\u662f\u5de8\u5927\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u5b9a\u4e49\u4e86\u603b\u7ebf\u534f\u8bae\u548c\u603b\u7ebf\u63a5\u53e3\u3002\u4e3b\u8bbe\u5907\u5b9e\u73b0\u9075\u5b88\u603b\u7ebf\u534f\u8bae\u7684\u4e3b\u603b\u7ebf\u63a5\u53e3\uff0c\u4ece\u8bbe\u5907\u5b9e\u73b0\u9075\u5b88\u603b\u7ebf\u534f\u8bae\u7684\u4ece\u603b\u7ebf\u63a5\u53e3\uff0c\u8fd9\u6837\u4efb\u4f55\u4e3b\u4ece\u8bbe\u5907\u4e4b\u95f4\u90fd\u53ef\u4ee5\u76f4\u63a5\u7528\u603b\u7ebf\u4e32\u8054\uff0c\u7136\u540e\u6b63\u5e38\u5de5\u4f5c\u3002</p> <p>\u6211\u4eec\u4ecb\u7ecd\u4e00\u4e0b mem_ift \u7684\u603b\u7ebf\u63e1\u624b\u534f\u8bae\uff0c\u8ba9\u540c\u5b66\u4eec\u5bf9\u4e8e\u603b\u7ebf\u534f\u8bae\u6709\u4e00\u4e2a\u7b80\u5355\u7684\u8ba4\u8bc6\uff0c\u5b9e\u9645\u4f7f\u7528\u7684\u603b\u7ebf\u534f\u8bae\u56e0\u4e3a\u5b9e\u9645\u9700\u6c42\u66f4\u591a\uff0c\u6240\u4ee5\u4f1a\u6709\u66f4\u590d\u6742\u7684\u5b9e\u73b0\u548c\u66f4\u5f3a\u5927\u7684\u529f\u80fd\u3002</p> <ul> <li> <p>\u8bfb\u8bf7\u6c42\uff1a</p> <ol> <li>Master \u8bbe\u5907\u5c06\u8981\u8bbf\u95ee\u7684\u5730\u5740\u653e\u5230 r_request_bits.raddr \u4e0a\uff0c\u5f85\u5730\u5740\u6570\u636e\u7a33\u5b9a\u540e\uff0c\u5c06 r_request_valid \u8bbe\u7f6e\u4e3a 1</li> <li>Slave \u8bbe\u5907\u5728\u53ef\u4ee5\u63a5\u53d7\u8bfb\u8bf7\u6c42\u7684\u65f6\u5019\u5c06 r_request_ready \u8bbe\u7f6e\u4e3a 1</li> <li> <p>\u5f53 r_request_valid &amp; r_request_ready \u7684\u65f6\u5019\uff0c\u8bf4\u660e\u63e1\u624b\u6210\u529f</p> </li> <li> <p>Master \u53d1\u9001\u8bf7\u6c42\u6210\u529f\uff0c\u5173\u95ed\u8bf7\u6c42\u6216\u8005\u53d1\u9001\u4e0b\u4e00\u4e2a\u8bf7\u6c42\uff0c\u5728\u53ef\u4ee5\u63a5\u53d7\u8bfb\u8fd4\u56de\u6570\u636e\u4e4b\u540e\uff0c\u5c06 r_reply_ready \u8bbe\u7f6e\u4e3a 1</p> </li> <li>Slave \u63a5\u6536\u5230 Master \u7684\u8bf7\u6c42\u4e4b\u540e\u6839\u636e r_request_bits.raddr \u7684\u5730\u5740\u83b7\u5f97\u5bf9\u5e94\u7684\u6570\u636e\uff0c\u7136\u540e\u653e\u7f6e\u5230 r_reply_bits.rdata \u4e0a\uff0c\u5982\u679c\u8bbf\u95ee\u6210\u529f\u5c06 r_reply_bits.rresp \u8bbe\u7f6e\u4e3a OKAY\uff0c\u53cd\u4e4b\u8bbe\u7f6e\u4e3a SLVERR\u3002\u5f85\u6570\u636e\u7a33\u5b9a\u540e\uff0c\u5c06 r_reply_valid \u8bbe\u7f6e\u4e3a 1</li> <li> <p>\u5f53 r_reply_valid &amp; r_reply_ready \u7684\u65f6\u5019\uff0c\u8bf4\u660e\u63e1\u624b\u6210\u529f</p> </li> <li> <p>Master \u63a5\u6536 Slave \u8fd4\u56de\u7684\u7ed3\u679c\uff0c\u5173\u95ed ready \u6216\u8005\u7b49\u5f85\u63a5\u6536\u4e0b\u4e00\u4e2a\u8fd4\u56de\u7ed3\u679c</p> </li> <li>Slave \u5173\u95ed\u6570\u636e\u54cd\u5e94\u6216\u8005\u51c6\u5907\u53d1\u9001\u4e0b\u4e00\u4e2a\u8bfb\u8bf7\u6c42\u7684\u7ed3\u679c</li> </ol> </li> <li> <p>\u5199\u8bf7\u6c42\uff1a</p> <ol> <li>Master \u8bbe\u5907\u5c06\u8981\u5199\u5165\u7684\u5730\u5740\u3001\u6570\u636e\u3001\u5b57\u8282\u4f7f\u80fd\u653e\u5230 w_request_bits.waddr\u3001wdata\u3001wmask \u4e0a\uff0c\u5f85\u5730\u5740\u6570\u636e\u7a33\u5b9a\u540e\uff0c\u5c06 w_request_valid \u8bbe\u7f6e\u4e3a 1</li> <li>Slave \u8bbe\u5907\u5728\u53ef\u4ee5\u63a5\u53d7\u5199\u8bf7\u6c42\u7684\u65f6\u5019\u5c06 w_request_ready \u8bbe\u7f6e\u4e3a 1</li> <li> <p>\u5f53 w_request_valid &amp; w_request_ready \u7684\u65f6\u5019\uff0c\u8bf4\u660e\u63e1\u624b\u6210\u529f</p> </li> <li> <p>Master \u53d1\u9001\u8bf7\u6c42\u6210\u529f\uff0c\u5173\u95ed\u8bf7\u6c42\u6216\u8005\u53d1\u9001\u4e0b\u4e00\u4e2a\u8bf7\u6c42\uff0c\u5728\u53ef\u4ee5\u63a5\u53d7\u8bfb\u8fd4\u56de\u6570\u636e\u4e4b\u540e\uff0c\u5c06 w_reply_ready \u8bbe\u7f6e\u4e3a 1</p> </li> <li>Slave \u63a5\u6536\u5230 Master \u7684\u8bf7\u6c42\u4e4b\u540e\u6839\u636e w_request_bits.waddr\u3001wdata\u3001wmask \u8fdb\u884c\u5bf9\u5e94\u7684\u5199\u64cd\u4f5c\uff0c\u5982\u679c\u5730\u5740\u5408\u6cd5\u4e14\u5199\u5165\u6210\u529f\u5c06 w_reply_bits.rresp \u8bbe\u7f6e\u4e3a OKAY\uff0c\u53cd\u4e4b\u8bbe\u7f6e\u4e3a SLVERR\u3002\u5f85\u6570\u636e\u7a33\u5b9a\u540e\uff0c\u5c06 w_reply_valid \u8bbe\u7f6e\u4e3a 1</li> <li> <p>\u5f53 w_reply_valid &amp; w_reply_ready \u7684\u65f6\u5019\uff0c\u8bf4\u660e\u63e1\u624b\u6210\u529f</p> </li> <li> <p>Master \u63a5\u6536 Slave \u8fd4\u56de\u7684\u7ed3\u679c\uff0c\u5173\u95ed ready \u6216\u8005\u7b49\u5f85\u63a5\u6536\u4e0b\u4e00\u4e2a\u8fd4\u56de\u7ed3\u679c</p> </li> <li>Slave \u5173\u95ed\u6570\u636e\u54cd\u5e94\u6216\u8005\u51c6\u5907\u53d1\u9001\u4e0b\u4e00\u4e2a\u5199\u8bf7\u6c42\u7684\u7ed3\u679c</li> </ol> </li> </ul> <p>\u7b80\u5355\u6765\u8bf4\uff0cMaster \u548c Slave \u901a\u8fc7 request \u901a\u9053\u63e1\u624b\uff0cMaster \u5c06 request \u7684\u4fe1\u606f\u53d1\u9001\u7ed9 Slave\uff1b\u7136\u540e\u518d\u901a\u8fc7 reply \u901a\u9053\u63e1\u624b\uff0cSlave \u5c06 reply \u7684\u4fe1\u606f\u53d1\u9001\u7ed9 Master\u3002Read \u548c Write \u7684\u901a\u9053\u53ef\u4ee5\u7b80\u5355\u5730\u8ba4\u4e3a\u76f8\u4e92\u4e0d\u5f71\u54cd\u3002\u9700\u8981\u6ce8\u610f\uff0c\u5728\u6ca1\u6709\u53d1\u9001 request \u8bf7\u6c42\u4e4b\u524d\uff0c\u7406\u8bba\u4e0a\u4e0d\u5e94\u8be5\u6709 reply \u54cd\u5e94\u3002</p> <p>Slave \u53d1\u9001 request \u7684\u8bf7\u6c42\u4e4b\u540e\uff0cMaster \u4e00\u822c\u81f3\u5c11\u4e0b\u4e00\u4e2a\u5468\u671f\u624d\u53ef\u4ee5\u8fd4\u56de reply \u7ed3\u679c\uff0c\u6240\u4ee5\u5728\u5185\u5b58\u603b\u7ebf\u7684\u573a\u666f\u4e0b\u5904\u7406\u5668\u7684\u4e00\u6b21\u5185\u5b58\u8bbf\u95ee\u662f\u591a\u5468\u671f\u7684\uff0c\u6700\u5c11\u4e00\u4e2a\u5468\u671f\u7684 request\u3001\u4e00\u4e2a\u5468\u671f\u7684 reply\u3002\u4f46\u662f\u5b9e\u9645\u4e0a Slave \u548c Master \u7684 request \u63e1\u624b\u672c\u8eab\u53ef\u80fd\u9700\u8981\u82e5\u5e72\u4e2a\u5468\u671f\uff0cSlave\u5904\u7406\u6570\u636e\u5185\u5bb9\u4e5f\u9700\u8981\u5927\u91cf\u5468\u671f\uff0c\u6700\u540e Slave \u548c Master \u7684 reply \u63e1\u624b\u53c8\u9700\u8981\u5927\u91cf\u7684\u5468\u671f\uff0c\u8fd9\u5c31\u5bfc\u81f4\u5b9e\u9645\u4e0a\u4e00\u6b21\u5185\u5b58\u8bbf\u95ee\u9700\u8981\u51e0\u5341\u751a\u81f3\u4e0a\u767e\u5468\u671f\u3002</p> <p>\u5b9e\u9645\u4e0a\u5185\u5b58\u8bbf\u95ee\u591a\u5468\u671f\u5e76\u4e0d\u662f\u603b\u7ebf\u5f15\u5165\u7684\uff0c\u800c\u662f Slave \u8bbe\u5907\u672c\u8eab\u5f15\u5165\u7684\uff0c\u6bd4\u5982\u6211\u4eec\u7684 core \u5982\u679c\u4e0d\u7528\u4e13\u95e8\u5b9a\u5236\u7684\uff08\u5b9e\u9645\u4e0d\u5b58\u5728\u7684\uff09dram \u8fdb\u884c\u4e00\u5468\u671f\u7684\u8bfb\u5199\u64cd\u4f5c\uff0c\u800c\u662f\u7528\u5e38\u89c1\u7684 sram \u6216\u8005 ddr\uff0c\u5219\u53ef\u80fd\u9700\u8981 10-50 \u4e2a\u5468\u671f\u624d\u53ef\u4ee5\u83b7\u5f97\u4e00\u6b21\u6570\u636e\u3002\u6070\u6070\u76f8\u53cd\uff0c\u56e0\u4e3a\u5185\u5b58\u603b\u7ebf\u7684\u5b58\u5728\u4f7f\u5f97 Slave \u8bbe\u5907\u7684\u8bbf\u95ee\u63a7\u5236\u53d8\u5f97\u7b80\u5355\uff0c\u6211\u4eec\u53ef\u4ee5\u5ffd\u7565\u6bcf\u4e2a\u8bbe\u5907\u590d\u6742\u7684\u9a71\u52a8\u534f\u8bae\uff0c\u4ec5\u4ec5\u901a\u8fc7\u603b\u7ebf\u63e1\u624b\u548c\u7b49\u5f85\u5c31\u53ef\u4ee5\u5f97\u5230\u6b63\u786e\u7684\u6267\u884c\u7ed3\u679c\u3002</p>"},{"location":"project-bonus/#_5","title":"\u591a\u5468\u671f\u5904\u7406\u5668","text":"<p>\u771f\u5b9e\u7684\u5904\u7406\u5668\u5728\u5904\u7406\u4e00\u6761\u6307\u4ee4\u7684\u65f6\u5019\uff0c\u53d6\u6307\u3001\u8bd1\u7801\u3001\u6267\u884c\u3001\u8bbf\u5b58\u3001\u5199\u56de\u7684\u6bcf\u4e2a\u64cd\u4f5c\u53ef\u80fd\u90fd\u9700\u8981\u5f88\u591a\u4e2a\u65f6\u949f\u5468\u671f\u3002\u4f8b\u5982\u53d6\u6307\u548c\u8bbf\u5b58\u64cd\u4f5c\u9700\u8981\u8bbf\u95ee\u5185\u5b58\uff0c\u800c\u5185\u5b58\u8bbf\u95ee\u9700\u8981\u603b\u7ebf\u63e1\u624b\u548c\u5185\u5b58\u5904\u7406\uff0c\u53ef\u80fd\u8981\u7b49\u5f85\u51e0\u5341\u4e2a\u5230\u4e0a\u767e\u4e2a\u5468\u671f\uff1b\u8bd1\u7801\u5982 x86 \u9700\u8981\u4f5c\u5fae\u7801\u8f6c\u6362\u3001\u89e3\u7801\u7b49\u64cd\u4f5c\uff0c\u53c8\u9700\u8981\u5f88\u591a\u5468\u671f\uff1b\u6267\u884c\u7b80\u5355\u7684\u6307\u4ee4\u5982\u52a0\u6cd5\u3001\u79fb\u4f4d\u53ef\u80fd\u53ea\u9700\u8981\u4e00\u4e2a\u5468\u671f\uff0c\u4f46\u662f\u590d\u6742\u7684\u6307\u4ee4\u64cd\u4f5c\u5982\u4e58\u6cd5\u3001\u9664\u6cd5\u3001\u540c\u6b65\u7b49\u9700\u8981\u51e0\u5341\u4e0a\u767e\u4e2a\u5468\u671f\uff1b\u5199\u56de\u6709\u65f6\u5019\u53ef\u80fd\u4e5f\u8981\u591a\u5468\u671f\u3002\u6240\u4ee5\u5904\u7406\u5668\u7684\u4e00\u6761\u6307\u4ee4\u5206\u591a\u4e2a\u5468\u671f\u6267\u884c\u5b8c\u6210\u662f\u5f88\u6b63\u5e38\u3002</p> <p>\u4e3a\u4e86\u8ba9\u5904\u7406\u5668\u53ef\u4ee5\u6709\u6761\u4e0d\u7d0a\u7684\u7528\u591a\u4e2a\u5468\u671f\u5904\u7406\u4e00\u6761\u6307\u4ee4\uff0c\u6211\u4eec\u9700\u8981\u8bbe\u8ba1\u4e00\u4e2a\u63a7\u5236\u591a\u5468\u671f\u5904\u7406\u5668\u5de5\u4f5c\u7684\u6709\u9650\u72b6\u6001\u673a\uff0c\u5b83\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u72b6\u6001\u63a7\u5236\u4e0d\u540c\u7684\u5904\u7406\u5668\u90e8\u4ef6\u5de5\u4f5c\uff0c\u4ee5\u786e\u4fdd\u6307\u4ee4\u6b63\u786e\u6267\u884c\uff0c\u5404\u4e2a\u90e8\u4ef6\u4e0d\u51b2\u7a81\u3002\u672c\u5b9e\u9a8c\u7684\u6307\u4ee4\u9664\u4e86\u8bbf\u5b58\u90fd\u53ea\u9700\u8981\u6267\u884c\u4e00\u4e2a\u5468\u671f\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u8bbe\u8ba1\u5982\u4e0b\u7684\u6709\u9650\u72b6\u6001\u673a\uff1a</p> <ul> <li>IF1\uff1a\u53d1\u9001 imem \u5185\u5b58\u7684\u8bfb\u8bf7\u6c42\uff0c\u7b49\u5f85\u8bfb\u8bf7\u6c42\u63e1\u624b\u8fbe\u6210\u3002\u63e1\u624b\u6210\u529f\u8fdb\u5165 IF2 \u72b6\u6001</li> <li>IF2\uff1a\u7b49\u5f85 imem \u5185\u5b58\u7684\u8bfb\u54cd\u5e94\uff0c\u7b49\u5f85\u8bfb\u54cd\u5e94\u63e1\u624b\u8fbe\u6210\u3002\u63e1\u624b\u6210\u529f\uff0c\u83b7\u5f97\u5f85\u6267\u884c\u7684\u6307\u4ee4\uff0c\u8fdb\u5165 EXE \u72b6\u6001</li> <li>ID-EXE\uff1a\u5bf9\u6307\u4ee4\u8bd1\u7801\uff0c\u5982\u679c\u4e0d\u662f\u8bbf\u5b58\u6307\u4ee4\uff0c\u5c31\u6267\u884c\u8ba1\u7b97\u5e76\u5199\u56de\u8ba1\u7b97\u7ed3\u679c\uff0c\u8fdb\u5165 IF1 \u72b6\u6001\uff0c\u5f00\u59cb\u6267\u884c\u4e0b\u4e00\u6761\u6307\u4ee4\uff1b\u5982\u679c\u662f\u8bbf\u5b58\u6307\u4ee4\uff0c\u53d1\u9001 dmem \u5185\u5b58\u7684\u8bfb\u5199\u8bf7\u6c42\uff0c\u7b49\u5f85\u8bfb\u5199\u8bf7\u6c42\u63e1\u624b\u8fbe\u6210\uff0c\u63e1\u624b\u6210\u529f\u8fdb\u5165 MEM \u72b6\u6001</li> <li>MEM\uff1a\u7b49\u5f85 dmem \u7684\u8bfb\u5199\u76f8\u5e94\uff0c\u63e1\u624b\u6210\u529f\u5c06\u8bfb\u5230\u7684\u6570\u636e\u5199\u5165\u5bc4\u5b58\u5668\u7ec4\uff0c\u7136\u540e\u8fd4\u56de IF1 \u72b6\u6001\u5f00\u59cb\u6267\u884c\u4e0b\u4e00\u6761\u6307\u4ee4</li> </ul> <p></p> <p>\u6240\u4ee5\u5982\u679c\u6211\u4eec\u60f3\u5728\u5355\u5468\u671f\u5904\u7406\u5668\u7684\u57fa\u7840\u4e0a\u5b9e\u73b0\u591a\u5468\u671f\u5904\u7406\u5668\uff0c\u9700\u8981\u8fdb\u884c\u5982\u4e0b\u7684\u4fee\u6539\uff1a</p> <ul> <li>\u8bbe\u7f6e\u4e00\u4e2a\u6709\u9650\u72b6\u6001\u673a\uff0c\u505a\u72b6\u6001\u7684\u8f6c\u6362</li> <li>\u589e\u52a0\u65b0\u7684\u63a7\u5236\u4fe1\u53f7\u6216\u8005\u4fee\u6539\u63a7\u5236\u4fe1\u53f7<ul> <li>stall \u4fe1\u53f7\uff0c\u5f53\u4e00\u6761\u6307\u4ee4\u6ca1\u6709\u6267\u884c\u5b8c\u6bd5\u65f6\uff0cPC \u4fdd\u6301\u4e0d\u53d8</li> <li>we_reg \u4fe1\u53f7\uff0c\u5f53\u4e00\u6761\u6307\u4ee4\u6ca1\u6709\u6267\u884c\u5b8c\u6bd5\u65f6\uff0c\u5bc4\u5b58\u5668\u7ec4\u4e0d\u5199\u56de</li> <li>mem_ift \u4fe1\u53f7\uff0c\u5728\u4e0d\u540c\u7684\u63a5\u53e3\u53d1\u9001\u4e0d\u65ad\u7684\u8bf7\u6c42\u3001\u54cd\u5e94\u63e1\u624b\u4fe1\u53f7</li> </ul> </li> <li>\u589e\u52a0\u4e2d\u95f4\u5bc4\u5b58\u5668\uff0c\u4fdd\u5b58\u5fc5\u8981\u7684\u7ed3\u679c<ul> <li>inst \u5bc4\u5b58\u5668\uff0c\u5f53 imem \u54cd\u5e94\u5b9e\u73b0\u65f6\u5c06\u8fd4\u56de\u7684 inst \u5199\u5165\u5bc4\u5b58\u5668</li> </ul> </li> <li>\u5176\u4ed6\u6709\u5fc5\u8981\u7684\u4fee\u6539</li> </ul> <p>\u53ef\u4ee5\u53c2\u8003<code>submit/Core.sv</code>\u7684 MultiFSM \u7684\u6a21\u5757\u63a5\u53e3\u5b9e\u73b0\u5bf9\u5e94\u7684\u6709\u9650\u72b6\u6001\u673a\u548c\u63a7\u5236\u4fe1\u53f7\u3002</p> <pre><code>module MultiFSM(\n    input clk,\n    input rst,\n    Mem_ift.Master imem_ift,\n    Mem_ift.Master dmem_ift,\n    input we_mem,\n    input re_mem,\n    input CorePack::addr_t pc,\n    input CorePack::addr_t alu_res,\n    input CorePack::data_t data_package,\n    input CorePack::mask_t mask_package,\n    output stall\n);\n    import CorePack::*;\n\n    // fill your code for bonus\n\nendmodule\n</code></pre>"},{"location":"project-bonus/#memory-mapping-io","title":"memory-mapping I/O","text":"<p>\u6211\u4eec\u4e4b\u524d\u63d0\u5230\uff0c\u5728\u4e00\u4e2a\u4f53\u7cfb\u7ed3\u6784\u4e2d\uff0c\u5904\u7406\u5668\u6838\u5fc3\u6709\u591a\u4e2a\u4ece\u8bbe\u5907\u53ef\u4ee5\u8bfb\u5199\u8bbf\u95ee\uff0c\u6bd4\u5982\u5185\u5b58\u3001\u4e32\u53e3\u3001\u52a0\u901f\u5668\u3001PCIE \u8bbe\u5907\u7b49\u7b49\u3002\u5bf9\u4e8e\u5185\u5b58\uff0c\u6211\u4eec\u53ef\u4ee5\u7528 load-store \u6307\u4ee4\u76f4\u63a5\u8bbf\u95ee\uff0c\u4f46\u662f\u5bf9\u4e8e\u4e32\u53e3\u7b49 IO \u8bbe\u5907\u6211\u4eec\u8981\u600e\u4e48\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u5462\uff1f</p> <p>\u5728 x86 \u7b49\u6307\u4ee4\u96c6\u4e2d\u6709\u7279\u5b9a\u7684 in-out \u6307\u4ee4\uff0c\u5e76\u4e14\u7ed9\u6bcf\u4e00\u4e2a\u5916\u8bbe\u7684\u53ef\u7f16\u7a0b\u5bc4\u5b58\u5668\u63d0\u4f9b\u4e86\u4e13\u95e8\u7684\u7f16\u53f7\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u7528<code>in/out ID</code>\u7684\u5f62\u5f0f\u6765\u8bbf\u95ee\u8fd9\u4e9b\u5bc4\u5b58\u5668\u3002\u56e0\u6b64 x86 \u6709\u9488\u5bf9\u5185\u5b58\u7684 load-store \u6307\u4ee4\uff0c\u540c\u65f6\u517c\u6709\u9488\u5bf9 IO \u7684 in-out \u6307\u4ee4\u3002\u4f46\u662f\u8fd9\u6837\u5c31\u9700\u8981\u7ba1\u7406\u4e24\u5957\u8bbe\u5907\u8bbf\u95ee\u6307\u4ee4\uff0c\u65e0\u8bba\u662f\u8bbe\u5907\u63d0\u4f9b\u5546\u8fd8\u662f\u8f6f\u4ef6\u5f00\u53d1\u8005\u90fd\u662f\u6bd4\u8f83\u7e41\u7410\u7684\u3002riscv \u5219\u91c7\u7528 memory-mapping \u7684\u65b9\u5f0f\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p>in-out \u662f\u4e3a\u6bcf\u4e00\u4e2a IO \u7684\u53ef\u7f16\u7a0b\u5bc4\u5b58\u5668\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7f16\u53f7\u8fdb\u884c\u8bbf\u95ee\uff0cmemory-mapping \u5219\u662f\u4ece\u7269\u7406\u5730\u5740\u4e2d\u5212\u5206\u4e86\u4e00\u90e8\u5206\uff0c\u7136\u540e\u4f5c\u4e3a\u8fd9\u4e9b\u5bc4\u5b58\u5668\u7684\u5730\u5740\u3002\u53ea\u8981\u7528 load-store \u6307\u4ee4\u8bbf\u95ee\u8fd9\u4e9b\u7279\u6b8a\u7684\u5730\u5740\uff0c\u5c31\u53ef\u4ee5\u8bfb\u5199\u5bf9\u5e94\u7684 IO \u5bc4\u5b58\u5668\uff0c\u4ece\u800c\u5b9e\u73b0\u8bfb IO \u7684\u8f93\u5165\u3001\u63d0\u4f9b IO \u7684\u8f93\u51fa\u3001\u8bbe\u7f6e IO \u7684\u72b6\u6001\u7b49\u4e00\u7cfb\u5217\u529f\u80fd\u7e41\u590d\u7684\u64cd\u4f5c\u3002memory-mapping I/O \u7684 load-store \u8bfb\u5199\u7684\u5730\u5740\u5e76\u4e0d\u4e00\u5b9a\u662f\u771f\u6b63\u7684\u5b58\u50a8\u5355\u5143\uff0c\u53ef\u80fd\u662f\u4efb\u4f55\u6709\u6548\u7684\u786c\u4ef6\u5b9e\u73b0\uff0c\u5177\u4f53\u7684\u4f7f\u7528\u8fd8\u662f\u8981\u770b\u8bbe\u5907\u63d0\u4f9b\u5546\u63d0\u4f9b\u7684\u64cd\u4f5c\u624b\u518c\u3002</p> <p>\u5728\u672c\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u5c06\u4e32\u53e3\u5c01\u88c5\u4e3a\u4e00\u4e2a\u4ece\u8bbe\u5907\uff0c\u7136\u540e\u5c06\u5b83\u7684\u72b6\u6001\u3001\u6570\u636e\u7ba1\u7406\u62bd\u8c61\u4e3a\u53ef\u7f16\u7a0b\u8bfb\u5199\u63a5\u53e3\uff1a     * 0x10000000-0x10000001\uff1a\u4e32\u53e3\u6570\u636e\u5bc4\u5b58\u5668\uff0c\u5bbd\u5ea6\u4e00\u5b57\u8282\u3002\u8bfb\u8fd9\u4e2a\u5bc4\u5b58\u5668\u53ef\u4ee5\u5f97\u5230\u4e32\u53e3\u63a5\u6536\u5230\u7684\u5b57\u7b26\uff1a\u5199\u8fd9\u4e2a\u5bc4\u5b58\u5668\u53ef\u4ee5\u8ba9\u4e32\u53e3\u53d1\u9001\u5199\u5165\u7684\u5b57\u7b26\u3002\u56e0\u4e3a\u6570\u636e\u5bc4\u5b58\u5668\u53ea\u6709 8 \u4f4d\uff0c\u6240\u4ee5\u5199\u5165\u7684\u6570\u636e\u53ea\u6709\u4f4e\u516b\u4f4d\u6709\u6548\u3002     * 0x10000001-0x10000002\uff1a\u4e32\u53e3\u72b6\u6001\u5bc4\u5b58\u5668\uff0c\u5bbd\u5ea6\u4e00\u5b57\u8282\u3002\u8bfb\u8fd9\u4e2a\u5bc4\u5b58\u5668\u53ef\u4ee5\u5f97\u5230\u4e32\u53e3\u7684\u5de5\u4f5c\u72b6\u6001\uff1a\u8bfb\u5230\u6570\u636e\u7684\u6700\u4f4e\u4f4d\u662f TX \u7684\u5de5\u4f5c\u72b6\u6001\uff0c\u5982\u679c\u662f 1\uff0c\u5219\u53ef\u4ee5\u53d1\u9001\u6570\u636e\uff0c\u5982\u679c\u662f 0\uff0c\u5219\u4e32\u53e3\u53d1\u9001\u7aef\u5904\u4e8e\u7e41\u5fd9\uff1b\u8bfb\u5230\u6570\u636e\u7684\u6b21\u4f4e\u4f4d\u662f RX \u7684\u5de5\u4f5c\u72b6\u6001\uff0c\u5982\u679c\u662f 1\uff0c\u5219\u53ef\u4ee5\u63a5\u53d7\u6570\u636e\uff0c\u5982\u679c\u662f 0\uff0c\u5219\u6ca1\u6709\u6570\u636e\u88ab\u63a5\u53d7\u3002     * \u5982\u679c\u8bfb\u5199\u7684\u5730\u5740\u4e0d\u5408\u7406\uff0c\u6216\u8005\u8bfb\u5199\u7684\u65f6\u5019 TX\u3001RX \u6ca1\u6709\u5c31\u7eea\uff0c\u4e32\u53e3\u4f1a\u8fd4\u56de SLVERR \u62a5\u544a</p> <p>\u6211\u4eec\u6765\u67e5\u770b\u4e00\u4e2a\u5f53\u524d SoC \u7684\u5916\u56f4\u8bbe\u8ba1\uff1a</p> <p></p> <p>imem_ift \u603b\u7ebf\u63a5\u53e3\u76f4\u63a5\u76f4\u8fde\u5230 dram \u7684\u4e00\u53f7\u53e3\uff0cdmem_ift \u603b\u7ebf\u7ecf\u8fc7 interconnect \u7684\u8def\u7531\uff0c\u6839\u636e\u8f93\u5165\u5730\u5740\u7684\u4e0d\u540c\u8bbf\u95ee\u5185\u5b58\u6216\u8005\u4e32\u53e3\uff0c\u7269\u7406\u5730\u5740\u5206\u5e03\u5982\u4e0b\uff1a</p> <ul> <li>0x00000000 - 0x00001000\uff1adram \u5730\u5740\u8303\u56f4\uff0c\u4ec5\u5728\u8be5\u5730\u5740\u8303\u56f4\u8bbf\u95ee\u5185\u5b58\u6709\u6548</li> <li>0x10000000 - 0x10000100\uff1auart \u5730\u5740\u8303\u56f4\uff0c\u8be5\u8303\u56f4\u4ec5 0x10000000-0x10000002 \u6709\u6548\uff0c\u5176\u4ed6\u8bbf\u95ee\u8fd4\u56de SLVERR</li> <li>other\uff1a\u65e0\u6548\u5730\u5740\u8303\u56f4\uff0c\u8bbf\u95ee\u8fd4\u56de DECERR</li> </ul> <p>memory-mapping \u6839\u636e\u5730\u5740\u8bbf\u95ee\u5404\u79cd\u4e0d\u540c\u7684\u4ece\u8bbe\u5907\u4f9d\u8d56\u4e8e\u590d\u6742\u7684 interconnection \u8fde\u63a5\u6765\u5b9e\u73b0\u3002</p>"},{"location":"project-bonus/#_6","title":"\u5b9e\u9a8c\u6b65\u9aa4","text":""},{"location":"project-bonus/#_7","title":"\u5b9e\u9a8c\u524d\u51c6\u5907","text":"<p>\u4e0e\u4e4b\u524d\u7684 lab \u76f8\u540c\uff0c\u542f\u52a8\u5b89\u88c5\u5728\u4f60\u7535\u8111\u4e2d\u7684 Ubuntu 22.04 \u73af\u5883\uff08 WSL \u6216\u865a\u62df\u673a\uff09\uff0c\u968f\u540e\u901a\u8fc7 <code>cd</code> \u79fb\u52a8\u5230 <code>sys1-sp24</code> \u76ee\u5f55\u4e0b\uff0c\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff1a <pre><code>git pull origin master\ncd repo/sys-project\ngit checkout multicycle\n</code></pre> \u8be5\u5b9e\u9a8c\u7684 sys-project \u4ee3\u7801\u5728 multicycle \u5206\u652f\u4e0b\u3002</p>"},{"location":"project-bonus/#cpu","title":"\u5b9e\u73b0\u591a\u5468\u671f CPU","text":"<p>\u6839\u636e\"\u591a\u5468\u671f\u5904\u7406\u5668\"\u4e00\u8282\u5b9e\u73b0<code>submit/Core.sv</code>\u7684 MultiFSM \u6a21\u5757\uff0c\u5e76\u4fee\u6539 core \u7684\u7ec6\u8282\uff0c\u5c06 core \u8f6c\u6362\u4e3a\u53ef\u4ee5\u987a\u5229\u6267\u884c\u7684\u591a\u5468\u671f\u5904\u7406\u5668\u3002\u4e4b\u540e\u6267\u884c<code>make verilate TESTCASE=full</code>\uff0c\u4eff\u771f\u6d4b\u8bd5\uff0c\u5982\u679c\u987a\u5229\u7ed3\u675f\u53ef\u4ee5\u8bc1\u660e\u6267\u884c\u6b63\u786e\u3002</p> <p>\u7136\u540e\u6267\u884c<code>make board_sim TESTCASE=full</code>\u5f97\u5230\u7528\u4e8e\u4e0b\u677f\u7684\u6267\u884c\u6587\u4ef6 testcase.hex\uff0c\u7136\u540e\u4fee\u6539<code>include/initial_mem.hex</code>\u7684 FILE_PATH\uff0c\u7528\u8be5 hex \u4fee\u6539\u5904\u7406\u5668\u7684\u5185\u5b58\u7684\u503c\u3002\u7136\u540e\u7efc\u5408\u4e0b\u677f\uff0c\u5982\u679c\u5904\u7406\u5668\u5355\u6b65\u6267\u884c\u5468\u671f\u6570\u5408\u7406\uff08\u5b9e\u9a8c\u6307\u5bfc\u7684\u72b6\u6001\u53ca\u5bf9\u5e94\u7684\u975e\u8bbf\u5b58\u6307\u4ee4\u4e3a 3 \u5468\u671f\uff0c\u8bbf\u5b58\u6307\u4ee4\u4e3a 4 \u5468\u671f\uff0c\u4e5f\u53ef\u4ee5\u662f\u5176\u4ed6\u5b9e\u73b0\uff09\uff0c\u5e76\u6700\u7ec8\u505c\u987f\u5728 pc=9a8 \u5904\u5219\u8bf4\u660e\u4e0b\u677f\u6267\u884c\u6b63\u786e\u3002</p>"},{"location":"project-bonus/#_8","title":"\u6267\u884c\u4e32\u53e3\u6536\u53d1","text":"<p>\u4e4b\u524d\u6211\u4eec\u7528\u56de\u73af\u6d4b\u8bd5\u7684\u6a21\u5757\u5b9e\u73b0\u4e86\u4e32\u53e3\u6536\u53d1\uff0c\u73b0\u5728\u6211\u4eec\u7528\u5904\u7406\u5668\u6267\u884c\u7a0b\u5e8f\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u4e32\u53e3\u6536\u53d1\u3002\u8be5\u7a0b\u5e8f\u5df2\u7ecf\u5728<code>sys-project/testcode/testcase/uart</code>\u4e0b\u5b9e\u73b0\uff0c\u53ea\u8981\u5728 project \u76ee\u5f55\u4e0b\u6267\u884c<code>make uart</code>\u5c31\u53ef\u4ee5\u7f16\u8bd1\u8be5\u6587\u4ef6\u5939\u4e0b\u7684\u4ee3\u7801\u5f97\u5230 testcase.hex\uff0c\u7136\u540e\u7528\u8be5\u7a0b\u5e8f\u8fdb\u884c\u4eff\u771f\u6d4b\u8bd5\u3002\u4e3a\u4e86\u9a8c\u8bc1\u4e32\u53e3\u6536\u53d1\u7684\u6b63\u786e\u6027\uff0c\u6211\u4eec\u5728<code>sys-project/sim</code>\u63d0\u4f9b\u4e86 sim_uart.sv \u6a21\u5757\u7528\u4e8e\u6a21\u62df host \u7684\u4e32\u53e3\u6536\u53d1\uff0c\u6211\u4eec\u7684\u5904\u7406\u5668\u4f1a\u548c host \u5171\u540c\u5b9e\u73b0\u56de\u73af\u6d4b\u8bd5\u3002</p> <p>\u6d4b\u8bd5\u901a\u8fc7\u540e<code>make bitstream</code>\u4e0b\u677f\u9a8c\u8bc1\u5373\u53ef\uff0c\u4e0d\u8981\u5fd8\u8bb0\u8bbe\u7f6e FILE_PATH\u3002</p> <p>\u4e3a\u4e86\u4fbf\u4e8e\u5927\u5bb6\u786c\u4ef6\u8c03\u8bd5\uff0c\u5728\u5904\u7406\u5668\u4e0b\u677f\u4e4b\u540e\uff0c\u53ef\u4ee5\u5c06\u5f00\u5173<code>sw[4:0]</code>\u62e8\u81f3<code>10001</code>\u6765\u67e5\u770b\u4e32\u53e3\u5185\u90e8 state \u5bc4\u5b58\u5668\u548c data \u5bc4\u5b58\u5668\u7684\u503c\u3002</p>"},{"location":"project-bonus/#_9","title":"\u5b9e\u9a8c\u62a5\u544a","text":"<ol> <li>\u8bf7\u5728\u5b9e\u9a8c\u62a5\u544a\u4e2d\u8be6\u7ec6\u63cf\u8ff0\u6bcf\u4e00\u6b65\u7684\u8fc7\u7a0b\u5e76\u914d\u6709\u9002\u5f53\u7684\u622a\u56fe\u548c\u89e3\u91ca\uff0c\u5bf9\u4e8e\u4eff\u771f\u8bbe\u8ba1\u548c\u4e0a\u677f\u9a8c\u8bc1\u7684\u7ed3\u679c\u4e5f\u5e94\u5f53\u6709\u9002\u5f53\u7684\u89e3\u91ca\u548c\u7167\u7247 </li> </ol> <p>\u7ec6\u5206\uff1a</p> <ul> <li>\u591a\u5468\u671f\u5904\u7406\u5668\u7684\u4eff\u771f\u901a\u8fc7 </li> <li>\u591a\u5468\u671f\u5904\u7406\u5668\u7684\u4e0b\u677f\u6d4b\u8bd5 </li> <li>\u4e32\u53e3\u7684\u4eff\u771f\u901a\u8fc7 </li> <li>\u4e32\u53e3\u7684\u4e0b\u677f\u6d4b\u8bd5\uff0c\u7ec8\u7aef\u663e\u793a\u81ea\u5df1\u7684\u5b66\u53f7 </li> </ul> <ol> <li> <p>\u9605\u8bfb uart \u6587\u4ef6\u5939\u4e0b\u7684\u4ee3\u7801\uff0c\u89e3\u91ca\u5904\u7406\u5668\u5982\u4f55\u6b63\u786e\u7684\u8fdb\u884c\u4e32\u53e3\u7684\u6570\u636e\u6536\u53d1</p> </li> <li> <p>\u4f7f\u7528\u5904\u7406\u5668\u8fdb\u884c\u4e32\u53e3\u6536\u53d1\u548c\u4f7f\u7528 lab4-2 \u7684 looptest \u6a21\u5757\u8fdb\u884c\u4e32\u53e3\u6536\u53d1\u76f8\u6bd4\u6709\u4ec0\u4e48\u4f18\u7f3a\u70b9\uff1f</p> </li> <li> <p>\u5c1d\u8bd5\u4fee\u6539\u6709\u9650\u72b6\u6001\u673a\uff0c\u6216\u8005\u5f15\u5165\u65b0\u7684\u6280\u672f\uff0c\u5bf9\u6211\u4eec\u7684\u591a\u5468\u671f\u5904\u7406\u5668\u7684\u6267\u884c\u6548\u7387\u52a0\u4ee5\u6539\u8fdb</p> </li> </ol>"},{"location":"project-bonus/#_10","title":"\u4ee3\u7801\u63d0\u4ea4","text":""},{"location":"project-bonus/#_11","title":"\u9a8c\u6536\u68c0\u67e5\u70b9","text":"<ul> <li>\u591a\u5468\u671f\u5904\u7406\u5668\u4eff\u771f\u5c55\u793a </li> <li>\u4e32\u53e3\u4eff\u771f\u5c55\u793a </li> <li>\u4ee3\u7801\u89e3\u91ca\u6216\u8bbe\u8ba1\u601d\u8def </li> <li>\u591a\u5468\u671f\u5904\u7406\u5668\u4e0b\u677f\u9a8c\u8bc1 </li> <li>\u4e32\u53e3\u4e0b\u677f\u9a8c\u8bc1 </li> </ul>"},{"location":"project-bonus/#_12","title":"\u63d0\u4ea4\u6587\u4ef6","text":"<p><code>src/project/</code> \u4e2d\u7f16\u5199\u7684 submit \u548c include \u7684\u4ee3\u7801</p>"},{"location":"pull/","title":"\u5982\u4f55\u63d0\u4ea4\u4f60\u7684\u4fee\u6539","text":"<p>\u9996\u5148\uff0c\u6211\u4eec\u975e\u5e38\u6b22\u8fce\u5404\u4f4d\u540c\u5b66\u5411\u672c\u4ed3\u5e93\u8d21\u732e\u81ea\u5df1\u7684\u4ee3\u7801\uff0cwe \u2764 contributor\uff01</p> <ol> <li>\u5728 ZJU Git \u4e2d\u6ce8\u518c\u4e00\u4e2a\u8d26\u53f7</li> <li> <p>\u63a5\u4e0b\u6765\u8fdb\u5165\u4ed3\u5e93\u9875\u9762\uff0c\u6211\u4eec fork \u4e00\u4efd\u4ed3\u5e93\u5230\u4f60\u7684\u8d26\u6237\u4e2d</p> <ol> <li>\u9996\u5148\u68c0\u67e5\u5f53\u524d\u4f60\u662f\u5426\u6b63\u5728\u6d4f\u89c8ZJU COMPUTER SYSTEM\u8d26\u6237\u4e0b\u7684\u4ed3\u5e93</li> <li>\u65e0\u8bef\u7684\u8bdd\uff0c\u70b9\u51fbFork\u6309\u94ae\u5373\u53ef\u590d\u523b\u4e00\u4efd\u5b98\u65b9\u4ed3\u5e93\u5230\u4f60\u7684\u8d26\u6237\u4e0b</li> </ol> <p></p> </li> <li> <p>\u5728\u5f39\u51fa\u7684\u9875\u9762\u4e2d\u5b8c\u6210\u590d\u523b</p> <ol> <li>\u9009\u62e9\u4f60\u7684\u5b66\u53f7\uff0c<code>https://git.zju.edu.cn/&lt;ID&gt;</code>\u5c31\u662f\u4f60\u81ea\u5df1\u8d26\u6237\u4e0b\u7684\u7a7a\u95f4</li> <li>\u70b9\u51fb\u8fdb\u5165\u4e0b\u4e00\u6b65</li> </ol> <p></p> </li> <li> <p>\u8fdb\u5165\u7f51\u9875\u7f16\u8f91\u5668</p> <ol> <li>\u9996\u5148\u68c0\u67e5\u5f53\u524d\u662f\u5426\u5728\u4f60\u7684\u8d26\u6237\u4e0b</li> <li>\u4f60\u5e94\u8be5\u4f1a\u770b\u5230\u590d\u523b\u6210\u529f\u7684\u6d88\u606f</li> <li>\u70b9\u51fb\u8fdb\u5165\u7f51\u9875\u7f16\u8f91\u5668</li> </ol> <p></p> </li> <li> <p>\u5b8c\u6210\u4fee\u6539</p> <ol> <li>\u6211\u4eec\u5b9e\u9a8c\u624b\u518c\u7684\u539f\u6587\u5728<code>doc</code>\u76ee\u5f55\u4e0b</li> <li>\u5728\u7f16\u8f91\u5668\u4e2d\u6dfb\u52a0\u4f60\u7684\u4fee\u6539</li> <li>\u70b9\u51fb\u63d0\u4ea4\u4fee\u6539</li> </ol> <p></p> </li> <li> <p>\u63d0\u4ea4\u4fee\u6539</p> <ol> <li>\u518d\u6b21\u68c0\u67e5\u4f60\u7684\u4fee\u6539\u662f\u5426\u65e0\u8bef</li> <li>\u5c06\u4f60\u7684\u4fee\u6539\u63d0\u4ea4\u5230\u4e00\u4e2a\u65b0\u7684\u5206\u652f\u4e0a\uff0c\u4e3a\u8fd9\u4e2a\u5206\u652f\u547d\u540d</li> <li>\u6dfb\u52a0\u63d0\u4ea4\u7684\u5177\u4f53\u4fe1\u606f</li> <li>\u5b8c\u6210\u63d0\u4ea4</li> </ol> <p></p> </li> <li> <p>\u5c06\u4f60\u7684\u63d0\u4ea4\u53d1\u9001\u5230\u5b98\u65b9\u4ed3\u5e93</p> <ol> <li>\u518d\u6b21\u56de\u5230\u5b98\u65b9\u4ed3\u5e93\u7684\u9875\u9762</li> <li>\u8fdb\u53bbMerge requests\u9875\u9762</li> <li>\u53d1\u8d77\u4e00\u4e2a\u548c\u5e76\u8bf7\u6c42</li> </ol> <p></p> </li> <li> <p>\u521b\u5efa\u548c\u5e76\u8bf7\u6c42</p> <ol> <li>\u9009\u62e9\u4f60\u7684\u4ed3\u5e93\u4ee5\u53ca\u4f60\u521a\u521a\u65b0\u5efa\u7684\u5206\u652f</li> <li>\u9009\u62e9zju-sys\u7684sys1-sp24\u4ed3\u5e93\u4e0b\u7684master\u5206\u652f</li> <li>\u53d1\u8d77\u8bf7\u6c42</li> </ol> <p></p> </li> <li> <p>\u8fdb\u4e00\u6b65\u8865\u5145\u4fe1\u606f</p> <ol> <li>\u63cf\u8ff0\u8fd9\u4e2a\u548c\u5e76\u8bf7\u6c42\u7684\u76ee\u7684\uff0c\u4ee5\u53ca\u4f60\u505a\u4e86\u54ea\u4e9b\u4fee\u6539</li> <li>\u521b\u5efa\u5408\u5e76\u8bf7\u6c42</li> </ol> <p></p> </li> <li> <p>\u5b8c\u6210\u540e\u4e00\u4e2a\u548c\u5e76\u8bf7\u6c42\u5c31\u6210\u529f\u53d1\u8d77\u4e86\uff0c\u5982\u679c\u957f\u65f6\u95f4\u6ca1\u6709\u5f97\u5230 review \u5f88\u53ef\u80fd\u662f TA \u4eec\u6ca1\u6709\u6536\u5230\u90ae\u4ef6\u63d0\u9192\uff0c\u4f60\u53ef\u4ee5\u9489\u9489\u79c1\u6233\u6216\u662f\u5728\u5408\u5e76\u8bf7\u6c42\u4e2d@\u4ed6\u4eec</p> </li> </ol> <p>\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u4f60\u7684\u4fee\u6539\u9700\u8981\u7ecf\u8fc7\u591a\u6b21\u4fee\u6539\u624d\u4f1a\u88ab\u4e0a\u6e38\u63a5\u53d7\u3002\u5982\u679c\u63a5\u6536\u5230\u4fee\u6539\u610f\u89c1\uff0c\u8bf7\u8fd4\u56de\u7b2c 4 \u6b65\u8fdb\u884c\u4fee\u6539\uff0c\u4f46\u662f\u4e0d\u540c\u7684\u662f\u5728\u7b2c 5 \u6b65\u65f6\u5de6\u4e0a\u89d2\u9009\u62e9\u4f60\u521a\u521a\u65b0\u5efa\u7684\u5206\u652f\uff0c\u7b2c 6 \u6b65\u76f4\u63a5\u63d0\u4ea4\u5230\u521a\u521a\u65b0\u5efa\u7684\u5206\u652f\u4e0d\u9700\u8981\u518d\u521b\u5efa\u65b0\u7684\u4e86\u3002</p>"},{"location":"setup/","title":"\u5b9e\u9a8c\u73af\u5883\u914d\u7f6e","text":""},{"location":"setup/#lab0-1linux","title":"\u3010Lab0-1\u3011Linux \u73af\u5883\u914d\u7f6e","text":"<p>\u4ee5\u4e0b\u4e24\u79cd\u65b9\u6848\u4efb\u9009\u5176\u4e00\uff1a</p>"},{"location":"setup/#_2","title":"\u65b9\u6848\u4e00 \u865a\u62df\u673a","text":"<ol> <li>\u4ece\u5b98\u7f51\u4e0b\u8f7d\u684c\u9762\u7248\u955c\u50cf</li> <li>\u4e0b\u8f7d\u865a\u62df\u673a\u8f6f\u4ef6\uff0cVMware Workstation Player \u6216\u8005 Virtual Box\u5747\u53ef</li> <li>\u865a\u62df\u673a\u8f6f\u4ef6\u7684\u4f7f\u7528\u65b9\u6cd5\u7c7b\u4f3c\uff0c\u4e0b\u9762\u4ee5VMware\u4e3a\u4f8b\u3002\u9996\u5148\u65b0\u5efa\u865a\u62df\u673a\uff0c\u5e76\u9009\u62e9\u4e0b\u8f7d\u7684\u955c\u50cf\u6587\u4ef6      </li> <li>\u6709\u7684\u8f6f\u4ef6\u53ef\u80fd\u4f1a\u89e6\u53d1\u7b80\u6613\u5b89\u88c5\u7684\u529f\u80fd\uff0c\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801\u5373\u53ef          \u5982\u679c\u4f7f\u7528\u5176\u4ed6\u8f6f\u4ef6\u6ca1\u6709\u89e6\u53d1\u6b64\u6b65\u4e5f\u6ca1\u5173\u7cfb\uff0c\u5728\u540e\u7eed\u7684\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u4f1a\u50cf\u4e0b\u56fe\u4e00\u6837\u8981\u6c42\u4f60\u518d\u6b21\u8f93\u5165\u7684     </li> <li>\u5c06\u865a\u62df\u673a\u7684\u8def\u5f84\u4fee\u6539\u5230\u7a7a\u4f59\u7a7a\u95f4\u8f83\u5927\u7684\u76d8\u4e0a\uff0c\u5e76\u4e14\u4e3a\u5b83\u5206\u914d 50GB \u4ee5\u4e0a\u7684\u7a7a\u95f4\u3002\u5982\u679c\u4f60\u6253\u7b97\u5c06 Vivado \u5b89\u88c5\u5230\u865a\u62df\u673a\u4e0a\uff08\u4f7f\u7528 mac \u7684\u540c\u5b66\u5fc5\u987b\u8fd9\u4e48\u9009\u62e9\uff09\uff0c\u90a3\u4e48\u9700\u8981\u81f3\u5c11\u5206\u914d 100GB\u3002\u7b49\u5230\u7a7a\u95f4\u4e0d\u591f\u518d\u53bb\u6269\u5bb9\u4f1a\u6bd4\u8f83\u9ebb\u70e6\uff0c\u5efa\u8bae\u63d0\u524d\u5212\u5206\u51fa\u8db3\u591f\u7684\u7a7a\u95f4      </li> <li>\u9009\u62e9\u6700\u5c0f\u5316\u5b89\u88c5\uff0c\u5e76\u5728\u4e0b\u4e00\u6b65\u4e2d\u9009\u62e9\u64e6\u9664\u6574\u4e2a\u78c1\u76d8\u5b89\u88c5      </li> <li>\u5b89\u88c5\u6210\u529f\u540e\u6253\u5f00\u4e00\u4e2a\u7ec8\u7aef\uff0c\u6267\u884c\u547d\u4ee4 <code>xeyes</code>\uff0c\u6548\u679c\u5982\u4e0b\uff1a     </li> </ol>"},{"location":"setup/#wsl","title":"\u65b9\u6848\u4e8c WSL","text":"<ol> <li>\u9996\u5148\u76f4\u63a5\u5728\u5e94\u7528\u5546\u5e97\u4e2d\u641c\u7d22 ubuntu\uff0c\u5b89\u88c5\u84dd\u6846\u9009\u4e2d\u7684\u5e94\u7528     </li> <li> <p>\u4e0d\u51fa\u610f\u5916\u7684\u8bdd\uff0c\u7b2c\u4e00\u6b21\u542f\u52a8\u5e94\u8be5\u4f1a\u62a5\u9519 0x8007019e\uff0c\u5982\u679c\u6ca1\u6709\u76f4\u63a5\u5230\u7b2c 4 \u6b65</p> <ul> <li>\u5982\u679c\u662fWindows 11\u7684\u7cfb\u7edf\uff0c\u53ef\u80fd\u4f1a\u62a5\u9519 0x800701bc\uff0c\u6b64\u65f6\u53ef\u4ee5\u8df3\u8f6c\u5230\u7b2c 5 \u6b65\uff0c\u6267\u884c\u5b8c\u540e\u518d\u56de\u5230\u8fd9\u91cc</li> </ul> <p></p> </li> <li> <p>\u4ee5\u7ba1\u7406\u5458\u8eab\u4efd\u6253\u5f00 Power Shell\uff0c\u8f93\u5165\u4ee5\u4e0b\u4e24\u7ec4\u547d\u4ee4\u4e2d\u7684\u4efb\u4e00\u4e00\u7ec4\u6267\u884c\uff0c\u5b8c\u6210\u540e\u91cd\u542f\uff1a     <pre><code>dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart\ndism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart\n:: Or\nEnable-WindowsOptionalFeature -Online -FeatureName VirtualMachinePlatform\nEnable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux\n</code></pre></p> <p></p> <p></p> </li> <li> <p>\u542f\u52a8WSL\uff0c\u53ef\u4ee5\u770b\u5230\u6210\u529f\u8fdb\u5165 Linux \u73af\u5883</p> <p></p> <p>\u63a5\u7740\u8f93\u5165\u4e0b\u9762\u7684\u547d\u4ee4\uff0c\u4e0d\u51fa\u610f\u5916\u7684\u8bdd\u5e94\u8be5\u4f1a\u62a5\u9519 <code>Error: Can't open display:</code>\u3002</p> <p>\u5982\u679c\u6ca1\u62a5\u9519\u5f39\u51fa\u4e86\u4e00\u53cc\u5c0f\u773c\u775b\u8868\u660e\u73af\u5883\u6210\u529f\u914d\u7f6e\uff0c\u5ffd\u7565\u4e0b\u9762\u7684\u6b65\u9aa4\u5373\u53ef\u3002</p> <pre><code>sudo apt update\nsudo apt install x11-apps\nxeyes\n</code></pre> </li> <li> <p>\u63a5\u4e0b\u6765\u914d\u7f6e WSL \u7684\u56fe\u5f62\u5316\u754c\u9762\uff0c\u4e3a\u4e86\u65b9\u4fbf\u8d77\u89c1\uff0c\u6211\u4eec\u9009\u62e9\u5347\u7ea7 WSL1 \u4e3a WSL2 \u7684\u65b9\u5f0f</p> <ul> <li>\u6309\u987a\u5e8f\u6267\u884c\u4e0b\u9762\u7684\u6307\u4ee4\uff0c\u9996\u5148\u5148\u68c0\u67e5\u4e0b\u4f60\u7684WSL\u7684\u7248\u672c\uff0c\u5982\u679c\u662fWSL1\u7ee7\u7eed\u6267\u884c\u5269\u4f59\u547d\u4ee4\uff1b</li> <li>\u5982\u679c\u5df2\u7ecf\u662fWSL2\u4e86\uff0c\u8d8a\u8fc7\u7b2c\u4e8c\u6761\u547d\u4ee4\u76f4\u63a5\u6267\u884c\u7b2c\u4e09\u6761\u547d\u4ee4\u5373\u53ef\uff0c\u6267\u884c\u7684\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u62a5\u9519\u8981\u6c42\u4f60\u6253\u5f00\u4e00\u4e2aWindows\u7684\u66f4\u65b0\u9009\u9879\u3002</li> </ul> <pre><code>wsl --list --verbose\nwsl --set-version Ubuntu-22.04 2\nwsl --update\n</code></pre> <p>\u5982\u679c\u6267\u884c\u7b2c\u4e8c\u6761\u6307\u4ee4\u9047\u5230\u56fe\u4e2d\u7684\u9519\u8bef\uff0c\u8bf4\u660e\u4f60\u9700\u8981\u8fdb\u5165BIOS\u4e2d\u5c06\u5904\u7406\u5668\u7684\u865a\u62df\u5316\u529f\u80fd\u6253\u5f00\u3002</p> <p>\u8bf7\u6839\u636e\u4f60\u6b63\u5728\u4f7f\u7528\u7684\u4e3b\u677f\u5382\u5546\u81ea\u884c\u68c0\u7d22\u5982\u4f55\u8fdb\u5165BIOS\uff0c\u8fdb\u5165BIOS\u540eAMD CPU\u627eAMD Secure Virtual Machine (AMD SVM)\u9009\u9879\u5f00\u542f\uff0cIntel CPU\u627eIntel Virtualization Technology (Intel VT-x)\u9009\u9879\u5f00\u542f\u3002</p> <p></p> </li> <li> <p>\u6700\u7ec8\u7684\u6548\u679c\u5e94\u8be5\u662f\u8fd9\u6837\u7684\uff1a     </p> </li> </ol>"},{"location":"setup/#lab0-2vivado","title":"\u3010Lab0-2\u3011Vivado \u5b89\u88c5","text":"<ol> <li>\u4ece\u5b98\u7f51\u4e0b\u8f7dVivado ML Edition 2022.2<ul> <li>\u5982\u679c\u7cfb\u7edf\u7a7a\u95f4\u4e0d\u8db3\uff0c\u53ef\u4ee5\u9009\u62e9Windows Self Extracting Web Installer\u4f7f\u7528\u5728\u7ebf\u4e0b\u8f7d\u5de5\u5177\uff0c\u4e0b\u8f7d\u8fc7\u7a0b\u9700\u8981\u4fdd\u6301\u8054\u7f51</li> <li>Linux\u4e0b\u9009\u62e9Linux Self Extracting Web Installer\uff0c\u4e0b\u8f7d\u540e\u5728\u7ec8\u7aef\u8f93\u5165<code>sh &lt;download file name&gt;.bin</code>\uff0c\u4e0b\u8f7d\u8fc7\u7a0b\u540c\u6837\u9700\u8981\u4fdd\u6301\u8054\u7f51</li> <li>\u5982\u679c\u7a7a\u95f4\u8db3\u591f\uff0c\u9009\u62e9\u6700\u5927\u7684Xilinx Unified Installer\uff0c\u4e0b\u8f7d\u540e\u8fdb\u884c\u89e3\u538b\uff0c\u89e3\u538b\u540e\u53cc\u51fbxsetup.exe\u8fdb\u884c\u5b89\u88c5</li> <li>Linux\u4e0b\u5728\u7ec8\u7aef\u4e2d\u6267\u884c<code>sh xsetup</code>\u3002</li> </ul> </li> <li>\u6b64\u5904\u9009\u62e9vivado     </li> <li>\u6b64\u5904\u9009\u62e9standard     </li> <li>\u6b64\u5904\u4fee\u6539\u4e3a\u4f60\u7684\u8def\u5f84\u3002     </li> <li>\u5b89\u88c5\u5b8c\u6210\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u4ece\u684c\u9762\u7684\u56fe\u6807\u542f\u52a8 vivado</li> </ol> <p>\u6211\u4eec\u540e\u7eed\u7684\u7684\u5b9e\u9a8c\u4e3b\u8981\u4f7f\u7528\u547d\u4ee4\u884c\u7684\u65b9\u5f0f\uff0c\u65b9\u5f0f\u5982\u4e0b\uff1a</p> <ul> <li>Widows \u5728 CMD \u4e2d\u5148\u52a0\u8f7d vivado \u5b89\u88c5\u76ee\u5f55\u4e0b\u7684\u8bbe\u7f6e\u6587\u4ef6 settings64.bat\uff0cLinux\u4e0b\u4e3a <code>source .../settings64.sh</code></li> <li>\u7136\u540e\u76f4\u63a5\u8f93\u5165 vivado \u5373\u53ef</li> </ul> <p></p>"}]}