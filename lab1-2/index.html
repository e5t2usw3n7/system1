<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="http://zju-sys.pages.zjusct.io/sys1/sys1-sp24/lab1-2/" rel="canonical"/>
<link href="../lab1-1/" rel="prev"/>
<link href="../lab2-1/" rel="next"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.0, mkdocs-material-9.5.34" name="generator"/>
<title>第二部分 - 浙江大学24年春夏系统一实验</title>
<link href="../assets/stylesheets/main.35f28582.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=JetBrains+Mono:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"JetBrains Mono";--md-code-font:"JetBrains Mono"}</style>
<link href="../css/heti.css" rel="stylesheet"/>
<link href="https://cdn.tonycrane.cc/utils/katex.min.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:500,500i,600,600i&amp;display=fallback" rel="stylesheet"/>
<link href="../css/custom.css" rel="stylesheet"/>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#1-2">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="浙江大学24年春夏系统一实验" class="md-header__button md-logo" data-md-component="logo" href=".." title="浙江大学24年春夏系统一实验">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            浙江大学24年春夏系统一实验
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              第二部分
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://git.zju.edu.cn/zju-sys/sys1/sys1-sp24" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    zju-sys/sys1/sys1-sp24
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="浙江大学24年春夏系统一实验" class="md-nav__button md-logo" data-md-component="logo" href=".." title="浙江大学24年春夏系统一实验">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    浙江大学24年春夏系统一实验
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://git.zju.edu.cn/zju-sys/sys1/sys1-sp24" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    zju-sys/sys1/sys1-sp24
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
<span class="md-ellipsis">
    首页
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    实验指导零
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            实验指导零
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../lab0-1/">
<span class="md-ellipsis">
    第一部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab0-2/">
<span class="md-ellipsis">
    第二部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab0-2-appendix/">
<span class="md-ellipsis">
    附录：verilog 与电路
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    实验指导一
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            实验指导一
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../lab1-1/">
<span class="md-ellipsis">
    第一部分
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    第二部分
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    第二部分
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#_1">
<span class="md-ellipsis">
      实验目的
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
<span class="md-ellipsis">
      实验环境
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
<span class="md-ellipsis">
      背景知识
    </span>
</a>
<nav aria-label="背景知识" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#decoder">
<span class="md-ellipsis">
      变量译码器（decoder）
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_4">
<span class="md-ellipsis">
      复合多路选择器
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_5">
<span class="md-ellipsis">
      七段数码管
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_6">
<span class="md-ellipsis">
      动态时分复用
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_7">
<span class="md-ellipsis">
      实验步骤
    </span>
</a>
<nav aria-label="实验步骤" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_8">
<span class="md-ellipsis">
      实验前准备
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_9">
<span class="md-ellipsis">
      设计七段数码管译码器
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#32">
<span class="md-ellipsis">
      实现 32 位复合四选一多路选择器
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_10">
<span class="md-ellipsis">
      综合下板验证
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#50">
<span class="md-ellipsis">
      实验报告 50%
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_11">
<span class="md-ellipsis">
      代码提交
    </span>
</a>
<nav aria-label="代码提交" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#55">
<span class="md-ellipsis">
      验收检查点 55%
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_12">
<span class="md-ellipsis">
      提交文件
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    实验指导二
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            实验指导二
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../lab2-1/">
<span class="md-ellipsis">
    第一部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab2-1-appendix/">
<span class="md-ellipsis">
    附录：参数式编程
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    实验指导三
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            实验指导三
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../lab3-1/">
<span class="md-ellipsis">
    第一部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab3-2/">
<span class="md-ellipsis">
    第二部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab3-3/">
<span class="md-ellipsis">
    第三部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab3-1-appendix/">
<span class="md-ellipsis">
    附录：reg 与时序电路
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab3-3-appendix/">
<span class="md-ellipsis">
    附录：阻塞赋值
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    实验指导四
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            实验指导四
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../lab4-1/">
<span class="md-ellipsis">
    第一部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab4-2/">
<span class="md-ellipsis">
    第二部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab4-1-appendix/">
<span class="md-ellipsis">
    附录：SystemVerilog 高级语法
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    实验指导五
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            实验指导五
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../lab5-1/">
<span class="md-ellipsis">
    第一部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab5-2/">
<span class="md-ellipsis">
    第二部分
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    实验指导 project
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            实验指导 project
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../project-1/">
<span class="md-ellipsis">
    第一部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../project-2/">
<span class="md-ellipsis">
    第二部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../project-bonus/">
<span class="md-ellipsis">
    Bonus
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../project-2-appendix/">
<span class="md-ellipsis">
    附录：处理器差分测试
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../setup/">
<span class="md-ellipsis">
    环境配置
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../issue/">
<span class="md-ellipsis">
    提交提问
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../pull/">
<span class="md-ellipsis">
    提交修改
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#_1">
<span class="md-ellipsis">
      实验目的
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
<span class="md-ellipsis">
      实验环境
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
<span class="md-ellipsis">
      背景知识
    </span>
</a>
<nav aria-label="背景知识" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#decoder">
<span class="md-ellipsis">
      变量译码器（decoder）
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_4">
<span class="md-ellipsis">
      复合多路选择器
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_5">
<span class="md-ellipsis">
      七段数码管
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_6">
<span class="md-ellipsis">
      动态时分复用
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_7">
<span class="md-ellipsis">
      实验步骤
    </span>
</a>
<nav aria-label="实验步骤" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_8">
<span class="md-ellipsis">
      实验前准备
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_9">
<span class="md-ellipsis">
      设计七段数码管译码器
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#32">
<span class="md-ellipsis">
      实现 32 位复合四选一多路选择器
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_10">
<span class="md-ellipsis">
      综合下板验证
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#50">
<span class="md-ellipsis">
      实验报告 50%
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_11">
<span class="md-ellipsis">
      代码提交
    </span>
</a>
<nav aria-label="代码提交" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#55">
<span class="md-ellipsis">
      验收检查点 55%
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_12">
<span class="md-ellipsis">
      提交文件
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://git.zju.edu.cn/zju-sys/sys1/sys1-sp24/-/blob/master/docs/lab1-2.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"></path></svg>
</a>
<h1 id="1-2">实验<span><span class="heti-spacing"> </span>1-2</span>：七段数码管译码器设计与应用<a class="headerlink" href="#1-2" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h1>
<h2 id="_1">实验目的<a class="headerlink" href="#_1" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h2>
<ul>
<li>掌握使用<span class="heti-skip"><span class="heti-spacing"> </span>verilog<span class="heti-spacing"> </span></span>语言进行电路设计的方法</li>
<li>掌握七段数码管显示译码器（MC14495）的内部电路结构及其设计</li>
<li>实现<a href="https://digilent.com/reference/programmable-logic/nexys-a7/start"><span class="heti-skip"><span class="heti-spacing"> </span>Nexys A7<span class="heti-spacing"> </span></span></a>开发板七段数码管十六进制数显示</li>
</ul>
<h2 id="_2">实验环境<a class="headerlink" href="#_2" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h2>
<ul>
<li><span>EDA<span class="heti-spacing"> </span></span>工具：<a href="https://ngspice.sourceforge.io">Ngspice</a>，<a href="https://github.com/logisim-evolution/logisim-evolution">LogSim Evolution</a></li>
<li>操作系统：Windows 10+ 22H2，Ubuntu 22.04+</li>
<li>VHDL：Verilog</li>
</ul>
<h2 id="_3">背景知识<a class="headerlink" href="#_3" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h2>
<h3 id="decoder">变量译码器（decoder）<a class="headerlink" href="#decoder" title="Permanent link">¶</a></h3>
<p>译码器（decoder）是一类多输入多输出组合逻辑电路器件，其可以分为：变量译码和显示译码两类。</p>
<ul>
<li>变量译码器一般是一种较少输入变为较多输出的器件，常见的有<span class="heti-skip"><span class="heti-spacing"> </span>n<span class="heti-spacing"> </span></span>线<span class="heti-skip"><span class="heti-spacing"> </span>-2<span class="heti-spacing"> </span></span><sup><span class="heti-skip"><span class="heti-spacing"> </span>n<span class="heti-spacing"> </span></span></sup>线译码和<span class="heti-skip"><span class="heti-spacing"> </span>8421BCD<span class="heti-spacing"> </span></span>码译码两类</li>
<li>显示译码器用来将二进制数转换成对应的七段码，一般其可分为驱动<span class="heti-skip"><span class="heti-spacing"> </span>LED<span class="heti-spacing"> </span></span>和驱动<span class="heti-skip"><span class="heti-spacing"> </span>LCD<span class="heti-spacing"> </span></span>两类</li>
</ul>
<p></p><center>
<img alt="" src="../img/lab1-2/3.png"/>
</center>
<p>广义的译码器是指将二进制编码输入转换为任意的编码输出，且这个转换关系可以不满足单射。我们反思一下，其实一个逻辑表达式或者说一张真值表，就是一个输入到输出的编码对应关系，输入天然满足二进制编码，如果我们将输出定义为一种新的编码，那么任何有限长度的输入输出映射对应的电路都可以称之为<strong>编码器</strong>。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span>
<span class="normal"><a href="#__codelineno-0-2">2</a></span>
<span class="normal"><a href="#__codelineno-0-3">3</a></span>
<span class="normal"><a href="#__codelineno-0-4">4</a></span>
<span class="normal"><a href="#__codelineno-0-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a>输入输出关系 &lt;=&gt; 逻辑表达式 &lt;=&gt; 真值表 &lt;=&gt; 编码器
<a id="__codelineno-0-2" name="__codelineno-0-2"></a>                    /\
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>                    ||
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>                    \/
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>                 组合电路
</code></pre></div></td></tr></table></div>
<h3 id="_4">复合多路选择器<a class="headerlink" href="#_4" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<p>多路选择器可以根据<span class="heti-skip"><span class="heti-spacing"> </span>selector<span class="heti-spacing"> </span></span>从多个单<span class="heti-skip"><span class="heti-spacing"> </span>bit<span class="heti-spacing"> </span></span>输入中选择单<span class="heti-skip"><span class="heti-spacing"> </span>bit<span class="heti-spacing"> </span></span>的输出，那如果我们需要从多组输入中根据<span class="heti-skip"><span class="heti-spacing"> </span>selector<span class="heti-spacing"> </span></span>选出单组输出呢？可以使用复合多路选择器。</p>
<details class="abstract">
<summary>多个一位多路选择器组合</summary>
<p>复合多路选择器在硬件实现上是用多个一位多路选择器组合而成</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="k">module</span><span class="w"> </span><span class="n">Mux4T1_4</span><span class="p">(</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I0</span><span class="p">,</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I1</span><span class="p">,</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I2</span><span class="p">,</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I3</span><span class="p">,</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">S</span><span class="p">,</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">O</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="p">);</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">    </span><span class="n">Mux4T1_1</span><span class="p">({</span><span class="n">I3</span><span class="p">[</span><span class="mh">0</span><span class="p">],</span><span class="w"> </span><span class="n">I2</span><span class="p">[</span><span class="mh">0</span><span class="p">],</span><span class="w"> </span><span class="n">I1</span><span class="p">[</span><span class="mh">0</span><span class="p">],</span><span class="w"> </span><span class="n">I0</span><span class="p">[</span><span class="mh">0</span><span class="p">]},</span><span class="w"> </span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">O</span><span class="p">[</span><span class="mh">0</span><span class="p">]);</span>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">    </span><span class="n">Mux4T1_1</span><span class="p">({</span><span class="n">I3</span><span class="p">[</span><span class="mh">1</span><span class="p">],</span><span class="w"> </span><span class="n">I2</span><span class="p">[</span><span class="mh">1</span><span class="p">],</span><span class="w"> </span><span class="n">I1</span><span class="p">[</span><span class="mh">1</span><span class="p">],</span><span class="w"> </span><span class="n">I0</span><span class="p">[</span><span class="mh">1</span><span class="p">]},</span><span class="w"> </span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">O</span><span class="p">[</span><span class="mh">1</span><span class="p">]);</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">    </span><span class="n">Mux4T1_1</span><span class="p">({</span><span class="n">I3</span><span class="p">[</span><span class="mh">2</span><span class="p">],</span><span class="w"> </span><span class="n">I2</span><span class="p">[</span><span class="mh">2</span><span class="p">],</span><span class="w"> </span><span class="n">I1</span><span class="p">[</span><span class="mh">2</span><span class="p">],</span><span class="w"> </span><span class="n">I0</span><span class="p">[</span><span class="mh">2</span><span class="p">]},</span><span class="w"> </span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">O</span><span class="p">[</span><span class="mh">2</span><span class="p">]);</span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">    </span><span class="n">Mux4T1_1</span><span class="p">({</span><span class="n">I3</span><span class="p">[</span><span class="mh">3</span><span class="p">],</span><span class="w"> </span><span class="n">I2</span><span class="p">[</span><span class="mh">3</span><span class="p">],</span><span class="w"> </span><span class="n">I1</span><span class="p">[</span><span class="mh">3</span><span class="p">],</span><span class="w"> </span><span class="n">I0</span><span class="p">[</span><span class="mh">3</span><span class="p">]},</span><span class="w"> </span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">O</span><span class="p">[</span><span class="mh">3</span><span class="p">]);</span>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="k">endmodule</span>
</code></pre></div></td></tr></table></div>
<p><code>{}</code>是<code>[i]</code>的反操作，<code>{ W0, W1, W2, ..., Wn }</code>将线路数组<span class="heti-skip"><span class="heti-spacing"> </span>W0, W1, ..., Wn<span class="heti-spacing"> </span></span>组拼接成一个增广的线路数组：</p>
<ul>
<li><code>LEN({ W0, W1, W2, ..., Wn }) = Sum(LEN(W0), LEN(W1), ..., LEN(Wn))</code></li>
<li><code>{ W0, W1, W2, ..., Wn }</code> 的线路从高到低的输入和<span class="heti-skip"><span class="heti-spacing"> </span>W0, W1, ..., Wn<span class="heti-spacing"> </span></span>内部从高到低的输出保持一致</li>
</ul>
</details>
<details class="abstract">
<summary>与或形式</summary>
<p>也可以用最朴素的逻辑门的形式得到符合多路选择器电路，不过这个电路未免过于复杂，我们可以用一些<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>语法进行简化。
</p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="k">module</span><span class="w"> </span><span class="n">Mux4T1_4</span><span class="p">(</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I0</span><span class="p">,</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I1</span><span class="p">,</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I2</span><span class="p">,</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I3</span><span class="p">,</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">S</span><span class="p">,</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">O</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="p">);</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">O</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">&amp;~</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span><span class="o">&amp;</span><span class="n">I0</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">&amp;~</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span><span class="o">&amp;</span><span class="n">I1</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">&amp;</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span><span class="o">&amp;</span><span class="n">I2</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">&amp;</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span><span class="o">&amp;</span><span class="n">I3</span><span class="p">[</span><span class="mh">0</span><span class="p">];</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">O</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">&amp;~</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span><span class="o">&amp;</span><span class="n">I0</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">&amp;~</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span><span class="o">&amp;</span><span class="n">I1</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">&amp;</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span><span class="o">&amp;</span><span class="n">I2</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">&amp;</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span><span class="o">&amp;</span><span class="n">I3</span><span class="p">[</span><span class="mh">1</span><span class="p">];</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">O</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">&amp;~</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span><span class="o">&amp;</span><span class="n">I0</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">&amp;~</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span><span class="o">&amp;</span><span class="n">I1</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">&amp;</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span><span class="o">&amp;</span><span class="n">I2</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">&amp;</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span><span class="o">&amp;</span><span class="n">I3</span><span class="p">[</span><span class="mh">2</span><span class="p">];</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">O</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">&amp;~</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span><span class="o">&amp;</span><span class="n">I0</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">&amp;~</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span><span class="o">&amp;</span><span class="n">I1</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">&amp;</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span><span class="o">&amp;</span><span class="n">I2</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">&amp;</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span><span class="o">&amp;</span><span class="n">I3</span><span class="p">[</span><span class="mh">3</span><span class="p">];</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="k">endmodule</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>
<p>向量操作
    两个向量的每个 bit 依次做与、或、异或、取反操作，得到向量输出。
</p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span>
<span class="normal"><a href="#__codelineno-3-4">4</a></span>
<span class="normal"><a href="#__codelineno-3-5">5</a></span>
<span class="normal"><a href="#__codelineno-3-6">6</a></span>
<span class="normal"><a href="#__codelineno-3-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a>    wire [3:0] a;
<a id="__codelineno-3-2" name="__codelineno-3-2"></a>    wire [3:0] b;
<a id="__codelineno-3-3" name="__codelineno-3-3"></a>    wire [3:0] c [3:0];
<a id="__codelineno-3-4" name="__codelineno-3-4"></a>    assign c[0] = a &amp; b;
<a id="__codelineno-3-5" name="__codelineno-3-5"></a>    assign c[1] = a | b;
<a id="__codelineno-3-6" name="__codelineno-3-6"></a>    assign c[2] = a ^ b;
<a id="__codelineno-3-7" name="__codelineno-3-7"></a>    assign c[3] = ~a;
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>扩展操作
    <code>{}</code>内的线路会被扩展 N 份，常用于符号扩展、0 扩展、一个输出扩展为向量输出等场景
</p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a>    wire a;
<a id="__codelineno-4-2" name="__codelineno-4-2"></a>    wire [3:0] b;
<a id="__codelineno-4-3" name="__codelineno-4-3"></a>    assign b = {4{a}};
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>归约操作
    将一个向量的所有 bit 或、与、异或起来。
</p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span>
<span class="normal"><a href="#__codelineno-5-2">2</a></span>
<span class="normal"><a href="#__codelineno-5-3">3</a></span>
<span class="normal"><a href="#__codelineno-5-4">4</a></span>
<span class="normal"><a href="#__codelineno-5-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a>    wire [3:0] a [2:0];
<a id="__codelineno-5-2" name="__codelineno-5-2"></a>    wire b [2:0];
<a id="__codelineno-5-3" name="__codelineno-5-3"></a>    assign b[0] = |a[0];
<a id="__codelineno-5-4" name="__codelineno-5-4"></a>    assign b[1] = &amp;a[1];
<a id="__codelineno-5-5" name="__codelineno-5-5"></a>    assign b[2] = ^a[2];
</code></pre></div></td></tr></table></div>
</li>
</ul>
<p>于是上述代码可以化简为：
</p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span>
<span class="normal"><a href="#__codelineno-6-14">14</a></span>
<span class="normal"><a href="#__codelineno-6-15">15</a></span>
<span class="normal"><a href="#__codelineno-6-16">16</a></span>
<span class="normal"><a href="#__codelineno-6-17">17</a></span>
<span class="normal"><a href="#__codelineno-6-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="k">module</span><span class="w"> </span><span class="n">Mux4T1_4</span><span class="p">(</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I0</span><span class="p">,</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I1</span><span class="p">,</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I2</span><span class="p">,</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I3</span><span class="p">,</span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">S</span><span class="p">,</span>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">O</span>
<a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="p">);</span>
<a id="__codelineno-6-9" name="__codelineno-6-9"></a>
<a id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">sel</span><span class="p">;</span>
<a id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">sel</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">&amp;~</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">];</span>
<a id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">sel</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">&amp;~</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">];</span>
<a id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">sel</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">&amp;</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">];</span>
<a id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">sel</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">&amp;</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">];</span>
<a id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">O</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mh">4</span><span class="p">{</span><span class="n">sel</span><span class="p">[</span><span class="mh">0</span><span class="p">]}}</span><span class="o">&amp;</span><span class="n">I0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="mh">4</span><span class="p">{</span><span class="n">sel</span><span class="p">[</span><span class="mh">1</span><span class="p">]}}</span><span class="o">&amp;</span><span class="n">I1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="mh">4</span><span class="p">{</span><span class="n">sel</span><span class="p">[</span><span class="mh">2</span><span class="p">]}}</span><span class="o">&amp;</span><span class="n">I2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="mh">4</span><span class="p">{</span><span class="n">sel</span><span class="p">[</span><span class="mh">3</span><span class="p">]}}</span><span class="o">&amp;</span><span class="n">I3</span><span class="p">;</span>
<a id="__codelineno-6-16" name="__codelineno-6-16"></a><span class="w">    </span><span class="c1">// assign O = {LEN{cond0}}&amp;data[0] | {LEN{cond1}}&amp;data[1] | ... | {LEN{condN}}&amp;data[N]</span>
<a id="__codelineno-6-17" name="__codelineno-6-17"></a>
<a id="__codelineno-6-18" name="__codelineno-6-18"></a><span class="k">endmodule</span>
</code></pre></div></td></tr></table></div>
</details>
<details class="abstract">
<summary>使用<span class="heti-skip"><span class="heti-spacing"> </span>?:<span class="heti-spacing"> </span></span>语法</summary>
<p>实际上<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>提供了更简洁的复合多路选择器的语法：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-7-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-7-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-7-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-7-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-7-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-7-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-7-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-7-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-7-10">10</a></span>
<span class="normal"><a href="#__codelineno-7-11">11</a></span>
<span class="normal"><a href="#__codelineno-7-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="k">module</span><span class="w"> </span><span class="n">Mux4T1_4</span><span class="p">(</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I0</span><span class="p">,</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I1</span><span class="p">,</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I2</span><span class="p">,</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I3</span><span class="p">,</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">S</span><span class="p">,</span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">O</span>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="p">);</span>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a>
<a id="__codelineno-7-10" name="__codelineno-7-10"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">O</span><span class="o">=</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">I3</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">I2</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">I1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">I0</span><span class="p">);</span>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a>
<a id="__codelineno-7-12" name="__codelineno-7-12"></a><span class="k">endmodule</span>
</code></pre></div></td></tr></table></div>
<p><code>exp0 ? exp1 : exp2</code> 直接对应一个复合多路选择器，<span>exp0<span class="heti-spacing"> </span></span>是一位的选择子，则复合多路选择器的输出<span class="heti-skip"><span class="heti-spacing"> </span>exp1<span class="heti-spacing"> </span></span>的输入，反之输出<span class="heti-skip"><span class="heti-spacing"> </span>exp2<span class="heti-spacing"> </span></span>的输入。</p>
</details>
<details class="abstract">
<summary>使用<span class="heti-skip"><span class="heti-spacing"> </span>index<span class="heti-spacing"> </span></span>索引语法</summary>
<p></p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span>
<span class="normal"><a href="#__codelineno-8-12">12</a></span>
<span class="normal"><a href="#__codelineno-8-13">13</a></span>
<span class="normal"><a href="#__codelineno-8-14">14</a></span>
<span class="normal"><a href="#__codelineno-8-15">15</a></span>
<span class="normal"><a href="#__codelineno-8-16">16</a></span>
<span class="normal"><a href="#__codelineno-8-17">17</a></span>
<span class="normal"><a href="#__codelineno-8-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="k">module</span><span class="w"> </span><span class="n">Mux4T1_4</span><span class="p">(</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I0</span><span class="p">,</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I1</span><span class="p">,</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I2</span><span class="p">,</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I3</span><span class="p">,</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">S</span><span class="p">,</span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">O</span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="p">);</span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">];</span>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">I</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I0</span><span class="p">;</span>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">I</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I1</span><span class="p">;</span>
<a id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">I</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I2</span><span class="p">;</span>
<a id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">I</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I3</span><span class="p">;</span>
<a id="__codelineno-8-15" name="__codelineno-8-15"></a>
<a id="__codelineno-8-16" name="__codelineno-8-16"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">O</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I</span><span class="p">[</span><span class="n">S</span><span class="p">];</span>
<a id="__codelineno-8-17" name="__codelineno-8-17"></a>
<a id="__codelineno-8-18" name="__codelineno-8-18"></a><span class="k">endmodule</span>
</code></pre></div></td></tr></table></div>
核心在于将离散的线路数组整合为可以被索引的二维数组。
</details>
<details class="abstract">
<summary>使用<span class="heti-skip"><span class="heti-spacing"> </span>if-else<span class="heti-spacing"> </span></span>语法</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span>
<span class="normal"><a href="#__codelineno-9-13">13</a></span>
<span class="normal"><a href="#__codelineno-9-14">14</a></span>
<span class="normal"><a href="#__codelineno-9-15">15</a></span>
<span class="normal"><a href="#__codelineno-9-16">16</a></span>
<span class="normal"><a href="#__codelineno-9-17">17</a></span>
<span class="normal"><a href="#__codelineno-9-18">18</a></span>
<span class="normal"><a href="#__codelineno-9-19">19</a></span>
<span class="normal"><a href="#__codelineno-9-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="k">module</span><span class="w"> </span><span class="n">Mux4T1_4</span><span class="p">(</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I0</span><span class="p">,</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I1</span><span class="p">,</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I2</span><span class="p">,</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I3</span><span class="p">,</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">S</span><span class="p">,</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">O</span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="p">);</span>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span><span class="w"> </span><span class="k">begin</span>
<a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">])</span><span class="w"> </span><span class="n">O</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">I3</span><span class="p">;</span>
<a id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="n">O</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">I2</span><span class="p">;</span>
<a id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="w">        </span><span class="k">end</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">begin</span>
<a id="__codelineno-9-15" name="__codelineno-9-15"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="mh">0</span><span class="p">])</span><span class="w"> </span><span class="n">O</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">I1</span><span class="p">;</span>
<a id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="n">O</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">I0</span><span class="p">;</span>
<a id="__codelineno-9-17" name="__codelineno-9-17"></a><span class="w">        </span><span class="k">end</span><span class="w">      </span>
<a id="__codelineno-9-18" name="__codelineno-9-18"></a><span class="w">    </span><span class="k">end</span><span class="w"> </span>
<a id="__codelineno-9-19" name="__codelineno-9-19"></a>
<a id="__codelineno-9-20" name="__codelineno-9-20"></a><span class="k">endmodule</span>
</code></pre></div></td></tr></table></div>
</details>
<details class="abstract">
<summary>使用<span class="heti-skip"><span class="heti-spacing"> </span>case<span class="heti-spacing"> </span></span>语法</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-10-10">10</a></span>
<span class="normal"><a href="#__codelineno-10-11">11</a></span>
<span class="normal"><a href="#__codelineno-10-12">12</a></span>
<span class="normal"><a href="#__codelineno-10-13">13</a></span>
<span class="normal"><a href="#__codelineno-10-14">14</a></span>
<span class="normal"><a href="#__codelineno-10-15">15</a></span>
<span class="normal"><a href="#__codelineno-10-16">16</a></span>
<span class="normal"><a href="#__codelineno-10-17">17</a></span>
<span class="normal"><a href="#__codelineno-10-18">18</a></span>
<span class="normal"><a href="#__codelineno-10-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="k">module</span><span class="w"> </span><span class="n">Mux4T1_4</span><span class="p">(</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I0</span><span class="p">,</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I1</span><span class="p">,</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I2</span><span class="p">,</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I3</span><span class="p">,</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">S</span><span class="p">,</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">O</span>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="p">);</span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a>
<a id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
<a id="__codelineno-10-12" name="__codelineno-10-12"></a><span class="w">            </span><span class="mh">2</span><span class="mb">'b00</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">O</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">I0</span><span class="p">;</span>
<a id="__codelineno-10-13" name="__codelineno-10-13"></a><span class="w">            </span><span class="mh">2</span><span class="mb">'b01</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">O</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">I1</span><span class="p">;</span>
<a id="__codelineno-10-14" name="__codelineno-10-14"></a><span class="w">            </span><span class="mh">2</span><span class="mb">'b10</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">O</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">I2</span><span class="p">;</span>
<a id="__codelineno-10-15" name="__codelineno-10-15"></a><span class="w">            </span><span class="mh">2</span><span class="mb">'b11</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">O</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">I3</span><span class="p">;</span>
<a id="__codelineno-10-16" name="__codelineno-10-16"></a><span class="w">        </span><span class="k">endcase</span>
<a id="__codelineno-10-17" name="__codelineno-10-17"></a><span class="w">    </span><span class="k">end</span><span class="w"> </span>
<a id="__codelineno-10-18" name="__codelineno-10-18"></a>
<a id="__codelineno-10-19" name="__codelineno-10-19"></a><span class="k">endmodule</span>
</code></pre></div></td></tr></table></div>
</details>
<details class="abstract">
<summary>与或式<span class="heti-skip"><span class="heti-spacing"> </span>vs<span class="heti-spacing"> </span></span>高级语法式</summary>
<p>与或式的表达能力相较于高级语法更强，如果我们的需求是满足<code>cond0=1</code>输出<code>data0</code>，满足<code>cond1=1</code>输出<code>data1</code><span><span class="heti-spacing"> </span>...</span>，且<code>cond0、cond1...condN</code>满足<span><span class="heti-spacing"> </span>one-hot</span>，则可以使用与或式直接编程，但是高级语法往往需要将<code>cond0、cond1...condN</code>编码为二进制选择子。
</p><center>
<img alt="mux" src="../img/lab1-2/mux.png"/>
</center>
<p>但是高级语法的选择电路可以直接用<span class="heti-skip"><span class="heti-spacing"> </span>FPGA<span class="heti-spacing"> </span></span>的选择电路直接构建，综合效率更高，运行效果更好；而与或式则没有这个直接的优点，且可读性更差。</p>
</details>
<details class="abstract">
<summary>复合多路选择器实现译码器</summary>
<p>对于<span class="heti-skip"><span class="heti-spacing"> </span>N<span class="heti-spacing"> </span></span>位输入，<span>M<span class="heti-spacing"> </span></span>位输出的真值表可以用宽度为<span class="heti-skip"><span class="heti-spacing"> </span>M<span class="heti-spacing"> </span></span>的<span class="heti-skip"><span class="heti-spacing"> </span>2<span class="heti-spacing"> </span></span><sup><span class="heti-skip"><span class="heti-spacing"> </span>N<span class="heti-spacing"> </span></span></sup>多路选择器来实现。当输入为<span><span class="heti-spacing"> </span>0</span>，1，<span>2 .... 2<span class="heti-spacing"> </span></span><sup><span>N<span class="heti-spacing"> </span></span></sup><span>-1<span class="heti-spacing"> </span></span>时，复合多路选择器输出真值表对应的输出即可。以<span class="heti-skip"><span class="heti-spacing"> </span>one-hot<span class="heti-spacing"> </span></span>码译码器为例：</p>
<p></p><center>
<table style="text-align:center">
<thead>
<tr> <th colspan="2">Input</th> <th colspan="4">Output</th> </tr>
<tr> <td>I0</td> <td>I1</td> <td>O0</td> <td>O1</td> <td>O2</td> <td>O3</td> </tr>
</thead>
<tbody>
<tr> <td>0</td> <td>0</td> <td>1</td> <td>0</td> <td>0</td> <td>0</td> </tr>
<tr> <td>1</td> <td>0</td> <td>0</td> <td>1</td> <td>0</td> <td>0</td> </tr>
<tr> <td>0</td> <td>1</td> <td>0</td> <td>0</td> <td>1</td> <td>0</td> </tr>
<tr> <td>1</td> <td>1</td> <td>0</td> <td>0</td> <td>0</td> <td>1</td> </tr>
</tbody>
</table>
</center>
<p>可以用复合多路选择器实现：
</p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span>
<span class="normal"><a href="#__codelineno-11-11">11</a></span>
<span class="normal"><a href="#__codelineno-11-12">12</a></span>
<span class="normal"><a href="#__codelineno-11-13">13</a></span>
<span class="normal"><a href="#__codelineno-11-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="k">module</span><span class="w"> </span><span class="n">one</span><span class="o">-</span><span class="n">hot</span><span class="p">(</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">S</span><span class="p">,</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">O</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="p">);</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">];</span>
<a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">I</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">=</span><span class="mh">4</span><span class="mb">'b0001</span><span class="p">;</span>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">I</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="o">=</span><span class="mh">4</span><span class="mb">'b0010</span><span class="p">;</span>
<a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">I</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="o">=</span><span class="mh">4</span><span class="mb">'b0100</span><span class="p">;</span>
<a id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">I</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="o">=</span><span class="mh">4</span><span class="mb">'b1000</span><span class="p">;</span>
<a id="__codelineno-11-11" name="__codelineno-11-11"></a>
<a id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">O</span><span class="o">=</span><span class="n">I</span><span class="p">[</span><span class="n">S</span><span class="p">];</span>
<a id="__codelineno-11-13" name="__codelineno-11-13"></a>
<a id="__codelineno-11-14" name="__codelineno-11-14"></a><span class="k">endmodule</span>
</code></pre></div></td></tr></table></div>
</details>
<p>再加上<span class="heti-skip"><span class="heti-spacing"> </span>LUT<span class="heti-spacing"> </span></span>和多路选择器等价，复合<span class="heti-skip"><span class="heti-spacing"> </span>LUT<span class="heti-spacing"> </span></span>和复合多路选择器等价，所以有如下的等价关系：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span>
<span class="normal"><a href="#__codelineno-12-3">3</a></span>
<span class="normal"><a href="#__codelineno-12-4">4</a></span>
<span class="normal"><a href="#__codelineno-12-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a>输入输出关系 &lt;=&gt; 逻辑表达式 &lt;=&gt; 真值表 &lt;=&gt; 编码器
<a id="__codelineno-12-2" name="__codelineno-12-2"></a>                    /\        /\
<a id="__codelineno-12-3" name="__codelineno-12-3"></a>                    ||        ||
<a id="__codelineno-12-4" name="__codelineno-12-4"></a>                    \/        \/
<a id="__codelineno-12-5" name="__codelineno-12-5"></a>                 组合电路  多路选择器 &lt;=&gt; LUT
</code></pre></div></td></tr></table></div>
<h3 id="_5">七段数码管<a class="headerlink" href="#_5" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<p>数码管的一种是半导体发光器件，数码管可分为七段数码管和八段数码管，区别在于八段数码管比七段数码管多一个用于显示小数点的发光二极管单元<span><span class="heti-spacing"> </span>DP</span>（decimal point<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>，其基本单元是发光二极管。</p>
<p>七段数码管分为<strong>共阳极</strong>及<strong>共阴极</strong>，共阳极的七段数码管的正极（或阳极）为八个发光二极管的共有正极，其他接点为独立发光二极管的负极（或阴极<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>，使用者只需把正极接电，不同的负极接地就能控制七段数码管显示不同的数字。共阴极的七段数码管与共阳极的只是接驳方法相反而已。</p>
<p><strong>NOTE:</strong> <a href="https://digilent.com/reference/programmable-logic/nexys-a7/start"><span>Nexys A7<span class="heti-spacing"> </span></span></a>开发板的七段数码管为<strong>共阳极</strong>数码管，当输入信号为<span class="heti-skip"><span class="heti-spacing"> </span>0<span class="heti-spacing"> </span></span>时，对应数码管亮；输入信号为<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span>时，对应数码管灭。</p>
<p><img alt="" src="../img/lab1-2/4.png"/></p>
<p>七段数码管的显示译码的对应关系如下，根据复合多路选择器实现译码器的关系不难得到译码电路。</p>
<p><img alt="" src="../img/lab1-2/5.png"/></p>
<h3 id="_6">动态时分复用<a class="headerlink" href="#_6" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<p><span>Nexys-A7<span class="heti-spacing"> </span></span>开发板有八个七段数码管，所有七段数码管共用<span><span class="heti-spacing"> </span>CA</span>、<span>CB ... DP<span class="heti-spacing"> </span></span>的输出。此外每个七段数码管有自己专用的<span class="heti-skip"><span class="heti-spacing"> </span>AN<span class="heti-spacing"> </span></span>信号线作为使能信号，当<span class="heti-skip"><span class="heti-spacing"> </span>AN=1<span class="heti-spacing"> </span></span>时，七段数码管无论<span><span class="heti-spacing"> </span>CA</span>、<span>CB ... DP<span class="heti-spacing"> </span></span>输入为多少，七段数码管不亮；当<span class="heti-skip"><span class="heti-spacing"> </span>AN=0<span class="heti-spacing"> </span></span>时七段数码管才根据<span><span class="heti-spacing"> </span>CA</span>、<span>CB ... DP<span class="heti-spacing"> </span></span>的输入亮灭。</p>
<p></p><center>
<img alt="led-io" src="../img/lab1-2/basic-io.png"/>
</center>
<p>现在我们希望八个七段数码管分别显示<span class="heti-skip"><span class="heti-spacing"> </span>32'h12345678<span class="heti-spacing"> </span></span>这八个数据，我们应该怎么做才能让接收同样<span><span class="heti-spacing"> </span>CA</span>、<span>CB ... DP<span class="heti-spacing"> </span></span>输入的数码管输出不同的信号呢？</p>
<p>我们将一个时间周期平均分为八分，在第一分时间内我们将<span class="heti-skip"><span class="heti-spacing"> </span>4'h1<span class="heti-spacing"> </span></span>的译码结果输出到七段数码管，然后将第一个七段数码管的<span class="heti-skip"><span class="heti-spacing"> </span>AN<span class="heti-spacing"> </span></span>启动，其余七段数码管的<span class="heti-skip"><span class="heti-spacing"> </span>AN<span class="heti-spacing"> </span></span>关闭，这样第一个七段数码管会显示数字<span><span class="heti-spacing"> </span>1</span>，其余数码管不亮。</p>
<p><img alt="led-1" src="../img/lab1-2/led-1.png"/></p>
<p>第二个时间片输出<span class="heti-skip"><span class="heti-spacing"> </span>4'h2<span class="heti-spacing"> </span></span>的译码结果，仅使能第二个七段数码管，这样只有第二个七段数码管显示数字<span><span class="heti-spacing"> </span>2</span>，其余数码管不亮。</p>
<p><img alt="led-2" src="../img/lab1-2/led-2.png"/></p>
<p>依次类推，如此轮回。最后每个数码管都会有八分之一的时间显示自己对应的数据，然后因为视觉残留，最后人眼会感觉八个数码管同时亮起，且分别显示对应的数据。</p>
<p><img alt="led-all" src="../img/lab1-2/led-all.png"/></p>
<h2 id="_7">实验步骤<a class="headerlink" href="#_7" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h2>
<h3 id="_8">实验前准备<a class="headerlink" href="#_8" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<p>与<span class="heti-skip"><span class="heti-spacing"> </span>Lab 1-1<span class="heti-spacing"> </span></span>相同，启动安装在你电脑中的<span class="heti-skip"><span class="heti-spacing"> </span>Ubuntu 22.04<span class="heti-spacing"> </span></span>环境（<span>WSL<span class="heti-spacing"> </span></span>或虚拟机<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>，<span>cd<span class="heti-spacing"> </span></span>到<span class="heti-skip"><span class="heti-spacing"> </span>sys1-sp23<span class="heti-spacing"> </span></span>文件夹执行：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span>
<span class="normal"><a href="#__codelineno-13-2">2</a></span>
<span class="normal"><a href="#__codelineno-13-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a>git<span class="w"> </span>pull
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="nb">cd</span><span class="w"> </span>repo/sys-project
<a id="__codelineno-13-3" name="__codelineno-13-3"></a>git<span class="w"> </span>pull
</code></pre></div></td></tr></table></div>
<p>这个命令将仓库更新到最新状态。</p>
<p>在进行接下来的实验之前，请仔细阅读<span class="heti-skip"><span class="heti-spacing"> </span>3.1<span class="heti-spacing"> </span></span>的内容，并自学<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>代码的语法。</p>
<p>为了使同学们理解<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>是描述电路的语言，我们认为过早的使用行为描述方式会导致同学们以高级语言编程的方式理解<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>代码，偏离学习硬件电路设计的初衷，<strong>注意在本次实验中，你的<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>代码只能是结构化描述或者数据流描述方式</strong>，不能使用行为描述方式。</p>
<p>另外为了方便同学们进行<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>代码的编写及调试，我们建议下载<a href="https://code.visualstudio.com/"><span class="heti-skip"><span class="heti-spacing"> </span>VSCode<span class="heti-spacing"> </span></span></a>并安装 <strong><span>Verilog<span class="heti-spacing"> </span></span>插件</strong>作为编辑器进行代码编写，当然你也可以使用你自己喜欢的<span><span class="heti-spacing"> </span>IDE</span>。</p>
<p><img alt="" src="../img/lab1-2/6.png"/></p>
<h3 id="_9">设计七段数码管译码器<a class="headerlink" href="#_9" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<p>请使用结构化描述或者数据流描述方式完善代码仓库中的 <code>src/lab1-2/submit/SegDecoder.v</code> 文件</p>
<div class="admonition warning">
<p class="admonition-title"><strong>请不要修改<span class="heti-skip"><span class="heti-spacing"> </span>module<span class="heti-spacing"> </span></span>定义的输入输出</strong>，以免自动化编译脚本失效</p>
</div>
<p><code>SegDecoder</code> 模块的电路如下：</p>
<p><img alt="" src="../img/lab1-2/7.png"/></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span>
<span class="normal"><a href="#__codelineno-14-11">11</a></span>
<span class="normal"><a href="#__codelineno-14-12">12</a></span>
<span class="normal"><a href="#__codelineno-14-13">13</a></span>
<span class="normal"><a href="#__codelineno-14-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="k">module</span><span class="w"> </span><span class="n">SegDecoder</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w">  </span><span class="c1">//要显示的十六进制数</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="n">point</span><span class="p">,</span><span class="w">       </span><span class="c1">//是否显示小数点，1 显示小数点</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="n">LE</span><span class="p">,</span><span class="w">          </span><span class="c1">//是否使能，0 使能</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w">          </span>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
<a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="n">e</span><span class="p">,</span>
<a id="__codelineno-14-11" name="__codelineno-14-11"></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="n">f</span><span class="p">,</span>
<a id="__codelineno-14-12" name="__codelineno-14-12"></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="n">g</span><span class="p">,</span>
<a id="__codelineno-14-13" name="__codelineno-14-13"></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="n">p</span><span class="w">           </span><span class="c1">//小数点对应的数码管</span>
<a id="__codelineno-14-14" name="__codelineno-14-14"></a><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>编写完成后，运行 <code>make verilate</code> 进行仿真验证查看波形。</p>
<h3 id="32">实现<span class="heti-skip"><span class="heti-spacing"> </span>32<span class="heti-spacing"> </span></span>位复合四选一多路选择器<a class="headerlink" href="#32" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<p>学习实验原理部分的复合多路选择器部分，选择某一种语法实现四选一多路选择器模块 <code>src/lab1-2/submit/Mux4T1_32.v</code>，尝试比较各种语法的优劣。</p>
<h3 id="_10">综合下板验证<a class="headerlink" href="#_10" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<p>下板的代码由 <code>src/lab1-2/submit</code> 和 <code>repo/sys-project/lab1-2/syn</code> 两部分模块组成，整体的电路图如下：</p>
<p><img alt="" src="../img/lab1-2/top.png"/></p>
<p><code>display</code> 是待显示的值，被定义在 <code>src/lab1-2/include</code> 中：前半部分 <code>0123456789abcdef</code> 用于验证译码模块的正确性；后半部分的 <code>x</code> 请替换成自己的学号。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="cp">`define DISPLAY 128'h01234567_89abcdef_000000xx_xxxxxxxx</span>
</code></pre></div></td></tr></table></div>
<p><span>`define<span class="heti-spacing"> </span></span>等价于<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>的<span><span class="heti-spacing"> </span>#define</span>，但是<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>的宏变量在使用的时候需要在前面加<span class="heti-skip"><span class="heti-spacing"> </span>`<span class="heti-spacing"> </span></span>才可以，例如<span><span class="heti-spacing"> </span>`DISPLAY</span>。</p>
<ul>
<li>开关<span class="heti-skip"><span class="heti-spacing"> </span>sw[1:0]<span class="heti-spacing"> </span></span>为最右侧两个开关，结合<span class="heti-skip"><span class="heti-spacing"> </span>32<span class="heti-spacing"> </span></span>位四选一多路选择器从<span class="heti-skip"><span class="heti-spacing"> </span>display<span class="heti-spacing"> </span></span>中选择要显示的<span class="heti-skip"><span class="heti-spacing"> </span>32<span class="heti-spacing"> </span></span>位数据输入<span class="heti-skip"><span class="heti-spacing"> </span>SegDriver<span class="heti-spacing"> </span></span>模块</li>
<li>开关<span class="heti-skip"><span class="heti-spacing"> </span>sw[2]<span class="heti-spacing"> </span></span>控制七段数码管的亮灭，当<span class="heti-skip"><span class="heti-spacing"> </span>sw[2]=1<span class="heti-spacing"> </span></span>的时候七段数码管不工作</li>
<li><span>clk_div<span class="heti-spacing"> </span></span>模块和<span class="heti-skip"><span class="heti-spacing"> </span>index<span class="heti-spacing"> </span></span>寄存器配合工作，<span>index<span class="heti-spacing"> </span></span>寄存器的值在<span class="heti-skip"><span class="heti-spacing"> </span>012...7<span class="heti-spacing"> </span></span>之间循环，然后每个时间片输出对应的<span class="heti-skip"><span class="heti-spacing"> </span>AN<span class="heti-spacing"> </span></span>使能信号和<span class="heti-skip"><span class="heti-spacing"> </span>data<span class="heti-spacing"> </span></span>要输出的<span class="heti-skip"><span class="heti-spacing"> </span>4<span class="heti-spacing"> </span></span>位数据，这四位数据由<span class="heti-skip"><span class="heti-spacing"> </span>SegDecoder<span class="heti-spacing"> </span></span>译码，最后显示到七段数码管上（即动态刷新时分复用）</li>
</ul>
<p>完成 <code>src/lab1-2/submit</code> 的两个模块之后运行，编译得到比特流，下板验证：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="w">    </span>make<span class="w"> </span>bitstream
</code></pre></div></td></tr></table></div>
<h2 id="50">实验报告<font color="Red"><span><span class="heti-spacing"> </span>50%</span></font><a class="headerlink" href="#50" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h2>
<p>请在实验报告中详细描述每一步的过程并配有适当的截图和解释，对于仿真设计和上板验证的结果也应当有适当的解释和照片<font color="Red"><span><span class="heti-spacing"> </span>Total 30%</span></font></p>
<blockquote>
<p>细分：</p>
<ul>
<li>译码管设计<font color="Red"><span><span class="heti-spacing"> </span>10%</span></font></li>
<li>复合多路选择器及语法分析比较<font color="Red"><span><span class="heti-spacing"> </span>10%</span></font></li>
<li>综合实现数码管<font color="Red"><span><span class="heti-spacing"> </span>10%</span></font></li>
</ul>
</blockquote>
<p>阅读 <code>repo/sys-project/lab1-2/sim/testbench.v</code> 的测试样例，尝试将 <code>for</code> 语句展开为初始化序列，然后写出你对 <code>for</code> 语句的理解<font color="Red"><span><span class="heti-spacing"> </span>10%</span></font></p>
<p>对于各种多路选择器的写法进行比较，请写出你最喜欢的多路选择器语法，并给出理由<font color="Red"><span><span class="heti-spacing"> </span>10%</span></font></p>
<p>有兴趣的同学请自行阅读 <code>repo/sys-project/lab1-2/syn</code> 的代码细节，分享你的心得体会。</p>
<h2 id="_11">代码提交<a class="headerlink" href="#_11" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h2>
<h3 id="55">验收检查点<font color="Red"><span><span class="heti-spacing"> </span>55%</span></font><a class="headerlink" href="#55" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<ul>
<li>仿真波形展示<font color="Red"><span><span class="heti-spacing"> </span>15%</span></font></li>
<li>代码解释或设计思路<font color="Red"><span><span class="heti-spacing"> </span>20%</span></font></li>
<li>下板验证（七段数码管能显示自己的学号）<font color="Red">20%</font></li>
</ul>
<h3 id="_12">提交文件<a class="headerlink" href="#_12" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<p><code>src/lab1-2/</code> 中编写的<span class="heti-skip"><span class="heti-spacing"> </span>submit<span class="heti-spacing"> </span></span>的代码</p>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: 第一部分" class="md-footer__link md-footer__link--prev" href="../lab1-1/">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                第一部分
              </div>
</div>
</a>
<a aria-label="Next: 第一部分" class="md-footer__link md-footer__link--next" href="../lab2-1/">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                第一部分
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["content.action.edit", "navigation.tracking", "navigation.expand", "navigation.top", "navigation.footer"], "search": "../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../assets/javascripts/bundle.56dfad97.min.js"></script>
<script src="https://cdn.tonycrane.cc/utils/katex.min.js"></script>
<script src="../js/katex.js"></script>
</body>
</html>