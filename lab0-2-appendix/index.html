<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="http://zju-sys.pages.zjusct.io/sys1/sys1-sp24/lab0-2-appendix/" rel="canonical"/>
<link href="../lab0-2/" rel="prev"/>
<link href="../lab1-1/" rel="next"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.0, mkdocs-material-9.5.34" name="generator"/>
<title>附录：verilog 与电路 - 浙江大学24年春夏系统一实验</title>
<link href="../assets/stylesheets/main.35f28582.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=JetBrains+Mono:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"JetBrains Mono";--md-code-font:"JetBrains Mono"}</style>
<link href="../css/heti.css" rel="stylesheet"/>
<link href="https://cdn.tonycrane.cc/utils/katex.min.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:500,500i,600,600i&amp;display=fallback" rel="stylesheet"/>
<link href="../css/custom.css" rel="stylesheet"/>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#verilog">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="浙江大学24年春夏系统一实验" class="md-header__button md-logo" data-md-component="logo" href=".." title="浙江大学24年春夏系统一实验">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            浙江大学24年春夏系统一实验
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              附录：verilog 与电路
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://git.zju.edu.cn/zju-sys/sys1/sys1-sp24" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    zju-sys/sys1/sys1-sp24
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="浙江大学24年春夏系统一实验" class="md-nav__button md-logo" data-md-component="logo" href=".." title="浙江大学24年春夏系统一实验">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    浙江大学24年春夏系统一实验
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://git.zju.edu.cn/zju-sys/sys1/sys1-sp24" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    zju-sys/sys1/sys1-sp24
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
<span class="md-ellipsis">
    首页
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    实验指导零
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            实验指导零
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../lab0-1/">
<span class="md-ellipsis">
    第一部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab0-2/">
<span class="md-ellipsis">
    第二部分
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    附录：verilog 与电路
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    附录：verilog 与电路
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#module-input-output">
<span class="md-ellipsis">
      module, input, output
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#wire">
<span class="md-ellipsis">
      wire
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#assign">
<span class="md-ellipsis">
      assign 语句
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_1">
<span class="md-ellipsis">
      反相器电路/非门电路
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
<span class="md-ellipsis">
      与门，或门，模块调用
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
<span class="md-ellipsis">
      模块和运算符
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_4">
<span class="md-ellipsis">
      核心思想
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    实验指导一
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            实验指导一
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../lab1-1/">
<span class="md-ellipsis">
    第一部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab1-2/">
<span class="md-ellipsis">
    第二部分
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    实验指导二
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            实验指导二
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../lab2-1/">
<span class="md-ellipsis">
    第一部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab2-1-appendix/">
<span class="md-ellipsis">
    附录：参数式编程
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    实验指导三
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            实验指导三
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../lab3-1/">
<span class="md-ellipsis">
    第一部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab3-2/">
<span class="md-ellipsis">
    第二部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab3-3/">
<span class="md-ellipsis">
    第三部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab3-1-appendix/">
<span class="md-ellipsis">
    附录：reg 与时序电路
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab3-3-appendix/">
<span class="md-ellipsis">
    附录：阻塞赋值
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    实验指导四
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            实验指导四
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../lab4-1/">
<span class="md-ellipsis">
    第一部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab4-2/">
<span class="md-ellipsis">
    第二部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab4-1-appendix/">
<span class="md-ellipsis">
    附录：SystemVerilog 高级语法
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    实验指导五
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            实验指导五
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../lab5-1/">
<span class="md-ellipsis">
    第一部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab5-2/">
<span class="md-ellipsis">
    第二部分
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    实验指导 project
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            实验指导 project
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../project-1/">
<span class="md-ellipsis">
    第一部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../project-2/">
<span class="md-ellipsis">
    第二部分
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../project-bonus/">
<span class="md-ellipsis">
    Bonus
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../project-2-appendix/">
<span class="md-ellipsis">
    附录：处理器差分测试
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../setup/">
<span class="md-ellipsis">
    环境配置
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../issue/">
<span class="md-ellipsis">
    提交提问
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../pull/">
<span class="md-ellipsis">
    提交修改
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#module-input-output">
<span class="md-ellipsis">
      module, input, output
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#wire">
<span class="md-ellipsis">
      wire
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#assign">
<span class="md-ellipsis">
      assign 语句
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_1">
<span class="md-ellipsis">
      反相器电路/非门电路
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
<span class="md-ellipsis">
      与门，或门，模块调用
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
<span class="md-ellipsis">
      模块和运算符
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_4">
<span class="md-ellipsis">
      核心思想
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://git.zju.edu.cn/zju-sys/sys1/sys1-sp24/-/blob/master/docs/lab0-2-appendix.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"></path></svg>
</a>
<h1 id="verilog"><span>Verilog<span class="heti-spacing"> </span></span>和电路的对应关系<a class="headerlink" href="#verilog" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h1>
<p>所谓硬件描述语言，就是描述硬件的语言，它的语句和硬件的电路结构是息息相关，甚至是一一对应的，现在我们来比对一下<span class="heti-skip"><span class="heti-spacing"> </span>Lab0-1<span class="heti-spacing"> </span></span>绘制的电路图和得到<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>文件，来看看<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>是如何描述这里的逻辑电路的。</p>
<h2 id="module-input-output">module, input, output<a class="headerlink" href="#module-input-output" title="Permanent link">¶</a></h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="k">module</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="w"> </span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="w">    </span><span class="n">I0</span><span class="p">,</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">    </span><span class="n">I1</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">    </span><span class="n">I2</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="w">    </span><span class="n">O</span><span class="w"> </span><span class="p">);</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">   </span><span class="k">input</span><span class="w"> </span><span class="n">I0</span><span class="p">;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">   </span><span class="k">input</span><span class="w"> </span><span class="n">I1</span><span class="p">;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">   </span><span class="k">input</span><span class="w"> </span><span class="n">I2</span><span class="p">;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">   </span><span class="k">output</span><span class="w"> </span><span class="n">O</span><span class="p">;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">   </span><span class="p">....</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="k">endmodule</span>
</code></pre></div></td></tr></table></div>
<p><code>module main ... endmodule</code> 表示这是一个叫做<span class="heti-skip"><span class="heti-spacing"> </span>main<span class="heti-spacing"> </span></span>的电路模块，它的内容从<span class="heti-skip"><span class="heti-spacing"> </span>module<span class="heti-spacing"> </span></span>关键字开始，到<span class="heti-skip"><span class="heti-spacing"> </span>endmodule<span class="heti-spacing"> </span></span>关键字结束。之后的<span><span class="heti-spacing"> </span>I0</span>、I1、I2、<span>O<span class="heti-spacing"> </span></span>是电路模块的输入输出引脚序列，表示有四个<span class="heti-skip"><span class="heti-spacing"> </span>1 bit<span class="heti-spacing"> </span></span>的引脚，以及每个引脚的名字。之后的 <code>input</code>、<code>output</code> 进一步定义每个引脚是输入引脚还是输出引脚，因此这段<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>硬件描述语言指出当前描述的电路模块名叫<span><span class="heti-spacing"> </span>main</span>，它有三个输入引脚分别是<span><span class="heti-spacing"> </span>I0</span>、I1、I2，一个输出引脚<span><span class="heti-spacing"> </span>O</span>。对应的电路图如下：</p>
<p></p><center>
<img alt="module" src="../img/lab0-2/module.jpg" width="500"/>
</center>
<p>此外模块引脚输入输出的定义也可以用如下的方式声明在模块声明中，相对来说更加简洁明了：
</p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span>
<span class="normal"><a href="#__codelineno-1-2">2</a></span>
<span class="normal"><a href="#__codelineno-1-3">3</a></span>
<span class="normal"><a href="#__codelineno-1-4">4</a></span>
<span class="normal"><a href="#__codelineno-1-5">5</a></span>
<span class="normal"><a href="#__codelineno-1-6">6</a></span>
<span class="normal"><a href="#__codelineno-1-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="k">module</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="w"> </span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">I0</span><span class="p">,</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">I1</span><span class="p">,</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">I2</span><span class="p">,</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">O</span><span class="w"> </span><span class="p">);</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="k">endmodule</span>
</code></pre></div></td></tr></table></div>
<p>在<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>语言中回车、换行、空格、缩进和<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>一样没有意义，仅处于可读性的考虑，而不是像<span class="heti-skip"><span class="heti-spacing"> </span>Python<span class="heti-spacing"> </span></span>那张有缩进换行的需求。</p>
<h2 id="wire">wire<a class="headerlink" href="#wire" title="Permanent link">¶</a></h2>
<p><code>wire</code> 语句负责定义一条线路，并且给线路提供一个名字。我们在<span class="heti-skip"><span class="heti-spacing"> </span>Lab0-1<span class="heti-spacing"> </span></span>中绘制的每一条连线都会被转换为下面的一个<code>wire</code>声明语句。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="w">   </span><span class="cm">/*******************************************************************************</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="cm">   ** The wires are defined here                                                 **</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="cm">   *******************************************************************************/</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">   </span><span class="kt">wire</span><span class="w"> </span><span class="n">s_logisimNet0</span><span class="p">;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="w">   </span><span class="kt">wire</span><span class="w"> </span><span class="n">s_logisimNet1</span><span class="p">;</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">   </span><span class="kt">wire</span><span class="w"> </span><span class="n">s_logisimNet10</span><span class="p">;</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="w">   </span><span class="kt">wire</span><span class="w"> </span><span class="n">s_logisimNet2</span><span class="p">;</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="w">   </span><span class="kt">wire</span><span class="w"> </span><span class="n">s_logisimNet3</span><span class="p">;</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">   </span><span class="kt">wire</span><span class="w"> </span><span class="n">s_logisimNet4</span><span class="p">;</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">   </span><span class="kt">wire</span><span class="w"> </span><span class="n">s_logisimNet5</span><span class="p">;</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">   </span><span class="kt">wire</span><span class="w"> </span><span class="n">s_logisimNet6</span><span class="p">;</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">   </span><span class="kt">wire</span><span class="w"> </span><span class="n">s_logisimNet7</span><span class="p">;</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="w">   </span><span class="kt">wire</span><span class="w"> </span><span class="n">s_logisimNet8</span><span class="p">;</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="w">   </span><span class="kt">wire</span><span class="w"> </span><span class="n">s_logisimNet9</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<h2 id="assign"><span>assign<span class="heti-spacing"> </span></span>语句<a class="headerlink" href="#assign" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h2>
<p><code>assign</code> 模块将<span class="heti-skip"><span class="heti-spacing"> </span>wire<span class="heti-spacing"> </span></span>连接起来。所谓<span class="heti-skip"><span class="heti-spacing"> </span>wire<span class="heti-spacing"> </span></span>就是可以认为就是一根导线，它有输入和输出两端，且输入的信号和输出的信号保持一致。I0、I1、<span>I2<span class="heti-spacing"> </span></span>作为<span class="heti-skip"><span class="heti-spacing"> </span>input<span class="heti-spacing"> </span></span>可以认为是特殊的<span><span class="heti-spacing"> </span>wire</span>，它的输入端要保留给外部连接模块的电路，所以只有它们的输出端可以在模块内部使用；<span>O<span class="heti-spacing"> </span></span>作为<span class="heti-skip"><span class="heti-spacing"> </span>output<span class="heti-spacing"> </span></span>则是输出端保留给外部电路，输入端可以在模块内部使用（但是<span class="heti-skip"><span class="heti-spacing"> </span>O<span class="heti-spacing"> </span></span>的输出端也可以在模块内部使用，比较特殊<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>。</p>
<p><code>assign s_logisimNet1 = I1</code> 将<span class="heti-skip"><span class="heti-spacing"> </span>I1<span class="heti-spacing"> </span></span>的输出端和<span class="heti-skip"><span class="heti-spacing"> </span>s_logisimNet1<span class="heti-spacing"> </span></span>的输入端相连，所以<span class="heti-skip"><span class="heti-spacing"> </span>s_logisimNet1<span class="heti-spacing"> </span></span>的输出信号就是<span class="heti-skip"><span class="heti-spacing"> </span>I1<span class="heti-spacing"> </span></span>输入的信号。<code>assign O = s_logisimNet9</code> 将<span class="heti-skip"><span class="heti-spacing"> </span>s_logisimNet9<span class="heti-spacing"> </span></span>的输出端和<span class="heti-skip"><span class="heti-spacing"> </span>O<span class="heti-spacing"> </span></span>的输入端相连，这样<span class="heti-skip"><span class="heti-spacing"> </span>O<span class="heti-spacing"> </span></span>输出的信号或者说<span class="heti-skip"><span class="heti-spacing"> </span>main<span class="heti-spacing"> </span></span>模块输出的信号就是<span class="heti-skip"><span class="heti-spacing"> </span>s_logisimNet9<span class="heti-spacing"> </span></span>输出的信号。</p>
<p>这里的<span><span class="heti-spacing"> </span>s_logisimNet1</span>、s_logisimNet2、s_logisimNet5、<span>s_logisimNet9<span class="heti-spacing"> </span></span>并不仅仅是箭头指向的那一条横线，实际上整个深绿色的线网络的电平都是保持一致的，都是同一个<span class="heti-skip"><span class="heti-spacing"> </span>wire<span class="heti-spacing"> </span></span>的范围。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span>
<span class="normal"><a href="#__codelineno-3-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="w">   </span><span class="k">assign</span><span class="w"> </span><span class="n">s_logisimNet1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I1</span><span class="p">;</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">   </span><span class="k">assign</span><span class="w"> </span><span class="n">s_logisimNet2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I0</span><span class="p">;</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">   </span><span class="k">assign</span><span class="w"> </span><span class="n">s_logisimNet5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I2</span><span class="p">;</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">   </span><span class="k">assign</span><span class="w"> </span><span class="n">O</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s_logisimNet9</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p></p><center>
<img alt="assign" src="../img/lab0-2/assign.jpg" width="500"/>
</center>
<p>以下的<span class="heti-skip"><span class="heti-spacing"> </span>assign<span class="heti-spacing"> </span></span>连接语法都是有意义的，我们可以将模块的输入的信号输入连接到某根线路、将一根线路的输出连接到零一根线路的输入、将一根线路的输出连接到模块的输出。</p>
<p>此外我们也可以将<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span>位立即数<span class="heti-skip"><span class="heti-spacing"> </span>0<span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span>输入到线路中：<code>assign wire3 = 1'b1</code> 的意思是将高电平<span class="heti-skip"><span class="heti-spacing"> </span>Vcc<span class="heti-spacing"> </span></span>输入到<span class="heti-skip"><span class="heti-spacing"> </span>wire3<span class="heti-spacing"> </span></span>中，使得<span class="heti-skip"><span class="heti-spacing"> </span>wire3<span class="heti-spacing"> </span></span>输出是高电平，立即数<span class="heti-skip"><span class="heti-spacing"> </span>1'b1<span class="heti-spacing"> </span></span>相当于<span><span class="heti-spacing"> </span>Vcc</span>；<code>assign wire3 = 1'b0</code> 的意思是将低电平<span class="heti-skip"><span class="heti-spacing"> </span>GND<span class="heti-spacing"> </span></span>输入到<span class="heti-skip"><span class="heti-spacing"> </span>wire3<span class="heti-spacing"> </span></span>中，使得<span class="heti-skip"><span class="heti-spacing"> </span>wire3<span class="heti-spacing"> </span></span>因为接地输出是低电平，立即数<span class="heti-skip"><span class="heti-spacing"> </span>1'b0<span class="heti-spacing"> </span></span>相当于<span><span class="heti-spacing"> </span>GND</span>：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span>
<span class="normal"><a href="#__codelineno-4-4">4</a></span>
<span class="normal"><a href="#__codelineno-4-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">wire2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I0</span><span class="p">;</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">wire1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wire2</span><span class="p">;</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">O</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wire1</span><span class="p">;</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">wire3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">'b1</span><span class="p">;</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">wire4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">'b0</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>以下的<span class="heti-skip"><span class="heti-spacing"> </span>assign<span class="heti-spacing"> </span></span>连接语法是没有意义的，或者说是错误的：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">I0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wire1</span><span class="p">;</span><span class="w">      </span><span class="c1">// problem1</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">wire2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wire3</span><span class="p">;</span><span class="w">   </span><span class="c1">// problem2</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">wire3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wire2</span><span class="p">;</span><span class="w">   </span><span class="c1">// problem2</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">wire7</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wire7</span><span class="p">;</span><span class="w">   </span><span class="c1">// problem2</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">wire4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wire5</span><span class="p">;</span><span class="w">   </span><span class="c1">// problem3</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">wire4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wire6</span><span class="p">;</span><span class="w">   </span><span class="c1">// problem3</span>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="mh">1</span><span class="mb">'b0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wire8</span><span class="p">;</span><span class="w">    </span><span class="c1">// problem4</span>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="mh">1</span><span class="mb">'b1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wire8</span><span class="p">;</span><span class="w">    </span><span class="c1">// problem4</span>
<a id="__codelineno-5-12" name="__codelineno-5-12"></a>
<a id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">wire9</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wire8</span><span class="p">;</span><span class="w">   </span><span class="c1">// problem5</span>
<a id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="w">    </span><span class="c1">// 但是 wire8 从来没有被 assign 输入过</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>problem1：<span>I0<span class="heti-spacing"> </span></span>作为输入端口在模块内部只有输出端，不可以被模块内部的线路输入，不过<span class="heti-skip"><span class="heti-spacing"> </span>O<span class="heti-spacing"> </span></span>虽然是输出端口，但是它的输出也是可以在模块内部被使用的</li>
<li>problem2：不可以形成环路，<span>wire2<span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span>wire3<span class="heti-spacing"> </span></span>相互赋值、<span>wire7<span class="heti-spacing"> </span></span>自己给自己赋值会形成环形电路，环形电路很微妙其中的门道我们之后再介绍，但是在当前的情形下我们会看到这组电路孤立于其他的电路之外没有有效的输入信号，这仅仅只会触发<span><span class="heti-spacing"> </span>warning</span>，所以要格外小心</li>
<li>problem3：一个线路被多个线路输入，这会导致<span class="heti-skip"><span class="heti-spacing"> </span>multi-driven<span class="heti-spacing"> </span></span>问题，从逻辑上来讲一个<span class="heti-skip"><span class="heti-spacing"> </span>wire4<span class="heti-spacing"> </span></span>只有一个输入没法接受多个连线的输入，从物理实现上将如果我们真的允许这样做连线会导致短路</li>
<li>problem4：<span>1'b0<span class="heti-spacing"> </span></span>是<span><span class="heti-spacing"> </span>GND</span>，<span>1'b1<span class="heti-spacing"> </span></span>是<span class="heti-skip"><span class="heti-spacing"> </span>Vcc<span class="heti-spacing"> </span></span>输出，将<span class="heti-skip"><span class="heti-spacing"> </span>CMOS<span class="heti-spacing"> </span></span>管的输出连接到<span class="heti-skip"><span class="heti-spacing"> </span>Vcc<span class="heti-spacing"> </span></span>或者<span class="heti-skip"><span class="heti-spacing"> </span>GND<span class="heti-spacing"> </span></span>都没有意义，还会导致短路等问题</li>
<li>problem5：线路没有被赋值，如果一个线路没有被赋值，那么它处于高阻态，是没有输出的，被它连接输入的所有其他线路都会没有输入进而没有输出。这种线路类似于<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>语句中没有被初始化的变量，用它参与计算是危险的，但这仅仅只会触发<span class="heti-skip"><span class="heti-spacing"> </span>warning<span class="heti-spacing"> </span></span>要格外小心</li>
</ul>
<p>所以谨记以下<span class="heti-skip"><span class="heti-spacing"> </span>wire<span class="heti-spacing"> </span></span>的电气特性：</p>
<ol>
<li><span>wire<span class="heti-spacing"> </span></span>必须被有且仅有一个<span class="heti-skip"><span class="heti-spacing"> </span>assign<span class="heti-spacing"> </span></span>输入</li>
<li><span>wire<span class="heti-spacing"> </span></span>可以有<span class="heti-skip"><span class="heti-spacing"> </span>0<span class="heti-spacing"> </span></span>到多个<span class="heti-skip"><span class="heti-spacing"> </span>assign<span class="heti-spacing"> </span></span>输出</li>
</ol>
<p>我们再回过头来看<span class="heti-skip"><span class="heti-spacing"> </span>input<span class="heti-spacing"> </span></span>和<span><span class="heti-spacing"> </span>output</span>：</p>
<p>因为<span class="heti-skip"><span class="heti-spacing"> </span>input<span class="heti-spacing"> </span></span>的<span class="heti-skip"><span class="heti-spacing"> </span>wire<span class="heti-spacing"> </span></span>只能有一个输入且这个输入必须预留给外部模块，所以在<span class="heti-skip"><span class="heti-spacing"> </span>module<span class="heti-spacing"> </span></span>内部不可以在被输入了，不然会有<span class="heti-skip"><span class="heti-spacing"> </span>multi-driven<span class="heti-spacing"> </span></span>的电气问题，但是因为可以有<span class="heti-skip"><span class="heti-spacing"> </span>0<span class="heti-spacing"> </span></span>到多个输出，所以<span class="heti-skip"><span class="heti-spacing"> </span>input<span class="heti-spacing"> </span></span>可以给内部任何有需要的线路做输入，也可以不给任何线路做输入，这就相当于<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>语言定义了一个变量但是不使用，不会有实际的危害，也不会有<span><span class="heti-spacing"> </span>warning</span>。</p>
<p>而<span class="heti-skip"><span class="heti-spacing"> </span>output<span class="heti-spacing"> </span></span>因为必须要有一个输入，所以必须要被连接不然外部得不到输出，但是如果不连接不会有<span><span class="heti-spacing"> </span>error</span>，需要编程人员自己注意，因为<span class="heti-skip"><span class="heti-spacing"> </span>output<span class="heti-spacing"> </span></span>可以有<span class="heti-skip"><span class="heti-spacing"> </span>0<span class="heti-spacing"> </span></span>到多个输出，所以在预留了一个给外部模块之后还可以继续输出给内部模块。</p>
<h2 id="_1">反相器电路<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>非门电路<a class="headerlink" href="#_1" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h2>
<p>在<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>语言中我们可以用 <code>a=~b</code> 来将一个数据取反赋值给另一个变量，这里的语义就是将一个线路的输出取反然后作为另一个线路的输入。对应到电路上取反就是经过一个非门电路，所以就是将<span class="heti-skip"><span class="heti-spacing"> </span>b<span class="heti-spacing"> </span></span>线路连接到反向器的输入，然后将反向器的输出连接到另一个线路上。下面的三条语句就对应了<span class="heti-skip"><span class="heti-spacing"> </span>Lab0-1<span class="heti-spacing"> </span></span>线路中的三个非门的线路连接。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="w">   </span><span class="k">assign</span><span class="w"> </span><span class="n">s_logisimNet0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">s_logisimNet2</span><span class="p">;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="w">   </span><span class="k">assign</span><span class="w"> </span><span class="n">s_logisimNet4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">s_logisimNet1</span><span class="p">;</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="w">   </span><span class="k">assign</span><span class="w"> </span><span class="n">s_logisimNet3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">s_logisimNet5</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p></p><center>
<img alt="not" src="../img/lab0-2/not.jpg" width="500"/>
</center>
<h2 id="_2">与门，或门，模块调用<a class="headerlink" href="#_2" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h2>
<p>所谓模块就是某一电路组成，对于<span class="heti-skip"><span class="heti-spacing"> </span>AND3<span class="heti-spacing"> </span></span>门电路和<span class="heti-skip"><span class="heti-spacing"> </span>OR4<span class="heti-spacing"> </span></span>门电路<span class="heti-skip"><span class="heti-spacing"> </span>Logisim<span class="heti-spacing"> </span></span>生成了<span class="heti-skip"><span class="heti-spacing"> </span>AND_GATE_3_INPUTS<span class="heti-spacing"> </span></span>模块（定义在<span><span class="heti-spacing"> </span>verilog/gates/AND_GATE_3_INPUTS.v</span>）和<span class="heti-skip"><span class="heti-spacing"> </span>OR_GATE_4_INPUTS<span class="heti-spacing"> </span></span>模块（定义在<span><span class="heti-spacing"> </span>verilog/gates/OR_GATE_4_INPUTS.v</span>）来实现，它的模块声明如下：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-7-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-7-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-7-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-7-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-7-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-7-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-7-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-7-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-7-10">10</a></span>
<span class="normal"><a href="#__codelineno-7-11">11</a></span>
<span class="normal"><a href="#__codelineno-7-12">12</a></span>
<span class="normal"><a href="#__codelineno-7-13">13</a></span>
<span class="normal"><a href="#__codelineno-7-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="w">    </span><span class="k">module</span><span class="w"> </span><span class="n">AND_GATE_3_INPUTS</span><span class="p">(</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">        </span><span class="k">input</span><span class="w"> </span><span class="n">input1</span><span class="p">,</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">        </span><span class="k">input</span><span class="w"> </span><span class="n">input2</span><span class="p">,</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="w">        </span><span class="k">input</span><span class="w"> </span><span class="n">input3</span><span class="p">,</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="w">        </span><span class="k">output</span><span class="w"> </span><span class="n">result</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="w">    </span><span class="p">);</span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="w">    </span><span class="k">module</span><span class="w"> </span><span class="n">OR_GATE_4_INPUTS</span><span class="p">(</span>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="w">        </span><span class="k">input</span><span class="w"> </span><span class="n">input1</span><span class="p">,</span>
<a id="__codelineno-7-10" name="__codelineno-7-10"></a><span class="w">        </span><span class="k">input</span><span class="w"> </span><span class="n">input2</span><span class="p">,</span>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a><span class="w">        </span><span class="k">input</span><span class="w"> </span><span class="n">input3</span><span class="p">,</span>
<a id="__codelineno-7-12" name="__codelineno-7-12"></a><span class="w">        </span><span class="k">input</span><span class="w"> </span><span class="n">input4</span><span class="p">,</span>
<a id="__codelineno-7-13" name="__codelineno-7-13"></a><span class="w">        </span><span class="k">output</span><span class="w"> </span><span class="n">result</span>
<a id="__codelineno-7-14" name="__codelineno-7-14"></a><span class="w">    </span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>对于<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>函数我们在考虑调用某一函数的时候不在乎函数内部的实现，而只在乎它的输入输出关系；对于<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>的硬件设计模块在使用的时候也不在乎内部的设计细节和物理实现，只在乎它的输入输出关系，例如对于<span class="heti-skip"><span class="heti-spacing"> </span>AND_GATE_3_INPUTS<span class="heti-spacing"> </span></span>模块只需要知道有三个输入<span><span class="heti-spacing"> </span>input1</span>、input2、<span>input3<span class="heti-spacing"> </span></span>和一个输出<span><span class="heti-spacing"> </span>result</span>，可以实现和<span class="heti-skip"><span class="heti-spacing"> </span>AND3<span class="heti-spacing"> </span></span>门电路一致的功能即可。</p>
<p>之后我们用 <code>AND_GATE_3_INPUTS GATES_1</code> 实例化一个名字叫做<span class="heti-skip"><span class="heti-spacing"> </span>GATES_1<span class="heti-spacing"> </span></span>的<span class="heti-skip"><span class="heti-spacing"> </span>AND_GATE_3_INPUTS<span class="heti-spacing"> </span></span>模块，然后对模块的输入输出进行连接。<code>.input1(s_logisimNet2)</code> 说明将<span class="heti-skip"><span class="heti-spacing"> </span>GATES_1<span class="heti-spacing"> </span></span>的<span class="heti-skip"><span class="heti-spacing"> </span>input1<span class="heti-spacing"> </span></span>引脚和<span class="heti-skip"><span class="heti-spacing"> </span>s_logisimNet2<span class="heti-spacing"> </span></span>线路连接，余下引脚连接同理，如果是<span class="heti-skip"><span class="heti-spacing"> </span>input<span class="heti-spacing"> </span></span>引脚就是线路提供输入，如果是<span class="heti-skip"><span class="heti-spacing"> </span>output<span class="heti-spacing"> </span></span>引脚就是线路获得输出。</p>
<p>同理实例化一个叫做<span class="heti-skip"><span class="heti-spacing"> </span>GATE_5<span class="heti-spacing"> </span></span>的<span class="heti-skip"><span class="heti-spacing"> </span>OR4<span class="heti-spacing"> </span></span>或门，然后将<span><span class="heti-spacing"> </span>s_logisimNet10</span>、s_logisimNet6、s_logisimNet7、<span>s_logisimNet8<span class="heti-spacing"> </span></span>作为输入，<span>s_logisimNet9<span class="heti-spacing"> </span></span>作为输出连接到或门。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span>
<span class="normal"><a href="#__codelineno-8-12">12</a></span>
<span class="normal"><a href="#__codelineno-8-13">13</a></span>
<span class="normal"><a href="#__codelineno-8-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="w">    </span><span class="n">AND_GATE_3_INPUTS</span><span class="w"> </span><span class="n">GATES_1</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="w">        </span><span class="p">.</span><span class="n">input1</span><span class="p">(</span><span class="n">s_logisimNet2</span><span class="p">),</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">        </span><span class="p">.</span><span class="n">input2</span><span class="p">(</span><span class="n">s_logisimNet4</span><span class="p">),</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="w">        </span><span class="p">.</span><span class="n">input3</span><span class="p">(</span><span class="n">s_logisimNet3</span><span class="p">),</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">        </span><span class="p">.</span><span class="n">result</span><span class="p">(</span><span class="n">s_logisimNet10</span><span class="p">)</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">    </span><span class="p">);</span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="w">    </span><span class="n">OR_GATE_4_INPUTS</span><span class="w"> </span><span class="n">GATES_5</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="w">        </span><span class="p">.</span><span class="n">input1</span><span class="p">(</span><span class="n">s_logisimNet10</span><span class="p">),</span>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="w">        </span><span class="p">.</span><span class="n">input2</span><span class="p">(</span><span class="n">s_logisimNet6</span><span class="p">),</span>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="w">        </span><span class="p">.</span><span class="n">input3</span><span class="p">(</span><span class="n">s_logisimNet7</span><span class="p">),</span>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="w">        </span><span class="p">.</span><span class="n">input4</span><span class="p">(</span><span class="n">s_logisimNet8</span><span class="p">),</span>
<a id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="w">        </span><span class="p">.</span><span class="n">result</span><span class="p">(</span><span class="n">s_logisimNet9</span><span class="p">)</span>
<a id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="w">    </span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p></p><center>
<img alt="and-or" src="../img/lab0-2/and-or.jpg" width="500"/>
</center>
<p>需要注意：</p>
<ul>
<li>因为每个导线都需要有且仅有一个输入，所以每个模块的输入端口都需要被连接，如果没有连接会报错<span><span class="heti-spacing"> </span>error</span></li>
<li>因为每个导线都需要有且仅有一个输入，所以一旦一根线路被模块的输出端口驱动了，就不可以在被其他模块的输出端口或者<span class="heti-skip"><span class="heti-spacing"> </span>assign<span class="heti-spacing"> </span></span>语句驱动了</li>
<li>因为每个导线都可以由<span class="heti-skip"><span class="heti-spacing"> </span>0<span class="heti-spacing"> </span></span>到多个输出，所以每个模块的输出端口可以不被连接保持悬空，这是无害的。需要注意如果我们希望<span class="heti-skip"><span class="heti-spacing"> </span>result<span class="heti-spacing"> </span></span>端口悬空，不能这样连接：
    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span>
<span class="normal"><a href="#__codelineno-9-2">2</a></span>
<span class="normal"><a href="#__codelineno-9-3">3</a></span>
<span class="normal"><a href="#__codelineno-9-4">4</a></span>
<span class="normal"><a href="#__codelineno-9-5">5</a></span>
<span class="normal"><a href="#__codelineno-9-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="w">    </span><span class="n">OR_GATE_4_INPUTS</span><span class="w"> </span><span class="n">GATES_5</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">        </span><span class="p">.</span><span class="n">input1</span><span class="p">(</span><span class="n">s_logisimNet10</span><span class="p">),</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">        </span><span class="p">.</span><span class="n">input2</span><span class="p">(</span><span class="n">s_logisimNet6</span><span class="p">),</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">        </span><span class="p">.</span><span class="n">input3</span><span class="p">(</span><span class="n">s_logisimNet7</span><span class="p">),</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">        </span><span class="p">.</span><span class="n">input4</span><span class="p">(</span><span class="n">s_logisimNet8</span><span class="p">)</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">    </span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
    这样一般认为你忘记处理 OR4 模块的 result 输出端口了，所以应该如下连接，显式声明悬空该端口：
    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span>
<span class="normal"><a href="#__codelineno-10-3">3</a></span>
<span class="normal"><a href="#__codelineno-10-4">4</a></span>
<span class="normal"><a href="#__codelineno-10-5">5</a></span>
<span class="normal"><a href="#__codelineno-10-6">6</a></span>
<span class="normal"><a href="#__codelineno-10-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="w">    </span><span class="n">OR_GATE_4_INPUTS</span><span class="w"> </span><span class="n">GATES_5</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="w">        </span><span class="p">.</span><span class="n">input1</span><span class="p">(</span><span class="n">s_logisimNet10</span><span class="p">),</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">        </span><span class="p">.</span><span class="n">input2</span><span class="p">(</span><span class="n">s_logisimNet6</span><span class="p">),</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="w">        </span><span class="p">.</span><span class="n">input3</span><span class="p">(</span><span class="n">s_logisimNet7</span><span class="p">),</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="w">        </span><span class="p">.</span><span class="n">input4</span><span class="p">(</span><span class="n">s_logisimNet8</span><span class="p">),</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="w">        </span><span class="p">.</span><span class="n">result</span><span class="p">()</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="w">    </span><span class="p">);</span>
</code></pre></div></td></tr></table></div></li>
</ul>
<p>模块还有另一种不需要显示声明连接端口的连接方式，这里<span class="heti-skip"><span class="heti-spacing"> </span>GATE1<span class="heti-spacing"> </span></span>的输入输出没有声明连接的端口，所以线路连接的端口默认和<span class="heti-skip"><span class="heti-spacing"> </span>AND_GATE_3_INPUTS<span class="heti-spacing"> </span></span>声明端口的顺序保持一致，也即第一连线<span class="heti-skip"><span class="heti-spacing"> </span>s_logisimNet10<span class="heti-spacing"> </span></span>连接到第一个端口<span><span class="heti-spacing"> </span>input1</span>，依此类推。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span>
<span class="normal"><a href="#__codelineno-11-11">11</a></span>
<span class="normal"><a href="#__codelineno-11-12">12</a></span>
<span class="normal"><a href="#__codelineno-11-13">13</a></span>
<span class="normal"><a href="#__codelineno-11-14">14</a></span>
<span class="normal"><a href="#__codelineno-11-15">15</a></span>
<span class="normal"><a href="#__codelineno-11-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="c1">// declaration</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="k">module</span><span class="w"> </span><span class="n">AND_GATE_3_INPUTS</span><span class="p">(</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="w">    </span><span class="n">input1</span><span class="p">,</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">    </span><span class="n">input2</span><span class="p">,</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="w">    </span><span class="n">input3</span><span class="p">,</span>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="w">    </span><span class="n">result</span>
<a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="p">);</span>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">input1</span><span class="p">;</span>
<a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">input2</span><span class="p">;</span>
<a id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">input3</span><span class="p">;</span>
<a id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
<a id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-11-13" name="__codelineno-11-13"></a><span class="k">endmodule</span>
<a id="__codelineno-11-14" name="__codelineno-11-14"></a>
<a id="__codelineno-11-15" name="__codelineno-11-15"></a><span class="c1">//connection</span>
<a id="__codelineno-11-16" name="__codelineno-11-16"></a><span class="n">AND_GATE_3_INPUTS</span><span class="w"> </span><span class="n">GATE1</span><span class="w"> </span><span class="p">(</span><span class="n">s_logisimNet10</span><span class="p">,</span><span class="w"> </span><span class="n">s_logisimNet6</span><span class="p">,</span><span class="w"> </span><span class="n">s_logisimNet7</span><span class="p">,</span><span class="w"> </span><span class="n">s_logisimNet8</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>注意：</p>
<ul>
<li>声明端口的连接方法和不声明端口的连接方法不可以混用</li>
</ul>
<p>不声明端口虽然使用起来比较简洁，但是有很多问题：</p>
<ol>
<li>如果端口数目很多，不声明端口容易导致端口连错</li>
<li>如果模块的端口顺序进行了修改和调整，所有不声明端口的模块实例都要做对应的调整</li>
<li>不声明端口的连接方式无法做输出端口的悬空</li>
<li>不声明端口会导致模块实例连线的时候缺乏端口语义，不利于编程者的开发维护</li>
</ol>
<p>所以除非模块非常简单，不然推荐使用声明端口的连接方法</p>
<h2 id="_3">模块和运算符<a class="headerlink" href="#_3" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h2>
<p>我们非门的连接有如下两种等价的方法：第一种直接展现电路连接；而第二种用类似<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>语言的写法，有更强的逻辑语义，但是最后还是会落脚于第一种的电路连接，仅仅是给我们描述非门电路提供更简洁地表达方式而已：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="w">    </span><span class="n">NOT</span><span class="w"> </span><span class="n">GATE1</span><span class="p">(</span><span class="n">wire1</span><span class="w"> </span><span class="n">wire2</span><span class="p">);</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">wire1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">wire2</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>对于<span class="heti-skip"><span class="heti-spacing"> </span>AND2<span class="heti-spacing"> </span></span>与门和<span class="heti-skip"><span class="heti-spacing"> </span>OR2<span class="heti-spacing"> </span></span>或门也有对应的运算符语法糖：
</p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span>
<span class="normal"><a href="#__codelineno-13-2">2</a></span>
<span class="normal"><a href="#__codelineno-13-3">3</a></span>
<span class="normal"><a href="#__codelineno-13-4">4</a></span>
<span class="normal"><a href="#__codelineno-13-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="w">    </span><span class="n">AND2</span><span class="w"> </span><span class="n">GATE1</span><span class="p">(</span><span class="n">wire3</span><span class="p">,</span><span class="w"> </span><span class="n">wire1</span><span class="p">,</span><span class="w"> </span><span class="n">wire2</span><span class="p">);</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">wire3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wire1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">wire2</span><span class="p">;</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">    </span><span class="n">OR2</span><span class="w"> </span><span class="n">GATE2</span><span class="p">(</span><span class="n">wire3</span><span class="p">,</span><span class="w"> </span><span class="n">wire1</span><span class="p">,</span><span class="w"> </span><span class="n">wire2</span><span class="p">);</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">wire3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wire1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">wire2</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>当然<span class="heti-skip"><span class="heti-spacing"> </span>AND_GATE_3_INPUTS<span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span>OR_DATE_4_INPUTS<span class="heti-spacing"> </span></span>模块内部就是用<span class="heti-skip"><span class="heti-spacing"> </span>|<span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span>&amp;<span class="heti-spacing"> </span></span>表示的与门或门组建而成的。</p>
<h2 id="_4">核心思想<a class="headerlink" href="#_4" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h2>
<p>在使用<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>语言描述电路之前脑子里一定要先有电路！！！！！</p>
<p>如果我们是对照着<span class="heti-skip"><span class="heti-spacing"> </span>Lab0-1<span class="heti-spacing"> </span></span>的电路设计图编程硬件描述语言，那么就不会出现第<span><span class="heti-spacing"> </span>3</span>、<span>5<span class="heti-spacing"> </span></span>节中提到的输入输出接错、连接回路、多驱动等各类问题，因为大家对照着电路图已经有明确的连接关系和电流方向了。但如果很多同学只是想当然的做<span class="heti-skip"><span class="heti-spacing"> </span>assign<span class="heti-spacing"> </span></span>连接，而不考虑电气特性，这些问题就会接踵而至。当然漏连、忘连是另一回事情。</p>
<p>很多同学在学习完<span><span class="heti-spacing"> </span>~</span>、|、<span>&amp;<span class="heti-spacing"> </span></span>这样的<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>表达式之后就很容易将<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>当作<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>语言来写。例如提供一个输入输出关系，然后让你设计一套电路并用<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>表示出来，那么有些同学容易这样：</p>
<ol>
<li>将输入输出关系转换为一个卡诺图</li>
<li>化简卡诺图得到逻辑表达式</li>
<li>根据逻辑表达式的与或非关系，像写<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>语言一样直接写<span><span class="heti-spacing"> </span>&amp;</span>、|、<span>~<span class="heti-spacing"> </span></span>语句</li>
</ol>
<p>这样即使你对硬件特性一无所知、并且丢弃了最终的硬件结构，也可以轻松的写出正确的<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>模块。<strong>只要把<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>用<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>的逻辑来写就好了</strong>，这就是很多同学学习<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>走上歧路，最后学不好<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>的原因。将来我们会学习更多<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>的语句，它们更像<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>语言，它们抽象程度更高，更脱离底层的硬件描述，很多偷懒的同学很容易义无反顾地投入这些语句的怀抱。</p>
<p>但是这样你只学习了<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>语句逻辑上的输入输出运算关系，并没有掌握它电气实现上的物理含义。如果是按照<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>的思路编程一来容易把<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>语句的逻辑含义想当然地和<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>语句的逻辑含义画上等号导致逻辑上就理解错误；二来这样编程仅仅能保证语句在逻辑验证上是正确的，但不能保证在电气设计上也是正确的，容易产生各种各样的电气错误，最后导致设计出来明明功能正确的硬件实现出来确实无法运行的。</p>
<p>这种反直觉的情况会很大程度上挫败同学们学习硬件的自信心，让他们认为硬件设计是一件玄学的事情，是无法学会的，最后痛苦地逃离硬件设计的领域，并且留下深刻的阴影。而这一切往往是因为它们没有将<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>语言和电路特性深刻理解起来，而仅仅偷懒的停留在类似<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>语言的逻辑层面。</p>
<p><span>Verilog<span class="heti-spacing"> </span></span>语言作为一门工具语言在过去计算机专业的硬件课程中是不会被专门教学的，迫使同学只能在摸索中自学这门语言，在一个个陷阱和泥潭中淌出一条也许可行的道路，绝大多数同学往往中道崩殂最后和硬件无缘。这是一件很可惜的事情，我们不是没有经验，我们本可以做得更好。这也是我们在实验课中加入<span class="heti-skip"><span class="heti-spacing"> </span>Verilog<span class="heti-spacing"> </span></span>语言教学的初衷，我们希望大家可以切实感受到硬件设计的生趣，一起投身到硬件设计的队伍中来。</p>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: 第二部分" class="md-footer__link md-footer__link--prev" href="../lab0-2/">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                第二部分
              </div>
</div>
</a>
<a aria-label="Next: 第一部分" class="md-footer__link md-footer__link--next" href="../lab1-1/">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                第一部分
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["content.action.edit", "navigation.tracking", "navigation.expand", "navigation.top", "navigation.footer"], "search": "../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../assets/javascripts/bundle.56dfad97.min.js"></script>
<script src="https://cdn.tonycrane.cc/utils/katex.min.js"></script>
<script src="../js/katex.js"></script>
</body>
</html>